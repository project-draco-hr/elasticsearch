{
  super(settings);
  this.threadPool=threadPool;
  this.size=componentSettings.get("size","20%");
  this.expire=componentSettings.getAsTime("expire",null);
  this.cleanInterval=componentSettings.getAsTime("clean_interval",TimeValue.timeValueSeconds(60));
  computeSizeInBytes();
  buildCache();
  logger.debug("using [node] weighted filter cache with size [{}], actual_size [{}], expire [{}], clean_interval [{}]",size,new ByteSizeValue(sizeInBytes),expire,cleanInterval);
  nodeSettingsService.addListener(new ApplySettings());
  threadPool.schedule(cleanInterval,ThreadPool.Names.SAME,new ReaderCleaner());
}
