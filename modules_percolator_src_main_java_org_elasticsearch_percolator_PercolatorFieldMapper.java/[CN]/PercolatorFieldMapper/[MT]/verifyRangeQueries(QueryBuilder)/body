{
  if (queryBuilder instanceof RangeQueryBuilder) {
    RangeQueryBuilder rangeQueryBuilder=(RangeQueryBuilder)queryBuilder;
    if (rangeQueryBuilder.from() instanceof String) {
      String from=(String)rangeQueryBuilder.from();
      String to=(String)rangeQueryBuilder.to();
      if (from.contains("now") || to.contains("now")) {
        throw new IllegalArgumentException("Percolator queries containing time range queries based on the " + "current time are forbidden");
      }
    }
  }
 else   if (queryBuilder instanceof BoolQueryBuilder) {
    BoolQueryBuilder boolQueryBuilder=(BoolQueryBuilder)queryBuilder;
    List<QueryBuilder> clauses=new ArrayList<>();
    clauses.addAll(boolQueryBuilder.filter());
    clauses.addAll(boolQueryBuilder.must());
    clauses.addAll(boolQueryBuilder.mustNot());
    clauses.addAll(boolQueryBuilder.should());
    for (    QueryBuilder clause : clauses) {
      verifyRangeQueries(clause);
    }
  }
 else   if (queryBuilder instanceof ConstantScoreQueryBuilder) {
    verifyRangeQueries(((ConstantScoreQueryBuilder)queryBuilder).innerQuery());
  }
 else   if (queryBuilder instanceof FunctionScoreQueryBuilder) {
    verifyRangeQueries(((FunctionScoreQueryBuilder)queryBuilder).query());
  }
 else   if (queryBuilder instanceof BoostingQueryBuilder) {
    verifyRangeQueries(((BoostingQueryBuilder)queryBuilder).negativeQuery());
    verifyRangeQueries(((BoostingQueryBuilder)queryBuilder).positiveQuery());
  }
}
