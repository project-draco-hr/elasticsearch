{
  JsonToken token=jp.getCurrentToken();
  List<SortField> sortFields=Lists.newArrayListWithCapacity(2);
  if (token == JsonToken.START_ARRAY) {
    while ((token=jp.nextToken()) != JsonToken.END_ARRAY) {
      if (token == JsonToken.START_OBJECT) {
        addCompoundSortField(jp,context,sortFields);
      }
 else       if (token == JsonToken.VALUE_STRING) {
        addSortField(context,sortFields,jp.getText(),false,-1);
      }
    }
  }
 else {
    addCompoundSortField(jp,context,sortFields);
  }
  if (!sortFields.isEmpty()) {
    context.sort(new Sort(sortFields.toArray(new SortField[sortFields.size()])));
  }
}
