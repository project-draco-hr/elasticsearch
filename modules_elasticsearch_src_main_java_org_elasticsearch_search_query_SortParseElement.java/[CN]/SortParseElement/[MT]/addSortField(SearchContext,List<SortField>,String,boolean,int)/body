{
  if ("score".equals(fieldName)) {
    if (reverse) {
      sortFields.add(SORT_SCORE_REVERSE);
    }
 else {
      sortFields.add(SORT_SCORE);
    }
  }
 else   if ("doc".equals(fieldName)) {
    if (reverse) {
      sortFields.add(SORT_DOC_REVERSE);
    }
 else {
      sortFields.add(SORT_DOC);
    }
  }
 else {
    FieldMappers fieldMappers=context.mapperService().smartNameFieldMappers(fieldName);
    if (fieldMappers == null || fieldMappers.mappers().isEmpty()) {
      if (type == -1) {
        throw new SearchParseException("No built in mapping found for [" + fieldName + "], and no explicit type defined");
      }
    }
 else {
      fieldName=fieldMappers.mappers().get(0).indexName();
      if (type == -1) {
        type=fieldMappers.mappers().get(0).sortType();
      }
    }
    sortFields.add(new SortField(fieldName,type,reverse));
  }
}
