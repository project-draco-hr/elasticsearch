{
  int type=read();
  if (type < 0) {
    throw new EOFException();
  }
switch (type) {
case CompactObjectOutputStream.TYPE_FAT_DESCRIPTOR:
    return super.readClassDescriptor();
case CompactObjectOutputStream.TYPE_THIN_DESCRIPTOR:
  String className=readUTF();
Class<?> clazz=loadClass(className);
return ObjectStreamClass.lookup(clazz);
default :
throw new StreamCorruptedException("Unexpected class descriptor type: " + type);
}
}
