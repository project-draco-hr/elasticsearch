{
  interceptTransportActions(GetAction.NAME + "[s]",SearchServiceTransportAction.QUERY_ACTION_NAME,SearchServiceTransportAction.FETCH_ID_ACTION_NAME,SearchServiceTransportAction.FREE_CONTEXT_ACTION_NAME);
  String[] randomIndicesOrAliases=randomIndicesOrAliases();
  for (int i=0; i < randomIndicesOrAliases.length; i++) {
    client().prepareIndex(randomIndicesOrAliases[i],"type","id-" + i).setSource("field","value").get();
  }
  refresh();
  assertAcked(prepareCreate("test-get").addAlias(new Alias("alias-get")));
  client().prepareIndex("test-get","type","1").setSource("field","value").get();
  String indexGet=randomBoolean() ? "test-get" : "alias-get";
  MoreLikeThisRequest moreLikeThisRequest=new MoreLikeThisRequest(indexGet).type("type").id("1").searchIndices(randomIndicesOrAliases());
  internalCluster().clientNodeClient().moreLikeThis(moreLikeThisRequest).actionGet();
  clearInterceptedActions();
  assertSameIndicesOptionalRequests(new String[]{indexGet},GetAction.NAME + "[s]");
  assertSameIndicesOptionalRequests(moreLikeThisRequest.searchIndices(),SearchServiceTransportAction.QUERY_ACTION_NAME);
  assertSameIndicesOptionalRequests(moreLikeThisRequest.searchIndices(),SearchServiceTransportAction.FETCH_ID_ACTION_NAME,SearchServiceTransportAction.FREE_CONTEXT_ACTION_NAME);
}
