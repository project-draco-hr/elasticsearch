{
  StringBuilder sb=new StringBuilder();
  Map<String,String> settings=newHashMap();
  List<String> path=newArrayList();
  XContentParser.Token token=jp.nextToken();
  if (token == null) {
    return settings;
  }
  if (token != XContentParser.Token.START_OBJECT) {
    throw new ElasticsearchParseException("malformed, expected settings to start with 'object', instead was [{}]",token);
  }
  serializeObject(settings,sb,path,jp,null);
  Exception exception=null;
  XContentParser.Token lastToken=null;
  try {
    while (!jp.isClosed() && (lastToken=jp.nextToken()) == null)     ;
  }
 catch (  Exception e) {
    exception=e;
  }
  if (exception != null || lastToken != null) {
    throw new ElasticsearchParseException("malformed, expected end of settings but encountered additional content starting at columnNumber: [{}], lineNumber: [{}]",jp.getTokenLocation().columnNumber,jp.getTokenLocation().lineNumber);
  }
  return settings;
}
