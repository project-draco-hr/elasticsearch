{
  final Settings current=Settings.builder().put(this.settings).put(settings).build();
  final Settings previous=Settings.builder().put(this.settings).put(this.lastSettingsApplied).build();
  List<RuntimeException> exceptions=new ArrayList<>();
  for (  SettingUpdater<?> settingUpdater : settingUpdaters) {
    try {
      if (settingUpdater.hasChanged(current,previous)) {
        settingUpdater.getValue(current,previous);
      }
    }
 catch (    RuntimeException ex) {
      exceptions.add(ex);
      logger.debug("failed to prepareCommit settings for [{}]",ex,settingUpdater);
    }
  }
  ExceptionsHelper.rethrowAndSuppress(exceptions);
  return current;
}
