{
  if (setting.getScope() != scope) {
    throw new IllegalArgumentException("Setting must be a " + scope + " setting but was: "+ setting.getScope());
  }
  if (isValidKey(setting.getKey()) == false && (setting.isGroupSetting() && isValidGroupKey(setting.getKey())) == false) {
    throw new IllegalArgumentException("illegal settings key: [" + setting.getKey() + "]");
  }
  if (setting.hasComplexMatcher()) {
    complexMatchers.putIfAbsent(setting.getKey(),setting);
  }
 else {
    keySettings.putIfAbsent(setting.getKey(),setting);
  }
}
