{
  client().admin().indices().prepareDeleteTemplate("*").get();
  GetIndexTemplatesResponse response=client().admin().indices().prepareGetTemplates().get();
  assertThat(response.getIndexTemplates(),empty());
  client().admin().indices().preparePutTemplate("template_1").setTemplate("te*").setSettings(Settings.builder().put("does_not_exist","test")).get();
  response=client().admin().indices().prepareGetTemplates().get();
  assertThat(response.getIndexTemplates(),hasSize(1));
  assertThat(response.getIndexTemplates().get(0).getSettings().getAsMap().size(),equalTo(1));
  assertThat(response.getIndexTemplates().get(0).getSettings().get("index.does_not_exist"),equalTo("test"));
  createIndex("test");
  GetSettingsResponse getSettingsResponse=client().admin().indices().prepareGetSettings("test").get();
  assertThat(getSettingsResponse.getIndexToSettings().get("test").getAsMap().get("index.does_not_exist"),equalTo("test"));
}
