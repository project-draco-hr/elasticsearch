{
  logger.info("--> put template_1");
  client().admin().indices().preparePutTemplate("template_1").setTemplate("te*").setOrder(0).addMapping("type1",XContentFactory.jsonBuilder().startObject().startObject("type1").startObject("properties").startObject("field1").field("type","string").field("store","yes").endObject().startObject("field2").field("type","string").field("store","yes").field("index","not_analyzed").endObject().endObject().endObject().endObject()).execute().actionGet();
  logger.info("--> put template_2");
  client().admin().indices().preparePutTemplate("template_2").setTemplate("te*").setOrder(0).addMapping("type1",XContentFactory.jsonBuilder().startObject().startObject("type1").startObject("properties").startObject("field1").field("type","string").field("store","yes").endObject().startObject("field2").field("type","string").field("store","yes").field("index","not_analyzed").endObject().endObject().endObject().endObject()).execute().actionGet();
  logger.info("--> put template3");
  client().admin().indices().preparePutTemplate("template3").setTemplate("te*").setOrder(0).addMapping("type1",XContentFactory.jsonBuilder().startObject().startObject("type1").startObject("properties").startObject("field1").field("type","string").field("store","yes").endObject().startObject("field2").field("type","string").field("store","yes").field("index","not_analyzed").endObject().endObject().endObject().endObject()).execute().actionGet();
  logger.info("--> get template template_*");
  GetIndexTemplatesResponse getTemplate1Response=client().admin().indices().prepareGetTemplates("template_*").execute().actionGet();
  assertThat(getTemplate1Response.getIndexTemplates(),hasSize(2));
  List<String> templateNames=Lists.newArrayList();
  templateNames.add(getTemplate1Response.getIndexTemplates().get(0).name());
  templateNames.add(getTemplate1Response.getIndexTemplates().get(1).name());
  assertThat(templateNames,containsInAnyOrder("template_1","template_2"));
  logger.info("--> get all templates");
  getTemplate1Response=client().admin().indices().prepareGetTemplates("template*").execute().actionGet();
  assertThat(getTemplate1Response.getIndexTemplates(),hasSize(3));
  templateNames=Lists.newArrayList();
  templateNames.add(getTemplate1Response.getIndexTemplates().get(0).name());
  templateNames.add(getTemplate1Response.getIndexTemplates().get(1).name());
  templateNames.add(getTemplate1Response.getIndexTemplates().get(2).name());
  assertThat(templateNames,containsInAnyOrder("template_1","template_2","template3"));
  logger.info("--> get templates template_1 and template_2");
  getTemplate1Response=client().admin().indices().prepareGetTemplates("template_1","template_2").execute().actionGet();
  assertThat(getTemplate1Response.getIndexTemplates(),hasSize(2));
  templateNames=Lists.newArrayList();
  templateNames.add(getTemplate1Response.getIndexTemplates().get(0).name());
  templateNames.add(getTemplate1Response.getIndexTemplates().get(1).name());
  assertThat(templateNames,containsInAnyOrder("template_1","template_2"));
}
