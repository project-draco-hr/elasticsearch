{
  if (threadPool == null) {
    throw new UnsupportedOperationException("TestClusterService wasn't initialized with a thread pool");
  }
  if (timeout != null) {
    NotifyTimeout notifyTimeout=new NotifyTimeout(listener,timeout);
    notifyTimeout.future=threadPool.schedule(timeout,ThreadPool.Names.GENERIC,notifyTimeout);
    onGoingTimeouts.add(notifyTimeout);
  }
  listeners.add(listener);
  listener.postAdded();
}
