{
  ShardSearchFailure[] failures=response.getShardFailures();
  if (failures.length != expectedFailures) {
    for (    ShardSearchFailure failure : failures) {
      logger.error("Shard Failure: {}",failure.reason(),failure.toString());
    }
    fail("Unexpected shard failures!");
  }
  assertThat("Not all shards are initialized",response.getSuccessfulShards(),equalTo(response.getTotalShards()));
}
