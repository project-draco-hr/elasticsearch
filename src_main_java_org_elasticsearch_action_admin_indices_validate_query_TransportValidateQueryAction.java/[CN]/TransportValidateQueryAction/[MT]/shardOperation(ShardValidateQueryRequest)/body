{
  IndexQueryParserService queryParserService=indicesService.indexServiceSafe(request.index()).queryParserService();
  boolean valid;
  if (request.querySource().length() == 0) {
    valid=true;
  }
 else {
    try {
      queryParserService.parse(request.querySource().bytes(),request.querySource().offset(),request.querySource().length());
      valid=true;
    }
 catch (    QueryParsingException e) {
      valid=false;
    }
catch (    AssertionError e) {
      valid=false;
    }
  }
  return new ShardValidateQueryResponse(request.index(),request.shardId(),valid);
}
