{
  CustomLogDocMergePolicy mergePolicy;
  if (asyncMerge) {
    mergePolicy=new EnableMergeLogDocMergePolicy(this);
  }
 else {
    mergePolicy=new CustomLogDocMergePolicy(this);
  }
  mergePolicy.setMinMergeDocs(minMergeDocs);
  mergePolicy.setMaxMergeDocs(maxMergeDocs);
  mergePolicy.setMergeFactor(mergeFactor);
  mergePolicy.setCalibrateSizeByDeletes(calibrateSizeByDeletes);
  mergePolicy.setUseCompoundFile(compoundFormat);
  mergePolicy.setNoCFSRatio(noCFSRatio);
  policies.add(mergePolicy);
  return mergePolicy;
}
