{
  super(settings);
  this.client=client;
  ByteSizeValue size=componentSettings.getAsBytesSize("size",new ByteSizeValue(10,ByteSizeUnit.MB));
  TimeValue expireAfterWrite=componentSettings.getAsTime("expire_after_write",null);
  TimeValue expireAfterAccess=componentSettings.getAsTime("expire_after_access",null);
  CacheBuilder<CacheKeyFilter.Key,TermsFilterValue> builder=CacheBuilder.newBuilder().maximumWeight(size.bytes()).weigher(new TermsFilterValueWeigher());
  if (expireAfterAccess != null) {
    builder.expireAfterAccess(expireAfterAccess.millis(),TimeUnit.MILLISECONDS);
  }
  if (expireAfterWrite != null) {
    builder.expireAfterWrite(expireAfterWrite.millis(),TimeUnit.MILLISECONDS);
  }
  this.cache=builder.build();
}
