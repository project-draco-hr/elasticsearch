{
  super(settings);
  this.nodeEnv=nodeEnv;
  listGatewayStartedShards.initGateway(this);
  if (DiscoveryNode.dataNode(settings)) {
    try {
      pre019Upgrade();
      long start=System.currentTimeMillis();
      currentState=loadShardsStateInfo();
      logger.debug("took {} to load started shards state",TimeValue.timeValueMillis(System.currentTimeMillis() - start));
    }
 catch (    Exception e) {
      logger.error("failed to read local state (started shards), exiting...",e);
      throw e;
    }
  }
}
