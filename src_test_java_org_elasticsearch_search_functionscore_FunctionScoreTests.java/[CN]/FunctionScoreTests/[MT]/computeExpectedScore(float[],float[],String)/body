{
  float expectedScore=0.0f;
  if ("multiply".equals(scoreMode)) {
    expectedScore=1.0f;
  }
  if ("max".equals(scoreMode)) {
    expectedScore=Float.MAX_VALUE * -1.0f;
  }
  if ("min".equals(scoreMode)) {
    expectedScore=Float.MAX_VALUE;
  }
  for (int i=0; i < weights.length; i++) {
    float functionScore=weights[i] * scores[i];
    if ("avg".equals(scoreMode)) {
      expectedScore+=functionScore;
    }
 else     if ("max".equals(scoreMode)) {
      expectedScore=Math.max(functionScore,expectedScore);
    }
 else     if ("min".equals(scoreMode)) {
      expectedScore=Math.min(functionScore,expectedScore);
    }
 else     if ("sum".equals(scoreMode)) {
      expectedScore+=functionScore;
    }
 else     if ("multiply".equals(scoreMode)) {
      expectedScore*=functionScore;
    }
  }
  if ("avg".equals(scoreMode)) {
    expectedScore/=(double)weights.length;
  }
  return expectedScore;
}
