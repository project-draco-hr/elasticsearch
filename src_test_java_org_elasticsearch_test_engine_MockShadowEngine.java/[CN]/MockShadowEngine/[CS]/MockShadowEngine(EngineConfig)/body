{
  super(config);
  Settings indexSettings=config.getIndexSettings();
  final long seed=indexSettings.getAsLong(ElasticsearchIntegrationTest.SETTING_INDEX_SEED,0l);
  Random random=new Random(seed);
  final double ratio=indexSettings.getAsDouble(MockInternalEngine.WRAP_READER_RATIO,0.0d);
  Class<? extends AssertingDirectoryReader> wrapper=indexSettings.getAsClass(MockInternalEngine.READER_WRAPPER_TYPE,AssertingDirectoryReader.class);
  boolean wrapReader=random.nextDouble() < ratio;
  logger.trace("Using [{}] for shard [{}] seed: [{}] wrapReader: [{}]",this.getClass().getName(),shardId,seed,wrapReader);
  mockContext=new MockInternalEngine.MockContext(random,wrapReader,wrapper,indexSettings);
}
