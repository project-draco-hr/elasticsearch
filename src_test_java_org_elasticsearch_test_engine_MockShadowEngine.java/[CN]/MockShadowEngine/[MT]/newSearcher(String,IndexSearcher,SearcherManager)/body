{
  IndexReader reader=searcher.getIndexReader();
  IndexReader wrappedReader=reader;
  if (reader instanceof DirectoryReader && mockContext.wrapReader) {
    wrappedReader=wrapReader((DirectoryReader)reader);
  }
  final AssertingIndexSearcher assertingIndexSearcher=new AssertingIndexSearcher(mockContext.random,wrappedReader);
  assertingIndexSearcher.setSimilarity(searcher.getSimilarity());
  return new AssertingSearcher(assertingIndexSearcher,super.newSearcher(source,searcher,manager),shardId,INFLIGHT_ENGINE_SEARCHERS,logger);
}
