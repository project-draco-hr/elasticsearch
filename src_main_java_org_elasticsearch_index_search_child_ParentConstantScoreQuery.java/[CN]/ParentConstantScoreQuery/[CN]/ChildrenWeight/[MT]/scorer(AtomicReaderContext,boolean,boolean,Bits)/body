{
  DocIdSet childrenDocIdSet=childrenFilter.getDocIdSet(context,acceptDocs);
  if (DocIdSets.isEmpty(childrenDocIdSet)) {
    return null;
  }
  BytesValues.WithOrdinals bytesValues=parentChildIndexFieldData.load(context).getBytesValues(parentType);
  if (bytesValues != null) {
    DocIdSetIterator innerIterator=childrenDocIdSet.iterator();
    if (innerIterator != null) {
      Ordinals.Docs ordinals=bytesValues.ordinals();
      int maxOrd=(int)ordinals.getMaxOrd();
      if (seenOrdinalsCache == null || seenOrdinalsCache.length() < maxOrd) {
        seenOrdinalsCache=new FixedBitSet(maxOrd);
        seenMatchedOrdinalsCache=new FixedBitSet(maxOrd);
      }
 else {
        seenOrdinalsCache.clear(0,maxOrd);
        seenMatchedOrdinalsCache.clear(0,maxOrd);
      }
      ChildrenDocIdIterator childrenDocIdIterator=new ChildrenDocIdIterator(innerIterator,parentIds,bytesValues,ordinals,seenOrdinalsCache,seenMatchedOrdinalsCache);
      return ConstantScorer.create(childrenDocIdIterator,this,queryWeight);
    }
  }
  return null;
}
