{
  BytesRef valueBytes=null;
  MapperService.SmartNameFieldMappers smartNameFieldMappers=context.smartFieldMappers(fieldName);
  if (smartNameFieldMappers != null) {
    if (smartNameFieldMappers.hasMapper()) {
      fieldName=smartNameFieldMappers.mapper().names().indexName();
      valueBytes=smartNameFieldMappers.mapper().indexedValueForSearch(value);
    }
  }
  if (valueBytes == null) {
    valueBytes=BytesRefs.toBytesRef(this.value);
  }
  SpanTermQuery query=new SpanTermQuery(new Term(fieldName,valueBytes));
  query.setBoost(boost);
  if (queryName != null) {
    context.addNamedQuery(queryName,query);
  }
  return query;
}
