{
  NamedRegistry<AnalysisProvider<CharFilterFactory>> charFilters=setupCharFilters(plugins);
  NamedRegistry<org.apache.lucene.analysis.hunspell.Dictionary> hunspellDictionaries=setupHunspellDictionaries(plugins);
  hunspellService=new HunspellService(environment.settings(),environment,hunspellDictionaries.registry);
  NamedRegistry<AnalysisProvider<TokenFilterFactory>> tokenFilters=setupTokenFilters(plugins,hunspellService);
  NamedRegistry<AnalysisProvider<TokenizerFactory>> tokenizers=setupTokenizers(plugins);
  NamedRegistry<AnalysisProvider<AnalyzerProvider<?>>> analyzers=setupAnalyzers(plugins);
  analysisRegistry=new AnalysisRegistry(environment,charFilters.registry,tokenFilters.registry,tokenizers.registry,analyzers.registry);
}
