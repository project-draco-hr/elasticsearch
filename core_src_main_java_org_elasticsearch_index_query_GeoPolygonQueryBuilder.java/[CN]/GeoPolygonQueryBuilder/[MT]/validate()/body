{
  QueryValidationException errors=null;
  if (fieldName == null) {
    errors=QueryValidationException.addValidationError(NAME,"field must not be null",errors);
  }
  if (shell.isEmpty()) {
    errors=QueryValidationException.addValidationError(NAME,"no points defined for geo_polygon query",errors);
  }
 else {
    GeoPoint start=shell.get(0);
    if (start.equals(shell.get(shell.size() - 1))) {
      if (shell.size() < 4) {
        errors=QueryValidationException.addValidationError(NAME,"too few points defined for geo_polygon query",errors);
      }
    }
 else {
      if (shell.size() < 3) {
        errors=QueryValidationException.addValidationError(NAME,"too few points defined for geo_polygon query",errors);
      }
    }
  }
  return errors;
}
