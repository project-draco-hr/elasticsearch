{
  super(settings);
  String allowRebalance=settings.get(CLUSTER_ROUTING_ALLOCATION_ALLOW_REBALANCE,"indices_all_active");
  try {
    type=ClusterRebalanceType.parseString(allowRebalance);
  }
 catch (  IllegalStateException e) {
    logger.warn("[{}] has a wrong value {}, defaulting to 'indices_all_active'",CLUSTER_ROUTING_ALLOCATION_ALLOW_REBALANCE,allowRebalance);
    type=ClusterRebalanceType.INDICES_ALL_ACTIVE;
  }
  logger.debug("using [{}] with [{}]",CLUSTER_ROUTING_ALLOCATION_ALLOW_REBALANCE,type.toString().toLowerCase(Locale.ROOT));
  nodeSettingsService.addListener(new ApplySettings());
}
