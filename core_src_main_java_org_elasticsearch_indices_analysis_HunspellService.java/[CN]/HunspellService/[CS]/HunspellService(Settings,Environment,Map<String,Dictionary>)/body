{
  super(settings);
  this.knownDictionaries=knownDictionaries;
  this.hunspellDir=resolveHunspellDirectory(settings,env);
  this.defaultIgnoreCase=settings.getAsBoolean(HUNSPELL_IGNORE_CASE,false);
  dictionaries=CacheBuilder.newBuilder().build(new CacheLoader<String,Dictionary>(){
    @Override public Dictionary load(    String locale) throws Exception {
      Dictionary dictionary=knownDictionaries.get(locale);
      if (dictionary == null) {
        dictionary=loadDictionary(locale,settings,env);
      }
      return dictionary;
    }
  }
);
  if (!settings.getAsBoolean(HUNSPELL_LAZY_LOAD,false)) {
    scanAndLoadDictionaries();
  }
}
