{
  MetaData.Builder mdBuilder=MetaData.builder().put(indexBuilder("testXXX").state(State.OPEN)).put(indexBuilder("testXXY").state(State.OPEN)).put(indexBuilder("testXYY").state(State.CLOSE)).put(indexBuilder("testYYY").state(State.OPEN)).put(indexBuilder("testYYX").state(State.OPEN));
  MetaData md=mdBuilder.build();
  assertThat(newHashSet(md.concreteIndices(IndicesOptions.fromOptions(true,true,false,false),"testX*")),equalTo(new HashSet<String>()));
  assertThat(newHashSet(md.concreteIndices(IndicesOptions.fromOptions(true,true,true,false),"testX*")),equalTo(newHashSet("testXXX","testXXY")));
  assertThat(newHashSet(md.concreteIndices(IndicesOptions.fromOptions(true,true,false,true),"testX*")),equalTo(newHashSet("testXYY")));
  assertThat(newHashSet(md.concreteIndices(IndicesOptions.fromOptions(true,true,true,true),"testX*")),equalTo(newHashSet("testXXX","testXXY","testXYY")));
}
