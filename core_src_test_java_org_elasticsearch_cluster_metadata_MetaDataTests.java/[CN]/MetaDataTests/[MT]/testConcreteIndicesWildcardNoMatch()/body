{
  for (int i=0; i < 10; i++) {
    IndicesOptions indicesOptions=IndicesOptions.fromOptions(randomBoolean(),randomBoolean(),randomBoolean(),randomBoolean());
    MetaData metadata=MetaData.builder().build();
    metadata=MetaData.builder().put(indexBuilder("aaa").state(State.OPEN).putAlias(AliasMetaData.builder("aaa_alias1"))).put(indexBuilder("bbb").state(State.OPEN).putAlias(AliasMetaData.builder("bbb_alias1"))).put(indexBuilder("ccc").state(State.CLOSE).putAlias(AliasMetaData.builder("ccc_alias1"))).build();
    if (indicesOptions.allowNoIndices()) {
      String[] concreteIndices=metadata.concreteIndices(indicesOptions,"Foo*");
      assertThat(concreteIndices,notNullValue());
      assertThat(concreteIndices.length,equalTo(0));
    }
 else {
      try {
        metadata.concreteIndices(indicesOptions,"Foo*");
        fail("expecting exeption when result empty and allowNoIndicec=false");
      }
 catch (      IndexMissingException e) {
      }
    }
  }
}
