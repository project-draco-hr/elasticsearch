{
  float indexBalance=settings.getAsFloat(SETTING_INDEX_BALANCE_FACTOR,0.5f);
  float shardBalance=settings.getAsFloat(SETTING_SHARD_BALANCE_FACTOR,0.45f);
  float primaryBalance=settings.getAsFloat(SETTING_PRIMARY_BALANCE_FACTOR,0.05f);
  float threshold=settings.getAsFloat(SETTING_THRESHOLD,1.0f);
  if (threshold <= 0.0f) {
    throw new ElasticSearchIllegalArgumentException("threshold must be greater than 0.0f but was: " + threshold);
  }
  BalancedShardsAllocator.this.threshold=threshold;
  BalancedShardsAllocator.this.weightFunction=new WeightFunction(indexBalance,shardBalance,primaryBalance);
}
