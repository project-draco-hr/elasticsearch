{
  String fieldName="field1";
  Directory rd=new RAMDirectory();
  IndexWriter w=new IndexWriter(rd,new IndexWriterConfig(Lucene.VERSION,new KeywordAnalyzer()));
  for (int i=0; i < 100; i++) {
    Document doc=new Document();
    int term=i * 10;
    doc.add(new Field(fieldName,"" + term,Field.Store.NO,Field.Index.NOT_ANALYZED));
    doc.add(new Field("all","xxx",Field.Store.NO,Field.Index.NOT_ANALYZED));
    w.addDocument(doc);
    if ((i % 40) == 0) {
      w.commit();
    }
  }
  IndexReader reader=w.getReader();
  w.close();
  TermFilter tf=new TermFilter(new Term(fieldName,"19"));
  FixedBitSet bits=(FixedBitSet)tf.getDocIdSet(reader);
  assertThat(bits,nullValue());
  tf=new TermFilter(new Term(fieldName,"20"));
  bits=(FixedBitSet)tf.getDocIdSet(reader);
  assertThat(bits.cardinality(),equalTo(1));
  tf=new TermFilter(new Term("all","xxx"));
  bits=(FixedBitSet)tf.getDocIdSet(reader);
  assertThat(bits.cardinality(),equalTo(100));
  reader.close();
  rd.close();
}
