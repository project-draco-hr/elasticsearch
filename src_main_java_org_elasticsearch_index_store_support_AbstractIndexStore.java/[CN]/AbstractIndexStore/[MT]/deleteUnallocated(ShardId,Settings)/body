{
  if (locations == null) {
    return;
  }
  if (indexService.hasShard(shardId.id())) {
    throw new ElasticsearchIllegalStateException(shardId + " allocated, can't be deleted");
  }
  try {
    nodeEnv.deleteShardDirectorySafe(shardId,indexSettings);
  }
 catch (  Exception ex) {
    logger.debug("failed to delete shard locations",ex);
  }
}
