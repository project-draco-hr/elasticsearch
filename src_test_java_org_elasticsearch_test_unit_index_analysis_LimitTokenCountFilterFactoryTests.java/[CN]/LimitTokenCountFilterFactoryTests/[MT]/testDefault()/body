{
  Settings settings=ImmutableSettings.settingsBuilder().put("index.analysis.filter.limit_default.type","limit").build();
  AnalysisService analysisService=AnalysisTestsHelper.createAnalysisServiceFromSettings(settings);
{
    TokenFilterFactory tokenFilter=analysisService.tokenFilter("limit_default");
    String source="the quick brown fox";
    String[] expected=new String[]{"the"};
    Tokenizer tokenizer=new WhitespaceTokenizer(Version.LUCENE_CURRENT,new StringReader(source));
    AnalysisTestsHelper.assertSimpleTSOutput(tokenFilter.create(tokenizer),expected);
  }
{
    TokenFilterFactory tokenFilter=analysisService.tokenFilter("limit");
    String source="the quick brown fox";
    String[] expected=new String[]{"the"};
    Tokenizer tokenizer=new WhitespaceTokenizer(Version.LUCENE_CURRENT,new StringReader(source));
    AnalysisTestsHelper.assertSimpleTSOutput(tokenFilter.create(tokenizer),expected);
  }
}
