{
  RecoveryStatus.Index recoveryStatusIndex=recoverIndex();
  RecoveryStatus.Translog recoveryStatusTranslog=recoverTranslog();
  indexShard.snapshot(new Engine.SnapshotHandler(){
    @Override public void snapshot(    SnapshotIndexCommit snapshotIndexCommit,    Translog.Snapshot translogSnapshot) throws EngineException {
      lastIndexVersion=snapshotIndexCommit.getVersion();
      lastTranslogId=translogSnapshot.translogId();
      lastTranslogSize=translogSnapshot.size();
    }
  }
);
  return new RecoveryStatus(recoveryStatusIndex,recoveryStatusTranslog);
}
