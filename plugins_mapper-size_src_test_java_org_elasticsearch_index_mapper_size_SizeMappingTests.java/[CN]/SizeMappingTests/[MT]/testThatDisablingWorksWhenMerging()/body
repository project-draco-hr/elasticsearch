{
  String enabledMapping=XContentFactory.jsonBuilder().startObject().startObject("type").startObject("_size").field("enabled",true).endObject().endObject().endObject().string();
  DocumentMapperParser parser=createIndex("test").mapperService().documentMapperParser();
  parser.putRootTypeParser(SizeFieldMapper.NAME,new SizeFieldMapper.TypeParser());
  DocumentMapper enabledMapper=parser.parse(enabledMapping);
  String disabledMapping=XContentFactory.jsonBuilder().startObject().startObject("type").startObject("_size").field("enabled",false).endObject().endObject().endObject().string();
  DocumentMapper disabledMapper=parser.parse(disabledMapping);
  enabledMapper.merge(disabledMapper.mapping(),false,false);
  assertThat(enabledMapper.rootMapper(SizeFieldMapper.class).enabled(),is(false));
}
