{
  final ArrayList<Class<? extends Plugin>> mocks=new ArrayList<>();
  if (randomBoolean()) {
    if (randomBoolean()) {
      mocks.add(MockTransportService.TestPlugin.class);
    }
    if (randomBoolean()) {
      mocks.add(MockFSIndexStore.TestPlugin.class);
    }
    if (randomBoolean()) {
      mocks.add(NodeMocksPlugin.class);
    }
    if (randomBoolean()) {
      mocks.add(MockEngineFactoryPlugin.class);
    }
    if (randomBoolean()) {
      mocks.add(MockSearchService.TestPlugin.class);
    }
    if (randomBoolean()) {
      mocks.add(AssertingLocalTransport.TestPlugin.class);
    }
  }
  return Collections.unmodifiableList(mocks);
}
