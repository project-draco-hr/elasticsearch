{
  IndexWriter writer=new IndexWriter(new RAMDirectory(),new IndexWriterConfig(Lucene.STANDARD_ANALYZER));
  Document doc=new Document();
  doc.add(new Field("field","aaa bbb ccc ddd",TextField.TYPE_NOT_STORED));
  writer.addDocument(doc);
  IndexReader reader=DirectoryReader.open(writer,true);
  IndexSearcher searcher=new IndexSearcher(reader);
  MultiPhrasePrefixQuery query=new MultiPhrasePrefixQuery();
  query.add(new Term("field","aa"));
  assertThat(Lucene.count(searcher,query),equalTo(1l));
  query=new MultiPhrasePrefixQuery();
  query.add(new Term("field","aaa"));
  query.add(new Term("field","bb"));
  assertThat(Lucene.count(searcher,query),equalTo(1l));
  query=new MultiPhrasePrefixQuery();
  query.setSlop(1);
  query.add(new Term("field","aaa"));
  query.add(new Term("field","cc"));
  assertThat(Lucene.count(searcher,query),equalTo(1l));
  query=new MultiPhrasePrefixQuery();
  query.setSlop(1);
  query.add(new Term("field","xxx"));
  assertThat(Lucene.count(searcher,query),equalTo(0l));
}
