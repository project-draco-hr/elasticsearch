{
  try {
    RestClient.builder().setMaxRetryTimeout(RandomInts.randomIntBetween(random(),Integer.MIN_VALUE,0));
    fail("should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(e.getMessage(),"maxRetryTimeout must be greater than 0");
  }
  try {
    RestClient.builder().setHosts((HttpHost[])null);
    fail("should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(e.getMessage(),"no hosts provided");
  }
  try {
    RestClient.builder().setHosts();
    fail("should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(e.getMessage(),"no hosts provided");
  }
  try {
    RestClient.builder().build();
    fail("should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(e.getMessage(),"no hosts provided");
  }
  try {
    RestClient.builder().setHosts(new HttpHost[]{new HttpHost("localhost",9200),null}).build();
    fail("should have failed");
  }
 catch (  NullPointerException e) {
    assertEquals(e.getMessage(),"host cannot be null");
  }
  try (CloseableHttpClient httpClient=HttpClientBuilder.create().build()){
    RestClient.builder().setHttpClient(httpClient).setDefaultHeaders(Collections.singleton(new BasicHeader("header","value"))).build();
    fail("should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(e.getMessage(),"defaultHeaders need to be set to the HttpClient directly when manually provided");
  }
  RestClient.Builder builder=RestClient.builder();
  int numNodes=RandomInts.randomIntBetween(random(),1,5);
  HttpHost[] hosts=new HttpHost[numNodes];
  for (int i=0; i < numNodes; i++) {
    hosts[i]=new HttpHost("localhost",9200 + i);
  }
  builder.setHosts(hosts);
  if (random().nextBoolean()) {
    builder.setHttpClient(HttpClientBuilder.create().build());
  }
 else {
    if (random().nextBoolean()) {
      int numHeaders=RandomInts.randomIntBetween(random(),1,5);
      Collection<BasicHeader> headers=new ArrayList<>(numHeaders);
      for (int i=0; i < numHeaders; i++) {
        headers.add(new BasicHeader("header" + i,"value"));
      }
      builder.setDefaultHeaders(headers);
    }
  }
  if (random().nextBoolean()) {
    builder.setMaxRetryTimeout(RandomInts.randomIntBetween(random(),1,Integer.MAX_VALUE));
  }
  try (RestClient restClient=builder.build()){
    assertNotNull(restClient);
  }
 }
