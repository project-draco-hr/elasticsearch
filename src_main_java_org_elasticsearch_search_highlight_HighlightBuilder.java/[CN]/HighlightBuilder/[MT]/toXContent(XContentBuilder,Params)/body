{
  builder.startObject("highlight");
  if (tagsSchema != null) {
    builder.field("tags_schema",tagsSchema);
  }
  if (preTags != null) {
    builder.array("pre_tags",preTags);
  }
  if (postTags != null) {
    builder.array("post_tags",postTags);
  }
  if (order != null) {
    builder.field("order",order);
  }
  if (highlightFilter != null) {
    builder.field("highlight_filter",highlightFilter);
  }
  if (fragmentSize != null) {
    builder.field("fragment_size",fragmentSize);
  }
  if (numOfFragments != null) {
    builder.field("number_of_fragments",numOfFragments);
  }
  if (encoder != null) {
    builder.field("encoder",encoder);
  }
  if (requireFieldMatch != null) {
    builder.field("require_field_match",requireFieldMatch);
  }
  if (boundaryMaxScan != null) {
    builder.field("boundary_max_scan",boundaryMaxScan);
  }
  if (boundaryChars != null) {
    builder.field("boundary_chars",boundaryChars);
  }
  if (highlighterType != null) {
    builder.field("type",highlighterType);
  }
  if (fragmenter != null) {
    builder.field("fragmenter",fragmenter);
  }
  if (highlightQuery != null) {
    builder.field("highlight_query",highlightQuery);
  }
  if (noMatchSize != null) {
    builder.field("no_match_size",noMatchSize);
  }
  if (phraseLimit != null) {
    builder.field("phrase_limit",phraseLimit);
  }
  if (options != null && options.size() > 0) {
    builder.field("options",options);
  }
  if (forceSource != null) {
    builder.field("force_source",forceSource);
  }
  if (fields != null) {
    if (useExplicitFieldOrder) {
      builder.startArray("fields");
    }
 else {
      builder.startObject("fields");
    }
    for (    Field field : fields) {
      if (useExplicitFieldOrder) {
        builder.startObject();
      }
      builder.startObject(field.name());
      if (field.preTags != null) {
        builder.field("pre_tags",field.preTags);
      }
      if (field.postTags != null) {
        builder.field("post_tags",field.postTags);
      }
      if (field.fragmentSize != -1) {
        builder.field("fragment_size",field.fragmentSize);
      }
      if (field.numOfFragments != -1) {
        builder.field("number_of_fragments",field.numOfFragments);
      }
      if (field.fragmentOffset != -1) {
        builder.field("fragment_offset",field.fragmentOffset);
      }
      if (field.highlightFilter != null) {
        builder.field("highlight_filter",field.highlightFilter);
      }
      if (field.order != null) {
        builder.field("order",field.order);
      }
      if (field.requireFieldMatch != null) {
        builder.field("require_field_match",field.requireFieldMatch);
      }
      if (field.boundaryMaxScan != -1) {
        builder.field("boundary_max_scan",field.boundaryMaxScan);
      }
      if (field.boundaryChars != null) {
        builder.field("boundary_chars",field.boundaryChars);
      }
      if (field.highlighterType != null) {
        builder.field("type",field.highlighterType);
      }
      if (field.fragmenter != null) {
        builder.field("fragmenter",field.fragmenter);
      }
      if (field.highlightQuery != null) {
        builder.field("highlight_query",field.highlightQuery);
      }
      if (field.noMatchSize != null) {
        builder.field("no_match_size",field.noMatchSize);
      }
      if (field.matchedFields != null) {
        builder.field("matched_fields",field.matchedFields);
      }
      if (field.phraseLimit != null) {
        builder.field("phrase_limit",field.phraseLimit);
      }
      if (field.options != null && field.options.size() > 0) {
        builder.field("options",field.options);
      }
      if (field.forceSource != null) {
        builder.field("force_source",field.forceSource);
      }
      builder.endObject();
      if (useExplicitFieldOrder) {
        builder.endObject();
      }
    }
    if (useExplicitFieldOrder) {
      builder.endArray();
    }
 else {
      builder.endObject();
    }
  }
  builder.endObject();
  return builder;
}
