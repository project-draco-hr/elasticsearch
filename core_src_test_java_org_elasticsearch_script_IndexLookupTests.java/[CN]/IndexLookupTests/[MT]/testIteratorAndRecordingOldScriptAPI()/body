{
  initTestData();
  String script=createPositionsArrayScriptIterateTwiceOldScriptAPI("b",includeAllFlag,"position");
  checkArrayValsInEachDocOldScriptAPI(script,expectedPositionsArray,3);
  script=createPositionsArrayScriptIterateTwiceOldScriptAPI("b",includeAllFlag,"startOffset");
  checkArrayValsInEachDocOldScriptAPI(script,expectedStartOffsetsArray,3);
  script=createPositionsArrayScriptIterateTwiceOldScriptAPI("b",includeAllFlag,"endOffset");
  checkArrayValsInEachDocOldScriptAPI(script,expectedEndOffsetsArray,3);
  script=createPositionsArrayScriptIterateTwiceOldScriptAPI("b",includeAllFlag,"payloadAsInt(-1)");
  checkArrayValsInEachDocOldScriptAPI(script,expectedPayloadsArray,3);
  script=createPositionsArrayScriptIterateTwiceOldScriptAPI("b",includeAllWithoutRecordFlag,"position");
  checkExceptionsOldScriptAPI(script);
  script=createPositionsArrayScriptIterateTwiceOldScriptAPI("b",includeAllWithoutRecordFlag,"startOffset");
  checkExceptionsOldScriptAPI(script);
  script=createPositionsArrayScriptIterateTwiceOldScriptAPI("b",includeAllWithoutRecordFlag,"endOffset");
  checkExceptionsOldScriptAPI(script);
  script=createPositionsArrayScriptIterateTwiceOldScriptAPI("b",includeAllWithoutRecordFlag,"payloadAsInt(-1)");
  checkExceptionsOldScriptAPI(script);
  script=createPositionsArrayScriptGetInfoObjectTwiceOldScriptAPI("b",includeAllWithoutRecordFlag,"position");
  checkExceptionsOldScriptAPI(script);
  script=createPositionsArrayScriptGetInfoObjectTwiceOldScriptAPI("b",includeAllWithoutRecordFlag,"startOffset");
  checkExceptionsOldScriptAPI(script);
  script=createPositionsArrayScriptGetInfoObjectTwiceOldScriptAPI("b",includeAllWithoutRecordFlag,"endOffset");
  checkExceptionsOldScriptAPI(script);
  script=createPositionsArrayScriptGetInfoObjectTwiceOldScriptAPI("b",includeAllWithoutRecordFlag,"payloadAsInt(-1)");
  checkExceptionsOldScriptAPI(script);
}
