{
  super(name.getName(),repositorySettings,indexShardRepository);
  URL url;
  String path=repositorySettings.settings().get("url",componentSettings.get("url"));
  if (path == null) {
    throw new RepositoryException(name.name(),"missing url");
  }
 else {
    url=new URL(path);
  }
  int concurrentStreams=repositorySettings.settings().getAsInt("concurrent_streams",componentSettings.getAsInt("concurrent_streams",5));
  ExecutorService concurrentStreamPool=EsExecutors.newScaling(1,concurrentStreams,60,TimeUnit.SECONDS,EsExecutors.daemonThreadFactory(settings,"[fs_stream]"));
  blobStore=new URLBlobStore(componentSettings,concurrentStreamPool,url);
  basePath=BlobPath.cleanPath();
}
