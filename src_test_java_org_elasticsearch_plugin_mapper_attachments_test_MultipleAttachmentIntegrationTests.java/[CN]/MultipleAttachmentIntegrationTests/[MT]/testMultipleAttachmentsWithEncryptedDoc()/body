{
  createIndex(ImmutableSettings.builder().build());
  String mapping=copyToStringFromClasspath("/org/elasticsearch/index/mapper/multipledocs/test-mapping.json");
  byte[] html=copyToBytesFromClasspath("/org/elasticsearch/index/mapper/xcontent/htmlWithValidDateMeta.html");
  byte[] pdf=copyToBytesFromClasspath("/org/elasticsearch/index/mapper/xcontent/encrypted.pdf");
  node.client().admin().indices().putMapping(putMappingRequest("test").type("person").source(mapping)).actionGet();
  node.client().index(indexRequest("test").type("person").source(jsonBuilder().startObject().field("file1",html).field("file2",pdf).field("hello","world").endObject())).actionGet();
  node.client().admin().indices().refresh(refreshRequest()).actionGet();
  CountResponse countResponse=node.client().count(countRequest("test").query(fieldQuery("file1","World"))).actionGet();
  assertThat(countResponse.getCount(),equalTo(1l));
  countResponse=node.client().count(countRequest("test").query(fieldQuery("hello","World"))).actionGet();
  assertThat(countResponse.getCount(),equalTo(1l));
}
