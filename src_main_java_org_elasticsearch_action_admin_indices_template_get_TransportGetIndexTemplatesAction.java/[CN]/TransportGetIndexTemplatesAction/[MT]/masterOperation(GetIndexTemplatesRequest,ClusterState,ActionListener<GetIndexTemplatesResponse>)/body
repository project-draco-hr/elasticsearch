{
  List<IndexTemplateMetaData> results=Lists.newArrayList();
  if (request.names().length == 0) {
    results.addAll(state.metaData().templates().values());
  }
  for (  String name : request.names()) {
    if (Regex.isSimpleMatchPattern(name)) {
      for (      Map.Entry<String,IndexTemplateMetaData> entry : state.metaData().templates().entrySet()) {
        if (Regex.simpleMatch(name,entry.getKey())) {
          results.add(entry.getValue());
        }
      }
    }
 else     if (state.metaData().templates().containsKey(name)) {
      results.add(state.metaData().templates().get(name));
    }
  }
  listener.onResponse(new GetIndexTemplatesResponse(results));
}
