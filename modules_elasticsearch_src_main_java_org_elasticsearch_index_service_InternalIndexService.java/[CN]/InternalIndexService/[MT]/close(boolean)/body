{
  try {
    for (    int shardId : shardIds()) {
      try {
        deleteShard(shardId,delete,delete);
      }
 catch (      Exception e) {
        logger.warn("failed to close shard, delete [{}]",e,delete);
      }
    }
  }
  finally {
    indicesLifecycle.removeListener(cleanCacheOnIndicesLifecycleListener);
  }
}
