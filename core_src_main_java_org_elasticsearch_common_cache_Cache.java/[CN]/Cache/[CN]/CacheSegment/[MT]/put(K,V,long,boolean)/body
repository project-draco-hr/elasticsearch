{
  Entry<K,V> entry=new Entry<>(key,value,now);
  Entry<K,V> existing=null;
  try (ReleasableLock ignored=writeLock.acquire()){
    if (!onlyIfAbsent || (onlyIfAbsent && map.get(key) == null)) {
      existing=map.put(key,entry);
    }
  }
   return Tuple.tuple(entry,existing);
}
