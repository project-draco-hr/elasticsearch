{
  XBooleanFilter orFilter=new XBooleanFilter();
  XBooleanFilter stockFilter=new XBooleanFilter();
  stockFilter.add(new FilterClause(getTermsFilter("inStock","Y"),BooleanClause.Occur.MUST));
  stockFilter.add(new FilterClause(getTermsFilter("barCode","12345678"),BooleanClause.Occur.MUST));
  orFilter.add(new FilterClause(stockFilter,BooleanClause.Occur.SHOULD));
  XBooleanFilter productPropertyFilter=new XBooleanFilter();
  productPropertyFilter.add(new FilterClause(getTermsFilter("isHeavy","N"),BooleanClause.Occur.MUST));
  productPropertyFilter.add(new FilterClause(getTermsFilter("isDamaged","Y"),BooleanClause.Occur.MUST));
  orFilter.add(new FilterClause(productPropertyFilter,BooleanClause.Occur.SHOULD));
  XBooleanFilter composedFilter=new XBooleanFilter();
  composedFilter.add(new FilterClause(orFilter,BooleanClause.Occur.MUST));
  assertThat("BooleanFilter(+BooleanFilter(BooleanFilter(+inStock:Y +barCode:12345678) BooleanFilter(+isHeavy:N +isDamaged:Y)))",equalTo(composedFilter.toString()));
}
