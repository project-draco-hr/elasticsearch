{
  if (bufferPosition >= BUFFER_SIZE)   flush();
  buffer[bufferPosition++]=b;
}
