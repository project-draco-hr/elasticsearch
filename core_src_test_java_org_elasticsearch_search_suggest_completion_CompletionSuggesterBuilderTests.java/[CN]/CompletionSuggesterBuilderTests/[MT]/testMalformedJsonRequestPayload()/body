{
  final String field=RandomStrings.randomAsciiOfLength(getRandom(),10).toLowerCase(Locale.ROOT);
  final String payload="{\n" + "  \"bad-payload\" : { \n" + "    \"prefix\" : \"sug\",\n"+ "    \"completion\" : { \n"+ "      \"field\" : \"" + field + "\",\n "+ "      \"payload\" : [ {\"payload\":\"field\"} ]\n"+ "    }\n"+ "  }\n"+ "}\n";
  try {
    final SuggestBuilder suggestBuilder=SuggestBuilder.fromXContent(newParseContext(payload),suggesters);
    fail("Should not have been able to create SuggestBuilder from malformed JSON: " + suggestBuilder);
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),containsString("parsing failed"));
  }
}
