{
  client().admin().indices().prepareCreate("my-index").addMapping("my-type1",jsonBuilder().startObject().startObject("my-type1").startObject("properties").startObject("field1").startObject("properties").startObject("field2").field("type","string").endObject().endObject().endObject().endObject().endObject().endObject()).setSettings(ImmutableSettings.settingsBuilder().put("index.refresh_interval",-1)).get();
  client().prepareIndex("my-index","my-type1","1").setSource(jsonBuilder().startObject().startObject("field1").field("field2","value1").endObject().endObject()).get();
  try {
    client().prepareGet("my-index","my-type1","1").setFields("field1").get();
    fail();
  }
 catch (  ElasticsearchIllegalArgumentException e) {
  }
  client().admin().indices().prepareFlush("my-index").get();
  try {
    client().prepareGet("my-index","my-type1","1").setFields("field1").get();
    fail();
  }
 catch (  ElasticsearchIllegalArgumentException e) {
  }
}
