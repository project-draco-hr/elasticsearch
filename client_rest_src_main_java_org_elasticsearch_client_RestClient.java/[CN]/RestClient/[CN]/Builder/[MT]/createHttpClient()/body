{
  RequestConfig.Builder requestConfigBuilder=RequestConfig.custom().setConnectTimeout(DEFAULT_CONNECT_TIMEOUT_MILLIS).setSocketTimeout(DEFAULT_SOCKET_TIMEOUT_MILLIS).setConnectionRequestTimeout(DEFAULT_CONNECTION_REQUEST_TIMEOUT_MILLIS);
  if (httpClientConfigCallback != null) {
    httpClientConfigCallback.customizeDefaultRequestConfig(requestConfigBuilder);
  }
  RequestConfig requestConfig=requestConfigBuilder.build();
  PoolingHttpClientConnectionManager connectionManager=new PoolingHttpClientConnectionManager();
  connectionManager.setDefaultMaxPerRoute(10);
  connectionManager.setMaxTotal(30);
  HttpClientBuilder httpClientBuilder=HttpClientBuilder.create().setConnectionManager(connectionManager).setDefaultRequestConfig(requestConfig);
  if (httpClientConfigCallback != null) {
    httpClientConfigCallback.customizeHttpClient(httpClientBuilder);
  }
  return httpClientBuilder.build();
}
