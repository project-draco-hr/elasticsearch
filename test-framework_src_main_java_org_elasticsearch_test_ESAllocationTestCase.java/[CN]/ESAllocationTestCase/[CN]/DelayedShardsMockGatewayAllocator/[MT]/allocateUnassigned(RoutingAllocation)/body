{
  final RoutingNodes.UnassignedShards.UnassignedIterator unassignedIterator=allocation.routingNodes().unassigned().iterator();
  boolean changed=false;
  while (unassignedIterator.hasNext()) {
    ShardRouting shard=unassignedIterator.next();
    if (shard.primary() || shard.allocatedPostIndexCreate() == false) {
      continue;
    }
    changed|=replicaShardAllocator.ignoreUnassignedIfDelayed(timeSource == null ? System.nanoTime() : timeSource.apply(shard),allocation,unassignedIterator,shard);
  }
  return changed;
}
