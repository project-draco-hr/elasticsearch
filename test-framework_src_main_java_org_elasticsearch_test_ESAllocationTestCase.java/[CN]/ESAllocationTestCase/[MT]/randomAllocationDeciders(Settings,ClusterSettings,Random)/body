{
  final List<Class<? extends AllocationDecider>> defaultAllocationDeciders=ClusterModule.DEFAULT_ALLOCATION_DECIDERS;
  final List<AllocationDecider> list=new ArrayList<>();
  for (  Class<? extends AllocationDecider> deciderClass : ClusterModule.DEFAULT_ALLOCATION_DECIDERS) {
    try {
      try {
        Constructor<? extends AllocationDecider> constructor=deciderClass.getConstructor(Settings.class,ClusterSettings.class);
        list.add(constructor.newInstance(settings,clusterSettings));
      }
 catch (      NoSuchMethodException e) {
        Constructor<? extends AllocationDecider> constructor=null;
        constructor=deciderClass.getConstructor(Settings.class);
        list.add(constructor.newInstance(settings));
      }
    }
 catch (    Exception ex) {
      throw new RuntimeException(ex);
    }
  }
  assertThat(list.size(),equalTo(defaultAllocationDeciders.size()));
  for (  AllocationDecider d : list) {
    assertThat(defaultAllocationDeciders.contains(d.getClass()),is(true));
  }
  Collections.shuffle(list,random);
  return new AllocationDeciders(settings,list.toArray(new AllocationDecider[0]));
}
