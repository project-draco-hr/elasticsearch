{
  if (TransportActions.isShardNotAvailableException(t)) {
    return;
  }
  if (!(t instanceof BroadcastShardOperationFailedException)) {
    t=new BroadcastShardOperationFailedException(shardIt.shardId(),t);
  }
  Object response=shardsResponses.get(shardIndex);
  if (response == null) {
    shardsResponses.set(shardIndex,t);
  }
  if (!(response instanceof Throwable)) {
    return;
  }
  if (TransportActions.isReadOverrideException(t)) {
    shardsResponses.set(shardIndex,t);
  }
}
