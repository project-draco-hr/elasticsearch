{
  boolean fail=false;
  extraInfo=extraInfo == null || extraInfo.isEmpty() ? "" : extraInfo + ": ";
  extraInfo+="expected a " + exceptionClass + " exception to be thrown";
  try {
    future.actionGet();
    fail=true;
  }
 catch (  ElasticSearchException esException) {
    assertThat(extraInfo,esException.unwrapCause(),instanceOf(exceptionClass));
  }
catch (  Throwable e) {
    assertThat(extraInfo,e,instanceOf(exceptionClass));
  }
  if (fail) {
    throw new AssertionError(extraInfo);
  }
}
