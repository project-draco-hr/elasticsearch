{
  Builder builder=new Builder(in.readUTF());
  builder.order(in.readInt());
  builder.template(in.readUTF());
  builder.settings(ImmutableSettings.readSettingsFromStream(in));
  int mappingsSize=in.readVInt();
  for (int i=0; i < mappingsSize; i++) {
    builder.putMapping(in.readUTF(),CompressedString.readCompressedString(in));
  }
  int customSize=in.readVInt();
  for (int i=0; i < customSize; i++) {
    String type=in.readUTF();
    IndexMetaData.Custom customIndexMetaData=IndexMetaData.lookupFactorySafe(type).readFrom(in);
    builder.putCustom(type,customIndexMetaData);
  }
  return builder.build();
}
