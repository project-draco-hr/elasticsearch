{
  DocumentMapperParser mapperParser=createIndex("test").mapperService().documentMapperParser();
  DocumentMapper docMapper=doc("test",rootObject("person").add(object("name").add(stringField("first").store(true).index(false)))).build(mapperParser);
  BytesReference json=new BytesArray("".getBytes(Charsets.UTF_8));
  try {
    docMapper.parse("person","1",json).rootDoc();
    fail("this point is never reached");
  }
 catch (  MapperParsingException e) {
    assertThat(e.getMessage(),equalTo("failed to parse, document is empty"));
  }
}
