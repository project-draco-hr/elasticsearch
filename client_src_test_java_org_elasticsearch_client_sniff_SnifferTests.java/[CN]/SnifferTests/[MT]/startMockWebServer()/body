{
  this.sniffRequestTimeout=RandomInts.randomIntBetween(random(),1000,10000);
  this.scheme=RandomPicks.randomFrom(random(),SniffingConnectionPool.Scheme.values());
  if (rarely()) {
    this.sniffResponse=SniffResponse.buildFailure();
  }
 else {
    this.sniffResponse=buildSniffResponse(scheme);
  }
  this.server=buildMockWebServer(sniffResponse,sniffRequestTimeout);
  this.server.start();
}
