{
  FakeFieldMapper f=new FakeFieldMapper("foo","foo");
  FakeFieldMapper f2=new FakeFieldMapper("bar","bar");
  FieldTypeLookup lookup=new FieldTypeLookup();
  lookup=lookup.copyAndAddAll("type1",newList(f,f2),randomBoolean());
  try {
    FakeFieldMapper f3=new FakeFieldMapper("foo","bar");
    lookup.copyAndAddAll("type2",newList(f3),randomBoolean());
  }
 catch (  IllegalStateException e) {
    assertTrue(e.getMessage().contains("insane mappings"));
  }
  try {
    FakeFieldMapper f3=new FakeFieldMapper("bar","foo");
    lookup.copyAndAddAll("type2",newList(f3),randomBoolean());
  }
 catch (  IllegalStateException e) {
    assertTrue(e.getMessage().contains("insane mappings"));
  }
}
