{
  FieldTypeLookup lookup=new FieldTypeLookup();
  FakeFieldMapper f=new FakeFieldMapper("foo","bar");
  FieldTypeLookup lookup2=lookup.copyAndAddAll(newList(f));
  assertNull(lookup.get("foo"));
  assertNull(lookup.get("bar"));
  assertNull(lookup.getByIndexName("foo"));
  assertNull(lookup.getByIndexName("bar"));
  assertEquals(f.fieldType(),lookup2.get("foo"));
  assertNull(lookup.get("bar"));
  assertEquals(f.fieldType(),lookup2.getByIndexName("bar"));
  assertNull(lookup.getByIndexName("foo"));
  assertEquals(1,Iterators.size(lookup2.iterator()));
}
