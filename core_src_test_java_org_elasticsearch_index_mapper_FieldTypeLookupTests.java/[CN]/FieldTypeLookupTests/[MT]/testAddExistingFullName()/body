{
  FakeFieldMapper f=new FakeFieldMapper("foo","foo");
  FakeFieldMapper f2=new FakeFieldMapper("foo","bar");
  FieldTypeLookup lookup=new FieldTypeLookup();
  try {
    lookup.copyAndAddAll("type2",newList(f2),randomBoolean());
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),containsString("mapper [foo] has different [index_name]"));
  }
}
