{
  FieldMapper f1=new FakeFieldMapper("foo","bar");
  FieldTypeLookup lookup=new FieldTypeLookup();
  lookup=lookup.copyAndAddAll("type",newList(f1));
  MappedFieldType ft2=FakeFieldMapper.makeOtherFieldType("foo","foo");
  FieldMapper f2=new FakeFieldMapper("foo",ft2);
  try {
    lookup.checkCompatibility(newList(f2),false);
    fail("expected type mismatch");
  }
 catch (  IllegalArgumentException e) {
    assertTrue(e.getMessage().contains("cannot be changed from type [faketype] to [otherfaketype]"));
  }
  try {
    lookup.checkCompatibility(newList(f2),true);
    fail("expected type mismatch");
  }
 catch (  IllegalArgumentException e) {
    assertTrue(e.getMessage().contains("cannot be changed from type [faketype] to [otherfaketype]"));
  }
}
