{
  FileSystemUtils.moveFilesWithoutOverwriting(new File(src,"v1"),dst,".new");
  assertFileContent(dst,"file1.txt","version1\n");
  assertFileContent(dst,"dir/file2.txt","version1\n");
  FileSystemUtils.moveFilesWithoutOverwriting(new File(src,"v2"),dst,".new");
  assertFileContent(dst,"file1.txt","version1\n");
  assertFileContent(dst,"dir/file2.txt","version1\n");
  assertFileContent(dst,"file1.txt.new","version2\n");
  assertFileContent(dst,"dir/file2.txt.new","version2\n");
  assertFileContent(dst,"file3.txt","version1\n");
  assertFileContent(dst,"dir/subdir/file4.txt","version1\n");
  FileSystemUtils.moveFilesWithoutOverwriting(new File(src,"v3"),dst,".new");
  assertFileContent(dst,"file1.txt","version1\n");
  assertFileContent(dst,"dir/file2.txt","version1\n");
  assertFileContent(dst,"file1.txt.new","version3\n");
  assertFileContent(dst,"dir/file2.txt.new","version3\n");
  assertFileContent(dst,"file3.txt","version1\n");
  assertFileContent(dst,"dir/subdir/file4.txt","version1\n");
  assertFileContent(dst,"file3.txt.new","version2\n");
  assertFileContent(dst,"dir/subdir/file4.txt.new","version2\n");
  assertFileContent(dst,"dir/subdir/file5.txt","version1\n");
}
