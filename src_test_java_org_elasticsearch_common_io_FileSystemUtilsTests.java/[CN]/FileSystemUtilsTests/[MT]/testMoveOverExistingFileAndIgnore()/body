{
  Path dest=globalTempDirPath();
  FileSystemUtils.moveFilesWithoutOverwriting(src.resolve("v1"),dest,null);
  assertFileContent(dest,"file1.txt","version1");
  assertFileContent(dest,"dir/file2.txt","version1");
  FileSystemUtils.moveFilesWithoutOverwriting(src.resolve("v2"),dest,null);
  assertFileContent(dest,"file1.txt","version1");
  assertFileContent(dest,"dir/file2.txt","version1");
  assertFileContent(dest,"file1.txt.new",null);
  assertFileContent(dest,"dir/file2.txt.new",null);
  assertFileContent(dest,"file3.txt","version1");
  assertFileContent(dest,"dir/subdir/file4.txt","version1");
  FileSystemUtils.moveFilesWithoutOverwriting(src.resolve("v3"),dest,null);
  assertFileContent(dest,"file1.txt","version1");
  assertFileContent(dest,"dir/file2.txt","version1");
  assertFileContent(dest,"file1.txt.new",null);
  assertFileContent(dest,"dir/file2.txt.new",null);
  assertFileContent(dest,"file3.txt","version1");
  assertFileContent(dest,"dir/subdir/file4.txt","version1");
  assertFileContent(dest,"file3.txt.new",null);
  assertFileContent(dest,"dir/subdir/file4.txt.new",null);
  assertFileContent(dest,"dir/subdir/file5.txt","version1");
}
