{
  Mapper mapper=mappers.get(lastFieldName);
  if (mapper != null && mapper instanceof ArrayValueMapperParser) {
    mapper.parse(context);
  }
 else {
    XContentParser parser=context.parser();
    XContentParser.Token token;
    while ((token=parser.nextToken()) != XContentParser.Token.END_ARRAY) {
      if (token == XContentParser.Token.START_OBJECT) {
        serializeObject(context,lastFieldName);
      }
 else       if (token == XContentParser.Token.START_ARRAY) {
        serializeArray(context,lastFieldName);
      }
 else       if (token == XContentParser.Token.FIELD_NAME) {
        lastFieldName=parser.currentName();
      }
 else       if (token == XContentParser.Token.VALUE_NULL) {
        serializeNullValue(context,lastFieldName);
      }
 else {
        serializeValue(context,lastFieldName,token);
      }
    }
  }
}
