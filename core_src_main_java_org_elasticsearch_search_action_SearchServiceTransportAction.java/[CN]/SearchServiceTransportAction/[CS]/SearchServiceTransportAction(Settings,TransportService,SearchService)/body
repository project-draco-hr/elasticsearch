{
  super(settings);
  this.transportService=transportService;
  this.searchService=searchService;
  transportService.registerRequestHandler(FREE_CONTEXT_SCROLL_ACTION_NAME,ScrollFreeContextRequest.class,ThreadPool.Names.SAME,new FreeContextTransportHandler<>());
  transportService.registerRequestHandler(FREE_CONTEXT_ACTION_NAME,SearchFreeContextRequest.class,ThreadPool.Names.SAME,new FreeContextTransportHandler<SearchFreeContextRequest>());
  transportService.registerRequestHandler(CLEAR_SCROLL_CONTEXTS_ACTION_NAME,ClearScrollContextsRequest.class,ThreadPool.Names.SAME,new ClearScrollContextsTransportHandler());
  transportService.registerRequestHandler(DFS_ACTION_NAME,ShardSearchTransportRequest.class,ThreadPool.Names.SEARCH,new SearchDfsTransportHandler());
  transportService.registerRequestHandler(QUERY_ACTION_NAME,ShardSearchTransportRequest.class,ThreadPool.Names.SEARCH,new SearchQueryTransportHandler());
  transportService.registerRequestHandler(QUERY_ID_ACTION_NAME,QuerySearchRequest.class,ThreadPool.Names.SEARCH,new SearchQueryByIdTransportHandler());
  transportService.registerRequestHandler(QUERY_SCROLL_ACTION_NAME,InternalScrollSearchRequest.class,ThreadPool.Names.SEARCH,new SearchQueryScrollTransportHandler());
  transportService.registerRequestHandler(QUERY_FETCH_ACTION_NAME,ShardSearchTransportRequest.class,ThreadPool.Names.SEARCH,new SearchQueryFetchTransportHandler());
  transportService.registerRequestHandler(QUERY_QUERY_FETCH_ACTION_NAME,QuerySearchRequest.class,ThreadPool.Names.SEARCH,new SearchQueryQueryFetchTransportHandler());
  transportService.registerRequestHandler(QUERY_FETCH_SCROLL_ACTION_NAME,InternalScrollSearchRequest.class,ThreadPool.Names.SEARCH,new SearchQueryFetchScrollTransportHandler());
  transportService.registerRequestHandler(FETCH_ID_SCROLL_ACTION_NAME,ShardFetchRequest.class,ThreadPool.Names.SEARCH,new FetchByIdTransportHandler<>());
  transportService.registerRequestHandler(FETCH_ID_ACTION_NAME,ShardFetchSearchRequest.class,ThreadPool.Names.SEARCH,new FetchByIdTransportHandler<ShardFetchSearchRequest>());
  transportService.registerRequestHandler(SCAN_ACTION_NAME,ShardSearchTransportRequest.class,ThreadPool.Names.SEARCH,new SearchScanTransportHandler());
  transportService.registerRequestHandler(SCAN_SCROLL_ACTION_NAME,InternalScrollSearchRequest.class,ThreadPool.Names.SEARCH,new SearchScanScrollTransportHandler());
}
