{
  String index="foo";
  String type="mytype";
  XContentBuilder builder=jsonBuilder().startObject().startObject("_ttl").field("enabled",true).endObject().endObject();
  assertAcked(client().admin().indices().prepareCreate(index).addMapping(type,builder));
  assertTTLMappingEnabled(index,type);
  XContentBuilder updateMappingBuilder=jsonBuilder().startObject().startObject("properties").startObject("otherField").field("type","string").endObject().endObject();
  PutMappingResponse putMappingResponse=client().admin().indices().preparePutMapping(index).setType(type).setSource(updateMappingBuilder).get();
  assertAcked(putMappingResponse);
  assertTTLMappingEnabled(index,type);
}
