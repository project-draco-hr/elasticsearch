{
  builder.startObject(Fields.PROCESS);
  builder.field(Fields.TIMESTAMP,timestamp);
  builder.field(Fields.OPEN_FILE_DESCRIPTORS,openFileDescriptors);
  if (cpu != null) {
    builder.startObject(Fields.CPU);
    builder.field(Fields.PERCENT,cpu.percent());
    builder.byteSizeField(Fields.SYS,Fields.SYS_IN_MILLIS,cpu.sys);
    builder.byteSizeField(Fields.USER,Fields.USER_IN_MILLIS,cpu.user);
    builder.byteSizeField(Fields.TOTAL,Fields.TOTAL_IN_MILLIS,cpu.total);
    builder.endObject();
  }
  if (mem != null) {
    builder.startObject(Fields.MEM);
    builder.byteSizeField(Fields.RESIDENT,Fields.RESIDENT_IN_BYTES,mem.resident);
    builder.byteSizeField(Fields.SHARE,Fields.SHARE_IN_BYTES,mem.share);
    builder.byteSizeField(Fields.TOTAL_VIRTUAL,Fields.TOTAL_VIRTUAL_IN_BYTES,mem.totalVirtual);
    builder.endObject();
  }
  builder.endObject();
  return builder;
}
