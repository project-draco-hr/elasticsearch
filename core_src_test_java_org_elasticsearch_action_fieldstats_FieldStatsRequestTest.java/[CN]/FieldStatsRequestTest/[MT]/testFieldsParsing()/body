{
  byte[] data=Streams.copyToBytesFromClasspath("/org/elasticsearch/action/fieldstats/fieldstats-index-constraints-request.json");
  FieldStatsRequest request=new FieldStatsRequest();
  request.source(new BytesArray(data));
  assertThat(request.getFields().length,equalTo(5));
  assertThat(request.getFields()[0],equalTo("field1"));
  assertThat(request.getFields()[1],equalTo("field2"));
  assertThat(request.getFields()[2],equalTo("field3"));
  assertThat(request.getFields()[3],equalTo("field4"));
  assertThat(request.getFields()[4],equalTo("field5"));
  assertThat(request.getIndexConstraints().length,equalTo(6));
  assertThat(request.getIndexConstraints()[0].getField(),equalTo("field2"));
  assertThat(request.getIndexConstraints()[0].getValue(),equalTo("9"));
  assertThat(request.getIndexConstraints()[0].getProperty(),equalTo(MAX));
  assertThat(request.getIndexConstraints()[0].getComparison(),equalTo(GTE));
  assertThat(request.getIndexConstraints()[1].getField(),equalTo("field3"));
  assertThat(request.getIndexConstraints()[1].getValue(),equalTo("5"));
  assertThat(request.getIndexConstraints()[1].getProperty(),equalTo(MIN));
  assertThat(request.getIndexConstraints()[1].getComparison(),equalTo(GT));
  assertThat(request.getIndexConstraints()[2].getField(),equalTo("field4"));
  assertThat(request.getIndexConstraints()[2].getValue(),equalTo("a"));
  assertThat(request.getIndexConstraints()[2].getProperty(),equalTo(MIN));
  assertThat(request.getIndexConstraints()[2].getComparison(),equalTo(GTE));
  assertThat(request.getIndexConstraints()[3].getField(),equalTo("field4"));
  assertThat(request.getIndexConstraints()[3].getValue(),equalTo("g"));
  assertThat(request.getIndexConstraints()[3].getProperty(),equalTo(MAX));
  assertThat(request.getIndexConstraints()[3].getComparison(),equalTo(LTE));
  assertThat(request.getIndexConstraints()[4].getField(),equalTo("field5"));
  assertThat(request.getIndexConstraints()[4].getValue(),equalTo("2"));
  assertThat(request.getIndexConstraints()[4].getProperty(),equalTo(MAX));
  assertThat(request.getIndexConstraints()[4].getComparison(),equalTo(GT));
  assertThat(request.getIndexConstraints()[5].getField(),equalTo("field5"));
  assertThat(request.getIndexConstraints()[5].getValue(),equalTo("9"));
  assertThat(request.getIndexConstraints()[5].getProperty(),equalTo(MAX));
  assertThat(request.getIndexConstraints()[5].getComparison(),equalTo(LT));
}
