{
  this.values.setDocument(docId);
  final int numValues=this.values.count();
  if (numValues > 0) {
    double val=this.values.valueAt(0) * boostFactor;
    double result=modifier.apply(val);
    if (Double.isNaN(result) || Double.isInfinite(result)) {
      throw new ElasticsearchException("Result of field modification [" + modifier.toString() + "("+ val+ ")] must be a number");
    }
    return result;
  }
 else {
    throw new ElasticsearchException("Missing value for field [" + field + "]");
  }
}
