{
  int count=0;
  for (int i=0; i < size; i++) {
    ShardRouting shard=shards.get(i);
    if (shard.unassigned()) {
      continue;
    }
    if (shard.primary()) {
      if (shard.relocating()) {
        count++;
      }
    }
 else {
      count++;
      if (shard.relocating()) {
        count++;
      }
    }
  }
  return count;
}
