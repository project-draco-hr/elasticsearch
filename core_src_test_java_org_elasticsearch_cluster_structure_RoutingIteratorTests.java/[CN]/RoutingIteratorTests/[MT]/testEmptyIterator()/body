{
  ShardShuffler shuffler=new RotationShardShuffler(0);
  ShardIterator shardIterator=new PlainShardIterator(new ShardId("test1","_na_",0),shuffler.shuffle(Collections.<ShardRouting>emptyList()));
  assertThat(shardIterator.remaining(),equalTo(0));
  assertThat(shardIterator.nextOrNull(),nullValue());
  assertThat(shardIterator.remaining(),equalTo(0));
  assertThat(shardIterator.nextOrNull(),nullValue());
  assertThat(shardIterator.remaining(),equalTo(0));
  shardIterator=new PlainShardIterator(new ShardId("test1","_na_",0),shuffler.shuffle(Collections.<ShardRouting>emptyList()));
  assertThat(shardIterator.remaining(),equalTo(0));
  assertThat(shardIterator.nextOrNull(),nullValue());
  assertThat(shardIterator.remaining(),equalTo(0));
  assertThat(shardIterator.nextOrNull(),nullValue());
  assertThat(shardIterator.remaining(),equalTo(0));
  shardIterator=new PlainShardIterator(new ShardId("test1","_na_",0),shuffler.shuffle(Collections.<ShardRouting>emptyList()));
  assertThat(shardIterator.remaining(),equalTo(0));
  assertThat(shardIterator.nextOrNull(),nullValue());
  assertThat(shardIterator.remaining(),equalTo(0));
  assertThat(shardIterator.nextOrNull(),nullValue());
  assertThat(shardIterator.remaining(),equalTo(0));
  shardIterator=new PlainShardIterator(new ShardId("test1","_na_",0),shuffler.shuffle(Collections.<ShardRouting>emptyList()));
  assertThat(shardIterator.remaining(),equalTo(0));
  assertThat(shardIterator.nextOrNull(),nullValue());
  assertThat(shardIterator.remaining(),equalTo(0));
  assertThat(shardIterator.nextOrNull(),nullValue());
  assertThat(shardIterator.remaining(),equalTo(0));
}
