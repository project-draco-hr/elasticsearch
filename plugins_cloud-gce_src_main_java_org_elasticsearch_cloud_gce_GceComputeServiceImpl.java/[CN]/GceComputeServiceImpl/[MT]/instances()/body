{
  logger.debug("get instances for project [{}], zoneList [{}]",project,zoneList);
  List<List<Instance>> instanceListByZone=Lists.transform(zoneList,new Function<String,List<Instance>>(){
    @Override public List<Instance> apply(    String zoneId){
      try {
        Compute.Instances.List list=client().instances().list(project,zoneId);
        InstanceList instanceList=list.execute();
        if (instanceList.isEmpty()) {
          return new ArrayList();
        }
        return instanceList.getItems();
      }
 catch (      IOException e) {
        logger.warn("Problem fetching instance list for zone {}",zoneId);
        logger.debug("Full exception:",e);
        return new ArrayList();
      }
    }
  }
);
  List<Instance> instanceList=Lists.newArrayList(Iterables.concat(instanceListByZone));
  if (instanceList.size() == 0) {
    logger.warn("disabling GCE discovery. Can not get list of nodes");
  }
  return instanceList;
}
