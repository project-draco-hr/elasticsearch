{
  if (indexService != null && indexService.hasShard(shardRouting.getId())) {
    try {
      indexService.removeShard(shardRouting.getId(),message);
    }
 catch (    ShardNotFoundException e) {
    }
catch (    Throwable e1) {
      logger.warn("[{}][{}] failed to remove shard after failure ([{}])",e1,shardRouting.getIndexName(),shardRouting.getId(),message);
    }
  }
  if (sendShardFailure) {
    sendFailShard(shardRouting,indexUUID,message,failure);
  }
}
