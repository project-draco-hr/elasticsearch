{
  try {
    AllocatedIndex<? extends Shard> indexService=indicesService.indexService(shardRouting.shardId().getIndex());
    if (indexService != null) {
      indexService.removeShard(shardRouting.shardId().id(),message);
    }
  }
 catch (  ShardNotFoundException e) {
  }
catch (  Exception inner) {
    inner.addSuppressed(failure);
    logger.warn("[{}][{}] failed to remove shard after failure ([{}])",inner,shardRouting.getIndexName(),shardRouting.getId(),message);
  }
  if (sendShardFailure) {
    sendFailShard(shardRouting,message,failure);
  }
}
