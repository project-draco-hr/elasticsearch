{
  try {
    AllocatedIndex<? extends Shard> indexService=indicesService.indexService(shardRouting.shardId().getIndex());
    if (indexService != null) {
      indexService.removeShard(shardRouting.shardId().id(),message);
    }
  }
 catch (  ShardNotFoundException e) {
  }
catch (  Throwable e1) {
    logger.warn("[{}][{}] failed to remove shard after failure ([{}])",e1,shardRouting.getIndexName(),shardRouting.getId(),message);
  }
  if (sendShardFailure) {
    sendFailShard(shardRouting,message,failure);
  }
}
