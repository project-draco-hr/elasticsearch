{
  if (smartFieldMappers == null) {
    return query;
  }
  if (!smartFieldMappers.hasDocMapper()) {
    return query;
  }
  DocumentMapper docMapper=smartFieldMappers.docMapper();
  Filter typeFilter=new TermFilter(docMapper.typeMapper().term(docMapper.type()));
  typeFilter=parseContext.cacheFilterIfPossible(typeFilter);
  return new FilteredQuery(query,typeFilter);
}
