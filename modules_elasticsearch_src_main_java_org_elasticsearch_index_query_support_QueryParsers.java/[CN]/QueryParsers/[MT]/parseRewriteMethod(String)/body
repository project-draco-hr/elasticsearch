{
  if (rewriteMethod == null) {
    return MultiTermQuery.CONSTANT_SCORE_AUTO_REWRITE_DEFAULT;
  }
  if ("constant_score_auto".equals(rewriteMethod) || "constant_score_auto".equals(rewriteMethod)) {
    return MultiTermQuery.CONSTANT_SCORE_AUTO_REWRITE_DEFAULT;
  }
  if ("scoring_boolean".equals(rewriteMethod) || "scoringBoolean".equals(rewriteMethod)) {
    return MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE;
  }
  if ("constant_score_boolean".equals(rewriteMethod) || "constantScoreBoolean".equals(rewriteMethod)) {
    return MultiTermQuery.CONSTANT_SCORE_BOOLEAN_QUERY_REWRITE;
  }
  if ("constant_score_filter".equals(rewriteMethod) || "constantScoreFilter".equals(rewriteMethod)) {
    return MultiTermQuery.CONSTANT_SCORE_FILTER_REWRITE;
  }
  if (rewriteMethod.startsWith("top_terms_")) {
    int size=Integer.parseInt(rewriteMethod.substring("top_terms_".length()));
    return new MultiTermQuery.TopTermsScoringBooleanQueryRewrite(size);
  }
  if (rewriteMethod.startsWith("topTerms")) {
    int size=Integer.parseInt(rewriteMethod.substring("topTerms".length()));
    return new MultiTermQuery.TopTermsScoringBooleanQueryRewrite(size);
  }
  if (rewriteMethod.startsWith("top_terms_boost_")) {
    int size=Integer.parseInt(rewriteMethod.substring("top_terms_boost_".length()));
    return new MultiTermQuery.TopTermsBoostOnlyBooleanQueryRewrite(size);
  }
  if (rewriteMethod.startsWith("topTermsBoost")) {
    int size=Integer.parseInt(rewriteMethod.substring("topTermsBoost".length()));
    return new MultiTermQuery.TopTermsBoostOnlyBooleanQueryRewrite(size);
  }
  throw new ElasticSearchIllegalArgumentException("Failed to parse rewrite_method [" + rewriteMethod + "]");
}
