{
  Map<MetaData,Mustache> templates=new HashMap<>();
  Iterator<Map.Entry<String,Object>> iterator=config.entrySet().iterator();
  while (iterator.hasNext()) {
    Map.Entry<String,Object> entry=iterator.next();
    MetaData metaData=MetaData.fromString(entry.getKey());
    Mustache mustache=mustacheFactory.compile(new FastStringReader(entry.getValue().toString()),"");
    templates.put(metaData,mustache);
    iterator.remove();
  }
  if (templates.isEmpty()) {
    throw new IllegalArgumentException("no meta fields specified");
  }
  return new MetaDataProcessor(Collections.unmodifiableMap(templates));
}
