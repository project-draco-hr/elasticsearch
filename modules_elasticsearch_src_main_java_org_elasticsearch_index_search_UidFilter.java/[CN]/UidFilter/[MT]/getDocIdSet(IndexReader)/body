{
  BloomFilter filter=bloomCache.filter(reader,UidFieldMapper.NAME,true);
  OpenBitSet set=null;
  TermDocs td=null;
  try {
    for (    Term uid : uids) {
      UnicodeUtil.UTF8Result utf8=Unicode.fromStringAsUtf8(uid.text());
      if (!filter.isPresent(utf8.result,0,utf8.length)) {
        continue;
      }
      if (td == null) {
        td=reader.termDocs();
      }
      td.seek(uid);
      while (td.next()) {
        if (set == null) {
          set=new OpenBitSet(reader.maxDoc());
        }
        set.fastSet(td.doc());
      }
    }
  }
  finally {
    if (td != null) {
      td.close();
    }
  }
  return set;
}
