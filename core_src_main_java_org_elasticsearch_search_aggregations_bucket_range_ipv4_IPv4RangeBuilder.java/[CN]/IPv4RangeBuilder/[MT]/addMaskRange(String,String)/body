{
  long[] fromTo=cidrMaskToMinMax(mask);
  if (fromTo == null) {
    throw new SearchSourceBuilderException("invalid CIDR mask [" + mask + "] in ip_range aggregation ["+ getName()+ "]");
  }
  ranges.add(new Range(key,fromTo[0] < 0 ? null : fromTo[0],fromTo[1] < 0 ? null : fromTo[1]));
  return this;
}
