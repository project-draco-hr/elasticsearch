{
  condition.expected=Definition.BOOLEAN_TYPE;
  condition.analyze(variables);
  condition=condition.cast(variables);
  if (condition.constant != null) {
    throw new IllegalArgumentException(error("Extraneous conditional statement."));
  }
  left.expected=expected;
  left.explicit=explicit;
  left.internal=internal;
  right.expected=expected;
  right.explicit=explicit;
  right.internal=internal;
  actual=expected;
  left.analyze(variables);
  right.analyze(variables);
  if (expected == null) {
    final Type promote=AnalyzerCaster.promoteConditional(left.actual,right.actual,left.constant,right.constant);
    left.expected=promote;
    right.expected=promote;
    actual=promote;
  }
  left=left.cast(variables);
  right=right.cast(variables);
}
