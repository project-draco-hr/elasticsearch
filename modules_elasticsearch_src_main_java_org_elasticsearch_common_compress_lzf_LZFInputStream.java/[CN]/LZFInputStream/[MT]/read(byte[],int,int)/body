{
  if (length == 0) {
    return 0;
  }
  int outputPos=offset;
  readyBuffer();
  if (bufferLength == -1) {
    return -1;
  }
  while (outputPos < length && bufferPosition < bufferLength) {
    int chunkLength=Math.min(bufferLength - bufferPosition,length - outputPos);
    System.arraycopy(uncompressedBytes,bufferPosition,buffer,outputPos,chunkLength);
    outputPos+=chunkLength;
    bufferPosition+=chunkLength;
    readyBuffer();
  }
  return outputPos - offset;
}
