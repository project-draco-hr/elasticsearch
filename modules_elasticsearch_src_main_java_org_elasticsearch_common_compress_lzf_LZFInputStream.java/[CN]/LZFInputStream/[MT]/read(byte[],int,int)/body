{
  int outputPos=offset;
  readyBuffer();
  if (bufferLength == -1) {
    return -1;
  }
  while (outputPos < buffer.length && bufferPosition < bufferLength) {
    int chunkLength=Math.min(bufferLength - bufferPosition,buffer.length - outputPos);
    System.arraycopy(uncompressedBytes,bufferPosition,buffer,outputPos,chunkLength);
    outputPos+=chunkLength;
    bufferPosition+=chunkLength;
    readyBuffer();
  }
  return outputPos;
}
