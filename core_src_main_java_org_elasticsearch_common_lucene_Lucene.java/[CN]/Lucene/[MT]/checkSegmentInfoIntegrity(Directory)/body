{
  new SegmentInfos.FindSegmentsFile(directory){
    @Override protected Object doBody(    String segmentFileName) throws IOException {
      try (IndexInput input=directory.openInput(segmentFileName,IOContext.READ)){
        final int format=input.readInt();
        if (format == CodecUtil.CODEC_MAGIC) {
          CodecUtil.checksumEntireFile(input);
        }
      }
       return null;
    }
  }
.run();
}
