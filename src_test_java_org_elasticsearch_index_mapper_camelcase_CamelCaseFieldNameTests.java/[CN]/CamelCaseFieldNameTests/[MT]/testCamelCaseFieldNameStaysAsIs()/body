{
  String mapping=XContentFactory.jsonBuilder().startObject().startObject("type").endObject().endObject().string();
  DocumentMapperParser parser=createIndex("test").mapperService().documentMapperParser();
  DocumentMapper documentMapper=parser.parse(mapping);
  ParsedDocument doc=documentMapper.parse("type","1",XContentFactory.jsonBuilder().startObject().field("thisIsCamelCase","value1").endObject().bytes());
  assertThat(documentMapper.mappers().indexName("thisIsCamelCase").isEmpty(),equalTo(false));
  assertThat(documentMapper.mappers().indexName("this_is_camel_case"),nullValue());
  documentMapper.refreshSource();
  documentMapper=parser.parse(documentMapper.mappingSource().string());
  assertThat(documentMapper.mappers().indexName("thisIsCamelCase").isEmpty(),equalTo(false));
  assertThat(documentMapper.mappers().indexName("this_is_camel_case"),nullValue());
}
