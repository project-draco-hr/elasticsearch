{
synchronized (mutex) {
    if (this.state != IndexShardState.RECOVERING) {
      throw new IndexShardNotRecoveringException(shardId,state);
    }
    this.state=stateToRestore;
  }
  return this;
}
