{
  if (state != IndexShardState.RECOVERING) {
    throw new IndexShardNotRecoveringException(shardId,state);
  }
  engine.start();
  applyTranslogOperations(operations);
synchronized (mutex) {
    state=IndexShardState.STARTED;
  }
  threadPool.execute(new ShardMappingSniffer());
  scheduleRefresherIfNeeded();
}
