{
  logger.info("-- build started shard");
  ShardRouting shard=ShardRouting.newUnassigned("test",0,null,true,new UnassignedInfo(UnassignedInfo.Reason.INDEX_CREATED,null));
  shard.initialize("node1");
  shard.moveToStarted();
  AllocationId allocationId=shard.allocationId();
  logger.info("-- reinitializing shard");
  shard.reinitializeShard();
  assertThat(shard.allocationId().getId(),notNullValue());
  assertThat(shard.allocationId().getRelocationId(),nullValue());
  assertThat(shard.allocationId().getId(),not(equalTo(allocationId.getId())));
}
