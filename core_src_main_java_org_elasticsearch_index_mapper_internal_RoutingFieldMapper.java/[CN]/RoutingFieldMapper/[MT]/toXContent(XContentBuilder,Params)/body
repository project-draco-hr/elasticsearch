{
  boolean includeDefaults=params.paramAsBoolean("include_defaults",false);
  boolean indexed=fieldType().indexOptions() != IndexOptions.NONE;
  boolean indexedDefault=Defaults.FIELD_TYPE.indexOptions() != IndexOptions.NONE;
  if (!includeDefaults && indexed == indexedDefault && fieldType().stored() == Defaults.FIELD_TYPE.stored() && required == Defaults.REQUIRED && path == Defaults.PATH) {
    return builder;
  }
  builder.startObject(CONTENT_TYPE);
  if (indexCreatedBefore2x && (includeDefaults || indexed != indexedDefault)) {
    builder.field("index",indexTokenizeOptionToString(indexed,fieldType().tokenized()));
  }
  if (indexCreatedBefore2x && (includeDefaults || fieldType().stored() != Defaults.FIELD_TYPE.stored())) {
    builder.field("store",fieldType().stored());
  }
  if (includeDefaults || required != Defaults.REQUIRED) {
    builder.field("required",required);
  }
  if (indexCreatedBefore2x && (includeDefaults || path != Defaults.PATH)) {
    builder.field("path",path);
  }
  builder.endObject();
  return builder;
}
