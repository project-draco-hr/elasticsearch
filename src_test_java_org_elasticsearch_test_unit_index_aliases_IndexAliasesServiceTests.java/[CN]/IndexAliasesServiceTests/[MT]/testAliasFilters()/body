{
  IndexAliasesService indexAliasesService=newIndexAliasesService();
  indexAliasesService.add("cats",filter(termFilter("animal","cat")));
  indexAliasesService.add("dogs",filter(termFilter("animal","dog")));
  assertThat(indexAliasesService.aliasFilter(),nullValue());
  assertThat(indexAliasesService.aliasFilter("dogs").toString(),equalTo("FilterCacheFilterWrapper(animal:dog)"));
  assertThat(indexAliasesService.aliasFilter("dogs","cats").toString(),equalTo("BooleanFilter( FilterCacheFilterWrapper(animal:dog) FilterCacheFilterWrapper(animal:cat))"));
  indexAliasesService.add("cats",filter(termFilter("animal","feline")));
  indexAliasesService.add("dogs",filter(termFilter("animal","canine")));
  assertThat(indexAliasesService.aliasFilter("dogs","cats").toString(),equalTo("BooleanFilter( FilterCacheFilterWrapper(animal:canine) FilterCacheFilterWrapper(animal:feline))"));
}
