{
  if (fs != null) {
    try {
      fs.isFile(fs.getWorkingDirectory());
    }
 catch (    IOException ex) {
      if (ex.getMessage().contains("Filesystem closed")) {
        fs=null;
      }
 else {
        throw ex;
      }
    }
  }
  if (fs == null) {
    Thread th=Thread.currentThread();
    ClassLoader oldCL=th.getContextClassLoader();
    try {
      th.setContextClassLoader(getClass().getClassLoader());
      return initFileSystem(repositorySettings);
    }
 catch (    IOException ex) {
      throw ex;
    }
 finally {
      th.setContextClassLoader(oldCL);
    }
  }
  return fs;
}
