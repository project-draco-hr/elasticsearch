{
  out.writeByte(order.id());
  if (order instanceof Aggregation) {
    out.writeBoolean(((MultiBucketsAggregation.Bucket.SubAggregationComparator)order.comparator).asc());
    out.writeString(((MultiBucketsAggregation.Bucket.SubAggregationComparator)order.comparator).aggName());
    boolean hasValueName=((MultiBucketsAggregation.Bucket.SubAggregationComparator)order.comparator).valueName() != null;
    out.writeBoolean(hasValueName);
    if (hasValueName) {
      out.writeString(((MultiBucketsAggregation.Bucket.SubAggregationComparator)order.comparator).valueName());
    }
  }
}
