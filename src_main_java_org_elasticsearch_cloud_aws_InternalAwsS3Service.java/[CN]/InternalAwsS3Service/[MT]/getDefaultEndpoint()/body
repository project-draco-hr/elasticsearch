{
  String endpoint=null;
  if (componentSettings.get("s3.endpoint") != null) {
    endpoint=componentSettings.get("s3.endpoint");
    logger.debug("using explicit s3 endpoint [{}]",endpoint);
  }
 else   if (componentSettings.get("region") != null) {
    String region=componentSettings.get("region").toLowerCase();
    endpoint=getEndpoint(region);
    logger.debug("using s3 region [{}], with endpoint [{}]",region,endpoint);
  }
  return endpoint;
}
