{
  Query parentQuery=new TermQuery(new Term("field","value"));
  ParentFieldMapper parentFieldMapper=SearchContext.current().mapperService().documentMapper("child").parentFieldMapper();
  ParentChildIndexFieldData parentChildIndexFieldData=SearchContext.current().fieldData().getForField(parentFieldMapper.fieldType());
  Filter childrenFilter=new QueryWrapperFilter(new TermQuery(new Term(TypeFieldMapper.NAME,"child")));
  Query query=new ParentConstantScoreQuery(parentChildIndexFieldData,parentQuery,"parent",childrenFilter);
  QueryUtils.check(query);
}
