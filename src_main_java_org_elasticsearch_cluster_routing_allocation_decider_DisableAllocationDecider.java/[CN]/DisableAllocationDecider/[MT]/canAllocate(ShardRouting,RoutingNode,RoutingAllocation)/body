{
  if (disableAllocation) {
    return allocation.ignoreDisable() ? Decision.YES : Decision.NO;
  }
  if (disableReplicaAllocation) {
    return shardRouting.primary() ? Decision.YES : allocation.ignoreDisable() ? Decision.YES : Decision.NO;
  }
  return Decision.YES;
}
