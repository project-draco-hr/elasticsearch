{
  Client client=client();
  logger.info("--> trying creating repository with incorrect settings");
  try {
    client.admin().cluster().preparePutRepository("test-repo").setType("fs").get();
    fail("Shouldn't be here");
  }
 catch (  RepositoryException ex) {
    assertThat(ex.toString(),containsString("missing location"));
  }
  logger.info("--> trying creating repository with location that is not registered in path.repo setting");
  String location=createTempDir().toAbsolutePath().toString();
  try {
    client().admin().cluster().preparePutRepository("test-repo").setType("fs").setSettings(ImmutableSettings.settingsBuilder().put("location",location)).get();
    fail("Shouldn't be here");
  }
 catch (  RepositoryException ex) {
    assertThat(ex.toString(),containsString("location [" + location + "] doesn't match any of the locations specified by path.repo"));
  }
}
