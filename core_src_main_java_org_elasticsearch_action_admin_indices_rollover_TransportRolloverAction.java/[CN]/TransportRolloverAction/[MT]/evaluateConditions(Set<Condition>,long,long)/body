{
  Set<Map.Entry<Condition,Boolean>> result=new HashSet<>(conditions.size());
  for (  Condition condition : conditions) {
    if (condition instanceof Condition.MaxAge) {
      Condition.MaxAge maxAge=(Condition.MaxAge)condition;
      final TimeValue age=TimeValue.timeValueMillis(indexAge);
      result.add(new AbstractMap.SimpleEntry<>(condition,maxAge.matches(age)));
    }
 else     if (condition instanceof Condition.MaxDocs) {
      final Condition.MaxDocs maxDocs=(Condition.MaxDocs)condition;
      result.add(new AbstractMap.SimpleEntry<>(condition,maxDocs.matches(docCount)));
    }
 else {
      throw new IllegalArgumentException("unknown condition [" + condition.getClass().getSimpleName() + "]");
    }
  }
  return result;
}
