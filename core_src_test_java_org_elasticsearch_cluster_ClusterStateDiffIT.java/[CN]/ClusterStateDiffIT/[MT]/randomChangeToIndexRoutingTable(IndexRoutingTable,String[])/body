{
  IndexRoutingTable.Builder builder=IndexRoutingTable.builder(original.getIndex());
  for (  ObjectCursor<IndexShardRoutingTable> indexShardRoutingTable : original.shards().values()) {
    for (    ShardRouting shardRouting : indexShardRoutingTable.value.shards()) {
      final ShardRouting newShardRouting=new ShardRouting(shardRouting);
      randomChange(newShardRouting,nodes);
      builder.addShard(indexShardRoutingTable.value,newShardRouting);
    }
  }
  return builder.build();
}
