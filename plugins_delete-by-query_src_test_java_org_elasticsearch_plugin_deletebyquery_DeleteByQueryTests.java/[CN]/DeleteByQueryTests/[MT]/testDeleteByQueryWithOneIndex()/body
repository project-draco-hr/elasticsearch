{
  final long docs=randomIntBetween(1,50);
  for (int i=0; i < docs; i++) {
    index("test","test",String.valueOf(i),"fields1",1);
  }
  refresh();
  assertHitCount(client().prepareCount("test").get(),docs);
  DeleteByQueryRequestBuilder delete=newDeleteByQuery().setIndices("t*").setQuery(QueryBuilders.matchAllQuery());
  assertDBQResponse(delete.get(),docs,docs,0l,0l);
  refresh();
  assertHitCount(client().prepareCount("test").get(),0);
  assertSearchContextsClosed();
}
