{
  assertBusy(new Runnable(){
    @Override public void run(){
      NodesStatsResponse nodesStats=client().admin().cluster().prepareNodesStats().setIndices(true).get();
      for (      NodeStats nodeStat : nodesStats.getNodes()) {
        assertThat(nodeStat.getIndices().getSearch().getOpenContexts(),equalTo(0L));
      }
    }
  }
);
}
