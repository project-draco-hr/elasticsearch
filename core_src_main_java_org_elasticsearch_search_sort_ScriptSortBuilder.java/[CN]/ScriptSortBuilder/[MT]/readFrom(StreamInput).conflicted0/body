{
  ScriptSortBuilder builder=new ScriptSortBuilder(Script.readScript(in),ScriptSortType.PROTOTYPE.readFrom(in));
  builder.order(SortOrder.readOrderFrom(in));
  if (in.readBoolean()) {
    builder.sortMode(SortMode.PROTOTYPE.readFrom(in));
  }
  builder.nestedPath=in.readOptionalString();
  if (in.readBoolean()) {
    builder.nestedFilter=in.readQuery();
  }
  return builder;
}
