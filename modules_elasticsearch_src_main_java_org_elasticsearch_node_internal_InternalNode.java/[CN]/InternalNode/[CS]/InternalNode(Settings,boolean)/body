{
  Tuple<Settings,Environment> tuple=InternalSettingsPerparer.prepareSettings(pSettings,loadConfigSettings);
  ESLogger logger=Loggers.getLogger(Node.class,tuple.v1().get("name"));
  logger.info("{{}}: Initializing ...",Version.full());
  this.pluginsService=new PluginsService(tuple.v1(),tuple.v2());
  this.settings=pluginsService.updatedSettings();
  this.environment=tuple.v2();
  ArrayList<Module> modules=new ArrayList<Module>();
  modules.add(new PluginsModule(settings,pluginsService));
  modules.add(new NodeModule(this));
  modules.add(new JmxModule(settings));
  modules.add(new EnvironmentModule(environment));
  modules.add(new ClusterNameModule(settings));
  modules.add(new SettingsModule(settings));
  modules.add(new ThreadPoolModule(settings));
  modules.add(new TimerModule());
  modules.add(new DiscoveryModule(settings));
  modules.add(new ClusterModule(settings));
  modules.add(new RestModule(settings));
  modules.add(new TransportModule(settings));
  if (settings.getAsBoolean("http.enabled",true)) {
    modules.add(new HttpServerModule(settings));
  }
  modules.add(new IndicesModule(settings));
  modules.add(new SearchModule());
  modules.add(new TransportActionModule());
  modules.add(new MonitorModule(settings));
  modules.add(new GatewayModule(settings));
  modules.add(new NodeClientModule());
  injector=Guice.createInjector(modules);
  client=injector.getInstance(Client.class);
  logger.info("{{}}: Initialized",Version.full());
}
