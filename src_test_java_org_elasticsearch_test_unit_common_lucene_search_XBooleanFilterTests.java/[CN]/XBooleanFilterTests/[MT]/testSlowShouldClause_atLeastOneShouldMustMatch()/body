{
  XBooleanFilter booleanFilter=createBooleanFilter(newFilterClause(0,'a',MUST,false),newFilterClause(1,'a',SHOULD,true));
  FixedBitSet result=new FixedBitSet(reader.maxDoc());
  result.or(booleanFilter.getDocIdSet(reader.getContext(),reader.getLiveDocs()).iterator());
  assertThat(result.cardinality(),equalTo(1));
  assertThat(result.get(0),equalTo(false));
  assertThat(result.get(1),equalTo(false));
  assertThat(result.get(2),equalTo(true));
  booleanFilter=createBooleanFilter(newFilterClause(0,'a',MUST,false),newFilterClause(1,'a',SHOULD,true),newFilterClause(4,'z',SHOULD,true));
  result=new FixedBitSet(reader.maxDoc());
  result.or(booleanFilter.getDocIdSet(reader.getContext(),reader.getLiveDocs()).iterator());
  assertThat(result.cardinality(),equalTo(2));
  assertThat(result.get(0),equalTo(false));
  assertThat(result.get(1),equalTo(true));
  assertThat(result.get(2),equalTo(true));
}
