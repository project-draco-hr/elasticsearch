{
  String mapping=XContentFactory.jsonBuilder().startObject().startObject("type").startObject("_timestamp").field("enabled",true).field("path","custom_timestamp").endObject().endObject().endObject().string();
  DocumentMapper docMapper=createIndex("test").mapperService().documentMapperParser().parse(mapping);
  XContentBuilder doc=XContentFactory.jsonBuilder().startObject().field("custom_timestamp",1).endObject();
  MappingMetaData mappingMetaData=new MappingMetaData(docMapper);
  IndexRequest request=new IndexRequest("test","type","1").source(doc);
  request.process(MetaData.builder().build(),mappingMetaData,true,"test");
  assertEquals(request.timestamp(),"1");
}
