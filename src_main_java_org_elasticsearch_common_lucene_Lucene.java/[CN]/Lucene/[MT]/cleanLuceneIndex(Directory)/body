{
  try (Lock writeLock=directory.makeLock(IndexWriter.WRITE_LOCK_NAME)){
    if (!writeLock.obtain(IndexWriterConfig.getDefaultWriteLockTimeout())) {
      throw new LockObtainFailedException("Index locked for write: " + writeLock);
    }
    for (    final String file : directory.listAll()) {
      if (file.startsWith(IndexFileNames.SEGMENTS) || file.equals(IndexFileNames.OLD_SEGMENTS_GEN)) {
        directory.deleteFile(file);
      }
    }
  }
   try (IndexWriter _=new IndexWriter(directory,new IndexWriterConfig(Lucene.STANDARD_ANALYZER).setMergePolicy(NoMergePolicy.INSTANCE).setCommitOnClose(false).setOpenMode(IndexWriterConfig.OpenMode.CREATE))){
  }
 }
