{
  if (explanation instanceof ComplexExplanation) {
    out.writeBoolean(true);
    out.writeOptionalBoolean(((ComplexExplanation)explanation).getMatch());
  }
 else {
    out.writeBoolean(false);
  }
  out.writeFloat(explanation.getValue());
  if (explanation.getDescription() == null) {
    throw new ElasticsearchIllegalArgumentException("Explanation descriptions should NOT be null\n[" + explanation.toString() + "]");
  }
  out.writeString(explanation.getDescription());
  Explanation[] subExplanations=explanation.getDetails();
  if (subExplanations == null) {
    out.writeBoolean(false);
  }
 else {
    out.writeBoolean(true);
    out.writeVInt(subExplanations.length);
    for (    Explanation subExp : subExplanations) {
      writeExplanation(out,subExp);
    }
  }
}
