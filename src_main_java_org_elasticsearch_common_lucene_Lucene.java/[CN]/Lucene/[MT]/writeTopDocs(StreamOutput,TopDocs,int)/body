{
  if (topDocs.scoreDocs.length - from < 0) {
    out.writeBoolean(false);
    return;
  }
  out.writeBoolean(true);
  if (topDocs instanceof TopFieldDocs) {
    out.writeBoolean(true);
    TopFieldDocs topFieldDocs=(TopFieldDocs)topDocs;
    out.writeVInt(topDocs.totalHits);
    out.writeFloat(topDocs.getMaxScore());
    out.writeVInt(topFieldDocs.fields.length);
    for (    SortField sortField : topFieldDocs.fields) {
      if (sortField.getField() == null) {
        out.writeBoolean(false);
      }
 else {
        out.writeBoolean(true);
        out.writeString(sortField.getField());
      }
      if (sortField.getComparatorSource() != null) {
        writeSortType(out,((IndexFieldData.XFieldComparatorSource)sortField.getComparatorSource()).reducedType());
      }
 else {
        writeSortType(out,sortField.getType());
      }
      out.writeBoolean(sortField.getReverse());
    }
    out.writeVInt(topDocs.scoreDocs.length - from);
    int index=0;
    for (    ScoreDoc doc : topFieldDocs.scoreDocs) {
      if (index++ < from) {
        continue;
      }
      writeFieldDoc(out,(FieldDoc)doc);
    }
  }
 else {
    out.writeBoolean(false);
    out.writeVInt(topDocs.totalHits);
    out.writeFloat(topDocs.getMaxScore());
    out.writeVInt(topDocs.scoreDocs.length - from);
    int index=0;
    for (    ScoreDoc doc : topDocs.scoreDocs) {
      if (index++ < from) {
        continue;
      }
      writeScoreDoc(out,doc);
    }
  }
}
