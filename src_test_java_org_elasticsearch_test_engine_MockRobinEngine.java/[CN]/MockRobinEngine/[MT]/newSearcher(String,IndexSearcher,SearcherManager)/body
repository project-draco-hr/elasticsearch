{
  IndexReader reader=searcher.getIndexReader();
  IndexReader wrappedReader=reader;
  if (reader instanceof DirectoryReader && wrapReader) {
    wrappedReader=wrapReader((DirectoryReader)reader);
  }
  final AssertingIndexSearcher assertingIndexSearcher=new AssertingIndexSearcher(random,wrappedReader);
  assertingIndexSearcher.setSimilarity(searcher.getSimilarity());
  return new AssertingSearcher(assertingIndexSearcher,super.newSearcher(source,searcher,manager),shardId);
}
