{
  if (closed) {
    return;
  }
  closed=true;
  Channel[] channelsToClose=channels;
  channels=new Channel[0];
  for (  Channel channel : channelsToClose) {
    if (channel.isOpen()) {
      channel.close().awaitUninterruptibly();
    }
  }
  logger.debug("Disconnected from [{}]",node);
  transportServiceAdapter.raiseNodeDisconnected(node);
}
