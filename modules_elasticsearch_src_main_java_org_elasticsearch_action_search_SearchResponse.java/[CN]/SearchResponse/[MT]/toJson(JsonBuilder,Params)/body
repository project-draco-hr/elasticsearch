{
  if (scrollId != null) {
    builder.field("_scrollId",scrollId);
  }
  builder.startObject("_shards");
  builder.field("total",totalShards());
  builder.field("successful",successfulShards());
  builder.field("failed",failedShards());
  if (shardFailures.length > 0) {
    builder.startArray("failures");
    for (    ShardSearchFailure shardFailure : shardFailures) {
      builder.startObject();
      if (shardFailure.shard() != null) {
        builder.field("index",shardFailure.shard().index());
        builder.field("shard",shardFailure.shard().shardId());
      }
      builder.field("reason",shardFailure.reason());
      builder.endObject();
    }
    builder.endArray();
  }
  builder.endObject();
  internalResponse.toJson(builder,params);
}
