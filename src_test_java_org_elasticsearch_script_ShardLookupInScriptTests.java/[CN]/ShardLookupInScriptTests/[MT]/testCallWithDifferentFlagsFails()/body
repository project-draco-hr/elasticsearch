{
  initTestData();
  String script="termInfo = _shard['int_payload_field']['b']; return _shard['int_payload_field'].get('b', _POSITIONS).tf();";
  try {
    client().prepareSearch("test").setQuery(QueryBuilders.matchAllQuery()).addScriptField("tvtest",script).execute().actionGet();
  }
 catch (  SearchPhaseExecutionException e) {
    assertThat(e.getDetailedMessage().indexOf("You must call get with all required flags! Instead of  _shard['int_payload_field'].get('b', _FREQUENCIES) and _shard['int_payload_field'].get('b', _POSITIONS) call  _shard['int_payload_field'].get('b', _FREQUENCIES | _POSITIONS)  once]; "),Matchers.greaterThan(-1));
  }
  script="termInfo = _shard['int_payload_field'].get('b', _POSITIONS | _FREQUENCIES);return _shard['int_payload_field']['b'].tf();";
  client().prepareSearch("test").setQuery(QueryBuilders.matchAllQuery()).addScriptField("tvtest",script).execute().actionGet();
}
