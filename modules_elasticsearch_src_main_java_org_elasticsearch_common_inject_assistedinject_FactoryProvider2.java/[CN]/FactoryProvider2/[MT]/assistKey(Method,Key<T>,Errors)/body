{
  if (key.getAnnotationType() == null) {
    return Key.get(key.getTypeLiteral(),DEFAULT_ANNOTATION);
  }
 else   if (key.getAnnotationType() == Assisted.class) {
    return key;
  }
 else {
    errors.withSource(method).addMessage("Only @Assisted is allowed for factory parameters, but found @%s",key.getAnnotationType());
    throw errors.toException();
  }
}
