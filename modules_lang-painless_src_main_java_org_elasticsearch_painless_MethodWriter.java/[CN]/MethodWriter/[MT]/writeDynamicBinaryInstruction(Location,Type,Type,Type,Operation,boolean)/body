{
  org.objectweb.asm.Type methodType=org.objectweb.asm.Type.getMethodType(returnType.type,lhs.type,rhs.type);
  String descriptor=methodType.getDescriptor();
  int flags=0;
  if (compoundAssignment) {
    flags|=DefBootstrap.OPERATOR_COMPOUND_ASSIGNMENT;
  }
switch (operation) {
case MUL:
    invokeDynamic("mul",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR,flags);
  break;
case DIV:
invokeDynamic("div",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR,flags);
break;
case REM:
invokeDynamic("rem",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR,flags);
break;
case ADD:
boolean hasPrimitiveArg=lhs.clazz.isPrimitive() || rhs.clazz.isPrimitive();
if (!hasPrimitiveArg) {
flags|=DefBootstrap.OPERATOR_ALLOWS_NULL;
}
invokeDynamic("add",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR,flags);
break;
case SUB:
invokeDynamic("sub",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR,flags);
break;
case LSH:
invokeDynamic("lsh",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.SHIFT_OPERATOR,flags);
break;
case USH:
invokeDynamic("ush",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.SHIFT_OPERATOR,flags);
break;
case RSH:
invokeDynamic("rsh",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.SHIFT_OPERATOR,flags);
break;
case BWAND:
invokeDynamic("and",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR,flags);
break;
case XOR:
invokeDynamic("xor",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR,flags);
break;
case BWOR:
invokeDynamic("or",descriptor,DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR,flags);
break;
default :
throw location.createError(new IllegalStateException("Illegal tree structure."));
}
}
