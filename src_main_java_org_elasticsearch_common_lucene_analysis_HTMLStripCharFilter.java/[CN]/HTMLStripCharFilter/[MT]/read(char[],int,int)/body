{
  int i=0;
  for (i=0; i < len; i++) {
    int ch=read();
    if (ch == -1)     break;
    cbuf[off++]=(char)ch;
  }
  if (i == 0) {
    if (len == 0)     return 0;
    return -1;
  }
  return i;
}
