{
  if (!scheduledFuture.isCancelled()) {
    scheduledFuture.cancel(false);
  }
  final ReentrantLock mainLock=this.mainLock;
  mainLock.lock();
  try {
    int state=runState;
    if (state < SHUTDOWN)     runState=SHUTDOWN;
    try {
      for (      Worker w : workers) {
        w.interruptIfIdle();
      }
    }
 catch (    SecurityException se) {
      runState=state;
      throw se;
    }
    tryTerminate();
  }
  finally {
    mainLock.unlock();
  }
}
