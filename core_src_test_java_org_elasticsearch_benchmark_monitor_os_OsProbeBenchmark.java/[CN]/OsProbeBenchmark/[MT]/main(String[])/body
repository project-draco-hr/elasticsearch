{
  System.setProperty("es.logger.prefix","");
  final ESLogger logger=ESLoggerFactory.getLogger("benchmark");
  logger.info("--> loading OS probe");
  OsProbe probe=OsProbe.getInstance();
  logger.info("--> warming up...");
  for (int i=0; i < ITERATIONS; i++) {
    probe.getTotalPhysicalMemorySize();
    probe.getFreePhysicalMemorySize();
    probe.getTotalSwapSpaceSize();
    probe.getFreeSwapSpaceSize();
    probe.getSystemLoadAverage();
  }
  logger.info("--> warmed up");
  logger.info("--> testing 'getTotalPhysicalMemorySize' method...");
  long start=System.currentTimeMillis();
  for (int i=0; i < ITERATIONS; i++) {
    probe.getTotalPhysicalMemorySize();
  }
  long elapsed=System.currentTimeMillis() - start;
  logger.info("--> total [{}] ms, avg [{}] ms",elapsed,(elapsed / (double)ITERATIONS));
  logger.info("--> testing 'getFreePhysicalMemorySize' method...");
  start=System.currentTimeMillis();
  for (int i=0; i < ITERATIONS; i++) {
    probe.getFreePhysicalMemorySize();
  }
  elapsed=System.currentTimeMillis() - start;
  logger.info("--> total [{}] ms, avg [{}] ms",elapsed,(elapsed / (double)ITERATIONS));
  logger.info("--> testing 'getTotalSwapSpaceSize' method...");
  start=System.currentTimeMillis();
  for (int i=0; i < ITERATIONS; i++) {
    probe.getTotalSwapSpaceSize();
  }
  elapsed=System.currentTimeMillis() - start;
  logger.info("--> total [{}] ms, avg [{}] ms",elapsed,(elapsed / (double)ITERATIONS));
  logger.info("--> testing 'getFreeSwapSpaceSize' method...");
  start=System.currentTimeMillis();
  for (int i=0; i < ITERATIONS; i++) {
    probe.getFreeSwapSpaceSize();
  }
  elapsed=System.currentTimeMillis() - start;
  logger.info("--> total [{}] ms, avg [{}] ms",elapsed,(elapsed / (double)ITERATIONS));
  logger.info("--> testing 'getSystemLoadAverage' method...");
  start=System.currentTimeMillis();
  for (int i=0; i < ITERATIONS; i++) {
    probe.getSystemLoadAverage();
  }
  elapsed=System.currentTimeMillis() - start;
  logger.info("--> total [{}] ms, avg [{}] ms",elapsed,(elapsed / (double)ITERATIONS));
}
