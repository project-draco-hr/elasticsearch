{
  final RoutingNodes.UnassignedShards.UnassignedIterator unassignedIterator=allocation.routingNodes().unassigned().iterator();
  final MetaData metaData=allocation.metaData();
  boolean changed=false;
  while (unassignedIterator.hasNext()) {
    ShardRouting shardRouting=unassignedIterator.next();
    UnassignedInfo unassignedInfo=shardRouting.unassignedInfo();
    if (unassignedInfo.isDelayed()) {
      final long newComputedLeftDelayNanos=unassignedInfo.getRemainingDelay(allocation.getCurrentNanoTime(),metaData.getIndexSafe(shardRouting.index()).getSettings());
      if (newComputedLeftDelayNanos == 0) {
        changed=true;
        unassignedIterator.updateUnassignedInfo(new UnassignedInfo(unassignedInfo.getReason(),unassignedInfo.getMessage(),unassignedInfo.getFailure(),unassignedInfo.getNumFailedAllocations(),unassignedInfo.getUnassignedTimeInNanos(),unassignedInfo.getUnassignedTimeInMillis(),false));
      }
    }
  }
  return changed;
}
