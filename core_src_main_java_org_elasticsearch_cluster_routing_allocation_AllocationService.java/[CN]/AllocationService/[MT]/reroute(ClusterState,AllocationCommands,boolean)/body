{
  RoutingNodes routingNodes=getMutableRoutingNodes(clusterState);
  RoutingAllocation allocation=new RoutingAllocation(allocationDeciders,routingNodes,clusterState.nodes(),clusterInfoService.getClusterInfo());
  allocation.debugDecision(true);
  allocation.ignoreDisable(true);
  RoutingExplanations explanations=commands.execute(allocation,explain);
  allocation.ignoreDisable(false);
  reroute(allocation);
  RoutingTable routingTable=new RoutingTable.Builder().updateNodes(routingNodes).build().validateRaiseException(clusterState.metaData());
  RoutingAllocation.Result result=new RoutingAllocation.Result(true,routingTable,explanations);
  logClusterHealthStateChange(new ClusterStateHealth(clusterState),new ClusterStateHealth(clusterState.getMetaData(),routingTable),"reroute commands");
  return result;
}
