{
  RoutingNodes routingNodes=getMutableRoutingNodes(clusterState);
  RoutingAllocation allocation=new RoutingAllocation(allocationDeciders,routingNodes,clusterState.nodes(),clusterInfoService.getClusterInfo(),currentNanoTime());
  allocation.debugDecision(true);
  allocation.ignoreDisable(true);
  RoutingExplanations explanations=commands.execute(allocation,explain);
  allocation.ignoreDisable(false);
  reroute(allocation);
  RoutingAllocation.Result result=buildChangedResult(clusterState.metaData(),routingNodes,explanations);
  logClusterHealthStateChange(new ClusterStateHealth(clusterState),new ClusterStateHealth(clusterState.getMetaData(),result.routingTable()),"reroute commands");
  return result;
}
