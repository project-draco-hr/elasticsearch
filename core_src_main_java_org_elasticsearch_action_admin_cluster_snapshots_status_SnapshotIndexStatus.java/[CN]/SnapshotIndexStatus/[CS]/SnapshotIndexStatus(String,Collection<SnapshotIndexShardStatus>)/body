{
  this.index=index;
  ImmutableMap.Builder<Integer,SnapshotIndexShardStatus> builder=ImmutableMap.builder();
  stats=new SnapshotStats();
  for (  SnapshotIndexShardStatus shard : shards) {
    builder.put(shard.getShardId(),shard);
    stats.add(shard.getStats());
  }
  shardsStats=new SnapshotShardsStats(shards);
  indexShards=builder.build();
}
