{
  assumeTrue("test runs only when at least a type is registered",getCurrentTypes().length > 0);
  String query="{\n" + "    \"geo_distance\":{\n" + "        \"distance\":19.312128,\n"+ "        \"" + GEO_POINT_FIELD_NAME + "\":{\n"+ "            \"lat\":40,\n"+ "            \"lon\":-70\n"+ "        }\n"+ "    }\n"+ "}\n";
  Query parsedQuery=parseQuery(query).toQuery(createShardContext());
  GeoDistanceRangeQuery filter=(GeoDistanceRangeQuery)parsedQuery;
  assertThat(filter.fieldName(),equalTo(GEO_POINT_FIELD_NAME));
  assertThat(filter.lat(),closeTo(40,0.00001));
  assertThat(filter.lon(),closeTo(-70,0.00001));
  assertThat(filter.minInclusiveDistance(),equalTo(Double.NEGATIVE_INFINITY));
  assertThat(filter.maxInclusiveDistance(),closeTo(DistanceUnit.KILOMETERS.convert(12,DistanceUnit.MILES),0.00001));
}
