{
  InternalIndexShard indexShard=(InternalIndexShard)indexService.shard(shardId.id());
  if (indexShard == null) {
    return listUnallocatedStoreMetaData(shardId);
  }
 else {
    Map<String,StoreFileMetaData> files=Maps.newHashMap();
    for (    String file : indexShard.store().directory().listAll()) {
      files.put(file,new StoreFileMetaData(file,indexShard.store().directory().fileLength(file)));
    }
    return new StoreFilesMetaData(true,files);
  }
}
