{
  final long seed=indexSettings.getAsLong(AbstractIntegrationTest.INDEX_SEED_SETTING,0l);
  random=new Random(seed);
  randomIOExceptionRate=indexSettings.getAsDouble(RANDOM_IO_EXCEPTION_RATE,0.0d);
  randomIOExceptionRateOnOpen=indexSettings.getAsDouble(RANDOM_IO_EXCEPTION_RATE_ON_OPEN,0.0d);
  preventDoubleWrite=indexSettings.getAsBoolean(RANDOM_PREVENT_DOUBLE_WRITE,true);
  noDeleteOpenFile=indexSettings.getAsBoolean(RANDOM_NO_DELETE_OPEN_FILE,random.nextBoolean());
  random.nextInt(shardId.getId() + 1);
  throttle=Throttling.valueOf(indexSettings.get(RANDOM_THROTTLE,random.nextDouble() < 0.1 ? "SOMETIMES" : "NEVER"));
  checkIndexOnClose=indexSettings.getAsBoolean(CHECK_INDEX_ON_CLOSE,random.nextDouble() < 0.1);
  if (logger.isDebugEnabled()) {
    logger.debug("Using MockDirWrapper with seed [{}] throttle: [{}] checkIndexOnClose: [{}]",SeedUtils.formatSeed(seed),throttle,checkIndexOnClose);
  }
  this.indexSettings=indexSettings;
  this.shardId=shardId;
}
