{
  if (type.equals(MapperService.DEFAULT_MAPPING)) {
    throw new ElasticsearchIllegalArgumentException("_default_ mapping should not be updated");
  }
  try {
    XContentBuilder builder=XContentFactory.jsonBuilder().startObject();
    mappingUpdate.toXContent(builder,new ToXContent.MapParams(ImmutableMap.<String,String>of()));
    final CompressedString mappingSource=new CompressedString(builder.endObject().bytes());
    masterMappingUpdater.add(new MappingChange(index,indexUUID,type,mappingSource,listener));
  }
 catch (  IOException bogus) {
    throw new AssertionError("Cannot happen",bogus);
  }
}
