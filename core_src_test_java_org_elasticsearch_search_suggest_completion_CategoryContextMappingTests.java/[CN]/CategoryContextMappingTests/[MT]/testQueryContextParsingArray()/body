{
  XContentBuilder builder=jsonBuilder().startArray().value("context1").value("context2").endArray();
  XContentParser parser=XContentFactory.xContent(XContentType.JSON).createParser(builder.bytes());
  CategoryContextMapping mapping=ContextBuilder.category("cat").build();
  List<CategoryQueryContext> queryContexts=mapping.parseQueryContext(parser);
  List<String> expectedContexts=new ArrayList<>(Arrays.asList("context1","context2"));
  Iterator<CategoryQueryContext> iterator=queryContexts.iterator();
  assertTrue(iterator.hasNext());
  CategoryQueryContext queryContext=iterator.next();
  assertThat(queryContext.context.toString(),isIn(expectedContexts));
  assertTrue(iterator.hasNext());
  queryContext=iterator.next();
  assertThat(queryContext.context.toString(),isIn(expectedContexts));
}
