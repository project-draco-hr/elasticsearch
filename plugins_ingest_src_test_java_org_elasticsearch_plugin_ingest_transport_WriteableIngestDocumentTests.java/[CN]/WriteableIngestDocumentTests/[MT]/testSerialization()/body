{
  IngestDocument ingestDocument=new IngestDocument(randomAsciiOfLengthBetween(1,10),randomAsciiOfLengthBetween(1,10),randomAsciiOfLengthBetween(1,10),Collections.singletonMap(randomAsciiOfLengthBetween(1,10),randomAsciiOfLengthBetween(1,10)));
  WriteableIngestDocument writeableIngestDocument=new WriteableIngestDocument(ingestDocument);
  BytesStreamOutput out=new BytesStreamOutput();
  writeableIngestDocument.writeTo(out);
  StreamInput streamInput=StreamInput.wrap(out.bytes());
  WriteableIngestDocument otherWriteableIngestDocument=WriteableIngestDocument.readWriteableIngestDocumentFrom(streamInput);
  assertThat(otherWriteableIngestDocument,equalTo(writeableIngestDocument));
}
