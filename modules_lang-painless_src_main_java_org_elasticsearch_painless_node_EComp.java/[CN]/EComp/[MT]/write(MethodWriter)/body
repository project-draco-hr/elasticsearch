{
  writer.writeDebugInfo(location);
  boolean branch=tru != null || fals != null;
  org.objectweb.asm.Type rtype=right.actual.type;
  Sort rsort=right.actual.sort;
  left.write(writer);
  if (!right.isNull) {
    right.write(writer);
  }
  Label jump=tru != null ? tru : fals != null ? fals : new Label();
  Label end=new Label();
  boolean eq=(operation == Operation.EQ || operation == Operation.EQR) && (tru != null || fals == null) || (operation == Operation.NE || operation == Operation.NER) && fals != null;
  boolean ne=(operation == Operation.NE || operation == Operation.NER) && (tru != null || fals == null) || (operation == Operation.EQ || operation == Operation.EQR) && fals != null;
  boolean lt=operation == Operation.LT && (tru != null || fals == null) || operation == Operation.GTE && fals != null;
  boolean lte=operation == Operation.LTE && (tru != null || fals == null) || operation == Operation.GT && fals != null;
  boolean gt=operation == Operation.GT && (tru != null || fals == null) || operation == Operation.LTE && fals != null;
  boolean gte=operation == Operation.GTE && (tru != null || fals == null) || operation == Operation.LT && fals != null;
  boolean writejump=true;
switch (rsort) {
case VOID:
case BYTE:
case SHORT:
case CHAR:
    throw createError(new IllegalStateException("Illegal tree structure."));
case BOOL:
  if (eq)   writer.ifZCmp(MethodWriter.EQ,jump);
 else   if (ne)   writer.ifZCmp(MethodWriter.NE,jump);
 else {
    throw createError(new IllegalStateException("Illegal tree structure."));
  }
break;
case INT:
case LONG:
case FLOAT:
case DOUBLE:
if (eq) writer.ifCmp(rtype,MethodWriter.EQ,jump);
 else if (ne) writer.ifCmp(rtype,MethodWriter.NE,jump);
 else if (lt) writer.ifCmp(rtype,MethodWriter.LT,jump);
 else if (lte) writer.ifCmp(rtype,MethodWriter.LE,jump);
 else if (gt) writer.ifCmp(rtype,MethodWriter.GT,jump);
 else if (gte) writer.ifCmp(rtype,MethodWriter.GE,jump);
 else {
throw createError(new IllegalStateException("Illegal tree structure."));
}
break;
case DEF:
org.objectweb.asm.Type booleanType=org.objectweb.asm.Type.getType(boolean.class);
org.objectweb.asm.Type objectType=org.objectweb.asm.Type.getType(Object.class);
org.objectweb.asm.Type descriptor=org.objectweb.asm.Type.getMethodType(booleanType,objectType,objectType);
if (eq) {
if (right.isNull) {
writer.ifNull(jump);
}
 else if (!left.isNull && (operation == Operation.EQ || operation == Operation.NE)) {
writer.invokeDynamic("eq",descriptor.getDescriptor(),DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR);
writejump=false;
}
 else {
writer.ifCmp(rtype,MethodWriter.EQ,jump);
}
}
 else if (ne) {
if (right.isNull) {
writer.ifNonNull(jump);
}
 else if (!left.isNull && (operation == Operation.EQ || operation == Operation.NE)) {
writer.invokeDynamic("eq",descriptor.getDescriptor(),DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR);
writer.ifZCmp(MethodWriter.EQ,jump);
}
 else {
writer.ifCmp(rtype,MethodWriter.NE,jump);
}
}
 else if (lt) {
writer.invokeDynamic("lt",descriptor.getDescriptor(),DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR);
writejump=false;
}
 else if (lte) {
writer.invokeDynamic("lte",descriptor.getDescriptor(),DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR);
writejump=false;
}
 else if (gt) {
writer.invokeDynamic("gt",descriptor.getDescriptor(),DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR);
writejump=false;
}
 else if (gte) {
writer.invokeDynamic("gte",descriptor.getDescriptor(),DEF_BOOTSTRAP_HANDLE,DefBootstrap.BINARY_OPERATOR);
writejump=false;
}
 else {
throw createError(new IllegalStateException("Illegal tree structure."));
}
if (branch && !writejump) {
writer.ifZCmp(MethodWriter.NE,jump);
}
break;
default :
if (eq) {
if (right.isNull) {
writer.ifNull(jump);
}
 else if (operation == Operation.EQ || operation == Operation.NE) {
writer.invokeStatic(OBJECTS_TYPE,EQUALS);
if (branch) {
writer.ifZCmp(MethodWriter.NE,jump);
}
writejump=false;
}
 else {
writer.ifCmp(rtype,MethodWriter.EQ,jump);
}
}
 else if (ne) {
if (right.isNull) {
writer.ifNonNull(jump);
}
 else if (operation == Operation.EQ || operation == Operation.NE) {
writer.invokeStatic(OBJECTS_TYPE,EQUALS);
writer.ifZCmp(MethodWriter.EQ,jump);
}
 else {
writer.ifCmp(rtype,MethodWriter.NE,jump);
}
}
 else {
throw createError(new IllegalStateException("Illegal tree structure."));
}
}
if (!branch && writejump) {
writer.push(false);
writer.goTo(end);
writer.mark(jump);
writer.push(true);
writer.mark(end);
}
}
