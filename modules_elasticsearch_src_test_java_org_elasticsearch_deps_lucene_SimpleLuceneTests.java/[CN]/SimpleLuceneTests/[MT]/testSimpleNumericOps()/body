{
  Directory dir=new RAMDirectory();
  IndexWriter indexWriter=new IndexWriter(dir,Lucene.STANDARD_ANALYZER,true,IndexWriter.MaxFieldLength.UNLIMITED);
  indexWriter.addDocument(doc().add(field("_id","1")).add(new NumericField("test",Field.Store.YES,true).setIntValue(2)).build());
  IndexSearcher searcher=new IndexSearcher(indexWriter.getReader());
  TopDocs topDocs=searcher.search(new TermQuery(new Term("_id","1")),1);
  Document doc=searcher.doc(topDocs.scoreDocs[0].doc);
  Fieldable f=doc.getFieldable("test");
  assertThat(f.stringValue(),equalTo("2"));
  topDocs=searcher.search(new TermQuery(new Term("test",NumericUtils.intToPrefixCoded(2))),1);
  doc=searcher.doc(topDocs.scoreDocs[0].doc);
  f=doc.getFieldable("test");
  assertThat(f.stringValue(),equalTo("2"));
  indexWriter.close();
}
