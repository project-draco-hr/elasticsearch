{
  Directory dir=new RAMDirectory();
  IndexWriter indexWriter=new IndexWriter(dir,Lucene.STANDARD_ANALYZER,true,IndexWriter.MaxFieldLength.UNLIMITED);
  for (int i=0; i < 100; i++) {
    StringBuilder value=new StringBuilder().append("value");
    for (int j=0; j < i; j++) {
      value.append(" ").append("value");
    }
    indexWriter.addDocument(doc().add(field("id",Integer.toString(i))).add(field("value",value.toString())).boost(i).build());
  }
  IndexSearcher searcher=new IndexSearcher(indexWriter.getReader());
  TermQuery query=new TermQuery(new Term("value","value"));
  TopDocs topDocs=searcher.search(query,100);
  assertThat(100,equalTo(topDocs.totalHits));
  for (int i=0; i < topDocs.scoreDocs.length; i++) {
    Document doc=searcher.doc(topDocs.scoreDocs[i].doc);
    assertThat(doc.get("id"),equalTo(Integer.toString(100 - i - 1)));
  }
  indexWriter.close();
}
