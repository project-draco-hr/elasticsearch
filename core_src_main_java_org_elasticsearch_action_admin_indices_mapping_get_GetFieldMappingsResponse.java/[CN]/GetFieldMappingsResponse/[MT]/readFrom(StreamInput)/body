{
  super.readFrom(in);
  int size=in.readVInt();
  ImmutableMap.Builder<String,ImmutableMap<String,ImmutableMap<String,FieldMappingMetaData>>> indexMapBuilder=ImmutableMap.builder();
  for (int i=0; i < size; i++) {
    String index=in.readString();
    int typesSize=in.readVInt();
    ImmutableMap.Builder<String,ImmutableMap<String,FieldMappingMetaData>> typeMapBuilder=ImmutableMap.builder();
    for (int j=0; j < typesSize; j++) {
      String type=in.readString();
      ImmutableMap.Builder<String,FieldMappingMetaData> fieldMapBuilder=ImmutableMap.builder();
      int fieldSize=in.readVInt();
      for (int k=0; k < fieldSize; k++) {
        fieldMapBuilder.put(in.readString(),new FieldMappingMetaData(in.readString(),in.readBytesReference()));
      }
      typeMapBuilder.put(type,fieldMapBuilder.build());
    }
    indexMapBuilder.put(index,typeMapBuilder.build());
  }
  mappings=indexMapBuilder.build();
}
