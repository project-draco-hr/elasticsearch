{
  ingestDocument.setFieldValue("new_field","foo");
  assertThat(ingestDocument.getSourceAndMetadata().get("new_field"),equalTo("foo"));
  ingestDocument.setFieldValue("_ttl","ttl");
  assertThat(ingestDocument.getSourceAndMetadata().get("_ttl"),equalTo("ttl"));
  ingestDocument.setFieldValue("_source.another_field","bar");
  assertThat(ingestDocument.getSourceAndMetadata().get("another_field"),equalTo("bar"));
  ingestDocument.setFieldValue("_ingest.new_field","new_value");
  assertThat(ingestDocument.getIngestMetadata().size(),equalTo(2));
  assertThat(ingestDocument.getIngestMetadata().get("new_field"),equalTo("new_value"));
  ingestDocument.setFieldValue("_ingest.timestamp","timestamp");
  assertThat(ingestDocument.getIngestMetadata().get("timestamp"),equalTo("timestamp"));
}
