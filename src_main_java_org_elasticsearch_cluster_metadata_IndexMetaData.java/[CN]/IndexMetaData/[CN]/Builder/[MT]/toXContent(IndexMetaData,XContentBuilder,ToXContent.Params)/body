{
  builder.startObject(indexMetaData.index(),XContentBuilder.FieldCaseConversion.NONE);
  builder.field("version",indexMetaData.version());
  builder.field("state",indexMetaData.state().toString().toLowerCase(Locale.ENGLISH));
  boolean binary=params.paramAsBoolean("binary",false);
  builder.startObject("settings");
  for (  Map.Entry<String,String> entry : indexMetaData.settings().getAsMap().entrySet()) {
    builder.field(entry.getKey(),entry.getValue());
  }
  builder.endObject();
  builder.startArray("mappings");
  for (  Map.Entry<String,MappingMetaData> entry : indexMetaData.mappings().entrySet()) {
    if (binary) {
      builder.value(entry.getValue().source().compressed());
    }
 else {
      byte[] data=entry.getValue().source().uncompressed();
      XContentParser parser=XContentFactory.xContent(data).createParser(data);
      Map<String,Object> mapping=parser.mapOrdered();
      parser.close();
      builder.map(mapping);
    }
  }
  builder.endArray();
  for (  Map.Entry<String,Custom> entry : indexMetaData.customs().entrySet()) {
    builder.startObject(entry.getKey(),XContentBuilder.FieldCaseConversion.NONE);
    lookupFactorySafe(entry.getKey()).toXContent(entry.getValue(),builder,params);
    builder.endObject();
  }
  builder.startObject("aliases");
  for (  AliasMetaData alias : indexMetaData.aliases().values()) {
    AliasMetaData.Builder.toXContent(alias,builder,params);
  }
  builder.endObject();
  builder.endObject();
}
