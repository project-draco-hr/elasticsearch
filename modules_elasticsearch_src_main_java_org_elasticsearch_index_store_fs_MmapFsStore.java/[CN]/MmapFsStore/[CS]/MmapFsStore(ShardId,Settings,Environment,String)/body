{
  super(shardId,indexSettings);
  this.syncToDisk=componentSettings.getAsBoolean("syncToDisk",false);
  this.fsDirectory=new CustomMMapDirectory(createStoreFilePath(environment.workWithClusterFile(),localNodeId,shardId,MAIN_INDEX_SUFFIX),syncToDisk);
  SwitchDirectory switchDirectory=buildSwitchDirectoryIfNeeded(fsDirectory);
  if (switchDirectory != null) {
    suggestUseCompoundFile=false;
    logger.debug("Using [MmapFs] Store with path [{}], cache [true] with extensions [{}]",new Object[]{fsDirectory.getFile(),switchDirectory.primaryExtensions()});
    directory=switchDirectory;
  }
 else {
    suggestUseCompoundFile=true;
    directory=fsDirectory;
    logger.debug("Using [MmapFs] Store with path [{}]",fsDirectory.getFile());
  }
}
