{
  byte[] html=copyToBytesFromClasspath("/org/elasticsearch/index/mapper/attachment/test/sample-files/" + filename);
  XContentBuilder xcb=jsonBuilder().startObject().field("_id",1).startObject("file").field("_name",filename).field("_content",html);
  if (forcedLanguage.length > 0) {
    xcb.field("_language",forcedLanguage[0]);
  }
  xcb.endObject().endObject();
  ParseContext.Document doc=docMapper.parse(xcb.bytes()).rootDoc();
  assertThat(doc.get(docMapper.mappers().getMapper("file.language").names().indexName()),equalTo(expected));
}
