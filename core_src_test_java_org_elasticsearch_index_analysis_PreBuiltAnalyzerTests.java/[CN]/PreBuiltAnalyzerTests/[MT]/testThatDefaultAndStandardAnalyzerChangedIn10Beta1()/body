{
  Analyzer currentStandardAnalyzer=PreBuiltAnalyzers.STANDARD.getAnalyzer(Version.V_1_0_0_Beta1);
  Analyzer currentDefaultAnalyzer=PreBuiltAnalyzers.DEFAULT.getAnalyzer(Version.V_1_0_0_Beta1);
  assertThat(currentDefaultAnalyzer,is(currentStandardAnalyzer));
  PreBuiltAnalyzers.DEFAULT.getAnalyzer(Version.V_1_0_0_Beta1);
  final int n=scaledRandomIntBetween(10,100);
  Version version=Version.CURRENT;
  for (int i=0; i < n; i++) {
    if (version.equals(Version.V_1_0_0_Beta1)) {
      assertThat(currentDefaultAnalyzer,is(PreBuiltAnalyzers.DEFAULT.getAnalyzer(version)));
    }
 else {
      assertThat(currentDefaultAnalyzer,not(is(PreBuiltAnalyzers.DEFAULT.getAnalyzer(version))));
    }
    Analyzer analyzer=PreBuiltAnalyzers.DEFAULT.getAnalyzer(version);
    TokenStream ts=analyzer.tokenStream("foo","This is it Dude");
    ts.reset();
    CharTermAttribute charTermAttribute=ts.addAttribute(CharTermAttribute.class);
    List<String> list=new ArrayList<>();
    while (ts.incrementToken()) {
      list.add(charTermAttribute.toString());
    }
    if (version.onOrAfter(Version.V_1_0_0_Beta1)) {
      assertThat(list.size(),is(4));
      assertThat(list,contains("this","is","it","dude"));
    }
 else {
      assertThat(list.size(),is(1));
      assertThat(list,contains("dude"));
    }
    ts.close();
    version=randomVersion(random());
  }
}
