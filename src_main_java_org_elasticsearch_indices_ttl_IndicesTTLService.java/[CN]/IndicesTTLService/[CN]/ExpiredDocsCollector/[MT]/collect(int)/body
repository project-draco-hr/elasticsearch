{
  try {
    Document document=indexReader.document(doc,new UidAndRoutingFieldSelector());
    String uid=document.getFieldable(UidFieldMapper.NAME).stringValue();
    long version=UidField.loadVersion(indexReader,UidFieldMapper.TERM_FACTORY.createTerm(uid));
    docsToPurge.add(new DocToPurge(Uid.typeFromUid(uid),Uid.idFromUid(uid),version,document.get(RoutingFieldMapper.NAME)));
  }
 catch (  Exception e) {
    logger.trace("failed to collect doc",e);
  }
}
