{
  XContentBuilder builder=RestXContentBuilder.restContentBuilder(request);
  List<String> displayHeaders=buildDisplayHeaders(table,request);
  builder.startArray();
  for (int row=0; row < table.getRows().size(); row++) {
    builder.startObject();
    for (    String header : displayHeaders) {
      builder.field(header,renderValue(request,table.getAsMap().get(header).get(row).value));
    }
    builder.endObject();
  }
  builder.endArray();
  return new XContentRestResponse(request,RestStatus.OK,builder);
}
