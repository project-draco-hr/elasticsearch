{
  boolean verbose=request.paramAsBoolean("v",true);
  int[] width=buildWidths(table,request,verbose);
  Set<String> displayHeaders=buildDisplayHeaders(table,request);
  StringBuilder out=new StringBuilder();
  if (verbose) {
    for (int i=0; i < width.length; i++) {
      String headerName=table.getHeaders().get(i).value.toString();
      if (displayHeaders.contains(headerName)) {
        pad(table.getHeaders().get(i),width[i],request,out);
        out.append(" ");
      }
    }
    out.append("\n");
  }
  for (  List<Table.Cell> row : table.getRows()) {
    for (int i=0; i < width.length; i++) {
      String headerName=table.getHeaders().get(i).value.toString();
      if (displayHeaders.contains(headerName)) {
        pad(row.get(i),width[i],request,out);
        out.append(" ");
      }
    }
    out.append("\n");
  }
  return new StringRestResponse(RestStatus.OK,out.toString());
}
