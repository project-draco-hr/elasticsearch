{
  try {
    XContentBuilder builder=XContentFactory.smileBuilder().startObject().field("query",queryBuilder).endObject();
    FastByteArrayOutputStream unsafeBytes=builder.unsafeStream();
    addQuery(name,unsafeBytes.unsafeByteArray(),0,unsafeBytes.size());
  }
 catch (  IOException e) {
    throw new ElasticSearchException("Failed to add query [" + name + "]",e);
  }
}
