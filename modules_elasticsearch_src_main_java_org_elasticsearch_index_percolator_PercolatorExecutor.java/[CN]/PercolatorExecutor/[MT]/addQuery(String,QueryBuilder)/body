{
  try {
    XContentBuilder builder=XContentFactory.smileBuilder().startObject().field("query",queryBuilder).endObject();
    BytesStream unsafeBytes=builder.underlyingStream();
    addQuery(name,unsafeBytes.underlyingBytes(),0,unsafeBytes.size());
  }
 catch (  IOException e) {
    throw new ElasticSearchException("Failed to add query [" + name + "]",e);
  }
}
