{
  String mapping=XContentFactory.jsonBuilder().startObject().startObject("type").startObject("_id").field("path","my_path").endObject().endObject().endObject().string();
  Settings settings=ImmutableSettings.builder().put(IndexMetaData.SETTING_VERSION_CREATED,Version.V_1_4_2_ID).build();
  DocumentMapper docMapper=createIndex("test",settings).mapperService().documentMapperParser().parse(mapping);
  XContentBuilder builder=XContentFactory.jsonBuilder().startObject();
  builder=docMapper.idFieldMapper().toXContent(builder,ToXContent.EMPTY_PARAMS);
  builder.endObject();
  String serialized_id_mapping=builder.string();
  String expected_id_mapping=XContentFactory.jsonBuilder().startObject().startObject("_id").field("path","my_path").endObject().endObject().string();
  assertThat(serialized_id_mapping,equalTo(expected_id_mapping));
}
