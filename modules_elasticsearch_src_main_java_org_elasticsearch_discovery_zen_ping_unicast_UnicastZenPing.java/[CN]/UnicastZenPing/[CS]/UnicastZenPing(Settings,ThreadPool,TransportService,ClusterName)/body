{
  super(settings);
  this.threadPool=threadPool;
  this.transportService=transportService;
  this.clusterName=clusterName;
  List<String> hosts=Lists.newArrayList(componentSettings.getAsArray("hosts"));
  if (componentSettings.get("hosts") != null) {
    hosts.addAll(Strings.commaDelimitedListToSet(componentSettings.get("hosts")));
  }
  logger.debug("using initial hosts {}",hosts);
  List<DiscoveryNode> nodes=Lists.newArrayList();
  int idCounter=0;
  for (  String host : hosts) {
    try {
      for (      TransportAddress address : transportService.addressesFromString(host)) {
        nodes.add(new DiscoveryNode("#zen_unicast_" + (++idCounter) + "#",address));
      }
    }
 catch (    Exception e) {
      throw new ElasticSearchIllegalArgumentException("Failed to resolve address for [" + host + "]",e);
    }
  }
  this.nodes=nodes.toArray(new DiscoveryNode[nodes.size()]);
  transportService.registerHandler(UnicastPingRequestHandler.ACTION,new UnicastPingRequestHandler());
}
