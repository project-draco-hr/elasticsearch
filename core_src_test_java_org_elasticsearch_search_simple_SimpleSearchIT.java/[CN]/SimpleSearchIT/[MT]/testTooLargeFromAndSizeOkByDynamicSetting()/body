{
  createIndex("idx");
  assertAcked(client().admin().indices().prepareUpdateSettings("idx").setSettings(Settings.builder().put(DefaultSearchContext.MAX_RESULT_WINDOW,DefaultSearchContext.Defaults.MAX_RESULT_WINDOW * 2)).get());
  indexRandom(true,client().prepareIndex("idx","type").setSource("{}"));
  assertHitCount(client().prepareSearch("idx").setFrom(DefaultSearchContext.Defaults.MAX_RESULT_WINDOW).get(),1);
  assertHitCount(client().prepareSearch("idx").setSize(DefaultSearchContext.Defaults.MAX_RESULT_WINDOW + 1).get(),1);
  assertHitCount(client().prepareSearch("idx").setSize(DefaultSearchContext.Defaults.MAX_RESULT_WINDOW).setFrom(DefaultSearchContext.Defaults.MAX_RESULT_WINDOW).get(),1);
}
