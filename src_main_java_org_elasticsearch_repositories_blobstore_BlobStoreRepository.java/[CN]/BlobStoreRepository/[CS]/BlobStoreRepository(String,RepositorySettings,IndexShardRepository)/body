{
  super(repositorySettings.globalSettings());
  this.repositoryName=repositoryName;
  this.indexShardRepository=(BlobStoreIndexShardRepository)indexShardRepository;
  Map<String,String> snpashotOnlyParams=Maps.newHashMap();
  snpashotOnlyParams.put(MetaData.CONTEXT_MODE_PARAM,MetaData.CONTEXT_MODE_SNAPSHOT);
  snapshotOnlyFormatParams=new ToXContent.MapParams(snpashotOnlyParams);
  snapshotRateLimiter=getRateLimiter(repositorySettings,"max_snapshot_bytes_per_sec",new ByteSizeValue(40,ByteSizeUnit.MB));
  restoreRateLimiter=getRateLimiter(repositorySettings,"max_restore_bytes_per_sec",new ByteSizeValue(40,ByteSizeUnit.MB));
}
