{
  String msg=String.format(Locale.ROOT,"Expected header %s to be in request %s",randomHeaderKey,request.getClass().getName());
  if (request instanceof IndexRequest) {
    IndexRequest indexRequest=(IndexRequest)request;
    msg=String.format(Locale.ROOT,"Expected header %s to be in index request %s/%s/%s",randomHeaderKey,indexRequest.index(),indexRequest.type(),indexRequest.id());
  }
  assertThat(msg,context.containsKey(randomHeaderKey),is(true));
  assertThat(context.get(randomHeaderKey).toString(),is(randomHeaderValue));
}
