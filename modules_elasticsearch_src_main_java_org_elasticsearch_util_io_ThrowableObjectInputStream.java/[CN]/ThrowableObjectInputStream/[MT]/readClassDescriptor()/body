{
  int type=read();
  if (type < 0) {
    throw new EOFException();
  }
switch (type) {
case ThrowableObjectOutputStream.TYPE_EXCEPTION:
    return ObjectStreamClass.lookup(Exception.class);
case ThrowableObjectOutputStream.TYPE_STACKTRACEELEMENT:
  return ObjectStreamClass.lookup(StackTraceElement.class);
case ThrowableObjectOutputStream.TYPE_FAT_DESCRIPTOR:
return super.readClassDescriptor();
case ThrowableObjectOutputStream.TYPE_THIN_DESCRIPTOR:
String className=readUTF();
Class<?> clazz=loadClass(className);
return ObjectStreamClass.lookup(clazz);
default :
throw new StreamCorruptedException("Unexpected class descriptor type: " + type);
}
}
