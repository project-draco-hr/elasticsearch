{
  ClusterStateRequest clusterStateRequest=Requests.clusterStateRequest().filterRoutingTable(true).filterNodes(true).filteredIndexTemplates(request.param("name")).filterOutIndices();
  clusterStateRequest.listenerThreaded(false);
  client.admin().cluster().state(clusterStateRequest,new ActionListener<ClusterStateResponse>(){
    @Override public void onResponse(    ClusterStateResponse response){
      try {
        boolean templateExists=response.getState().metaData().templates().size() > 0;
        if (templateExists) {
          channel.sendResponse(new StringRestResponse(OK));
        }
 else {
          channel.sendResponse(new StringRestResponse(NOT_FOUND));
        }
      }
 catch (      Throwable e) {
        onFailure(e);
      }
    }
    @Override public void onFailure(    Throwable e){
      try {
        channel.sendResponse(new StringRestResponse(ExceptionsHelper.status(e)));
      }
 catch (      Exception e1) {
        logger.error("Failed to send failure response",e1);
      }
    }
  }
);
}
