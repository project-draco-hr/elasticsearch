{
  super(settings);
  this.operationRouting=operationRouting;
  this.transportService=transportService;
  this.discoveryService=discoveryService;
  this.threadPool=threadPool;
  this.nodeSettingsService=nodeSettingsService;
  this.discoveryNodeService=discoveryNodeService;
  this.version=version;
  this.clusterState=ClusterState.builder(clusterName).build();
  this.nodeSettingsService.setClusterService(this);
  this.nodeSettingsService.addListener(new ApplySettings());
  this.reconnectInterval=this.settings.getAsTime(SETTING_CLUSTER_SERVICE_RECONNECT_INTERVAL,TimeValue.timeValueSeconds(10));
  this.slowTaskLoggingThreshold=this.settings.getAsTime(SETTING_CLUSTER_SERVICE_SLOW_TASK_LOGGING_THRESHOLD,TimeValue.timeValueSeconds(30));
  localNodeMasterListeners=new LocalNodeMasterListeners(threadPool);
  initialBlocks=ClusterBlocks.builder().addGlobalBlock(discoveryService.getNoMasterBlock());
}
