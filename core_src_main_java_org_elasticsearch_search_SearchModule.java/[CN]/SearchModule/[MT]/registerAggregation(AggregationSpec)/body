{
  namedWriteableRegistry.register(AggregationBuilder.class,spec.aggregationName.getPreferredName(),spec.builderReader);
  aggregationParserRegistry.register(spec.aggregationParser,spec.aggregationName);
  for (  Map.Entry<String,Writeable.Reader<? extends InternalAggregation>> t : spec.resultReaders.entrySet()) {
    String writeableName=t.getKey();
    Writeable.Reader<? extends InternalAggregation> internalReader=t.getValue();
    namedWriteableRegistry.register(InternalAggregation.class,writeableName,internalReader);
  }
}
