{
  if (false == transportClient) {
    aggregationParserRegistry.register(spec.parser,spec.name);
  }
  namedWriteables.add(new Entry(AggregationBuilder.class,spec.name.getPreferredName(),spec.builderReader));
  for (  Map.Entry<String,Writeable.Reader<? extends InternalAggregation>> t : spec.resultReaders.entrySet()) {
    String writeableName=t.getKey();
    Writeable.Reader<? extends InternalAggregation> internalReader=t.getValue();
    namedWriteables.add(new Entry(InternalAggregation.class,writeableName,internalReader));
  }
}
