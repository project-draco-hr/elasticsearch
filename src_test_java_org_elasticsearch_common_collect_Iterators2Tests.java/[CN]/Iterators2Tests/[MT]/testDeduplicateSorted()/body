{
  final List<String> list=Lists.newArrayList();
  for (int i=randomInt(100); i >= 0; --i) {
    final int frequency=randomIntBetween(1,10);
    final String s=randomAsciiOfLength(randomIntBetween(2,20));
    for (int j=0; j < frequency; ++j) {
      list.add(s);
    }
  }
  CollectionUtil.introSort(list);
  final List<String> deduplicated=Lists.newArrayList();
  for (Iterator<String> it=Iterators2.deduplicateSorted(list.iterator(),Ordering.natural()); it.hasNext(); ) {
    deduplicated.add(it.next());
  }
  assertEquals(Lists.newArrayList(Sets.newTreeSet(list)),deduplicated);
}
