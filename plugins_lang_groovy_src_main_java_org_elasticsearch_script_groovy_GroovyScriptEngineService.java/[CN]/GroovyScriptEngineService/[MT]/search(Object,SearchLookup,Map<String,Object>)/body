{
  try {
    Class scriptClass=(Class)compiledScript;
    Script scriptObject=(Script)scriptClass.newInstance();
    Binding binding=new Binding();
    binding.getVariables().putAll(lookup.asMap());
    if (vars != null) {
      binding.getVariables().putAll(vars);
    }
    scriptObject.setBinding(binding);
    return new GroovySearchScript(scriptObject,lookup);
  }
 catch (  Exception e) {
    throw new ScriptException("failed to build search script",e);
  }
}
