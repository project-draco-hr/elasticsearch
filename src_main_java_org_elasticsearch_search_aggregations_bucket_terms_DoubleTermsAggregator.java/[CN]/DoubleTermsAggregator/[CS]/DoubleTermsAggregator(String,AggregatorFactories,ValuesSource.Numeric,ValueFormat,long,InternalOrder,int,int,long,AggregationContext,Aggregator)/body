{
  super(name,BucketAggregationMode.PER_BUCKET,factories,estimatedBucketCount,aggregationContext,parent);
  this.valuesSource=valuesSource;
  this.formatter=format != null ? format.formatter() : null;
  this.order=InternalOrder.validate(order,this);
  this.requiredSize=requiredSize;
  this.shardSize=shardSize;
  this.minDocCount=minDocCount;
  bucketOrds=new LongHash(estimatedBucketCount,aggregationContext.bigArrays());
}
