{
  QueryBuilder<?> filter=context.parseInnerQueryBuilder();
  if (filter == null) {
    throw new ParsingException(null,"filter cannot be null in filter aggregation [{}]",aggregationName);
  }
  FilterAggregator.Factory factory=new FilterAggregator.Factory(aggregationName,filter == null ? new MatchAllQueryBuilder() : filter);
  return factory;
}
