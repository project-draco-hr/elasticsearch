{
  final SnapshotId snapshotId=new SnapshotId(randomAsciiOfLength(randomIntBetween(2,8)),UUIDs.randomBase64UUID());
  final Snapshot original=new Snapshot(randomAsciiOfLength(randomIntBetween(2,8)),snapshotId);
  final BytesStreamOutput out=new BytesStreamOutput();
  original.writeTo(out);
  final ByteBufferStreamInput in=new ByteBufferStreamInput(ByteBuffer.wrap(out.bytes().toBytes()));
  assertThat(new Snapshot(in),equalTo(original));
}
