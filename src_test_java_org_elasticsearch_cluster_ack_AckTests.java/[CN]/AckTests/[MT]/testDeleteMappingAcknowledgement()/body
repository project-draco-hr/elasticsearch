{
  client().admin().indices().prepareCreate("test").addMapping("type1","field1","type=string").get();
  ensureGreen();
  client().prepareIndex("test","type1").setSource("field1","value1");
  GetMappingsResponse getMappingsResponse=client().admin().indices().prepareGetMappings("test").addTypes("type1").get();
  assertThat(getMappingsResponse.mappings().get("test").get("type1"),notNullValue());
  assertAcked(client().admin().indices().prepareDeleteMapping("test").setType("type1"));
  for (  Client client : clients()) {
    getMappingsResponse=client.admin().indices().prepareGetMappings("test").addTypes("type1").setLocal(true).get();
    assertThat(getMappingsResponse.mappings().size(),equalTo(0));
  }
}
