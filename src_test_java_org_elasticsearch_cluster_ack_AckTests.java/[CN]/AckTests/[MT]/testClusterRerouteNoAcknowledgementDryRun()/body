{
  client().admin().indices().prepareCreate("test").setSettings(settingsBuilder().put("number_of_shards",atLeast(cluster().size())).put("number_of_replicas",0)).get();
  ensureGreen();
  MoveAllocationCommand moveAllocationCommand=getAllocationCommand();
  ClusterRerouteResponse clusterRerouteResponse=client().admin().cluster().prepareReroute().setTimeout("0s").setDryRun(true).add(moveAllocationCommand).get();
  assertThat(clusterRerouteResponse.isAcknowledged(),equalTo(true));
}
