{
  assertAcked(client().admin().indices().prepareCreate("test").setSettings(ImmutableSettings.settingsBuilder().put(MockFSDirectoryService.CHECK_INDEX_ON_CLOSE,false).build()));
  index("test","type","1","f",1);
  assertAcked(client().admin().indices().preparePutWarmer("custom_warmer").setSearchRequest(client().prepareSearch("test").setTypes("test").setQuery(QueryBuilders.matchAllQuery())));
  assertAcked(client().admin().indices().prepareDeleteWarmer().setIndices("test").setNames("custom_warmer"));
  for (  Client client : clients()) {
    GetWarmersResponse getWarmersResponse=client.admin().indices().prepareGetWarmers().setLocal(true).get();
    assertThat(getWarmersResponse.warmers().size(),equalTo(0));
  }
}
