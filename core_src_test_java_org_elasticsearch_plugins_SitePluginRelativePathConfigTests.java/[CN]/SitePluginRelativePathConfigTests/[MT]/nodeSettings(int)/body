{
  String cwdToRoot=getRelativePath(PathUtils.get(".").toAbsolutePath());
  Path pluginDir=PathUtils.get(cwdToRoot,relativizeToRootIfNecessary(getDataPath("/org/elasticsearch/plugins")).toString());
  Path tempDir=createTempDir();
  boolean useRelativeInMiddleOfPath=randomBoolean();
  if (useRelativeInMiddleOfPath) {
    pluginDir=PathUtils.get(tempDir.toString(),getRelativePath(tempDir),pluginDir.toString());
  }
  return settingsBuilder().put(super.nodeSettings(nodeOrdinal)).put("path.plugins",pluginDir).put("force.http.enabled",true).build();
}
