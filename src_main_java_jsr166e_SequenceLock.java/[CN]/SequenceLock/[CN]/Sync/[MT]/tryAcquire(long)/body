{
  Thread current=Thread.currentThread();
  long c=getState();
  if ((c & 1L) == 0L) {
    if (compareAndSetState(c,c + 1L)) {
      holds=acquires;
      setExclusiveOwnerThread(current);
      return true;
    }
  }
 else   if (current == getExclusiveOwnerThread()) {
    holds+=acquires;
    return true;
  }
  return false;
}
