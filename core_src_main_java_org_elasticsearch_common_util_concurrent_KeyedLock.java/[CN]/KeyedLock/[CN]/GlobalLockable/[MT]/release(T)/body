{
  KeyLock keyLock=threadLocal.get();
  if (keyLock == null) {
    throw new IllegalStateException("Lock not acquired");
  }
  try {
    release(key,keyLock);
  }
  finally {
    lock.readLock().unlock();
  }
}
