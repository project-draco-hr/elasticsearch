{
  KeyLock lock=threadLocal.get();
  if (lock == null) {
    throw new IllegalStateException("Lock not acquired");
  }
  release(key,lock);
}
