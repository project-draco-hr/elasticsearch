{
  BytesStreamOutput out=new BytesStreamOutput();
  QueryParsingException queryParsingException=new QueryParsingException(new Index("foo"),1,2,"foobar",null);
  Throwable ex=new Throwable("wtf",queryParsingException);
  out.writeThrowable(ex);
  StreamInput in=StreamInput.wrap(out.bytes());
  Throwable throwable=in.readThrowable();
  assertEquals("wtf",throwable.getMessage());
  assertTrue(throwable instanceof ElasticsearchException);
  QueryParsingException e=(QueryParsingException)throwable.getCause();
  assertEquals(queryParsingException.index(),e.index());
  assertEquals(queryParsingException.getMessage(),e.getMessage());
  assertEquals(queryParsingException.getLineNumber(),e.getLineNumber());
  assertEquals(queryParsingException.getColumnNumber(),e.getColumnNumber());
}
