{
  super(settings,clusterName,threadPool,transportService,clusterService,nodeSettingsService,discoveryNodeService,pingService,Version.CURRENT,discoverySettings);
  if (settings.getAsBoolean("cloud.enabled",true)) {
    ImmutableList<? extends ZenPing> zenPings=pingService.zenPings();
    UnicastZenPing unicastZenPing=null;
    for (    ZenPing zenPing : zenPings) {
      if (zenPing instanceof UnicastZenPing) {
        unicastZenPing=(UnicastZenPing)zenPing;
        break;
      }
    }
    if (unicastZenPing != null) {
      unicastZenPing.addHostsProvider(new GceUnicastHostsProvider(settings,gceComputeService,transportService,networkService));
      pingService.zenPings(ImmutableList.of(unicastZenPing));
    }
 else {
      logger.warn("failed to apply gce unicast discovery, no unicast ping found");
    }
  }
}
