{
  ClusterBlockException clusterBlockException=state.blocks().globalBlockedException(ClusterBlockLevel.METADATA_WRITE);
  if (clusterBlockException != null) {
    return clusterBlockException;
  }
  return state.blocks().indicesBlockedException(ClusterBlockLevel.READ,state.metaData().concreteIndices(request.indicesOptions(),request.indices()));
}
