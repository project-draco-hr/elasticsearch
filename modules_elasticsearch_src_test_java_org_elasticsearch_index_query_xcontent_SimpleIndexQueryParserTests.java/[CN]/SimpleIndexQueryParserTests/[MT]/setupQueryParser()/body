{
  Settings settings=ImmutableSettings.settingsBuilder().put("index.cache.filter.type","none").build();
  Index index=new Index("test");
  Injector injector=new ModulesBuilder().add(new SettingsModule(settings),new QueryParserCacheModule(settings),new ScriptModule(),new MapperServiceModule(),new IndexSettingsModule(settings),new IndexCacheModule(settings),new AnalysisModule(settings),new IndexEngineModule(settings),new SimilarityModule(settings),new IndexQueryParserModule(settings),new IndexNameModule(index)).createInjector();
  injector.getInstance(MapperService.class).type("person").parse(copyToBytesFromClasspath("/org/elasticsearch/index/query/xcontent/data.json"));
  this.queryParser=injector.getInstance(IndexQueryParserService.class);
}
