{
  super(settings);
  this.threadPool=threadPool;
  this.transportService=transportService;
  this.indicesService=indicesService;
  int concurrentStreams=componentSettings.getAsInt("concurrent_streams",5);
  this.concurrentStreamPool=DynamicExecutors.newScalingThreadPool(1,concurrentStreams,TimeValue.timeValueSeconds(5).millis(),EsExecutors.daemonThreadFactory(settings,"[recovery_stream]"));
  this.fileChunkSize=componentSettings.getAsBytesSize("file_chunk_size",new ByteSizeValue(100,ByteSizeUnit.KB));
  this.translogOps=componentSettings.getAsInt("translog_ops",1000);
  this.translogSize=componentSettings.getAsBytesSize("translog_size",new ByteSizeValue(100,ByteSizeUnit.KB));
  this.compress=componentSettings.getAsBoolean("compress",true);
  logger.debug("using concurrent_streams [{}], file_chunk_size [{}], translog_size [{}], translog_ops [{}], and compress [{}]",concurrentStreams,fileChunkSize,translogOps,translogSize,compress);
  transportService.registerHandler(Actions.START_RECOVERY,new StartRecoveryTransportRequestHandler());
}
