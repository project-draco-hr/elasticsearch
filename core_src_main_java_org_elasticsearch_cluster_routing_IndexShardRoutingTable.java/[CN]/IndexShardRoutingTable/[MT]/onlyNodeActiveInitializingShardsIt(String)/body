{
  ArrayList<ShardRouting> ordered=new ArrayList<>(activeShards.size() + allInitializingShards.size());
  for (int i=0; i < activeShards.size(); i++) {
    ShardRouting shardRouting=activeShards.get(i);
    if (nodeId.equals(shardRouting.currentNodeId())) {
      ordered.add(shardRouting);
    }
  }
  for (int i=0; i < allInitializingShards.size(); i++) {
    ShardRouting shardRouting=allInitializingShards.get(i);
    if (nodeId.equals(shardRouting.currentNodeId())) {
      ordered.add(shardRouting);
    }
  }
  return new PlainShardIterator(shardId,ordered);
}
