{
  int iShardId=in.readVInt();
  boolean allocatedPostApi=in.readBoolean();
  Builder builder=new Builder(new ShardId(index,iShardId),allocatedPostApi);
  int size=in.readVInt();
  for (int i=0; i < size; i++) {
    ImmutableShardRouting shard=ImmutableShardRouting.readShardRoutingEntry(in,index,iShardId);
    builder.addShard(shard);
  }
  return builder.build();
}
