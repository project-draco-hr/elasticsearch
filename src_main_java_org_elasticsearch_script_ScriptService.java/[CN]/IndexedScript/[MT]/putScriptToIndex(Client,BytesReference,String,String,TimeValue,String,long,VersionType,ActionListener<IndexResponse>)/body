{
  try {
    scriptLang=validateScriptLanguage(scriptLang);
    validate(scriptBytes,scriptLang);
    IndexRequest indexRequest=new IndexRequest(SCRIPT_INDEX,scriptLang,id);
    indexRequest.listenerThreaded(false);
    indexRequest.operationThreaded(false);
    indexRequest.version(version);
    indexRequest.versionType(versionType);
    indexRequest.refresh(true);
    indexRequest.source(scriptBytes,true);
    if (timeout != null) {
      indexRequest.timeout(timeout);
    }
    if (sOpType != null) {
      indexRequest.opType(IndexRequest.OpType.fromString(sOpType));
    }
    client.index(indexRequest,listener);
  }
 catch (  Throwable t) {
    listener.onFailure(t);
  }
}
