{
  Sigar sigar=sigarService.sigar();
  ProcessStats stats=new ProcessStats();
  stats.timestamp=System.currentTimeMillis();
  stats.openFileDescriptors=JmxProcessProbe.getOpenFileDescriptorCount();
  try {
    if (stats.openFileDescriptors == -1) {
      stats.openFileDescriptors=sigar.getProcFd(sigar.getPid()).getTotal();
    }
    ProcCpu cpu=sigar.getProcCpu(sigar.getPid());
    stats.cpu=new ProcessStats.Cpu();
    stats.cpu.percent=(short)(cpu.getPercent() * 100);
    stats.cpu.sys=cpu.getSys();
    stats.cpu.user=cpu.getUser();
    stats.cpu.total=cpu.getTotal();
  }
 catch (  SigarException e) {
  }
  try {
    ProcMem mem=sigar.getProcMem(sigar.getPid());
    stats.mem=new ProcessStats.Mem();
    stats.mem.totalVirtual=mem.getSize();
    stats.mem.resident=mem.getResident();
    stats.mem.share=mem.getShare();
  }
 catch (  SigarException e) {
  }
  return stats;
}
