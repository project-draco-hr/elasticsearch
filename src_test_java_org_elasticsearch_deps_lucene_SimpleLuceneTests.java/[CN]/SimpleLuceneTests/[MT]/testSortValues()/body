{
  Directory dir=new RAMDirectory();
  IndexWriter indexWriter=new IndexWriter(dir,new IndexWriterConfig(Lucene.VERSION,Lucene.STANDARD_ANALYZER));
  for (int i=0; i < 10; i++) {
    Document document=new Document();
    document.add(new TextField("str",new String(new char[]{(char)(97 + i),(char)(97 + i)}),Field.Store.YES));
    indexWriter.addDocument(document);
  }
  IndexReader reader=DirectoryReader.open(indexWriter,true);
  IndexSearcher searcher=new IndexSearcher(reader);
  TopFieldDocs docs=searcher.search(new MatchAllDocsQuery(),null,10,new Sort(new SortField("str",SortField.Type.STRING)));
  for (int i=0; i < 10; i++) {
    FieldDoc fieldDoc=(FieldDoc)docs.scoreDocs[i];
    assertThat((BytesRef)fieldDoc.fields[0],equalTo(new BytesRef(new String(new char[]{(char)(97 + i),(char)(97 + i)}))));
  }
}
