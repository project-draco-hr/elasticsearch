{
  List<ShardStats> shardStats=Lists.newArrayList();
  for (  String index : indices()) {
    IndexService indexService=indexService(index);
    if (indexService == null) {
      continue;
    }
    for (    int shardId : indexService.shardIds()) {
      IndexShard indexShard=indexService.shard(shardId);
      if (indexShard == null) {
        continue;
      }
      shardStats.add(new ShardStats(indexShard,flags));
    }
  }
  return shardStats.toArray(new ShardStats[shardStats.size()]);
}
