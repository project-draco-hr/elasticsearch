{
  removeIndex(index,reason,true,new IndicesService.IndexCloseListener(){
    @Override public void onAllShardsClosed(    Index index,    List<Throwable> failures){
      try {
        nodeEnv.deleteIndexDirectorySafe(index);
        logger.debug("deleted index [{}] from filesystem - failures {}",index,failures);
      }
 catch (      Exception e) {
        for (        Throwable t : failures) {
          e.addSuppressed(t);
        }
        logger.debug("failed to deleted index [{}] from filesystem",e,index);
      }
    }
    @Override public void onShardClosed(    ShardId shardId){
      try {
        nodeEnv.deleteShardDirectorySafe(shardId);
        logger.debug("deleted shard [{}] from filesystem",shardId);
      }
 catch (      IOException e) {
        logger.warn("Can't delete shard {} ",e,shardId);
      }
    }
    @Override public void onShardCloseFailed(    ShardId shardId,    Throwable t){
    }
  }
);
}
