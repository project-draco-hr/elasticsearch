{
  builder.startObject("nodes");
  for (  DiscoveryNode node : nodes) {
    builder.startObject(node.getId(),XContentBuilder.FieldCaseConversion.NONE);
    builder.field("name",node.name());
    builder.field("transport_address",node.getAddress());
    if (!node.attributes().isEmpty()) {
      builder.startObject("attributes");
      for (      Map.Entry<String,String> attr : node.attributes().entrySet()) {
        builder.field(attr.getKey(),attr.getValue());
      }
      builder.endObject();
    }
    builder.endObject();
  }
  builder.endObject();
  builder.startArray("shards");
  for (  ClusterSearchShardsGroup group : groups) {
    group.toXContent(builder,params);
  }
  builder.endArray();
  return builder;
}
