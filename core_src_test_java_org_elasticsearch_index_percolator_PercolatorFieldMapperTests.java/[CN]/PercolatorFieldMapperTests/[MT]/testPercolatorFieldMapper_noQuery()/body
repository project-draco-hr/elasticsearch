{
  ParsedDocument doc=mapperService.documentMapper(PercolatorFieldMapper.TYPE_NAME).parse("test",PercolatorFieldMapper.TYPE_NAME,"1",XContentFactory.jsonBuilder().startObject().endObject().bytes());
  assertThat(doc.rootDoc().getFields(PercolatorFieldMapper.EXTRACTED_TERMS_FULL_FIELD_NAME).length,equalTo(0));
  try {
    mapperService.documentMapper(PercolatorFieldMapper.TYPE_NAME).parse("test",PercolatorFieldMapper.TYPE_NAME,"1",XContentFactory.jsonBuilder().startObject().nullField("query").endObject().bytes());
  }
 catch (  MapperParsingException e) {
    assertThat(e.getDetailedMessage(),containsString("query malformed, must start with start_object"));
  }
}
