{
  IndexService indexService=createIndex("test",Settings.EMPTY);
  mapperService=indexService.mapperService();
  String mapper=XContentFactory.jsonBuilder().startObject().startObject("type").startObject("properties").startObject("field").field("type","string").endObject().endObject().endObject().endObject().string();
  mapperService.merge("type",new CompressedXContent(mapper),true,true);
  String percolatorMapper=XContentFactory.jsonBuilder().startObject().startObject(PercolatorService.TYPE_NAME).startObject("properties").startObject("query").field("type","percolator").endObject().endObject().endObject().endObject().string();
  mapperService.merge(PercolatorService.TYPE_NAME,new CompressedXContent(percolatorMapper),true,true);
}
