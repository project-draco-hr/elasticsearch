{
  builder.startObject();
{
    builder.startObject("shard");
{
      builder.field("index",shard.getIndexName());
      builder.field("index_uuid",shard.getIndex().getUUID());
      builder.field("id",shard.getId());
      builder.field("primary",primary);
    }
    builder.endObject();
    builder.field("assigned",this.assignedNodeId != null);
    if (assignedNodeId != null) {
      builder.field("assigned_node_id",this.assignedNodeId);
    }
    if (unassignedInfo != null) {
      unassignedInfo.toXContent(builder,params);
      long delay=unassignedInfo.getLastComputedLeftDelayNanos();
      builder.field("allocation_delay",TimeValue.timeValueNanos(delay));
      builder.field("allocation_delay_ms",TimeValue.timeValueNanos(delay).millis());
      builder.field("remaining_delay",TimeValue.timeValueNanos(remainingDelayNanos));
      builder.field("remaining_delay_ms",TimeValue.timeValueNanos(remainingDelayNanos).millis());
    }
    builder.startObject("nodes");
    for (    NodeExplanation explanation : nodeExplanations.values()) {
      explanation.toXContent(builder,params);
    }
    builder.endObject();
  }
  builder.endObject();
  return builder;
}
