{
  builder.startObject();
{
    builder.startObject("shard");
{
      builder.field("index",shard.getIndexName());
      builder.field("index_uuid",shard.getIndex().getUUID());
      builder.field("id",shard.getId());
      builder.field("primary",primary);
    }
    builder.endObject();
    builder.field("assigned",this.assignedNodeId != null);
    if (assignedNodeId != null) {
      builder.field("assigned_node_id",this.assignedNodeId);
    }
    if (unassignedInfo != null) {
      unassignedInfo.toXContent(builder,params);
    }
    builder.startObject("nodes");
    for (    Map.Entry<DiscoveryNode,Float> entry : nodeWeights.entrySet()) {
      DiscoveryNode node=entry.getKey();
      builder.startObject(node.getId());
{
        builder.field("node_name",node.getName());
        builder.startObject("node_attributes");
{
          for (          ObjectObjectCursor<String,String> attrKV : node.attributes()) {
            builder.field(attrKV.key,attrKV.value);
          }
        }
        builder.endObject();
        Decision d=nodeToDecision.get(node);
        if (node.getId().equals(assignedNodeId)) {
          builder.field("final_decision","CURRENTLY_ASSIGNED");
        }
 else {
          builder.field("final_decision",d.type().toString());
        }
        builder.field("weight",entry.getValue());
        d.toXContent(builder,params);
      }
      builder.endObject();
    }
    builder.endObject();
  }
  builder.endObject();
  return builder;
}
