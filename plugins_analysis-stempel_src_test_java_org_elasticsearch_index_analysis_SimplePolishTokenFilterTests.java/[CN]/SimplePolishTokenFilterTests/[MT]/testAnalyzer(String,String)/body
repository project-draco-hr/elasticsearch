{
  Index index=new Index("test");
  Settings settings=Settings.settingsBuilder().put(IndexMetaData.SETTING_VERSION_CREATED,Version.CURRENT).put("path.home",createTempDir()).build();
  AnalysisService analysisService=createAnalysisService(index,settings);
  Analyzer analyzer=analysisService.analyzer("polish").analyzer();
  TokenStream ts=analyzer.tokenStream("test",source);
  CharTermAttribute term1=ts.addAttribute(CharTermAttribute.class);
  ts.reset();
  for (  String expected : expected_terms) {
    assertThat(ts.incrementToken(),equalTo(true));
    assertThat(term1.toString(),equalTo(expected));
  }
}
