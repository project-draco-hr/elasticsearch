{
  BytesStreamOutput out=new BytesStreamOutput();
  NamedWriteableRegistry namedWriteableRegistry=new NamedWriteableRegistry();
  namedWriteableRegistry.registerPrototype(new TermQueryBuilder(null,null));
  try {
    namedWriteableRegistry.registerPrototype(new TermQueryBuilder(null,null));
    fail("registerPrototype should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),equalTo("named writeable of type [" + TermQueryBuilder.class.getName() + "] with name ["+ TermQueryBuilder.NAME+ "] is already registered by type ["+ TermQueryBuilder.class.getName()+ "]"));
  }
}
