{
  BytesStreamOutput out=new BytesStreamOutput();
  NamedWriteableRegistry namedWriteableRegistry=new NamedWriteableRegistry();
  namedWriteableRegistry.registerPrototype(new TermQueryBuilder(null,null));
  TermQueryBuilder termQueryBuilder=new TermQueryBuilder(randomAsciiOfLengthBetween(1,10),randomAsciiOfLengthBetween(1,10));
  out.writeNamedWriteable(termQueryBuilder);
  StreamInput in=new FilterStreamInput(StreamInput.wrap(out.bytes().toBytes()),namedWriteableRegistry);
  QueryBuilder queryBuilder=in.readNamedWriteable();
  assertThat(queryBuilder,equalTo((QueryBuilder)termQueryBuilder));
}
