{
  int successfulShards=0;
  int failedShards=0;
  final List<ShardStatus> shards=newArrayList();
  for (int i=0; i < shardsResponses.length(); i++) {
    Object resp=shardsResponses.get(i);
    if (resp instanceof ShardStatus) {
      shards.add((ShardStatus)resp);
      successfulShards++;
    }
 else {
      failedShards++;
    }
  }
  return new IndicesStatusResponse(shards.toArray(new ShardStatus[shards.size()]),clusterState,successfulShards,failedShards);
}
