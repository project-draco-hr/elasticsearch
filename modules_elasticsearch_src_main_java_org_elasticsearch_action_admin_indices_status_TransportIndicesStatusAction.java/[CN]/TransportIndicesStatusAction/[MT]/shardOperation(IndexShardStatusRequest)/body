{
  InternalIndexShard indexShard=(InternalIndexShard)indicesService.indexServiceSafe(request.index()).shard(request.shardId());
  ShardStatus shardStatus=new ShardStatus(indexShard.routingEntry());
  shardStatus.state=indexShard.state();
  try {
    shardStatus.storeSize=indexShard.store().estimateSize();
  }
 catch (  IOException e) {
  }
  shardStatus.estimatedFlushableMemorySize=indexShard.estimateFlushableMemorySize();
  shardStatus.translogId=indexShard.translog().currentId();
  shardStatus.translogOperations=indexShard.translog().size();
  Engine.Searcher searcher=indexShard.searcher();
  try {
    shardStatus.docs=new ShardStatus.Docs();
    shardStatus.docs.numDocs=searcher.reader().numDocs();
    shardStatus.docs.maxDoc=searcher.reader().maxDoc();
    shardStatus.docs.deletedDocs=searcher.reader().numDeletedDocs();
  }
  finally {
    searcher.release();
  }
  return shardStatus;
}
