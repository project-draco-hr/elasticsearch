{
  InputStream yaml=getClass().getResourceAsStream("/config/elasticsearch.yaml");
  InputStream properties=getClass().getResourceAsStream("/config/elasticsearch.properties");
  Path home=createTempDir();
  Path config=home.resolve("config");
  Files.createDirectory(config);
  Files.copy(yaml,config.resolve("elasticsearch.yaml"));
  Files.copy(properties,config.resolve("elasticsearch.properties"));
  expectedException.expect(SettingsException.class);
  expectedException.expectMessage("multiple settings files found with suffixes: ");
  expectedException.expectMessage("yaml");
  expectedException.expectMessage("properties");
  InternalSettingsPreparer.prepareSettings(settingsBuilder().put("config.ignore_system_properties",true).put("path.home",home).build(),true);
}
