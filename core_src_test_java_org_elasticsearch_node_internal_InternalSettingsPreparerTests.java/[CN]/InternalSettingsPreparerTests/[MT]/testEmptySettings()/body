{
  Settings settings=InternalSettingsPreparer.prepareSettings(Settings.EMPTY);
  assertNotNull(settings.get("name"));
  assertNotNull(settings.get(ClusterName.SETTING));
  assertEquals(settings.toString(),2,settings.names().size());
  Environment env=InternalSettingsPreparer.prepareEnvironment(baseEnvSettings,null);
  settings=env.settings();
  assertNotNull(settings.get("name"));
  assertNotNull(settings.get(ClusterName.SETTING));
  assertEquals(settings.toString(),3,settings.names().size());
  String home=baseEnvSettings.get("path.home");
  String configDir=env.configFile().toString();
  assertTrue(configDir,configDir.startsWith(home));
}
