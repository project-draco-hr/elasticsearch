{
  final ClassLoader classLoader=URLClassLoader.newInstance(new URL[0]);
  Settings settings=settingsBuilder().put("foo","bar").put("path.home",createTempDir()).classLoader(classLoader).build();
  Tuple<Settings,Environment> tuple=InternalSettingsPreparer.prepareSettings(settings,randomBoolean());
  Settings preparedSettings=tuple.v1();
  assertThat(preparedSettings.getClassLoaderIfSet(),is(classLoader));
}
