{
  super.writeTo(out);
  out.writeByte(percolatorTypeId);
  out.writeVLong(requestedSize);
  out.writeVLong(count);
  out.writeVInt(matches.length);
  for (  BytesRef match : matches) {
    out.writeBytesRef(match);
  }
  out.writeVLong(scores.length);
  for (  float score : scores) {
    out.writeFloat(score);
  }
  out.writeVInt(hls.size());
  for (  Map<String,HighlightField> hl : hls) {
    out.writeVInt(hl.size());
    for (    Map.Entry<String,HighlightField> entry : hl.entrySet()) {
      out.writeString(entry.getKey());
      entry.getValue().writeTo(out);
    }
  }
  out.writeOptionalStreamable(aggregations);
  if (reducers == null) {
    out.writeBoolean(false);
  }
 else {
    out.writeBoolean(true);
    out.writeVInt(reducers.size());
    for (    Reducer reducer : reducers) {
      out.writeBytesReference(reducer.type().stream());
      reducer.writeTo(out);
    }
  }
}
