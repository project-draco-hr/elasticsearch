{
synchronized (mutex) {
    return new MemorySnapshot(currentId(),operations.toArray(new Operation[0]));
  }
}
