{
synchronized (mutex) {
    MemorySnapshot memorySnapshot=(MemorySnapshot)snapshot;
    if (currentId() != snapshot.translogId()) {
      return snapshot();
    }
    MemorySnapshot newSnapshot=new MemorySnapshot(currentId(),operations,operationCounter.get());
    newSnapshot.seekForward(memorySnapshot.position());
    return newSnapshot;
  }
}
