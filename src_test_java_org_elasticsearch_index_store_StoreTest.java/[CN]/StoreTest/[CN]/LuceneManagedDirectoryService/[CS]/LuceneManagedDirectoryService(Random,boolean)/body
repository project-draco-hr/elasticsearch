{
  super(new ShardId("fake",1),ImmutableSettings.EMPTY);
  this.dirs=new Directory[1 + random.nextInt(5)];
  for (int i=0; i < dirs.length; i++) {
    dirs[i]=newDirectory(random);
    if (dirs[i] instanceof MockDirectoryWrapper) {
      ((MockDirectoryWrapper)dirs[i]).setPreventDoubleWrite(preventDoubleWrite);
      ((MockDirectoryWrapper)dirs[i]).setEnableVirusScanner(false);
    }
  }
  this.random=random;
}
