{
  super(name,factories,aggregationContext,parent,metaData);
  this.parentType=parentType;
  this.childFilter=new ApplyAcceptedDocsFilter(aggregationContext.searchContext().filterCache().cache(childFilter));
  this.parentFilter=aggregationContext.searchContext().fixedBitSetFilterCache().getFixedBitSetFilter(parentFilter);
  this.parentOrdToBuckets=aggregationContext.bigArrays().newLongArray(maxOrd,false);
  this.parentOrdToBuckets.fill(0,maxOrd,-1);
  this.parentOrdToOtherBuckets=new LongObjectPagedHashMap<>(aggregationContext.bigArrays());
  this.valuesSource=valuesSource;
}
