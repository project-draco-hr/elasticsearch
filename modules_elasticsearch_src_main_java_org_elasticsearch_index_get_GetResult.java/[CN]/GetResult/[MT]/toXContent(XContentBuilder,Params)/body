{
  if (!exists()) {
    builder.startObject();
    builder.field(Fields._INDEX,index);
    builder.field(Fields._TYPE,type);
    builder.field(Fields._ID,id);
    builder.field(Fields.EXISTS,false);
    builder.endObject();
  }
 else {
    builder.startObject();
    builder.field(Fields._INDEX,index);
    builder.field(Fields._TYPE,type);
    builder.field(Fields._ID,id);
    if (version != -1) {
      builder.field(Fields._VERSION,version);
    }
    builder.field(Fields.EXISTS,true);
    if (source != null) {
      RestXContentBuilder.restDocumentSource(source.bytes(),source.offset(),source.length(),builder,params);
    }
    if (fields != null && !fields.isEmpty()) {
      builder.startObject(Fields.FIELDS);
      for (      GetField field : fields.values()) {
        if (field.values().isEmpty()) {
          continue;
        }
        if (field.values().size() == 1) {
          builder.field(field.name(),field.values().get(0));
        }
 else {
          builder.field(field.name());
          builder.startArray();
          for (          Object value : field.values()) {
            builder.value(value);
          }
          builder.endArray();
        }
      }
      builder.endObject();
    }
    builder.endObject();
  }
  return builder;
}
