{
  for (int precision=1; precision <= highestPrecisionGeohash; precision++) {
    final int size=randomBoolean() ? 0 : randomIntBetween(1,Integer.MAX_VALUE);
    final int shardSize=randomBoolean() ? -1 : 0;
    SearchResponse response=client().prepareSearch("idx").addAggregation(geohashGrid("geohashgrid").field("location").size(size).shardSize(shardSize).precision(precision)).execute().actionGet();
    assertSearchResponse(response);
    GeoHashGrid geoGrid=response.getAggregations().get("geohashgrid");
    assertThat(geoGrid.getBuckets().size(),greaterThanOrEqualTo(1));
  }
}
