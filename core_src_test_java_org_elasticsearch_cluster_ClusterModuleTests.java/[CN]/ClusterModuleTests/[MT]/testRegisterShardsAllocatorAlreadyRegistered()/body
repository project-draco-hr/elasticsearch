{
  ClusterModule module=new ClusterModule(Settings.EMPTY,clusterService,Collections.emptyList());
  try {
    module.registerShardsAllocator(ClusterModule.BALANCED_ALLOCATOR,FakeShardsAllocator.class);
  }
 catch (  IllegalArgumentException e) {
    assertEquals(e.getMessage(),"Can't register the same [shards_allocator] more than once for [balanced]");
  }
}
