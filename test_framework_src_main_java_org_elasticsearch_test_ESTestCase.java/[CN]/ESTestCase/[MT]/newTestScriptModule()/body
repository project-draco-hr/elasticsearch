{
  return new ScriptModule(new MockScriptEngine()){
    @Override protected void configure(){
      Settings settings=Settings.builder().put(Environment.PATH_HOME_SETTING.getKey(),createTempDir()).put(ScriptService.SCRIPT_AUTO_RELOAD_ENABLED_SETTING.getKey(),false).build();
      bind(ScriptEngineRegistry.class).toInstance(scriptEngineRegistry);
      bind(ScriptContextRegistry.class).toInstance(scriptContextRegistry);
      bind(ScriptSettings.class).toInstance(scriptSettings);
      try {
        ScriptService scriptService=new ScriptService(settings,new Environment(settings),null,scriptEngineRegistry,scriptContextRegistry,scriptSettings);
        bind(ScriptService.class).toInstance(scriptService);
      }
 catch (      IOException e) {
        throw new IllegalStateException("error while binding ScriptService",e);
      }
    }
  }
;
}
