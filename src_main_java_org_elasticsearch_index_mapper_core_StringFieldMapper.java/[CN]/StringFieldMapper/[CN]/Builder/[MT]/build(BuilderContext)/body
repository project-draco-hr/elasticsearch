{
  if (positionOffsetGap > 0) {
    indexAnalyzer=new NamedAnalyzer(indexAnalyzer,positionOffsetGap);
    searchAnalyzer=new NamedAnalyzer(searchAnalyzer,positionOffsetGap);
    searchQuotedAnalyzer=new NamedAnalyzer(searchQuotedAnalyzer,positionOffsetGap);
  }
  FieldType defaultFieldType=new FieldType(Defaults.FIELD_TYPE);
  if (fieldType.indexOptions() != IndexOptions.NONE && !fieldType.tokenized()) {
    defaultFieldType.setOmitNorms(true);
    defaultFieldType.setIndexOptions(IndexOptions.DOCS);
    if (!omitNormsSet && boost == Defaults.BOOST) {
      fieldType.setOmitNorms(true);
    }
    if (!indexOptionsSet) {
      fieldType.setIndexOptions(IndexOptions.DOCS);
    }
  }
  defaultFieldType.freeze();
  StringFieldMapper fieldMapper=new StringFieldMapper(buildNames(context),boost,fieldType,defaultFieldType,docValues,nullValue,indexAnalyzer,searchAnalyzer,searchQuotedAnalyzer,positionOffsetGap,ignoreAbove,similarity,normsLoading,fieldDataSettings,context.indexSettings(),multiFieldsBuilder.build(this,context),copyTo);
  fieldMapper.includeInAll(includeInAll);
  return fieldMapper;
}
