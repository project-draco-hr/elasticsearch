{
  ValueAndBoost valueAndBoost=parseCreateFieldForString(context,nullValue,boost);
  if (valueAndBoost.value() == null) {
    return;
  }
  if (ignoreAbove > 0 && valueAndBoost.value().length() > ignoreAbove) {
    return;
  }
  if (context.includeInAll(includeInAll,this)) {
    context.allEntries().addText(names.fullName(),valueAndBoost.value(),valueAndBoost.boost());
  }
  if (fieldType.indexed() || fieldType.stored()) {
    Field field=new StringField(names.indexName(),valueAndBoost.value(),fieldType);
    field.setBoost(valueAndBoost.boost());
    fields.add(field);
  }
  if (hasDocValues()) {
    fields.add(new SortedSetDocValuesField(names.indexName(),new BytesRef(valueAndBoost.value())));
  }
  if (fields.isEmpty()) {
    context.ignoredValue(names.indexName(),valueAndBoost.value());
  }
}
