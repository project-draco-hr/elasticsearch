{
  for (  final String index : indicesService.indices()) {
    if (!event.state().metaData().hasIndex(index)) {
      if (logger.isDebugEnabled()) {
        logger.debug("[{}] deleting index",index);
      }
      try {
        indicesService.deleteIndex(index,"deleting index");
        threadPool.cached().execute(new Runnable(){
          @Override public void run(){
            nodeIndexDeletedAction.nodeIndexDeleted(index,event.state().nodes().localNodeId());
          }
        }
);
      }
 catch (      Exception e) {
        logger.warn("failed to delete index",e);
      }
    }
  }
}
