{
  if (aliasesChanged(event)) {
    for (    IndexMetaData indexMetaData : event.state().metaData()) {
      if (!indicesService.hasIndex(indexMetaData.index())) {
        continue;
      }
      String index=indexMetaData.index();
      IndexService indexService=indicesService.indexService(index);
      IndexAliasesService indexAliasesService=indexService.aliasesService();
      for (      AliasMetaData aliasesMd : indexMetaData.aliases().values()) {
        processAlias(index,aliasesMd.alias(),aliasesMd.filter(),indexAliasesService);
      }
      for (      IndexAlias indexAlias : indexAliasesService) {
        if (!indexMetaData.aliases().containsKey(indexAlias.alias())) {
          indexAliasesService.remove(indexAlias.alias());
        }
      }
    }
    nodeAliasesUpdatedAction.nodeAliasesUpdated(new NodeAliasesUpdatedAction.NodeAliasesUpdatedResponse(event.state().nodes().localNodeId(),event.state().version()));
  }
}
