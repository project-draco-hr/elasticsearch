{
  MethodType type=callSite.type();
  Object receiver=args[0];
  Class<?> receiverClass=receiver.getClass();
  MethodHandle target=lookup(callSite.flavor,receiverClass,callSite.name);
  target=target.asType(type);
  if (callSite.depth >= InliningCacheCallSite.MAX_DEPTH) {
    callSite.setTarget(target);
    return target.invokeWithArguments(args);
  }
  MethodHandle test=CHECK_CLASS.bindTo(receiverClass);
  test=test.asType(test.type().changeParameterType(0,type.parameterType(0)));
  MethodHandle guard=MethodHandles.guardWithTest(test,target,callSite.getTarget());
  callSite.depth++;
  callSite.setTarget(guard);
  return target.invokeWithArguments(args);
}
