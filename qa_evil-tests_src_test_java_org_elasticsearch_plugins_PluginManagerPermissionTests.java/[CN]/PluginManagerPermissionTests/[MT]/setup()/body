{
  Path tempDir=createTempDir();
  Settings.Builder settingsBuilder=settingsBuilder().put("path.home",tempDir);
  if (randomBoolean()) {
    settingsBuilder.put("path.plugins",createTempDir());
  }
  if (randomBoolean()) {
    settingsBuilder.put("path.conf",createTempDir());
  }
  environment=new Environment(settingsBuilder.build());
  supportsPermissions=tempDir.getFileSystem().supportedFileAttributeViews().contains("posix");
}
