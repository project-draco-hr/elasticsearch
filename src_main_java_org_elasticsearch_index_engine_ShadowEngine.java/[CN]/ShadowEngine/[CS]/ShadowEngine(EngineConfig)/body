{
  super(engineConfig);
  SearcherFactory searcherFactory=new EngineSearcherFactory(engineConfig);
  try {
    DirectoryReader reader=null;
    store.incRef();
    boolean success=false;
    try {
      reader=ElasticsearchDirectoryReader.wrap(DirectoryReader.open(store.directory()),shardId);
      this.searcherManager=new SearcherManager(reader,searcherFactory);
      this.lastCommittedSegmentInfos=store.readLastCommittedSegmentsInfo();
      success=true;
    }
 catch (    Throwable e) {
      logger.warn("failed to create new reader",e);
      throw e;
    }
 finally {
      if (success == false) {
        IOUtils.closeWhileHandlingException(reader);
        store.decRef();
      }
    }
  }
 catch (  IOException ex) {
    throw new EngineCreationFailureException(shardId,"failed to open index reader",ex);
  }
  logger.trace("created new ShadowEngine");
}
