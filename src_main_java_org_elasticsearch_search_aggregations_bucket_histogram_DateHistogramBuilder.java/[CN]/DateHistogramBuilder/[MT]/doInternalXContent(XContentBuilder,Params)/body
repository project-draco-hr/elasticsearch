{
  if (interval == null) {
    throw new SearchSourceBuilderException("[interval] must be defined for histogram aggregation [" + name + "]");
  }
  if (interval instanceof Number) {
    interval=TimeValue.timeValueMillis(((Number)interval).longValue()).toString();
  }
  builder.field("interval",interval);
  if (minDocCount != null) {
    builder.field("min_doc_count",minDocCount);
  }
  if (order != null) {
    builder.field("order");
    order.toXContent(builder,params);
  }
  if (preZone != null) {
    builder.field("pre_zone",preZone);
  }
  if (postZone != null) {
    builder.field("post_zone",postZone);
  }
  if (preZoneAdjustLargeInterval) {
    builder.field("pre_zone_adjust_large_interval",true);
  }
  if (preOffset != 0) {
    builder.field("pre_offset",preOffset);
  }
  if (postOffset != 0) {
    builder.field("post_offset",postOffset);
  }
  if (factor != 1.0f) {
    builder.field("factor",factor);
  }
  if (format != null) {
    builder.field("format",format);
  }
  return builder;
}
