{
  Version version=VersionUtils.randomVersionBetween(random(),VersionUtils.getFirstVersion(),VersionUtils.getPreviousVersion(Version.V_5_0_0_alpha1));
  Settings settings=Settings.builder().put(IndexMetaData.SETTING_VERSION_CREATED,version).build();
  Map<String,AnalyzerProvider> analyzers=new HashMap<>();
  analyzers.put("default_index",analyzerProvider("default_index"));
  analyzers.put("default_search",analyzerProvider("default_search"));
  AnalysisService analysisService=new AnalysisService(IndexSettingsModule.newIndexSettings("index",settings),analyzers,Collections.emptyMap(),Collections.emptyMap(),Collections.emptyMap());
  assertThat(analysisService.defaultIndexAnalyzer().analyzer(),instanceOf(EnglishAnalyzer.class));
  assertThat(analysisService.defaultSearchAnalyzer().analyzer(),instanceOf(EnglishAnalyzer.class));
  assertThat(analysisService.defaultSearchQuoteAnalyzer().analyzer(),instanceOf(EnglishAnalyzer.class));
}
