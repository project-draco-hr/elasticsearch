{
  Version version=VersionUtils.randomVersionBetween(getRandom(),VersionUtils.getFirstVersion(),VersionUtils.getPreviousVersion(Version.V_3_0_0));
  Settings settings=Settings.builder().put(IndexMetaData.SETTING_VERSION_CREATED,version).build();
  IndicesAnalysisService indicesAnalysisService=new IndicesAnalysisService(settings);
  Map<String,AnalyzerProviderFactory> analyzers=new HashMap<>();
  analyzers.put("default_index",analyzerProvider("default_index"));
  analyzers.put("default_search",analyzerProvider("default_search"));
  AnalysisService analysisService=new AnalysisService(new IndexSettings(new Index("index"),settings,Collections.EMPTY_LIST),indicesAnalysisService,analyzers,Collections.emptyMap(),Collections.emptyMap(),Collections.emptyMap());
  assertThat(analysisService.defaultIndexAnalyzer().analyzer(),instanceOf(EnglishAnalyzer.class));
  assertThat(analysisService.defaultSearchAnalyzer().analyzer(),instanceOf(EnglishAnalyzer.class));
  assertThat(analysisService.defaultSearchQuoteAnalyzer().analyzer(),instanceOf(EnglishAnalyzer.class));
}
