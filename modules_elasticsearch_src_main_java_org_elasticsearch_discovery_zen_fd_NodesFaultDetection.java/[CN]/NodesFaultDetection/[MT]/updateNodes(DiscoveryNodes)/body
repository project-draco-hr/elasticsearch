{
  DiscoveryNodes prevNodes=latestNodes;
  this.latestNodes=nodes;
  if (!running) {
    return;
  }
  DiscoveryNodes.Delta delta=nodes.delta(prevNodes);
  for (  DiscoveryNode newNode : delta.addedNodes()) {
    if (newNode.id().equals(nodes.localNodeId())) {
      continue;
    }
    if (!nodesFD.containsKey(newNode)) {
      nodesFD.put(newNode,new NodeFD());
      threadPool.schedule(new SendPingRequest(newNode),pingInterval,ThreadPool.ExecutionType.DEFAULT);
    }
  }
  for (  DiscoveryNode removedNode : delta.removedNodes()) {
    nodesFD.remove(removedNode);
  }
}
