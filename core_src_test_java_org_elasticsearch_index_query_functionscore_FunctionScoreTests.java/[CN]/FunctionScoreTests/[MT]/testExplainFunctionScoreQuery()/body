{
  Explanation functionExplanation=getFunctionScoreExplanation(searcher,new RandomScoreFunction(0,0,new IndexFieldDataStub()));
  checkFunctionScoreExplanation(functionExplanation,"random score function (seed: 0)");
  assertThat(functionExplanation.getDetails()[0].getDetails().length,equalTo(0));
  functionExplanation=getFunctionScoreExplanation(searcher,new FieldValueFactorFunction("test",1,FieldValueFactorFunction.Modifier.LN,new Double(1),null));
  checkFunctionScoreExplanation(functionExplanation,"field value function: ln(doc['test'].value?:1.0 * factor=1.0)");
  assertThat(functionExplanation.getDetails()[0].getDetails().length,equalTo(0));
  functionExplanation=getFunctionScoreExplanation(searcher,new DecayFunctionBuilder.NumericFieldDataScoreFunction(0,1,0.1,0,GaussDecayFunctionBuilder.GAUSS_DECAY_FUNCTION,new IndexNumericFieldDataStub(),MultiValueMode.MAX));
  checkFunctionScoreExplanation(functionExplanation,"Function for field test:");
  assertThat(functionExplanation.getDetails()[0].getDetails()[0].toString(),equalTo("0.1 = exp(-0.5*pow(MAX[Math.max(Math.abs(1.0(=doc value) - 0.0(=origin))) - 0.0(=offset), 0)],2.0)/0.21714724095162594)\n"));
  assertThat(functionExplanation.getDetails()[0].getDetails()[0].getDetails().length,equalTo(0));
  functionExplanation=getFunctionScoreExplanation(searcher,new DecayFunctionBuilder.NumericFieldDataScoreFunction(0,1,0.1,0,ExponentialDecayFunctionBuilder.EXP_DECAY_FUNCTION,new IndexNumericFieldDataStub(),MultiValueMode.MAX));
  checkFunctionScoreExplanation(functionExplanation,"Function for field test:");
  assertThat(functionExplanation.getDetails()[0].getDetails()[0].toString(),equalTo("0.1 = exp(- MAX[Math.max(Math.abs(1.0(=doc value) - 0.0(=origin))) - 0.0(=offset), 0)] * 2.3025850929940455)\n"));
  assertThat(functionExplanation.getDetails()[0].getDetails()[0].getDetails().length,equalTo(0));
  functionExplanation=getFunctionScoreExplanation(searcher,new DecayFunctionBuilder.NumericFieldDataScoreFunction(0,1,0.1,0,LinearDecayFunctionBuilder.LINEAR_DECAY_FUNCTION,new IndexNumericFieldDataStub(),MultiValueMode.MAX));
  checkFunctionScoreExplanation(functionExplanation,"Function for field test:");
  assertThat(functionExplanation.getDetails()[0].getDetails()[0].toString(),equalTo("0.1 = max(0.0, ((1.1111111111111112 - MAX[Math.max(Math.abs(1.0(=doc value) - 0.0(=origin))) - 0.0(=offset), 0)])/1.1111111111111112)\n"));
  assertThat(functionExplanation.getDetails()[0].getDetails()[0].getDetails().length,equalTo(0));
}
