{
  validateSettings(new BreakerSettings[]{breakerSettings});
  CircuitBreaker breaker;
  if (breakerSettings.getType() == CircuitBreaker.Type.NOOP) {
    breaker=new NoopCircuitBreaker(breakerSettings.getName());
  }
 else {
    CircuitBreaker oldBreaker=breakers.get(breakerSettings.getName());
    breaker=new ChildMemoryCircuitBreaker(breakerSettings,(ChildMemoryCircuitBreaker)oldBreaker,logger,this,breakerSettings.getName());
  }
  breakers.put(breakerSettings.getName(),breaker);
}
