{
  threadPool.generic().execute(new AbstractRunnable(){
    @Override protected void doRun() throws Exception {
      try (org.elasticsearch.client.Response response=restClient.performRequest(method,uri,params,entity)){
        InputStream markSupportedInputStream=new BufferedInputStream(response.getEntity().getContent());
        listener.onResponse(markSupportedInputStream);
      }
     }
    @Override public void onFailure(    Exception t){
      if (t instanceof ResponseException) {
        ResponseException re=(ResponseException)t;
        if (RestStatus.TOO_MANY_REQUESTS.getStatus() == re.getResponse().getStatusLine().getStatusCode()) {
          listener.onRetryableFailure(t);
          return;
        }
      }
      listener.onFailure(t);
    }
  }
);
}
