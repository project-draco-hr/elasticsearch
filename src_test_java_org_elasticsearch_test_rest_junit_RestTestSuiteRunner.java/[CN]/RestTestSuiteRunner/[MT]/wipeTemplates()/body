{
  logger.debug("deleting all templates");
  RestResponse restResponse=restTestExecutionContext.callApiInternal("cluster.state","filter_nodes","true","filter_routing_table","true","filter_blocks","true");
  assertThat(restResponse.getStatusCode(),equalTo(200));
  Object object=restResponse.evaluate("metadata.templates");
  assertThat(object,instanceOf(Map.class));
  Set<String> templates=((Map<String,Object>)object).keySet();
  for (  String template : templates) {
    restResponse=restTestExecutionContext.callApiInternal("indices.delete_template","name",template);
    assertThat(restResponse.getStatusCode(),equalTo(200));
  }
}
