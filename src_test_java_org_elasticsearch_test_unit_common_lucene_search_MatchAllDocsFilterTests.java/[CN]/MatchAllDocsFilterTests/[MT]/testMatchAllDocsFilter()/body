{
  Directory dir=new RAMDirectory();
  IndexWriter indexWriter=new IndexWriter(dir,new IndexWriterConfig(Lucene.VERSION,Lucene.STANDARD_ANALYZER));
  indexWriter.addDocument(doc().add(field("_id","1")).add(field("text","lucene")).build());
  indexWriter.addDocument(doc().add(field("_id","2")).add(field("text","lucene release")).build());
  IndexReader reader=IndexReader.open(indexWriter,true);
  IndexSearcher searcher=new IndexSearcher(reader);
  DeletionAwareConstantScoreQuery query=new DeletionAwareConstantScoreQuery(Queries.MATCH_ALL_FILTER);
  long count=Lucene.count(searcher,query);
  assertThat(count,equalTo(2l));
  reader.close();
  indexWriter.close();
}
