{
  FakeFieldMapper f1=new FakeFieldMapper("foo","bar");
  FieldMappersLookup lookup=new FieldMappersLookup();
  lookup=lookup.copyAndAddAll(Lists.newArrayList(f1));
  assertEquals(f1,lookup.get("foo"));
  assertNull(lookup.get("bar"));
  FakeFieldMapper f2=new FakeFieldMapper("foo","foo");
  lookup=lookup.copyAndAddAll(Lists.newArrayList(f2));
  try {
    lookup.get("foo");
    fail("get should have enforced foo is unique");
  }
 catch (  IllegalStateException e) {
  }
}
