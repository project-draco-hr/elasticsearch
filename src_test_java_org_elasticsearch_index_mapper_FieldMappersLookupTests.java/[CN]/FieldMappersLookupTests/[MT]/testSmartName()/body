{
  FakeFieldMapper f1=new FakeFieldMapper("foo","realfoo");
  FakeFieldMapper f2=new FakeFieldMapper("foo","realbar");
  FakeFieldMapper f3=new FakeFieldMapper("baz","realfoo");
  FieldMappersLookup lookup=new FieldMappersLookup();
  lookup=lookup.copyAndAddAll(Lists.newArrayList(f1,f2,f3));
  assertNotNull(lookup.smartName("foo"));
  assertEquals(2,lookup.smartName("foo").mappers().size());
  assertNotNull(lookup.smartName("realfoo"));
  assertEquals(f1,lookup.smartNameFieldMapper("foo"));
  assertEquals(f2,lookup.smartNameFieldMapper("realbar"));
}
