{
  final MappedFieldType newFieldType=fullNameToFieldType.get(fieldType.names().fullName());
  if (newFieldType == null) {
    throw new IllegalStateException();
  }
  MultiFields updatedMultiFields=multiFields.updateFieldType(fullNameToFieldType);
  if (fieldType == newFieldType && multiFields == updatedMultiFields) {
    return this;
  }
  FieldMapper updated=clone();
  updated.fieldType=newFieldType;
  updated.multiFields=updatedMultiFields;
  return updated;
}
