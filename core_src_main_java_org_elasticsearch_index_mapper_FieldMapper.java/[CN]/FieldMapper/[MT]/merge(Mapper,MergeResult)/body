{
  if (!this.getClass().equals(mergeWith.getClass())) {
    String mergedType=mergeWith.getClass().getSimpleName();
    if (mergeWith instanceof FieldMapper) {
      mergedType=((FieldMapper)mergeWith).contentType();
    }
    mergeResult.addConflict("mapper [" + fieldType().names().fullName() + "] of different type, current_type ["+ contentType()+ "], merged_type ["+ mergedType+ "]");
    return;
  }
  FieldMapper fieldMergeWith=(FieldMapper)mergeWith;
  multiFields.merge(mergeWith,mergeResult);
  if (mergeResult.simulate() == false && mergeResult.hasConflicts() == false) {
    MappedFieldType fieldType=fieldMergeWith.fieldType().clone();
    fieldType.freeze();
    fieldTypeRef.set(fieldType);
    this.copyTo=fieldMergeWith.copyTo;
  }
}
