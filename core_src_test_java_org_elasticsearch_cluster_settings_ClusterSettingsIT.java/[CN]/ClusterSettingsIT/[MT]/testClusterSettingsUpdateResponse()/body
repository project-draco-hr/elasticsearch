{
  String key1=IndicesStore.INDICES_STORE_THROTTLE_MAX_BYTES_PER_SEC;
  int value1=10;
  String key2=EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE;
  boolean value2=false;
  Settings transientSettings1=Settings.builder().put(key1,value1,ByteSizeUnit.BYTES).build();
  Settings persistentSettings1=Settings.builder().put(key2,value2).build();
  ClusterUpdateSettingsResponse response1=client().admin().cluster().prepareUpdateSettings().setTransientSettings(transientSettings1).setPersistentSettings(persistentSettings1).execute().actionGet();
  assertAcked(response1);
  assertThat(response1.getTransientSettings().get(key1),notNullValue());
  assertThat(response1.getTransientSettings().get(key2),nullValue());
  assertThat(response1.getPersistentSettings().get(key1),nullValue());
  assertThat(response1.getPersistentSettings().get(key2),notNullValue());
  Settings transientSettings2=Settings.builder().put(key1,value1,ByteSizeUnit.BYTES).put(key2,value2).build();
  Settings persistentSettings2=Settings.EMPTY;
  ClusterUpdateSettingsResponse response2=client().admin().cluster().prepareUpdateSettings().setTransientSettings(transientSettings2).setPersistentSettings(persistentSettings2).execute().actionGet();
  assertAcked(response2);
  assertThat(response2.getTransientSettings().get(key1),notNullValue());
  assertThat(response2.getTransientSettings().get(key2),notNullValue());
  assertThat(response2.getPersistentSettings().get(key1),nullValue());
  assertThat(response2.getPersistentSettings().get(key2),nullValue());
  Settings transientSettings3=Settings.EMPTY;
  Settings persistentSettings3=Settings.builder().put(key1,value1,ByteSizeUnit.BYTES).put(key2,value2).build();
  ClusterUpdateSettingsResponse response3=client().admin().cluster().prepareUpdateSettings().setTransientSettings(transientSettings3).setPersistentSettings(persistentSettings3).execute().actionGet();
  assertAcked(response3);
  assertThat(response3.getTransientSettings().get(key1),nullValue());
  assertThat(response3.getTransientSettings().get(key2),nullValue());
  assertThat(response3.getPersistentSettings().get(key1),notNullValue());
  assertThat(response3.getPersistentSettings().get(key2),notNullValue());
}
