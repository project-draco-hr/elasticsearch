{
  try {
    delegates[0].deleteFile(name);
  }
 catch (  IOException e) {
    if (delegates[0].fileExists(name)) {
      throw e;
    }
  }
synchronized (mutex) {
    filesMetadata=MapBuilder.newMapBuilder(filesMetadata).remove(name).immutableMap();
    files=filesMetadata.keySet().toArray(new String[filesMetadata.size()]);
  }
}
