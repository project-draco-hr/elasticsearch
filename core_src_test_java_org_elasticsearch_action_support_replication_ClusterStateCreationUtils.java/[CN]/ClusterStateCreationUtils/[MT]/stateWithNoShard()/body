{
  int numberOfNodes=2;
  DiscoveryNodes.Builder discoBuilder=DiscoveryNodes.builder();
  Set<String> unassignedNodes=new HashSet<>();
  for (int i=0; i < numberOfNodes + 1; i++) {
    final DiscoveryNode node=newNode(i);
    discoBuilder=discoBuilder.put(node);
    unassignedNodes.add(node.id());
  }
  discoBuilder.localNodeId(newNode(0).id());
  discoBuilder.masterNodeId(newNode(1).id());
  ClusterState.Builder state=ClusterState.builder(new ClusterName("test"));
  state.nodes(discoBuilder);
  state.metaData(MetaData.builder().generateClusterUuidIfNeeded());
  state.routingTable(RoutingTable.builder().build());
  return state.build();
}
