{
  QueryBuilder rewrite=query.rewrite(queryShardContext);
  if (rewrite != query) {
    return new NestedQueryBuilder(path,rewrite).queryName(queryName()).boost(boost()).scoreMode(scoreMode);
  }
  return this;
}
