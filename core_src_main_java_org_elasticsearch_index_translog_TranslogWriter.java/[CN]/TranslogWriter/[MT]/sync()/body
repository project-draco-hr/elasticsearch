{
  if (syncNeeded()) {
    try (ReleasableLock lock=writeLock.acquire()){
      ensureOpen();
      checkpoint(writtenOffset,operationCounter,channelReference);
      lastSyncedOffset=writtenOffset;
    }
   }
}
