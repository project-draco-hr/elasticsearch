{
  if (syncNeeded()) {
    try (ReleasableLock lock=writeLock.acquire()){
      ensureOpen();
      final long offset=writtenOffset;
      final int opsCount=operationCounter;
      checkpoint(offset,opsCount,channelReference);
      lastSyncedOffset=offset;
    }
   }
}
