{
  final long position;
  try (ReleasableLock lock=writeLock.acquire()){
    ensureOpen();
    position=writtenOffset;
    data.writeTo(channel);
    writtenOffset=writtenOffset + data.length();
    operationCounter=operationCounter + 1;
  }
   return new Translog.Location(generation,position,data.length());
}
