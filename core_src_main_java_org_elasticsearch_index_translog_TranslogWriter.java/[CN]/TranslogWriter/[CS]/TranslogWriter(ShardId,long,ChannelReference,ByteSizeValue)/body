{
  super(generation,channelReference,channelReference.getChannel().position());
  this.shardId=shardId;
  ReadWriteLock rwl=new ReentrantReadWriteLock();
  readLock=new ReleasableLock(rwl.readLock());
  writeLock=new ReleasableLock(rwl.writeLock());
  this.writtenOffset=channelReference.getChannel().position();
  this.totalOffset=writtenOffset;
  this.buffer=new byte[bufferSize.bytesAsInt()];
  this.lastSyncedOffset=channelReference.getChannel().position();
}
