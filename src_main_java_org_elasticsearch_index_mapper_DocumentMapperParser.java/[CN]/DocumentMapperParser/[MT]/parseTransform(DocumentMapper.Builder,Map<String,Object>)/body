{
  ScriptParameterParser scriptParameterParser=new ScriptParameterParser();
  scriptParameterParser.parseConfig(transformConfig,true);
  String script=null;
  ScriptType scriptType=null;
  ScriptParameterValue scriptValue=scriptParameterParser.getDefaultScriptParameterValue();
  if (scriptValue != null) {
    script=scriptValue.script();
    scriptType=scriptValue.scriptType();
  }
  if (script != null) {
    String scriptLang=scriptParameterParser.lang();
    Map<String,Object> params=(Map<String,Object>)transformConfig.remove("params");
    docBuilder.transform(scriptService,script,scriptType,scriptLang,params);
  }
  if (!transformConfig.isEmpty()) {
    throw new MapperParsingException("Unrecognized parameter in transform config:  " + getRemainingFields(transformConfig));
  }
}
