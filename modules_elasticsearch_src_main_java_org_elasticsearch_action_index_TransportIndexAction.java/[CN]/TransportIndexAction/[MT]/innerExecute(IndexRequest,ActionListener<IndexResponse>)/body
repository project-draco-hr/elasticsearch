{
  if (allowIdGeneration) {
    if (request.id() == null) {
      request.id(UUID.randomBase64UUID());
      request.opType(IndexRequest.OpType.CREATE);
    }
  }
  MetaData metaData=clusterService.state().metaData();
  String aliasOrIndex=request.index();
  request.index(metaData.concreteIndex(request.index()));
  MappingMetaData mappingMd=null;
  if (metaData.hasIndex(request.index())) {
    mappingMd=metaData.index(request.index()).mapping(request.type());
  }
  request.process(metaData,aliasOrIndex,mappingMd);
  super.doExecute(request,listener);
}
