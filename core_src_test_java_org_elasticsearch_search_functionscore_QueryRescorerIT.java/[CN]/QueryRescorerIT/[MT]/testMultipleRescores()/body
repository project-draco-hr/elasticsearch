{
  int numDocs=indexRandomNumbers("keyword",1,true);
  QueryRescorer eightIsGreat=RescoreBuilder.queryRescorer(QueryBuilders.functionScoreQuery(QueryBuilders.termQuery("field1",English.intToEnglish(8)),ScoreFunctionBuilders.weightFactorFunction(1000.0f)).boostMode(CombineFunction.REPLACE)).setScoreMode("total");
  QueryRescorer sevenIsBetter=RescoreBuilder.queryRescorer(QueryBuilders.functionScoreQuery(QueryBuilders.termQuery("field1",English.intToEnglish(7)),ScoreFunctionBuilders.weightFactorFunction(10000.0f)).boostMode(CombineFunction.REPLACE)).setScoreMode("total");
  SearchRequestBuilder request=client().prepareSearch().setRescoreWindow(numDocs);
  request.addRescorer(eightIsGreat).addRescorer(sevenIsBetter);
  SearchResponse response=request.get();
  assertFirstHit(response,hasId("7"));
  assertSecondHit(response,hasId("8"));
  response=request.setSize(1).clearRescorers().addRescorer(eightIsGreat).addRescorer(sevenIsBetter,1).get();
  assertFirstHit(response,hasId("8"));
  QueryRescorer ninetyIsGood=RescoreBuilder.queryRescorer(QueryBuilders.functionScoreQuery(QueryBuilders.queryStringQuery("*ninety*"),ScoreFunctionBuilders.weightFactorFunction(1000.0f)).boostMode(CombineFunction.REPLACE)).setScoreMode("total");
  QueryRescorer oneToo=RescoreBuilder.queryRescorer(QueryBuilders.functionScoreQuery(QueryBuilders.queryStringQuery("*one*"),ScoreFunctionBuilders.weightFactorFunction(1000.0f)).boostMode(CombineFunction.REPLACE)).setScoreMode("total");
  request.clearRescorers().addRescorer(ninetyIsGood).addRescorer(oneToo,10);
  response=request.setSize(2).get();
  assertFirstHit(response,hasId("91"));
  assertFirstHit(response,hasScore(2001.0f));
  assertSecondHit(response,hasScore(1001.0f));
}
