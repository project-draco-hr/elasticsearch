{
  final AtomicBoolean collected=new AtomicBoolean();
  IndexSearcher contextSearcher=new IndexSearcher(new MultiReader()){
    protected void search(    List<LeafReaderContext> leaves,    Weight weight,    Collector collector) throws IOException {
      collected.set(true);
      super.search(leaves,weight,collector);
    }
  }
;
  TestSearchContext context=new TestSearchContext();
  context.parsedQuery(new ParsedQuery(new MatchAllDocsQuery()));
  context.setSize(0);
  context.preProcess();
  QueryPhase.execute(context,contextSearcher);
  assertEquals(0,context.queryResult().topDocs().totalHits);
  assertFalse(collected.get());
  context=new TestSearchContext();
  context.parsedQuery(new ParsedQuery(new MatchAllDocsQuery()));
  context.setSize(0);
  context.minimumScore(1);
  context.preProcess();
  QueryPhase.execute(context,contextSearcher);
  assertEquals(0,context.queryResult().topDocs().totalHits);
  assertTrue(collected.get());
}
