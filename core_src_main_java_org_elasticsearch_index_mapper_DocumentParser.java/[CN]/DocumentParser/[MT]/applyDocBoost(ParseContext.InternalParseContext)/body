{
  if (context.docBoost() != 1.0f) {
    Set<String> encounteredFields=new HashSet<>();
    for (    ParseContext.Document doc : context.docs()) {
      encounteredFields.clear();
      for (      IndexableField field : doc) {
        if (field.fieldType().indexOptions() != IndexOptions.NONE && !field.fieldType().omitNorms()) {
          if (!encounteredFields.contains(field.name())) {
            ((Field)field).setBoost(context.docBoost() * field.boost());
            encounteredFields.add(field.name());
          }
        }
      }
    }
  }
}
