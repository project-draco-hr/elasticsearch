{
  ensureOpen();
  Collection<NodeAndClient> values=Collections2.filter(nodes.values(),predicate);
  if (!values.isEmpty()) {
    int whichOne=random.nextInt(values.size());
    for (    NodeAndClient nodeAndClient : values) {
      if (whichOne-- == 0) {
        return nodeAndClient;
      }
    }
  }
  return null;
}
