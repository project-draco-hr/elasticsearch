{
  try {
    HostsSniffer.builder(null);
    fail("should have failed");
  }
 catch (  NullPointerException e) {
    assertEquals(e.getMessage(),"restClient cannot be null");
  }
  int numNodes=RandomInts.randomIntBetween(random(),1,5);
  HttpHost[] hosts=new HttpHost[numNodes];
  for (int i=0; i < numNodes; i++) {
    hosts[i]=new HttpHost("localhost",9200 + i);
  }
  try (RestClient client=RestClient.builder(hosts).build()){
    try {
      HostsSniffer.builder(client).setScheme(null);
      fail("should have failed");
    }
 catch (    NullPointerException e) {
      assertEquals(e.getMessage(),"scheme cannot be null");
    }
    try {
      HostsSniffer.builder(client).setSniffRequestTimeoutMillis(RandomInts.randomIntBetween(random(),Integer.MIN_VALUE,0));
      fail("should have failed");
    }
 catch (    IllegalArgumentException e) {
      assertEquals(e.getMessage(),"sniffRequestTimeout must be greater than 0");
    }
    HostsSniffer.Builder builder=HostsSniffer.builder(client);
    if (random().nextBoolean()) {
      builder.setScheme(RandomPicks.randomFrom(random(),HostsSniffer.Scheme.values()));
    }
    if (random().nextBoolean()) {
      builder.setSniffRequestTimeoutMillis(RandomInts.randomIntBetween(random(),1,Integer.MAX_VALUE));
    }
    assertNotNull(builder.build());
  }
 }
