{
  for (  SyncedFlushService.SyncedFlushResult shardResult : sealIndicesResponse.results()) {
    if (shardStats.getShardRouting().getId() == shardResult.shardId().getId()) {
      for (      Map.Entry<ShardRouting,SyncedFlushService.SyncedFlushResponse> singleResponse : shardResult.shardResponses().entrySet()) {
        if (singleResponse.getKey().currentNodeId().equals(shardStats.getShardRouting().currentNodeId())) {
          if (singleResponse.getValue().success()) {
            assertNotNull(shardStats.getCommitStats().getUserData().get(Engine.SYNC_COMMIT_ID));
            logger.info("sync flushed {} on node {}",singleResponse.getKey().shardId(),singleResponse.getKey().currentNodeId());
          }
 else {
            assertNull(shardStats.getCommitStats().getUserData().get(Engine.SYNC_COMMIT_ID));
            logger.info("sync flush failed for {} on node {}",singleResponse.getKey().shardId(),singleResponse.getKey().currentNodeId());
          }
        }
      }
    }
  }
}
