{
  createIndex("test");
  ensureGreen();
  IndexStats indexStats=client().admin().indices().prepareStats("test").get().getIndex("test");
  for (  ShardStats shardStats : indexStats.getShards()) {
    assertNull(shardStats.getCommitStats().getUserData().get(Engine.SYNC_COMMIT_ID));
  }
  logger.info("--> trying sync flush");
  SealIndicesResponse sealIndicesResponse=client().admin().indices().prepareSealIndices("test").get();
  logger.info("--> sync flush done");
  indexStats=client().admin().indices().prepareStats("test").get().getIndex("test");
  for (  ShardStats shardStats : indexStats.getShards()) {
    assertNotNull(shardStats.getCommitStats().getUserData().get(Engine.SYNC_COMMIT_ID));
  }
}
