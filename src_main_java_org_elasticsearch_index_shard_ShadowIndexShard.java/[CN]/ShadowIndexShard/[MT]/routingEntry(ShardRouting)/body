{
  ShardRouting shardRouting=this.routingEntry();
  super.routingEntry(newRouting);
  if (shardRouting != null && shardRouting.primary() == false && newRouting.primary() == true) {
    failShard("can't promote shadow replica to primary",new ElasticsearchIllegalStateException("can't promote shadow replica to primary"));
  }
  return this;
}
