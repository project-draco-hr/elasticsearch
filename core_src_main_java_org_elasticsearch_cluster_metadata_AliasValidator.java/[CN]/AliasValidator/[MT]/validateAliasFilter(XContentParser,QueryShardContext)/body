{
  try {
    queryShardContext.reset(parser);
    queryShardContext.parseContext().parseInnerQueryBuilder().toFilter(queryShardContext);
  }
  finally {
    queryShardContext.reset(null);
    parser.close();
  }
}
