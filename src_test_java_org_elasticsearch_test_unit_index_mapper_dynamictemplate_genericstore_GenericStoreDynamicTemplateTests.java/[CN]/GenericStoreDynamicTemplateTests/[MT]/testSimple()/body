{
  String mapping=copyToStringFromClasspath("/org/elasticsearch/test/unit/index/mapper/dynamictemplate/genericstore/test-mapping.json");
  DocumentMapper docMapper=MapperTests.newParser().parse(mapping);
  byte[] json=copyToBytesFromClasspath("/org/elasticsearch/test/unit/index/mapper/dynamictemplate/genericstore/test-data.json");
  Document doc=docMapper.parse(new BytesArray(json)).rootDoc();
  Fieldable f=doc.getFieldable("name");
  assertThat(f.name(),equalTo("name"));
  assertThat(f.stringValue(),equalTo("some name"));
  assertThat(f.isStored(),equalTo(true));
  FieldMappers fieldMappers=docMapper.mappers().fullName("name");
  assertThat(fieldMappers.mappers().size(),equalTo(1));
  assertThat(fieldMappers.mapper().stored(),equalTo(true));
  f=doc.getFieldable("age");
  assertThat(f.name(),equalTo("age"));
  assertThat(f.isStored(),equalTo(true));
  fieldMappers=docMapper.mappers().fullName("age");
  assertThat(fieldMappers.mappers().size(),equalTo(1));
  assertThat(fieldMappers.mapper().stored(),equalTo(true));
}
