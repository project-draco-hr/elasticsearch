{
  DeleteByQueryRequest delete=new DeleteByQueryRequest(Strings.splitStringByCommaToArray(request.param("index")));
  delete.indicesOptions(IndicesOptions.fromRequest(request,delete.indicesOptions()));
  delete.routing(request.param("routing"));
  if (request.hasParam("timeout")) {
    delete.timeout(request.paramAsTime("timeout",null));
  }
  if (request.hasContent()) {
    delete.source(request.content());
  }
 else {
    String source=request.param("source");
    if (source != null) {
      delete.source(source);
    }
 else {
      QueryBuilder<?> queryBuilder=RestActions.parseQuerySource(request);
      if (queryBuilder != null) {
        QuerySourceBuilder querySourceBuilder=new QuerySourceBuilder();
        querySourceBuilder.setQuery(queryBuilder);
        delete.source(querySourceBuilder.buildAsBytes());
      }
    }
  }
  delete.types(Strings.splitStringByCommaToArray(request.param("type")));
  client.execute(INSTANCE,delete,new RestToXContentListener<DeleteByQueryResponse>(channel));
}
