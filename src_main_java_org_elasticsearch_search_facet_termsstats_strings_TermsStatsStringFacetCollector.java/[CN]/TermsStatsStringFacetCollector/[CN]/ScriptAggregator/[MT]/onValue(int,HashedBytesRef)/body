{
  InternalTermsStatsStringFacet.StringEntry stringEntry=entries.get(value);
  if (stringEntry == null) {
    value=value.deepCopy();
    stringEntry=new InternalTermsStatsStringFacet.StringEntry(value,1,0,0,Double.POSITIVE_INFINITY,Double.NEGATIVE_INFINITY);
    entries.put(value,stringEntry);
  }
 else {
    stringEntry.count++;
  }
  script.setNextDocId(docId);
  double valueValue=script.runAsDouble();
  if (valueValue < stringEntry.min) {
    stringEntry.min=valueValue;
  }
  if (valueValue > stringEntry.max) {
    stringEntry.max=valueValue;
  }
  stringEntry.total+=valueValue;
  stringEntry.totalCount++;
}
