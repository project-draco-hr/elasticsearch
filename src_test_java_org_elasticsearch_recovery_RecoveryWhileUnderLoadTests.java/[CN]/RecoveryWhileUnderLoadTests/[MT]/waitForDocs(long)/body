{
  assertThat(awaitBusy(new Predicate<Object>(){
    public boolean apply(    Object o){
      long count=client().prepareCount().setQuery(matchAllQuery()).execute().actionGet().getCount();
      logger.debug("[{}] docs visible for search. waiting for [{}]",count,numDocs);
      return count > numDocs;
    }
  }
,5,TimeUnit.MINUTES),equalTo(true));
}
