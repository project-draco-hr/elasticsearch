{
  Settings settings=settingsBuilder().put("index.analysis.analyzer.custom.tokenizer","standard").put("index.analysis.analyzer.custom.position_offset_gap","128").put("index.analysis.analyzer.custom.position_increment_gap","256").put("path.home",createTempDir().toString()).put(IndexMetaData.SETTING_VERSION_CREATED,VersionUtils.randomVersionBetween(random(),Version.V_1_0_0,Version.V_1_7_1)).build();
  try {
    getAnalysisService(settings);
    fail("Analyzer has both position_offset_gap and position_increment_gap should fail");
  }
 catch (  ProvisionException e) {
    assertTrue(e.getCause() instanceof IllegalArgumentException);
    assertThat(e.getCause().getMessage(),equalTo("Custom Analyzer [custom] defined both [position_offset_gap] and [position_increment_gap]" + ", use only [position_increment_gap]"));
  }
}
