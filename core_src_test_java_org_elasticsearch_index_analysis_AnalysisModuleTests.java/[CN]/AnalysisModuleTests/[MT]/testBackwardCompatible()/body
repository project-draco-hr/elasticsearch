{
  Settings settings=settingsBuilder().put("index.analysis.analyzer.custom1.tokenizer","standard").put("index.analysis.analyzer.custom1.position_offset_gap","128").put("index.analysis.analyzer.custom2.tokenizer","standard").put("index.analysis.analyzer.custom2.position_increment_gap","256").put(Environment.PATH_HOME_SETTING.getKey(),createTempDir().toString()).put(IndexMetaData.SETTING_VERSION_CREATED,VersionUtils.randomVersionBetween(random(),Version.V_1_0_0,Version.V_1_7_1)).build();
  AnalysisService analysisService=getAnalysisService(settings);
  Analyzer custom1=analysisService.analyzer("custom1").analyzer();
  assertThat(custom1,instanceOf(CustomAnalyzer.class));
  assertThat(custom1.getPositionIncrementGap("custom1"),equalTo(128));
  Analyzer custom2=analysisService.analyzer("custom2").analyzer();
  assertThat(custom2,instanceOf(CustomAnalyzer.class));
  assertThat(custom2.getPositionIncrementGap("custom2"),equalTo(256));
}
