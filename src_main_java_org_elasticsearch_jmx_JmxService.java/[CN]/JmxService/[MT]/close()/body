{
  if (!started) {
    return;
  }
  started=false;
  for (  ResourceDMBean resource : registeredMBeans) {
    String resourceName=resource.getFullObjectName();
    try {
      ObjectName objectName=new ObjectName(getObjectName(resourceName));
      if (mBeanServer.isRegistered(objectName)) {
        mBeanServer.unregisterMBean(objectName);
        if (logger.isTraceEnabled()) {
          logger.trace("Unregistered " + objectName);
        }
      }
    }
 catch (    Exception e) {
      logger.warn("Failed to unregister " + resource.getFullObjectName());
    }
  }
  if (connectorServer != null) {
    try {
      connectorServer.stop();
    }
 catch (    IOException e) {
      logger.debug("Failed to close connector",e);
    }
  }
}
