{
  Injector indexerInjector;
  Indexer indexer;
synchronized (this) {
    indexerInjector=indexersInjectors.remove(indexerName);
    if (indexerInjector == null) {
      if (!delete) {
        return;
      }
      throw new IndexerException(indexerName,"missing");
    }
    if (delete) {
      logger.debug("deleting indexer [{}][{}]",indexerName.type(),indexerName.name());
    }
    Map<IndexerName,Indexer> tmpMap=Maps.newHashMap(indexers);
    indexer=tmpMap.remove(indexerName);
    indexers=ImmutableMap.copyOf(tmpMap);
  }
  indexer.close(delete);
  indexerInjector.getInstance(Indexer.class).close(delete);
  Injectors.close(injector);
}
