{
  String routing=context.sourceToParse().routing();
  if (path != null && routing != null) {
    String value=null;
    Fieldable field=context.doc().getFieldable(path);
    if (field != null) {
      value=field.stringValue();
      if (value == null) {
        if (field instanceof NumberFieldMapper.CustomNumericField) {
          value=((NumberFieldMapper.CustomNumericField)field).numericAsString();
        }
      }
    }
    if (value == null) {
      value=context.ignoredValue(path);
    }
    if (value == null) {
    }
    if (!routing.equals(value)) {
      throw new MapperParsingException("External routing [" + routing + "] and document path routing ["+ value+ "] mismatch");
    }
  }
}
