{
  if (currPayload != null) {
    payloadsLengths.ints[i]=currPayload.length;
    payloadsStarts.ints[i]=i == 0 ? 0 : payloadsStarts.ints[i - 1] + payloadsLengths.ints[i - 1];
    if (payloads.bytes.length < payloadsStarts.ints[i] + payloadsLengths.ints[i]) {
      payloads.offset=0;
      payloads.grow(payloads.bytes.length * 2);
    }
    System.arraycopy(currPayload.bytes,currPayload.offset,payloads.bytes,payloadsStarts.ints[i],currPayload.length);
  }
 else {
    payloadsLengths.ints[i]=0;
    payloadsStarts.ints[i]=i == 0 ? 0 : payloadsStarts.ints[i - 1] + payloadsLengths.ints[i - 1];
  }
}
