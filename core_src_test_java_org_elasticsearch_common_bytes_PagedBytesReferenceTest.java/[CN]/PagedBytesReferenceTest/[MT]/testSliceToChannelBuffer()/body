{
  int length=randomIntBetween(10,PAGE_SIZE * randomIntBetween(2,8));
  BytesReference pbr=getRandomizedPagedBytesReference(length);
  int sliceOffset=randomIntBetween(0,pbr.length());
  int sliceLength=randomIntBetween(pbr.length() - sliceOffset,pbr.length() - sliceOffset);
  BytesReference slice=pbr.slice(sliceOffset,sliceLength);
  ChannelBuffer cbSlice=slice.toChannelBuffer();
  assertNotNull(cbSlice);
  byte[] sliceBufferBytes=new byte[sliceLength];
  cbSlice.getBytes(0,sliceBufferBytes);
  assertArrayEquals(slice.toBytes(),sliceBufferBytes);
}
