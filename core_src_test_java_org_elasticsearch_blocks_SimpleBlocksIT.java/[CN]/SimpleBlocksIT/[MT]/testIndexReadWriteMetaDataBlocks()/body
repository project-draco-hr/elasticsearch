{
  canCreateIndex("test1");
  canIndexDocument("test1");
  client().admin().indices().prepareUpdateSettings("test1").setSettings(settingsBuilder().put(IndexMetaData.SETTING_BLOCKS_WRITE,true)).execute().actionGet();
  canNotIndexDocument("test1");
  client().admin().indices().prepareUpdateSettings("test1").setSettings(settingsBuilder().put(IndexMetaData.SETTING_BLOCKS_WRITE,false)).execute().actionGet();
  canIndexDocument("test1");
}
