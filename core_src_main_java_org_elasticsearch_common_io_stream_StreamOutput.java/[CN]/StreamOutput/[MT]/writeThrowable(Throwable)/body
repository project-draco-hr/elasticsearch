{
  if (throwable == null) {
    writeBoolean(false);
  }
 else {
    writeBoolean(true);
    if (throwable instanceof CorruptIndexException) {
      writeVInt(1);
    }
 else     if (throwable instanceof IndexFormatTooNewException) {
      writeVInt(2);
    }
 else     if (throwable instanceof IndexFormatTooOldException) {
      writeVInt(3);
    }
 else     if (throwable instanceof NullPointerException) {
      writeVInt(4);
    }
 else     if (throwable instanceof NumberFormatException) {
      writeVInt(5);
    }
 else     if (throwable instanceof IllegalArgumentException) {
      writeVInt(6);
    }
 else     if (throwable instanceof IllegalStateException) {
      writeVInt(7);
    }
 else     if (throwable instanceof EOFException) {
      writeVInt(8);
    }
 else     if (throwable instanceof SecurityException) {
      writeVInt(9);
    }
 else {
      ElasticsearchException ex;
      if (throwable instanceof ElasticsearchException) {
        ex=(ElasticsearchException)throwable;
      }
 else {
        ex=new StreamInput.NamedException(ElasticsearchException.getExceptionName(throwable),throwable.getMessage(),throwable.getCause());
      }
      writeVInt(0);
      writeString(ex.getClass().getName());
      ex.writeTo(this);
      return;
    }
    writeOptionalString(throwable.getMessage());
    writeThrowable(throwable.getCause());
    ElasticsearchException.writeStackTraces(throwable,this);
  }
}
