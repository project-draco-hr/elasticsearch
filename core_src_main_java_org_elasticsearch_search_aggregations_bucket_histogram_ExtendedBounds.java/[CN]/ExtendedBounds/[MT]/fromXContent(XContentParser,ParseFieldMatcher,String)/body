{
  XContentParser.Token token=null;
  String currentFieldName=null;
  ExtendedBounds extendedBounds=new ExtendedBounds();
  while ((token=parser.nextToken()) != XContentParser.Token.END_OBJECT) {
    if (token == XContentParser.Token.FIELD_NAME) {
      currentFieldName=parser.currentName();
    }
 else     if (token == XContentParser.Token.VALUE_STRING) {
      if ("min".equals(currentFieldName)) {
        extendedBounds.minAsStr=parser.text();
      }
 else       if ("max".equals(currentFieldName)) {
        extendedBounds.maxAsStr=parser.text();
      }
 else {
        throw new ParsingException(parser.getTokenLocation(),"Unknown extended_bounds key for a " + token + " in aggregation ["+ aggregationName+ "]: ["+ currentFieldName+ "].");
      }
    }
 else     if (token == XContentParser.Token.VALUE_NUMBER) {
      if (parseFieldMatcher.match(currentFieldName,MIN_FIELD)) {
        extendedBounds.min=parser.longValue(true);
      }
 else       if (parseFieldMatcher.match(currentFieldName,MAX_FIELD)) {
        extendedBounds.max=parser.longValue(true);
      }
 else {
        throw new ParsingException(parser.getTokenLocation(),"Unknown extended_bounds key for a " + token + " in aggregation ["+ aggregationName+ "]: ["+ currentFieldName+ "].");
      }
    }
  }
  return extendedBounds;
}
