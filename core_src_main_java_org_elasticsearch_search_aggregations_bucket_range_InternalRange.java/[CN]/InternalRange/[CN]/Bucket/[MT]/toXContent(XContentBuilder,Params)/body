{
  if (keyed) {
    builder.startObject(key);
  }
 else {
    builder.startObject();
    builder.field(CommonFields.KEY,key);
  }
  if (!Double.isInfinite(from)) {
    builder.field(CommonFields.FROM,from);
    if (formatter != null) {
      builder.field(CommonFields.FROM_AS_STRING,formatter.format(from));
    }
  }
  if (!Double.isInfinite(to)) {
    builder.field(CommonFields.TO,to);
    if (formatter != null) {
      builder.field(CommonFields.TO_AS_STRING,formatter.format(to));
    }
  }
  builder.field(CommonFields.DOC_COUNT,docCount);
  aggregations.toXContentInternal(builder,params);
  builder.endObject();
  return builder;
}
