{
  if (ranges.isEmpty()) {
    throw new SearchSourceBuilderException("at least one range must be defined for range aggregation [" + getName() + "]");
  }
  builder.startArray("ranges");
  for (  Range range : ranges) {
    range.toXContent(builder,params);
  }
  return builder.endArray();
}
