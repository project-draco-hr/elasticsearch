{
  final RandomAccessOrds ords=ordinals.ordinals();
  final SortedDocValues singleOrds=DocValues.unwrapSingleton(ords);
  if (singleOrds != null) {
    final NumericDocValues singleValues=new NumericDocValues(){
      @Override public long get(      int docID){
        final int ord=singleOrds.getOrd(docID);
        if (ord >= 0) {
          return values.get(singleOrds.getOrd(docID));
        }
 else {
          return 0;
        }
      }
    }
;
    return DocValues.singleton(singleValues,DocValues.docsWithValue(ords,maxDoc));
  }
 else {
    return new SortedNumericDocValues(){
      @Override public long valueAt(      int index){
        return values.get(ords.ordAt(index));
      }
      @Override public void setDocument(      int doc){
        ords.setDocument(doc);
      }
      @Override public int count(){
        return ords.cardinality();
      }
    }
;
  }
}
