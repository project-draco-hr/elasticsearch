{
  super(name,bucketAggregationMode,factories,estimatedBucketsCount,context,parent);
  this.bucketCountThresholds=bucketCountThresholds;
  this.order=InternalOrder.validate(order,this);
  this.subAggCollectMode=subAggCollectMode;
  if (order instanceof Aggregation) {
    OrderPath path=((Aggregation)order).path();
    aggUsedForSorting=path.resolveTopmostAggregator(this,false);
  }
}
