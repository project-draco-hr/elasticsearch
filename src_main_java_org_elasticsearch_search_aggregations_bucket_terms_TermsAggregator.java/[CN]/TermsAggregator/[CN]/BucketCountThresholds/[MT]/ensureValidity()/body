{
  if (shardSize.value() == 0) {
    setShardSize(Integer.MAX_VALUE);
  }
  if (requiredSize.value() == 0) {
    setRequiredSize(Integer.MAX_VALUE);
  }
  if (shardSize.value() < requiredSize.value()) {
    setShardSize(requiredSize.value());
  }
  if (shardMinDocCount.value() > minDocCount.value()) {
    setShardMinDocCount(minDocCount.value());
  }
  if (requiredSize.value() < 0 || minDocCount.value() < 0) {
    throw new ElasticsearchException("parameters [requiredSize] and [minDocCount] must be >=0 in terms aggregation.");
  }
}
