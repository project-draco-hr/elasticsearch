{
  if (!queryBuilder.hasClauses()) {
    return new MatchAllDocsQuery();
  }
  BooleanQuery boolQuery=new BooleanQuery(queryBuilder.disableCoord());
  boolQuery.setBoost(queryBuilder.boost());
  addBooleanClauses(context,boolQuery,queryBuilder.must(),BooleanClause.Occur.MUST);
  addBooleanClauses(context,boolQuery,queryBuilder.mustNot(),BooleanClause.Occur.MUST_NOT);
  addBooleanClauses(context,boolQuery,queryBuilder.should(),BooleanClause.Occur.SHOULD);
  addBooleanClauses(context,boolQuery,queryBuilder.filter(),BooleanClause.Occur.FILTER);
  Queries.applyMinimumShouldMatch(boolQuery,queryBuilder.minimumNumberShouldMatch());
  Query returnedQuery=queryBuilder.adjustPureNegative() ? fixNegativeQueryIfNeeded(boolQuery) : boolQuery;
  return returnedQuery;
}
