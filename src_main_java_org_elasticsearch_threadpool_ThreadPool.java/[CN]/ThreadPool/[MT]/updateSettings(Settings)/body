{
  Map<String,Settings> groupSettings=settings.getGroups("threadpool");
  if (groupSettings.isEmpty()) {
    return;
  }
  for (  Map.Entry<String,Settings> executor : defaultExecutorTypeSettings.entrySet()) {
    Settings updatedSettings=groupSettings.get(executor.getKey());
    if (updatedSettings == null) {
      continue;
    }
    ExecutorHolder oldExecutorHolder=executors.get(executor.getKey());
    ExecutorHolder newExecutorHolder=rebuild(executor.getKey(),oldExecutorHolder,updatedSettings,executor.getValue());
    if (!oldExecutorHolder.equals(newExecutorHolder)) {
      executors=newMapBuilder(executors).put(executor.getKey(),newExecutorHolder).immutableMap();
      if (!oldExecutorHolder.executor.equals(newExecutorHolder.executor) && oldExecutorHolder.executor instanceof EsThreadPoolExecutor) {
        retiredExecutors.add(oldExecutorHolder);
        ((EsThreadPoolExecutor)oldExecutorHolder.executor).shutdown(new ExecutorShutdownListener(oldExecutorHolder));
      }
    }
  }
}
