{
  List<ThreadPoolStats.Stats> stats=new ArrayList<ThreadPoolStats.Stats>();
  for (  ExecutorHolder holder : executors.values()) {
    String name=holder.info.name();
    if ("same".equals(name)) {
      continue;
    }
    int threads=-1;
    int queue=-1;
    int active=-1;
    long rejected=-1;
    if (holder.executor instanceof ThreadPoolExecutor) {
      ThreadPoolExecutor threadPoolExecutor=(ThreadPoolExecutor)holder.executor;
      threads=threadPoolExecutor.getPoolSize();
      queue=threadPoolExecutor.getQueue().size();
      active=threadPoolExecutor.getActiveCount();
      RejectedExecutionHandler rejectedExecutionHandler=threadPoolExecutor.getRejectedExecutionHandler();
      if (rejectedExecutionHandler instanceof XRejectedExecutionHandler) {
        rejected=((XRejectedExecutionHandler)rejectedExecutionHandler).rejected();
      }
    }
    stats.add(new ThreadPoolStats.Stats(name,threads,queue,active,rejected));
  }
  return new ThreadPoolStats(stats);
}
