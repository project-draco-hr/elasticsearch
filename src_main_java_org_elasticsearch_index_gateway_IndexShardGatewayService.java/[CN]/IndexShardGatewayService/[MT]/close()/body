{
  indexSettingsService.removeListener(applySettings);
  if (snapshotScheduleFuture != null) {
    snapshotScheduleFuture.cancel(true);
    snapshotScheduleFuture=null;
  }
  shardGateway.close();
  if (snapshotLock != null) {
    snapshotLock.release();
  }
}
