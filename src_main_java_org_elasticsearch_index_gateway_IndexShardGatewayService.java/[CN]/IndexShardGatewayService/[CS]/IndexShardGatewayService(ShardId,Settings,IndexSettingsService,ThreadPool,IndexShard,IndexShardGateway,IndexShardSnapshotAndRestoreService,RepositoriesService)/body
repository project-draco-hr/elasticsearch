{
  super(shardId,indexSettings);
  this.threadPool=threadPool;
  this.indexSettingsService=indexSettingsService;
  this.indexShard=(InternalIndexShard)indexShard;
  this.shardGateway=shardGateway;
  this.snapshotService=snapshotService;
  this.snapshotOnClose=componentSettings.getAsBoolean("snapshot_on_close",true);
  this.snapshotInterval=componentSettings.getAsTime("snapshot_interval",TimeValue.timeValueSeconds(10));
  indexSettingsService.addListener(applySettings);
}
