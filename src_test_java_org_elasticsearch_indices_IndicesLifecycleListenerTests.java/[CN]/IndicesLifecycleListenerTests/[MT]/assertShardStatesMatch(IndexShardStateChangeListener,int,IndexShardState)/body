{
  assertThat(stateChangeListener.shardStates.size(),equalTo(numShards));
  for (  List<IndexShardState> indexShardStates : stateChangeListener.shardStates.values()) {
    assertThat(indexShardStates,notNullValue());
    assertThat(indexShardStates.size(),equalTo(shardStates.length));
    for (int i=0; i < shardStates.length; i++) {
      assertThat(indexShardStates.get(i),equalTo(shardStates[i]));
    }
  }
  stateChangeListener.shardStates.clear();
}
