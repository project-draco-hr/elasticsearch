{
  Settings settings=Settings.builder().put("path.home",createTempDir()).put(ScriptService.SCRIPT_AUTO_RELOAD_ENABLED_SETTING,false).put("script." + PLUGIN_NAME + "_custom_globally_disabled_op",false).put("script.engine." + SCRIPT_LANG + ".inline."+ PLUGIN_NAME+ "_custom_exp_disabled_op",false).build();
  Set<ScriptEngineService> engines=new HashSet<>(Collections.singletonList(new MockScriptEngine()));
  List<ScriptContext.Plugin> customContexts=Arrays.asList(new ScriptContext.Plugin(PLUGIN_NAME,"custom_op"),new ScriptContext.Plugin(PLUGIN_NAME,"custom_exp_disabled_op"),new ScriptContext.Plugin(PLUGIN_NAME,"custom_globally_disabled_op"));
  return new ScriptService(settings,new Environment(settings),engines,null,new ScriptContextRegistry(customContexts));
}
