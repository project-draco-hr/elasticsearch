{
  try (RecoveriesCollection.RecoveryRef recoveryRef=onGoingRecoveries.getRecovery(recoveryId)){
    if (recoveryRef != null) {
      logger.error(new ParameterizedMessage("unexpected error during recovery [{}], failing shard",recoveryId),e);
      onGoingRecoveries.failRecovery(recoveryId,new RecoveryFailedException(recoveryRef.status().state(),"unexpected error",e),true);
    }
 else {
      logger.debug(new ParameterizedMessage("unexpected error during recovery, but recovery id [{}] is finished",recoveryId),e);
    }
  }
 }
