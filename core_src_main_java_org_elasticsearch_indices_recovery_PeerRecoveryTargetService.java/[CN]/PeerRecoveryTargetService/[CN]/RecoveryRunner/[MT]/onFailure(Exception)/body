{
  try (RecoveriesCollection.RecoveryRef recoveryRef=onGoingRecoveries.getRecovery(recoveryId)){
    if (recoveryRef != null) {
      logger.error("unexpected error during recovery [{}], failing shard",e,recoveryId);
      onGoingRecoveries.failRecovery(recoveryId,new RecoveryFailedException(recoveryRef.status().state(),"unexpected error",e),true);
    }
 else {
      logger.debug("unexpected error during recovery, but recovery id [{}] is finished",e,recoveryId);
    }
  }
 }
