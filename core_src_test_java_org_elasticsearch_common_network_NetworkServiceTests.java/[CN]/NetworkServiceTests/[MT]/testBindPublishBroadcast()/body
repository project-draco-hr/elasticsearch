{
  NetworkService service=new NetworkService(Settings.EMPTY);
  List<InetAddress> addresses=new ArrayList<>();
  for (  NetworkInterface nic : Collections.list(NetworkInterface.getNetworkInterfaces())) {
    for (    InterfaceAddress intf : nic.getInterfaceAddresses()) {
      InetAddress address=intf.getBroadcast();
      if (address != null) {
        addresses.add(address);
      }
    }
  }
  assumeTrue("test requires broadcast addresses configured",addresses.size() > 0);
  for (  InetAddress address : addresses) {
    try {
      service.resolveBindHostAddress(NetworkAddress.formatAddress(address));
      fail("should have hit exception for broadcast address: " + address);
    }
 catch (    IllegalArgumentException e) {
      assertTrue(e.getMessage().contains("invalid: broadcast"));
    }
    try {
      service.resolvePublishHostAddress(NetworkAddress.formatAddress(address));
      fail("should have hit exception for broadcast address: " + address);
    }
 catch (    IllegalArgumentException e) {
      assertTrue(e.getMessage().contains("invalid: broadcast"));
    }
  }
}
