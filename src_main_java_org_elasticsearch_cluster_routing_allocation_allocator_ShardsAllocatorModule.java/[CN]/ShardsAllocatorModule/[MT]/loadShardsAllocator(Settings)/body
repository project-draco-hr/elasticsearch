{
  final Class<? extends ShardsAllocator> shardsAllocator;
  final String type=settings.get(TYPE_KEY,BALANCED_ALLOCATOR_KEY);
  if (BALANCED_ALLOCATOR_KEY.equals(type)) {
    shardsAllocator=BalancedShardsAllocator.class;
  }
 else   if (EVEN_SHARD_COUNT_ALLOCATOR_KEY.equals(type)) {
    shardsAllocator=EvenShardsCountAllocator.class;
  }
 else {
    shardsAllocator=settings.getAsClass(TYPE_KEY,BalancedShardsAllocator.class,"org.elasticsearch.cluster.routing.allocation.allocator.","Allocator");
  }
  return shardsAllocator;
}
