{
  Map<String,String> attributes;
  if (ingestNode) {
    attributes=Collections.singletonMap("ingest","true");
  }
 else {
    attributes=randomBoolean() ? Collections.emptyMap() : Collections.singletonMap("ingest","false");
  }
  String id=String.valueOf(index);
  return new DiscoveryNode(id,id,new LocalTransportAddress(id),attributes,Version.CURRENT);
}
