{
  Adler32 expected=new Adler32();
  byte bytes[]="abcdefgh".getBytes(StandardCharsets.UTF_8);
  expected.update(bytes);
  String expectedString=Store.digestToString(expected.getValue());
  Directory dir=newDirectory();
  IndexOutput o=dir.createOutput("legacy",IOContext.DEFAULT);
  VerifyingIndexOutput out=new LegacyVerification.Adler32VerifyingIndexOutput(o,expectedString,8);
  out.writeBytes(bytes,0,bytes.length);
  out.verify();
  out.close();
  out.verify();
  dir.close();
}
