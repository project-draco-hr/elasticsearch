{
  client().admin().indices().prepareCreate("test").execute().actionGet();
  client().admin().cluster().prepareHealth("test").setWaitForGreenStatus().execute().actionGet();
  client().admin().indices().prepareAliases().addAlias("test","alias1",FilterBuilders.termFilter("field2","value2")).execute().actionGet();
  client().prepareIndex("test","test","1").setSource("field1","value1","field2","value1").execute().actionGet();
  client().admin().indices().prepareRefresh("test").execute().actionGet();
  ExplainResponse response=client().prepareExplain("alias1","test","1").setQuery(QueryBuilders.matchAllQuery()).execute().actionGet();
  assertNotNull(response);
  assertTrue(response.isExists());
  assertFalse(response.isMatch());
  assertThat(response.getIndex(),equalTo("test"));
  assertThat(response.getType(),equalTo("test"));
  assertThat(response.getId(),equalTo("1"));
}
