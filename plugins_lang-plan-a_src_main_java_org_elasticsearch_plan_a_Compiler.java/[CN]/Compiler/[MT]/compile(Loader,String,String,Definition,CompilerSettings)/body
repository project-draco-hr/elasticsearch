{
  long start=System.currentTimeMillis();
  final Definition definition=custom == null ? DEFAULT_DEFINITION : new Definition(custom);
  final ANTLRInputStream stream=new ANTLRInputStream(source);
  final ErrorHandlingLexer lexer=new ErrorHandlingLexer(stream);
  final PlanAParser parser=new PlanAParser(new CommonTokenStream(lexer));
  final ParserErrorStrategy strategy=new ParserErrorStrategy();
  lexer.removeErrorListeners();
  lexer.setTypes(definition.structs.keySet());
  parser.removeErrorListeners();
  parser.setErrorHandler(strategy);
  ParserRuleContext root=parser.source();
  final Adapter adapter=new Adapter(definition,source,root,settings);
  start=System.currentTimeMillis();
  Analyzer.analyze(adapter);
  final byte[] bytes=Writer.write(adapter);
  final Executable executable=createExecutable(loader,definition,name,source,bytes);
  return executable;
}
