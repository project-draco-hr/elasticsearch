{
  createIndex("test");
  NodesInfoResponse nodesInfo=client().admin().cluster().prepareNodesInfo().execute().actionGet();
  Settings settings=ImmutableSettings.settingsBuilder().put("client.transport.ignore_cluster_name",true).put("node.name","transport_client_" + getTestName()).build();
  for (  NodeInfo n : nodesInfo.getNodes()) {
    try (TransportClient tc=new TransportClient(settings)){
      tc.addTransportAddress(n.getNode().address());
      ClusterStateResponse response=tc.admin().cluster().prepareState().execute().actionGet();
      assertThat(response.getState().status(),equalTo(ClusterState.ClusterStateStatus.UNKNOWN));
      assertNotNull(response.getClusterName());
      assertTrue(response.getState().getMetaData().hasIndex("test"));
    }
   }
}
