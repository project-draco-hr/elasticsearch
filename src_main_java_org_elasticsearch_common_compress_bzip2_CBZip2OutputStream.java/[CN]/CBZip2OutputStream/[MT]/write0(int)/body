{
  if (this.currentChar != -1) {
    b&=0xff;
    if (this.currentChar == b) {
      if (++this.runLength > 254) {
        writeRun();
        this.currentChar=-1;
        this.runLength=0;
      }
    }
 else {
      writeRun();
      this.runLength=1;
      this.currentChar=b;
    }
  }
 else {
    this.currentChar=b & 0xff;
    this.runLength++;
  }
}
