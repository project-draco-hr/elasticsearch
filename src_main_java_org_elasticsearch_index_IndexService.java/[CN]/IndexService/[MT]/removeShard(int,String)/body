{
  final ShardId sId=new ShardId(index,shardId);
  final Injector shardInjector;
  final IndexShard indexShard;
  if (shards.containsKey(shardId) == false) {
    return;
  }
  logger.debug("[{}] closing... (reason: [{}])",shardId,reason);
  HashMap<Integer,Tuple<IndexShard,Injector>> tmpShardsMap=newHashMap(shards);
  Tuple<IndexShard,Injector> tuple=tmpShardsMap.remove(shardId);
  indexShard=tuple.v1();
  shardInjector=tuple.v2();
  shards=ImmutableMap.copyOf(tmpShardsMap);
  closeShardInjector(reason,sId,shardInjector,indexShard);
  logger.debug("[{}] closed (reason: [{}])",shardId,reason);
}
