{
  DocumentMapperParser parser=createIndex("test").mapperService().documentMapperParser();
  String objectMapping=XContentFactory.jsonBuilder().startObject().startObject("type1").endObject().endObject().string();
  DocumentMapper mapper=parser.parse(objectMapping);
  assertThat(mapper.root().dynamic(),equalTo(ObjectMapper.Dynamic.TRUE));
  String withDynamicMapping=XContentFactory.jsonBuilder().startObject().startObject("type1").field("dynamic","false").endObject().endObject().string();
  DocumentMapper withDynamicMapper=parser.parse(withDynamicMapping);
  assertThat(withDynamicMapper.root().dynamic(),equalTo(ObjectMapper.Dynamic.FALSE));
  MergeResult mergeResult=mapper.merge(withDynamicMapper.mapping(),false);
  assertThat(mergeResult.hasConflicts(),equalTo(false));
  assertThat(mapper.root().dynamic(),equalTo(ObjectMapper.Dynamic.FALSE));
}
