{
  String objectMapping=XContentFactory.jsonBuilder().startObject().startObject("type1").endObject().endObject().string();
  DocumentMapper mapper=MapperTestUtils.newParser().parse(objectMapping);
  assertThat(mapper.root().dynamic(),equalTo(ObjectMapper.Dynamic.TRUE));
  String withDynamicMapping=XContentFactory.jsonBuilder().startObject().startObject("type1").field("dynamic","false").endObject().endObject().string();
  DocumentMapper withDynamicMapper=MapperTestUtils.newParser().parse(withDynamicMapping);
  assertThat(withDynamicMapper.root().dynamic(),equalTo(ObjectMapper.Dynamic.FALSE));
  DocumentMapper.MergeResult mergeResult=mapper.merge(withDynamicMapper,mergeFlags().simulate(false));
  assertThat(mergeResult.hasConflicts(),equalTo(false));
  assertThat(mapper.root().dynamic(),equalTo(ObjectMapper.Dynamic.FALSE));
}
