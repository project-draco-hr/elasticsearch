{
  IndexShard indexShard=indicesService.indexServiceSafe(request.index()).shardSafe(request.shardId());
  indexShard.optimize(new Engine.Optimize().waitForMerge(request.waitForMerge()).maxNumSegments(request.maxNumSegments()).onlyExpungeDeletes(request.onlyExpungeDeletes()).flush(request.flush()));
  return new ShardOptimizeResponse(request.index(),request.shardId());
}
