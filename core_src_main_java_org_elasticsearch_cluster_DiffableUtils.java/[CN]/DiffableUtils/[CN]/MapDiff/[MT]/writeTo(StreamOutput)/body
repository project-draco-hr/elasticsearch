{
  out.writeVInt(deletes.size());
  for (  String delete : deletes) {
    out.writeString(delete);
  }
  out.writeVInt(diffs.size());
  for (  Map.Entry<String,Diff<T>> entry : diffs.entrySet()) {
    out.writeString(entry.getKey());
    entry.getValue().writeTo(out);
  }
  out.writeVInt(adds.size());
  for (  Map.Entry<String,T> entry : adds.entrySet()) {
    out.writeString(entry.getKey());
    entry.getValue().writeTo(out);
  }
}
