{
  if (name == null && url == null) {
    throw new IllegalArgumentException("plugin name or url must be supplied with install.");
  }
  if (!Files.exists(environment.pluginsFile())) {
    terminal.println("Plugins directory [%s] does not exist. Creating...",environment.pluginsFile());
    Files.createDirectory(environment.pluginsFile());
  }
  if (!Environment.isWritable(environment.pluginsFile())) {
    throw new IOException("plugin directory " + environment.pluginsFile() + " is read only");
  }
  PluginHandle pluginHandle;
  if (name != null) {
    pluginHandle=PluginHandle.parse(name);
    checkForForbiddenName(pluginHandle.name);
  }
 else {
    pluginHandle=new PluginHandle("temp_name" + Randomness.get().nextInt(),null,null);
  }
  Path pluginFile=download(pluginHandle,terminal);
  extract(pluginHandle,terminal,pluginFile,batch);
}
