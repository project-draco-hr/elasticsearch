{
  String indexName=loadIndex(index);
  assertIndexSanity(indexName);
  assertBasicSearchWorks(indexName);
  assertBasicAggregationWorks(indexName);
  assertRealtimeGetWorks(indexName);
  assertNewReplicasWork(indexName);
  Version version=extractVersion(index);
  assertUpgradeWorks(indexName,isLatestLuceneVersion(version));
  assertDeleteByQueryWorked(indexName,version);
  unloadIndex(indexName);
}
