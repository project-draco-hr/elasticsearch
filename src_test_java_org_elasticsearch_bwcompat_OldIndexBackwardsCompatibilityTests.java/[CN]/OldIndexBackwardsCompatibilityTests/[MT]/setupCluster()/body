{
  ListenableFuture<List<String>> replicas=internalCluster().startNodesAsync(2);
  Path dataDir=newTempDirPath(LifecycleScope.SUITE);
  ImmutableSettings.Builder nodeSettings=ImmutableSettings.builder().put("path.data",dataDir.toAbsolutePath()).put("node.master",false);
  String loadingNode=internalCluster().startNode(nodeSettings.build());
  Path[] nodePaths=internalCluster().getInstance(NodeEnvironment.class,loadingNode).nodeDataPaths();
  assertEquals(1,nodePaths.length);
  indicesDir=nodePaths[0].resolve(NodeEnvironment.INDICES_FOLDER);
  assertFalse(Files.exists(indicesDir));
  Files.createDirectories(indicesDir);
  replicas.get();
}
