{
  List<InternalFilters.Bucket> buckets=Lists.newArrayListWithCapacity(filters.length);
  for (int i=0; i < filters.length; i++) {
    KeyedFilter filter=filters[i];
    long bucketOrd=bucketOrd(owningBucketOrdinal,i);
    InternalFilters.Bucket bucket=new InternalFilters.Bucket(filter.key,bucketDocCount(bucketOrd),bucketAggregations(bucketOrd));
    buckets.add(bucket);
  }
  return new InternalFilters(name,buckets,keyed);
}
