{
  MappedFieldType ft=createDefaultFieldType();
  ft.setName("field");
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("::"),XInetAddressPoint.MAX_VALUE),ft.rangeQuery(null,null,randomBoolean(),randomBoolean()));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("::"),InetAddresses.forString("192.168.2.0")),ft.rangeQuery(null,"192.168.2.0",randomBoolean(),true));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("::"),InetAddresses.forString("192.168.1.255")),ft.rangeQuery(null,"192.168.2.0",randomBoolean(),false));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("2001:db8::"),XInetAddressPoint.MAX_VALUE),ft.rangeQuery("2001:db8::",null,true,randomBoolean()));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("2001:db8::1"),XInetAddressPoint.MAX_VALUE),ft.rangeQuery("2001:db8::",null,false,randomBoolean()));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("2001:db8::"),InetAddresses.forString("2001:db8::ffff")),ft.rangeQuery("2001:db8::","2001:db8::ffff",true,true));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("2001:db8::1"),InetAddresses.forString("2001:db8::fffe")),ft.rangeQuery("2001:db8::","2001:db8::ffff",false,false));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("2001:db8::2"),InetAddresses.forString("2001:db8::")),ft.rangeQuery("2001:db8::1","2001:db8::1",false,false));
  assertEquals(new MatchNoDocsQuery(),ft.rangeQuery("::","::",true,false));
  assertEquals(new MatchNoDocsQuery(),ft.rangeQuery("ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff","ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff",false,true));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("::"),InetAddresses.forString("::fffe:ffff:ffff")),ft.rangeQuery("::","0.0.0.0",true,false));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("::1:0:0:0"),XInetAddressPoint.MAX_VALUE),ft.rangeQuery("255.255.255.255","ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff",false,true));
  assertEquals(InetAddressPoint.newRangeQuery("field",InetAddresses.forString("192.168.1.7"),InetAddresses.forString("2001:db8::")),ft.rangeQuery("::ffff:c0a8:107","2001:db8::",true,true));
}
