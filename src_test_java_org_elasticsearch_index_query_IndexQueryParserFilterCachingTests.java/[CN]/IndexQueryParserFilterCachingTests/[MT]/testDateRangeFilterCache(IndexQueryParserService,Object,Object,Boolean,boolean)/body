{
  RangeFilterBuilder filterBuilder=FilterBuilders.rangeFilter("born").gte(gte).lte(lte);
  if (forcedCache != null) {
    filterBuilder.cache(forcedCache);
  }
  Query parsedQuery=queryParser.parse(QueryBuilders.constantScoreQuery(filterBuilder)).query();
  assertThat(parsedQuery,instanceOf(ConstantScoreQuery.class));
  if (expectedCache) {
    if (((ConstantScoreQuery)parsedQuery).getFilter() instanceof CachedFilter) {
      logger.info("gte [{}], lte [{}], _cache [{}] is cached",gte,lte,forcedCache);
    }
 else {
      logger.warn("gte [{}], lte [{}], _cache [{}] should be cached",gte,lte,forcedCache);
    }
  }
 else {
    if (((ConstantScoreQuery)parsedQuery).getFilter() instanceof NoCacheFilter) {
      logger.info("gte [{}], lte [{}], _cache [{}] is not cached",gte,lte,forcedCache);
    }
 else {
      logger.warn("gte [{}], lte [{}], _cache [{}] should not be cached",gte,lte,forcedCache);
    }
  }
  if (expectedCache) {
    assertThat(((ConstantScoreQuery)parsedQuery).getFilter(),instanceOf(CachedFilter.class));
  }
 else {
    assertThat(((ConstantScoreQuery)parsedQuery).getFilter(),instanceOf(NoCacheFilter.class));
  }
}
