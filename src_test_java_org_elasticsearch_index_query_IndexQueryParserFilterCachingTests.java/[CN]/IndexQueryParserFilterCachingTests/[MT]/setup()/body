{
  Settings settings=ImmutableSettings.settingsBuilder().put("index.cache.filter.type","weighted").put("name","IndexQueryParserFilterCachingTests").build();
  IndexService indexService=createIndex("test",settings);
  injector=indexService.injector();
  MapperService mapperService=indexService.mapperService();
  String mapping=copyToStringFromClasspath("/org/elasticsearch/index/query/mapping.json");
  mapperService.merge("person",new CompressedString(mapping),true);
  String childMapping=copyToStringFromClasspath("/org/elasticsearch/index/query/child-mapping.json");
  mapperService.merge("child",new CompressedString(childMapping),true);
  mapperService.documentMapper("person").parse(new BytesArray(copyToBytesFromClasspath("/org/elasticsearch/index/query/data.json")));
  queryParser=injector.getInstance(IndexQueryParserService.class);
  SearchContext.setCurrent(new TestSearchContext());
}
