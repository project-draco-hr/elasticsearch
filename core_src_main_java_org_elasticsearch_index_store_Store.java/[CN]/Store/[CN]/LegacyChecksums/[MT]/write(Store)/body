{
synchronized (store.directory) {
    Tuple<Map<String,String>,Long> tuple=MetadataSnapshot.readLegacyChecksums(store.directory);
    tuple.v1().putAll(legacyChecksums);
    if (!tuple.v1().isEmpty()) {
      writeChecksums(store.directory,tuple.v1(),tuple.v2());
    }
  }
}
