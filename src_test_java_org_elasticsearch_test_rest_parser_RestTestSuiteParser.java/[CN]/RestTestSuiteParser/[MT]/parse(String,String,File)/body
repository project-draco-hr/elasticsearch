{
  if (!file.isFile()) {
    throw new IllegalArgumentException(file.getAbsolutePath() + " is not a file");
  }
  XContentParser parser=YamlXContent.yamlXContent.createParser(new FileInputStream(file));
  try {
    String filename=file.getName();
    int i=filename.lastIndexOf('.');
    if (i > 0) {
      filename=filename.substring(0,i);
    }
    RestTestSuiteParseContext testParseContext=new RestTestSuiteParseContext(api,filename,parser,currentVersion);
    return parse(testParseContext);
  }
  finally {
    parser.close();
  }
}
