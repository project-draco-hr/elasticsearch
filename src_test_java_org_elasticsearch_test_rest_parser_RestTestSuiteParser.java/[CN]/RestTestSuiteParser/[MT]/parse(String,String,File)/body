{
  if (!file.isFile()) {
    throw new IllegalArgumentException(file.getAbsolutePath() + " is not a file");
  }
  String filename=file.getName();
  int i=filename.lastIndexOf('.');
  if (i > 0) {
    filename=filename.substring(0,i);
  }
  RandomAccessFile randomAccessFile=null;
  try {
    randomAccessFile=new RandomAccessFile(file,"r");
    randomAccessFile.skipBytes((int)randomAccessFile.length() - 1);
    if (randomAccessFile.read() != 10) {
      throw new RestTestParseException("test suite [" + api + "/"+ filename+ "] doesn't end with line feed (\\n)");
    }
  }
  finally {
    IOUtils.close(randomAccessFile);
  }
  try (XContentParser parser=YamlXContent.yamlXContent.createParser(new FileInputStream(file))){
    RestTestSuiteParseContext testParseContext=new RestTestSuiteParseContext(api,filename,parser,currentVersion);
    return parse(testParseContext);
  }
 }
