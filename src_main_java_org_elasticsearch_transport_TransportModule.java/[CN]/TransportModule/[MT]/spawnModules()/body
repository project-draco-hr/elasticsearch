{
  Class<? extends Module> defaultTransportModule;
  if (DiscoveryNode.localNode(settings)) {
    defaultTransportModule=LocalTransportModule.class;
  }
 else {
    defaultTransportModule=NettyTransportModule.class;
  }
  return ImmutableList.of(Modules.createModule(settings.getAsClass(TRANSPORT_TYPE_KEY,defaultTransportModule,"org.elasticsearch.transport.","TransportModule"),settings));
}
