{
  long storeTotalSize=0;
  long fieldCacheTotalSize=0;
  long filterCacheTotalSize=0;
  for (  IndexService indexService : indices.values()) {
    for (    IndexShard indexShard : indexService) {
      try {
        storeTotalSize+=((InternalIndexShard)indexShard).store().estimateSize().bytes();
      }
 catch (      IOException e) {
      }
    }
    fieldCacheTotalSize+=indexService.cache().fieldData().sizeInBytes();
    filterCacheTotalSize+=indexService.cache().filter().sizeInBytes();
  }
  return new IndicesStats(new ByteSizeValue(storeTotalSize),new ByteSizeValue(fieldCacheTotalSize),new ByteSizeValue(filterCacheTotalSize));
}
