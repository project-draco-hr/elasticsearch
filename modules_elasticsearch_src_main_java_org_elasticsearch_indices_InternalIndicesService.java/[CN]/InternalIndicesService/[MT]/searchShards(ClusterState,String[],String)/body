{
  if (indexNames == null || indexNames.length == 0) {
    ImmutableMap<String,IndexService> indices=this.indices;
    indexNames=indices.keySet().toArray(new String[indices.keySet().size()]);
  }
  GroupShardsIterator its=new GroupShardsIterator();
  for (  String index : indexNames) {
    its.add(indexServiceSafe(index).operationRouting().searchShards(clusterState,queryHint));
  }
  return its;
}
