{
  super(settings);
  this.nodeEnv=nodeEnv;
  this.threadPool=threadPool;
  this.indicesLifecycle=(InternalIndicesLifecycle)indicesLifecycle;
  this.indicesAnalysisService=indicesAnalysisService;
  this.indicesStore=indicesStore;
  this.injector=injector;
  this.pluginsService=injector.getInstance(PluginsService.class);
  try {
    FieldCache.DEFAULT.getClass().getMethod("setIndexReaderPurgedListener",IndexReaderPurgedListener.class);
    FieldCache.DEFAULT.setIndexReaderPurgedListener(new CacheReaderPurgeListener(this));
    logger.trace("eager reader based cache eviction enabled");
  }
 catch (  NoSuchMethodException e) {
    logger.warn("lucene default FieldCache is used, not enabling eager reader based cache eviction");
  }
}
