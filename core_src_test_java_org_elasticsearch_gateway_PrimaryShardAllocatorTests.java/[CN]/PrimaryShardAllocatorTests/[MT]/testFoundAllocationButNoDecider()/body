{
  RoutingAllocation allocation=routingAllocationWithOnePrimaryNoReplicas(noAllocationDeciders());
  testAllocator.addData(node1,10);
  boolean changed=testAllocator.allocateUnassigned(allocation);
  assertThat(changed,equalTo(true));
  assertThat(allocation.routingNodes().ignoredUnassigned().isEmpty(),equalTo(true));
  assertThat(allocation.routingNodes().shardsWithState(ShardRoutingState.INITIALIZING).size(),equalTo(1));
  assertThat(allocation.routingNodes().shardsWithState(ShardRoutingState.INITIALIZING).get(0).currentNodeId(),equalTo(node1.id()));
}
