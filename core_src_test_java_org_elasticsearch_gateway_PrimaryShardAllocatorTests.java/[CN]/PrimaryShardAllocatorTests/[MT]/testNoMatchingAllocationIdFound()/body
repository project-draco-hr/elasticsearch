{
  RoutingAllocation allocation=routingAllocationWithOnePrimaryNoReplicas(yesAllocationDeciders(),false,Version.CURRENT,"id2");
  testAllocator.addData(node1,ShardStateMetaData.NO_VERSION,"id1",randomBoolean());
  boolean changed=testAllocator.allocateUnassigned(allocation);
  assertThat(changed,equalTo(true));
  assertThat(allocation.routingNodes().unassigned().ignored().size(),equalTo(1));
  assertThat(allocation.routingNodes().unassigned().ignored().get(0).shardId(),equalTo(shardId));
  assertClusterHealthStatus(allocation,ClusterHealthStatus.YELLOW);
}
