{
  RoutingAllocation allocation=routingAllocationWithOnePrimaryNoReplicas(yesAllocationDeciders());
  testAllocator.addData(node1,3,new CorruptIndexException("test","test"));
  boolean changed=testAllocator.allocateUnassigned(allocation);
  assertThat(changed,equalTo(false));
  assertThat(allocation.routingNodes().ignoredUnassigned().size(),equalTo(1));
  assertThat(allocation.routingNodes().ignoredUnassigned().get(0).shardId(),equalTo(shardId));
}
