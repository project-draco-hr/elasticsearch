{
  getter=before.struct.methods.get(new Definition.MethodKey("get",1));
  setter=before.struct.methods.get(new Definition.MethodKey("put",2));
  if (getter != null && (getter.rtn.sort == Sort.VOID || getter.arguments.size() != 1)) {
    throw new IllegalArgumentException(error("Illegal map get shortcut for type [" + before.name + "]."));
  }
  if (setter != null && setter.arguments.size() != 2) {
    throw new IllegalArgumentException(error("Illegal map set shortcut for type [" + before.name + "]."));
  }
  if (getter != null && setter != null && (!getter.arguments.get(0).equals(setter.arguments.get(0)) || !getter.rtn.equals(setter.arguments.get(1)))) {
    throw new IllegalArgumentException(error("Shortcut argument types must match."));
  }
  if ((load || store) && (!load || getter != null) && (!store || setter != null)) {
    index.expected=setter != null ? setter.arguments.get(0) : getter.arguments.get(0);
    index.analyze(settings,variables);
    index=index.cast(settings,variables);
    after=setter != null ? setter.arguments.get(1) : getter.rtn;
  }
 else {
    throw new IllegalArgumentException(error("Illegal map shortcut for type [" + before.name + "]."));
  }
  return this;
}
