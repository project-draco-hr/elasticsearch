{
  if (request.rawPath().startsWith("/_plugin/")) {
    for (    RestPreProcessor preProcessor : restController.preProcessors()) {
      if (!preProcessor.handleExternal()) {
        continue;
      }
      if (!preProcessor.process(request,channel)) {
        return;
      }
    }
    handlePluginSite(request,channel);
    return;
  }
  if (!restController.dispatchRequest(request,channel)) {
    if (request.method() == RestRequest.Method.OPTIONS) {
      StringRestResponse response=new StringRestResponse(OK);
      channel.sendResponse(response);
    }
 else {
      channel.sendResponse(new StringRestResponse(BAD_REQUEST,"No handler found for uri [" + request.uri() + "] and method ["+ request.method()+ "]"));
    }
  }
}
