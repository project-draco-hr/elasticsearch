{
  Settings settings=settingsBuilder().put("index.queryparser.json.query.my.type",MyJsonQueryParser.class).put("index.queryparser.json.query.my.param1","value1").put("index.queryparser.json.filter.my.type",MyJsonFilterParser.class).put("index.queryparser.json.filter.my.param2","value2").put("index.cache.filter.type","none").build();
  Index index=new Index("test");
  Injector injector=Guice.createInjector(new IndexSettingsModule(settings),new FilterCacheModule(settings),new AnalysisModule(settings),new SimilarityModule(settings),new IndexQueryParserModule(settings),new IndexNameModule(index));
  IndexQueryParserService indexQueryParserService=injector.getInstance(IndexQueryParserService.class);
  JsonQueryParserRegistry parserRegistry=((JsonIndexQueryParser)indexQueryParserService.defaultIndexQueryParser()).queryParserRegistry();
  MyJsonQueryParser myJsonQueryParser=(MyJsonQueryParser)parserRegistry.queryParser("my");
  assertThat(myJsonQueryParser.name(),equalTo("my"));
  assertThat(myJsonQueryParser.settings().get("param1"),equalTo("value1"));
  MyJsonFilterParser myJsonFilterParser=(MyJsonFilterParser)parserRegistry.filterParser("my");
  assertThat(myJsonFilterParser.name(),equalTo("my"));
  assertThat(myJsonFilterParser.settings().get("param2"),equalTo("value2"));
}
