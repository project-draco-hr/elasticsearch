{
  prepareCreate("test").setSettings(SETTING_NUMBER_OF_SHARDS,5,SETTING_NUMBER_OF_REPLICAS,0).get();
  ensureGreen();
  index("test","type1","1","foo","bar");
  refresh();
  TermSuggestionBuilder termSuggest=termSuggestion("test").suggestMode("always").text("abcd").field("text");
  Suggest suggest=searchSuggest(client(),termSuggest);
  assertSuggestionSize(suggest,0,0,"test");
  assertThat(suggest.getSuggestion("test").getEntries().get(0).getText().string(),equalTo("abcd"));
  suggest=searchSuggest(client(),termSuggest);
  assertSuggestionSize(suggest,0,0,"test");
  assertThat(suggest.getSuggestion("test").getEntries().get(0).getText().string(),equalTo("abcd"));
}
