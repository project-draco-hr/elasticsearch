{
  prepareCreate("test").setSettings(SETTING_NUMBER_OF_SHARDS,5,SETTING_NUMBER_OF_REPLICAS,0).get();
  ensureGreen();
  Map<String,Integer> termsAndDocCount=new HashMap<String,Integer>();
  termsAndDocCount.put("prefix_aaad",20);
  termsAndDocCount.put("prefix_abbb",18);
  termsAndDocCount.put("prefix_aaca",16);
  termsAndDocCount.put("prefix_abba",14);
  termsAndDocCount.put("prefix_accc",12);
  termsAndDocCount.put("prefix_addd",10);
  termsAndDocCount.put("prefix_abaa",8);
  termsAndDocCount.put("prefix_dbca",6);
  termsAndDocCount.put("prefix_cbad",4);
  termsAndDocCount.put("prefix_aacd",1);
  termsAndDocCount.put("prefix_abcc",1);
  termsAndDocCount.put("prefix_accd",1);
  for (  Map.Entry<String,Integer> entry : termsAndDocCount.entrySet()) {
    for (int i=0; i < entry.getValue(); i++) {
      index("test","type1",entry.getKey() + i,"field1",entry.getKey());
    }
  }
  refresh();
  Suggest suggest=searchSuggest(client(),"prefix_abcd",termSuggestion("size3SortScoreFirst").size(3).minDocFreq(0).field("field1").suggestMode("always"),termSuggestion("size10SortScoreFirst").size(10).minDocFreq(0).field("field1").suggestMode("always").shardSize(50),termSuggestion("size3SortScoreFirstMaxEdits1").maxEdits(1).size(10).minDocFreq(0).field("field1").suggestMode("always"),termSuggestion("size10SortFrequencyFirst").size(10).sort("frequency").shardSize(1000).minDocFreq(0).field("field1").suggestMode("always"));
  assertSuggestion(suggest,0,"size3SortScoreFirst","prefix_aacd","prefix_abcc","prefix_accd");
  assertSuggestion(suggest,0,"size10SortScoreFirst",10,"prefix_aacd","prefix_abcc","prefix_accd");
  assertSuggestion(suggest,0,"size3SortScoreFirstMaxEdits1","prefix_aacd","prefix_abcc","prefix_accd");
  assertSuggestion(suggest,0,"size10SortFrequencyFirst","prefix_aaad","prefix_abbb","prefix_aaca","prefix_abba","prefix_accc","prefix_addd","prefix_abaa","prefix_dbca","prefix_cbad","prefix_aacd");
}
