{
  final BytesReference bRef;
  try (BytesStreamOutput bStream=new BytesStreamOutput()){
    try (StreamOutput stream=new OutputStreamStreamOutput(bStream)){
      XContentBuilder builder=XContentFactory.contentBuilder(XContentType.JSON,stream);
      builder.startObject();
      builder.startArray(SNAPSHOTS);
      for (      SnapshotId snapshot : snapshots) {
        builder.startObject();
        builder.field(NAME,snapshot.getName());
        builder.field(UUID,snapshot.getUUID());
        builder.endObject();
      }
      builder.endArray();
      builder.endObject();
      builder.close();
    }
     bRef=bStream.bytes();
  }
   if (snapshotsBlobContainer.blobExists(SNAPSHOTS_FILE)) {
    snapshotsBlobContainer.deleteBlob(SNAPSHOTS_FILE);
  }
  snapshotsBlobContainer.writeBlob(SNAPSHOTS_FILE,bRef);
}
