{
  final BytesReference bRef;
  try (BytesStreamOutput bStream=new BytesStreamOutput()){
    try (StreamOutput stream=new OutputStreamStreamOutput(bStream)){
      XContentBuilder builder=XContentFactory.contentBuilder(XContentType.JSON,stream);
      builder.startObject();
      builder.startArray("snapshots");
      for (      SnapshotId snapshot : snapshots) {
        builder.value(snapshot.getSnapshot());
      }
      builder.endArray();
      builder.endObject();
      builder.close();
    }
     bRef=bStream.bytes();
  }
   snapshotsBlobContainer.deleteBlob(SNAPSHOTS_FILE);
  try (OutputStream output=snapshotsBlobContainer.createOutput(SNAPSHOTS_FILE)){
    bRef.writeTo(output);
  }
 }
