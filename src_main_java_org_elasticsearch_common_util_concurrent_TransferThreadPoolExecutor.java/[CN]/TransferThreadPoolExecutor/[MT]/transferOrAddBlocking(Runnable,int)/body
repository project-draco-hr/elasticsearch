{
  if (currentCapacity < blockingCapacity) {
    workQueue.add(command);
  }
 else {
    boolean succeeded;
    try {
      succeeded=workQueue.tryTransfer(command,blockingTime,TimeUnit.NANOSECONDS);
      if (!succeeded) {
        throw new RejectedExecutionException("Rejected execution after waiting " + TimeUnit.NANOSECONDS.toSeconds(blockingTime) + "s for task ["+ command.getClass()+ "] to be executed.");
      }
    }
 catch (    InterruptedException e) {
      throw new RejectedExecutionException(e);
    }
  }
}
