{
  for (; ; ) {
    try {
      int state=runState;
      if (state > SHUTDOWN)       return null;
      Runnable r;
      if (state == SHUTDOWN)       r=workQueue.poll();
 else       if (poolSize.get() > corePoolSize)       r=workQueue.poll(keepAliveTime,TimeUnit.NANOSECONDS);
 else       r=workQueue.take();
      if (r != null) {
        queueSize.decrementAndGet();
        return r;
      }
      if (workerCanExit()) {
        if (runState >= SHUTDOWN)         interruptIdleWorkers();
        return null;
      }
    }
 catch (    InterruptedException ie) {
    }
  }
}
