{
  if (len == 0) {
    return 0;
  }
  int outputPos=off;
  readyBuffer();
  if (bufferLength == -1) {
    return -1;
  }
  while (outputPos < len && bufferPosition < bufferLength) {
    int chunkLength=Math.min(bufferLength - bufferPosition,len - outputPos);
    System.arraycopy(uncompressedBytes,bufferPosition,b,outputPos,chunkLength);
    outputPos+=chunkLength;
    bufferPosition+=chunkLength;
    readyBuffer();
  }
  return outputPos - off;
}
