{
  for (  Map.Entry<String,Filter> entry : namedFiltersAndQueries.entrySet()) {
    String name=entry.getKey();
    Filter filter=entry.getValue();
    DocIdSet filterDocIdSet=filter.getDocIdSet(hitContext.readerContext(),null);
    if (!DocIdSets.isEmpty(filterDocIdSet)) {
      if (!DocIdSets.isEmpty(docAndNestedDocsIdSet)) {
        DocIdSetIterator filterIterator=filterDocIdSet.iterator();
        DocIdSetIterator docAndNestedDocsIterator=docAndNestedDocsIdSet.iterator();
        if (filterIterator != null && docAndNestedDocsIterator != null) {
          int matchedDocId=-1;
          for (int docId=docAndNestedDocsIterator.nextDoc(); docId < DocIdSetIterator.NO_MORE_DOCS; docId=docAndNestedDocsIterator.nextDoc()) {
            if (docId != matchedDocId) {
              matchedDocId=filterIterator.advance(docId);
            }
            if (matchedDocId == docId) {
              matchedQueries.add(name);
              break;
            }
          }
        }
      }
 else {
        Bits bits=filterDocIdSet.bits();
        if (bits != null) {
          if (bits.get(hitContext.docId())) {
            matchedQueries.add(name);
          }
        }
 else {
          DocIdSetIterator iterator=filterDocIdSet.iterator();
          if (iterator != null) {
            if (iterator.advance(hitContext.docId()) == hitContext.docId()) {
              matchedQueries.add(name);
            }
          }
        }
      }
    }
  }
}
