{
  boolean timedout=false;
  try {
    timedout=comittedOrFailed.await(commitTimeout.millis(),TimeUnit.MILLISECONDS) == false;
  }
 catch (  InterruptedException e) {
  }
  if (committed.get() == false) {
    throw new FailedToCommitException("{} enough masters to ack sent cluster state. [{}] left",timedout ? "timed out while waiting for" : "failed to get",neededMastersToCommit);
  }
}
