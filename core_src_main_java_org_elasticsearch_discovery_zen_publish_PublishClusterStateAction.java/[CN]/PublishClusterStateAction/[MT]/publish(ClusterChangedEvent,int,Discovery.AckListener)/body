{
  final DiscoveryNodes nodes=clusterChangedEvent.state().nodes();
  Set<DiscoveryNode> nodesToPublishTo=new HashSet<>(nodes.size());
  DiscoveryNode localNode=nodes.localNode();
  final int totalMasterNodes=nodes.masterNodes().size();
  for (  final DiscoveryNode node : nodes) {
    if (node.equals(localNode) == false) {
      nodesToPublishTo.add(node);
    }
  }
  publish(clusterChangedEvent,minMasterNodes,totalMasterNodes,nodesToPublishTo,new AckClusterStatePublishResponseHandler(nodesToPublishTo,ackListener));
}
