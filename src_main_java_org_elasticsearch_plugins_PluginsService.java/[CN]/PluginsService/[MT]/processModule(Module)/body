{
  for (  Plugin plugin : plugins().values()) {
    plugin.processModule(module);
    List<OnModuleReference> references=onModuleReferences.get(plugin);
    if (references != null) {
      for (      OnModuleReference reference : references) {
        if (reference.moduleClass.isAssignableFrom(module.getClass())) {
          try {
            reference.onModuleMethod.invoke(plugin,module);
          }
 catch (          Exception e) {
            logger.warn("plugin {}, failed to invoke custom onModule method",e,plugin.name());
          }
        }
      }
    }
  }
}
