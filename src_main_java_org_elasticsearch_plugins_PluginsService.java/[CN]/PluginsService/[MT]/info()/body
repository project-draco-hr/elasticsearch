{
  if (refreshInterval.millis() != 0) {
    if (cachedPluginsInfo != null && (refreshInterval.millis() < 0 || (System.nanoTime() - lastRefreshNS) < refreshInterval.nanos())) {
      if (logger.isTraceEnabled()) {
        logger.trace("using cache to retrieve plugins info");
      }
      return cachedPluginsInfo;
    }
    lastRefreshNS=System.nanoTime();
  }
  if (logger.isTraceEnabled()) {
    logger.trace("starting to fetch info on plugins");
  }
  cachedPluginsInfo=new PluginsInfo();
  for (  Tuple<PluginInfo,Plugin> plugin : this.plugins) {
    if (logger.isTraceEnabled()) {
      logger.trace("adding jvm plugin [{}]",plugin.v1());
    }
    cachedPluginsInfo.add(plugin.v1());
  }
  try {
    for (    Tuple<PluginInfo,Plugin> plugin : loadSitePlugins()) {
      if (logger.isTraceEnabled()) {
        logger.trace("adding site plugin [{}]",plugin.v1());
      }
      cachedPluginsInfo.add(plugin.v1());
    }
  }
 catch (  IOException ex) {
    logger.warn("can load site plugins info",ex);
  }
  return cachedPluginsInfo;
}
