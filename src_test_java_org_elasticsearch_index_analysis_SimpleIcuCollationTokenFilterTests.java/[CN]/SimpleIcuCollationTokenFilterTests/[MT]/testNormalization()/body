{
  Index index=new Index("test");
  Settings settings=ImmutableSettings.settingsBuilder().put("index.analysis.filter.myCollator.type","icu_collation").put("index.analysis.filter.myCollator.language","tr").put("index.analysis.filter.myCollator.strength","primary").put("index.analysis.filter.myCollator.decomposition","canonical").build();
  AnalysisService analysisService=createAnalysisService(index,settings);
  String turkishUpperCase="I W\u0049\u0307LL USE TURK??SH CASING";
  String turkishLowerCase="?? will use turkish cas??ng";
  TokenFilterFactory filterFactory=analysisService.tokenFilter("myCollator");
  TokenStream tsUpper=filterFactory.create(new KeywordTokenizer(new StringReader(turkishUpperCase)));
  TokenStream tsLower=filterFactory.create(new KeywordTokenizer(new StringReader(turkishLowerCase)));
  assertCollatesToSame(tsUpper,tsLower);
}
