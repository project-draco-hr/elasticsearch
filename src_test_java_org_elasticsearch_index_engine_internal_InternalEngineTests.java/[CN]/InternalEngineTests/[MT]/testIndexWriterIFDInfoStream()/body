{
  MockAppender mockAppender=new MockAppender();
  Logger iwIFDLogger=Logger.getLogger("index.engine.internal.lucene.iw.ifd");
  Level savedLevel=iwIFDLogger.getLevel();
  iwIFDLogger.addAppender(mockAppender);
  iwIFDLogger.setLevel(Level.DEBUG);
  try {
    ParsedDocument doc=testParsedDocument("1","1","test",null,-1,-1,testDocumentWithTextField(),Lucene.STANDARD_ANALYZER,B_1,false);
    engine.create(new Engine.Create(null,newUid("1"),doc));
    engine.flush(new Engine.Flush());
    assertFalse(mockAppender.sawIndexWriterMessage);
    assertFalse(mockAppender.sawIndexWriterIFDMessage);
    iwIFDLogger.setLevel(Level.TRACE);
    engine.create(new Engine.Create(null,newUid("2"),doc));
    engine.flush(new Engine.Flush());
    assertFalse(mockAppender.sawIndexWriterMessage);
    assertTrue(mockAppender.sawIndexWriterIFDMessage);
  }
  finally {
    iwIFDLogger.removeAppender(mockAppender);
    iwIFDLogger.setLevel(null);
  }
}
