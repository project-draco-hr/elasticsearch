{
  if (method == PercentilesMethod.TDIGEST) {
    TDigestPercentileRanksAggregator.Factory factory=new TDigestPercentileRanksAggregator.Factory(aggregationName);
    if (keys != null) {
      factory.values(keys);
    }
    if (compression != null) {
      factory.compression(compression);
    }
    if (keyed != null) {
      factory.keyed(keyed);
    }
    return factory;
  }
 else   if (method == PercentilesMethod.HDR) {
    HDRPercentileRanksAggregator.Factory factory=new HDRPercentileRanksAggregator.Factory(aggregationName);
    if (keys != null) {
      factory.values(keys);
    }
    if (numberOfSignificantValueDigits != null) {
      factory.numberOfSignificantValueDigits(numberOfSignificantValueDigits);
    }
    if (keyed != null) {
      factory.keyed(keyed);
    }
    return factory;
  }
 else {
    throw new AssertionError();
  }
}
