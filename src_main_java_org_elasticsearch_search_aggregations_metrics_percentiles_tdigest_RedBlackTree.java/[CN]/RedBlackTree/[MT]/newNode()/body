{
  if (unusedSlots.isEmpty()) {
    final int slot=maxNode++;
    if (maxNode > leftNodes.length) {
      final int minSize=ArrayUtil.oversize(maxNode,RamUsageEstimator.NUM_BYTES_INT);
      leftNodes=Arrays.copyOf(leftNodes,minSize);
      rightNodes=Arrays.copyOf(rightNodes,minSize);
      parentNodes=Arrays.copyOf(parentNodes,minSize);
      colors.ensureCapacity(leftNodes.length);
    }
    return slot;
  }
 else {
    return unusedSlots.removeLast();
  }
}
