{
  logger.info("--> start first node");
  internalCluster().startNode(settingsBuilder().put("plugin.types",MockRepositoryPlugin.class.getName()));
  logger.info("--> start second node");
  internalCluster().startNode(settingsBuilder().put("node.master",false));
  for (int i=0; i < 5; i++) {
    client().admin().cluster().preparePutRepository("test-repo" + i).setType("mock").setSettings(ImmutableSettings.settingsBuilder().put("location",newTempDirPath())).setVerify(false).get();
  }
  logger.info("--> make sure that properly setup repository can be registered on all nodes");
  client().admin().cluster().preparePutRepository("test-repo-0").setType("fs").setSettings(ImmutableSettings.settingsBuilder().put("location",newTempDirPath())).get();
}
