{
  prepareData();
  logger.info("Start Testing failed search with wrong query");
  try {
    SearchResponse searchResponse=client().search(searchRequest("test").source("{ xxx }".getBytes(Charsets.UTF_8))).actionGet();
    assertThat(searchResponse.getTotalShards(),equalTo(3));
    assertThat(searchResponse.getSuccessfulShards(),equalTo(0));
    assertThat(searchResponse.getFailedShards(),equalTo(3));
    fail("search should fail");
  }
 catch (  ElasticsearchException e) {
    assertThat(e.unwrapCause(),instanceOf(SearchPhaseExecutionException.class));
  }
  logger.info("Done Testing failed search");
}
