{
  if (logger.isDebugEnabled()) {
    logger.debug("[{}] Failed to execute query phase",t,searchId);
  }
  addShardFailure(shardIndex,new ShardSearchFailure(t));
  successfulOps.decrementAndGet();
  if (counter.decrementAndGet() == 0) {
    try {
      executeFetchPhase();
    }
 catch (    Throwable e) {
      listener.onFailure(new SearchPhaseExecutionException("query","Fetch failed",e,null));
    }
  }
}
