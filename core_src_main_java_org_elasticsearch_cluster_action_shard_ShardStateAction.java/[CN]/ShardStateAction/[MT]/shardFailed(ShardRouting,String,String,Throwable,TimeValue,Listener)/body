{
  DiscoveryNode masterNode=clusterService.state().nodes().masterNode();
  if (masterNode == null) {
    logger.warn("can't send shard failed for {}, no master known.",shardRouting);
    listener.onShardFailedNoMaster();
    return;
  }
  innerShardFailed(shardRouting,indexUUID,masterNode,message,failure,timeout,listener);
}
