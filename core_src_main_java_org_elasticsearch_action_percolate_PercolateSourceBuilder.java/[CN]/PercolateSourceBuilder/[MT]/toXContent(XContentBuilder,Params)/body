{
  builder.startObject();
  if (docBuilder != null) {
    docBuilder.toXContent(builder,params);
  }
  if (queryBuilder != null) {
    builder.field("query");
    queryBuilder.toXContent(builder,params);
  }
  if (size != null) {
    builder.field("size",size);
  }
  if (sorts != null) {
    builder.startArray("sort");
    for (    SortBuilder sort : sorts) {
      builder.startObject();
      sort.toXContent(builder,params);
      builder.endObject();
    }
    builder.endArray();
  }
  if (trackScores != null) {
    builder.field("track_scores",trackScores);
  }
  if (highlightBuilder != null) {
    highlightBuilder.toXContent(builder,params);
  }
  if (aggregationFactorys != null || pipelineAggregationFactorys != null) {
    builder.field("aggregations");
    builder.startObject();
    if (aggregationFactorys != null) {
      for (      AggregatorBuilder<?> aggregation : aggregationFactorys) {
        aggregation.toXContent(builder,params);
      }
    }
    if (pipelineAggregationFactorys != null) {
      for (      PipelineAggregatorBuilder aggregation : pipelineAggregationFactorys) {
        aggregation.toXContent(builder,params);
      }
    }
    builder.endObject();
  }
  builder.endObject();
  return builder;
}
