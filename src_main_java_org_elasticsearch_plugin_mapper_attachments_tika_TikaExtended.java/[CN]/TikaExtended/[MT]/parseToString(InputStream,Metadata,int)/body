{
  WriteOutContentHandler handler=new WriteOutContentHandler(maxStringLength);
  try {
    ParseContext context=new ParseContext();
    context.set(Parser.class,getParser());
    getParser().parse(stream,new BodyContentHandler(handler),metadata,context);
  }
 catch (  SAXException e) {
    if (!handler.isWriteLimitReached(e)) {
      throw new TikaException("Unexpected SAX processing failure",e);
    }
  }
 finally {
    stream.close();
  }
  return handler.toString();
}
