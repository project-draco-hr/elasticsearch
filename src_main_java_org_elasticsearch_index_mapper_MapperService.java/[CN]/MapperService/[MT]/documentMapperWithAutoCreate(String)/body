{
  DocumentMapper mapper=mappers.get(type);
  if (mapper != null) {
    return Tuple.tuple(mapper,Boolean.FALSE);
  }
  if (!dynamic) {
    throw new TypeMissingException(index,type,"trying to auto create mapping, but dynamic mapping is disabled");
  }
synchronized (typeMutex) {
    mapper=mappers.get(type);
    if (mapper != null) {
      return Tuple.tuple(mapper,Boolean.FALSE);
    }
    merge(type,null,true);
    return Tuple.tuple(mappers.get(type),Boolean.TRUE);
  }
}
