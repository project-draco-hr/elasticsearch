{
  String fieldName=field.name();
  int dotIndex=fieldName.indexOf('.');
  if (dotIndex != -1) {
    String possibleType=fieldName.substring(0,dotIndex);
    DocumentMapper possibleDocMapper=mappers.get(possibleType);
    if (possibleDocMapper != null) {
      return possibleDocMapper.mappers().searchAnalyzer().getOffsetGap(field);
    }
  }
  FieldMappers mappers=fullNameFieldMappers.get(fieldName);
  if (mappers != null && mappers.mapper() != null && mappers.mapper().searchAnalyzer() != null) {
    return mappers.mapper().searchAnalyzer().getOffsetGap(field);
  }
  mappers=indexNameFieldMappers.get(fieldName);
  if (mappers != null && mappers.mapper() != null && mappers.mapper().searchAnalyzer() != null) {
    return mappers.mapper().searchAnalyzer().getOffsetGap(field);
  }
  return defaultAnalyzer.getOffsetGap(field);
}
