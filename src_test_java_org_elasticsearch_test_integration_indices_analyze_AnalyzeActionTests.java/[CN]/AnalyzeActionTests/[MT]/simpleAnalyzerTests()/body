{
  try {
    client.admin().indices().prepareDelete("test").execute().actionGet();
  }
 catch (  Exception e) {
  }
  client.admin().indices().prepareCreate("test").execute().actionGet();
  client.admin().cluster().prepareHealth().setWaitForGreenStatus().execute().actionGet();
  for (int i=0; i < 10; i++) {
    AnalyzeResponse analyzeResponse=client.admin().indices().prepareAnalyze("test","this is a test").execute().actionGet();
    assertThat(analyzeResponse.getTokens().size(),equalTo(1));
    AnalyzeResponse.AnalyzeToken token=analyzeResponse.getTokens().get(0);
    assertThat(token.getTerm(),equalTo("test"));
    assertThat(token.getStartOffset(),equalTo(10));
    assertThat(token.getEndOffset(),equalTo(14));
  }
}
