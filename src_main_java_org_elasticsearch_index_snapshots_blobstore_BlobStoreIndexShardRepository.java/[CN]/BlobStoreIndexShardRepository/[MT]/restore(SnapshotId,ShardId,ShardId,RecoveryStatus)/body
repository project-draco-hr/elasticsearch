{
  RestoreContext snapshotContext=new RestoreContext(snapshotId,shardId,snapshotShardId,recoveryStatus);
  try {
    recoveryStatus.index().startTime(System.currentTimeMillis());
    snapshotContext.restore();
    recoveryStatus.index().time(System.currentTimeMillis() - recoveryStatus.index().startTime());
  }
 catch (  Throwable e) {
    throw new IndexShardRestoreFailedException(shardId,"failed to restore snapshot [" + snapshotId.getSnapshot() + "]",e);
  }
}
