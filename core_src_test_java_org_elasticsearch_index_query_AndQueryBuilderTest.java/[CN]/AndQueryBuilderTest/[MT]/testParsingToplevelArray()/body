{
  QueryParseContext context=createParseContext();
  String queryString="{ \"and\" : [ { \"match_all\" : {} } ] }";
  XContentParser parser=XContentFactory.xContent(queryString).createParser(queryString);
  context.reset(parser);
  assertThat(parser.nextToken(),is(XContentParser.Token.START_OBJECT));
  assertThat(parser.nextToken(),is(XContentParser.Token.FIELD_NAME));
  assertThat(parser.currentName(),is(AndQueryBuilder.NAME));
  parser.nextToken();
  AndQueryBuilder queryBuilder=(AndQueryBuilder)context.queryParser(AndQueryBuilder.NAME).fromXContent(context);
  assertThat(queryBuilder.innerQueries().get(0),equalTo((QueryBuilder)new MatchAllQueryBuilder()));
}
