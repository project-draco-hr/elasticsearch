{
  score=in.readFloat();
  id=in.readText();
  type=in.readText();
  nestedIdentity=in.readOptionalStreamable(new InternalNestedIdentity());
  version=in.readLong();
  source=in.readBytesReference();
  if (source.length() == 0) {
    source=null;
  }
  if (in.readBoolean()) {
    explanation=readExplanation(in);
  }
  int size=in.readVInt();
  if (size == 0) {
    fields=emptyMap();
  }
 else   if (size == 1) {
    SearchHitField hitField=readSearchHitField(in);
    fields=singletonMap(hitField.name(),hitField);
  }
 else {
    Map<String,SearchHitField> fields=new HashMap<>();
    for (int i=0; i < size; i++) {
      SearchHitField hitField=readSearchHitField(in);
      fields.put(hitField.name(),hitField);
    }
    this.fields=unmodifiableMap(fields);
  }
  size=in.readVInt();
  if (size == 0) {
    highlightFields=emptyMap();
  }
 else   if (size == 1) {
    HighlightField field=readHighlightField(in);
    highlightFields=singletonMap(field.name(),field);
  }
 else {
    Map<String,HighlightField> highlightFields=new HashMap<>();
    for (int i=0; i < size; i++) {
      HighlightField field=readHighlightField(in);
      highlightFields.put(field.name(),field);
    }
    this.highlightFields=unmodifiableMap(highlightFields);
  }
  size=in.readVInt();
  if (size > 0) {
    sortValues=new Object[size];
    for (int i=0; i < sortValues.length; i++) {
      byte type=in.readByte();
      if (type == 0) {
        sortValues[i]=null;
      }
 else       if (type == 1) {
        sortValues[i]=in.readString();
      }
 else       if (type == 2) {
        sortValues[i]=in.readInt();
      }
 else       if (type == 3) {
        sortValues[i]=in.readLong();
      }
 else       if (type == 4) {
        sortValues[i]=in.readFloat();
      }
 else       if (type == 5) {
        sortValues[i]=in.readDouble();
      }
 else       if (type == 6) {
        sortValues[i]=in.readByte();
      }
 else       if (type == 7) {
        sortValues[i]=in.readShort();
      }
 else       if (type == 8) {
        sortValues[i]=in.readBoolean();
      }
 else       if (type == 9) {
        sortValues[i]=in.readText();
      }
 else {
        throw new IOException("Can't match type [" + type + "]");
      }
    }
  }
  size=in.readVInt();
  if (size > 0) {
    matchedQueries=new String[size];
    for (int i=0; i < size; i++) {
      matchedQueries[i]=in.readString();
    }
  }
  if (context.streamShardTarget() == ShardTargetType.STREAM) {
    if (in.readBoolean()) {
      shard=readSearchShardTarget(in);
    }
  }
 else   if (context.streamShardTarget() == ShardTargetType.LOOKUP) {
    int lookupId=in.readVInt();
    if (lookupId > 0) {
      shard=context.handleShardLookup().get(lookupId);
    }
  }
  size=in.readVInt();
  if (size > 0) {
    innerHits=new HashMap<>(size);
    for (int i=0; i < size; i++) {
      String key=in.readString();
      ShardTargetType shardTarget=context.streamShardTarget();
      InternalSearchHits value=InternalSearchHits.readSearchHits(in,context.streamShardTarget(ShardTargetType.NO_STREAM));
      context.streamShardTarget(shardTarget);
      innerHits.put(key,value);
    }
  }
}
