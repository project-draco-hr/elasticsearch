{
  if (r instanceof AbstractRunnable) {
    if (((AbstractRunnable)r).isForceExecution()) {
      BlockingQueue<Runnable> queue=executor.getQueue();
      if (!(queue instanceof SizeBlockingQueue)) {
        throw new ElasticSearchIllegalStateException("forced execution, but expected a size queue");
      }
      try {
        ((SizeBlockingQueue)queue).forcePut(r);
      }
 catch (      InterruptedException e) {
        throw new ElasticSearchInterruptedException(e.getMessage(),e);
      }
      return;
    }
  }
  rejected.inc();
  throw new EsRejectedExecutionException("rejected execution of [" + r.getClass().getName() + "]");
}
