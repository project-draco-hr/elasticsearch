{
  final Map<Directory,Collection<String>> perDirectory=new IdentityHashMap<>();
  for (  String name : names) {
    final Directory dir=getDirectory(name);
    Collection<String> dirNames=perDirectory.get(dir);
    if (dirNames == null) {
      dirNames=new ArrayList<>();
      perDirectory.put(dir,dirNames);
    }
    dirNames.add(name);
  }
  for (  Map.Entry<Directory,Collection<String>> entry : perDirectory.entrySet()) {
    final Directory dir=entry.getKey();
    final Collection<String> dirNames=entry.getValue();
    dir.sync(dirNames);
  }
}
