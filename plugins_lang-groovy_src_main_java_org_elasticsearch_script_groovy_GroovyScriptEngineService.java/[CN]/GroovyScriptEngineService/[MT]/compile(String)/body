{
  try {
    SecurityManager sm=System.getSecurityManager();
    if (sm != null) {
      sm.checkPermission(new SpecialPermission());
    }
    return loader.parseClass(script,Hashing.sha1().hashString(script,StandardCharsets.UTF_8).toString());
  }
 catch (  Throwable e) {
    if (logger.isTraceEnabled()) {
      logger.trace("exception compiling Groovy script:",e);
    }
    throw new ScriptException("failed to compile groovy script",e);
  }
}
