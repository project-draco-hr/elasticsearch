{
  try {
    SecurityManager sm=System.getSecurityManager();
    if (sm != null) {
      sm.checkPermission(new SpecialPermission());
    }
    return loader.parseClass(script,MessageDigests.toHexString(MessageDigests.sha1().digest(script.getBytes(StandardCharsets.UTF_8))));
  }
 catch (  Throwable e) {
    if (logger.isTraceEnabled()) {
      logger.trace("exception compiling Groovy script:",e);
    }
    throw new ScriptException("failed to compile groovy script",e);
  }
}
