{
  assertAcked(prepareCreate("index").addMapping("child","_parent","type=parent").addMapping("parent"));
  client().prepareIndex("index",PercolatorService.TYPE_NAME,"1").setSource(jsonBuilder().startObject().field("query",matchAllQuery()).endObject()).execute().actionGet();
  PercolateResponse response=client().preparePercolate().setDocumentType("parent").setPercolateDoc(new PercolateSourceBuilder.DocBuilder().setDoc("field","value")).get();
  assertMatchCount(response,1);
  assertThat(response.getMatches()[0].getId().string(),equalTo("1"));
}
