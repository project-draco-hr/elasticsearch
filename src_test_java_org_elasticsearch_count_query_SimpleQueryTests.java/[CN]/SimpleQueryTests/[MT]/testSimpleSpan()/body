{
  assertAcked(prepareCreate("test").setSettings(SETTING_NUMBER_OF_SHARDS,1,SETTING_NUMBER_OF_REPLICAS,0));
  ensureGreen();
  client().prepareIndex("test","test","1").setSource("description","foo other anything bar").get();
  client().prepareIndex("test","test","2").setSource("description","foo other anything").get();
  client().prepareIndex("test","test","3").setSource("description","foo other").get();
  client().prepareIndex("test","test","4").setSource("description","foo").get();
  refresh();
  CountResponse response=client().prepareCount("test").setQuery(QueryBuilders.spanOrQuery().clause(QueryBuilders.spanTermQuery("description","bar"))).get();
  assertHitCount(response,1l);
  response=client().prepareCount("test").setQuery(QueryBuilders.spanOrQuery().clause(QueryBuilders.spanTermQuery("test.description","bar"))).get();
  assertHitCount(response,1l);
  response=client().prepareCount("test").setQuery(QueryBuilders.spanNearQuery().clause(QueryBuilders.spanTermQuery("description","foo")).clause(QueryBuilders.spanTermQuery("test.description","other")).slop(3)).get();
  assertHitCount(response,3l);
}
