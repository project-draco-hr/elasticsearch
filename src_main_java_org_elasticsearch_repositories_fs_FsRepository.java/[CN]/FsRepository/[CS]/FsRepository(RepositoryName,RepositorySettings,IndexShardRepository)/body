{
  super(name.getName(),repositorySettings,indexShardRepository);
  File locationFile;
  String location=repositorySettings.settings().get("location",componentSettings.get("location"));
  if (location == null) {
    logger.warn("using local fs location for gateway, should be changed to be a shared location across nodes");
    throw new RepositoryException(name.name(),"missing location");
  }
 else {
    locationFile=new File(location);
  }
  int concurrentStreams=repositorySettings.settings().getAsInt("concurrent_streams",componentSettings.getAsInt("concurrent_streams",5));
  ExecutorService concurrentStreamPool=EsExecutors.newScaling(1,concurrentStreams,60,TimeUnit.SECONDS,EsExecutors.daemonThreadFactory(settings,"[fs_stream]"));
  blobStore=new FsBlobStore(componentSettings,concurrentStreamPool,locationFile);
  this.chunkSize=repositorySettings.settings().getAsBytesSize("chunk_size",componentSettings.getAsBytesSize("chunk_size",null));
  this.compress=repositorySettings.settings().getAsBoolean("compress",componentSettings.getAsBoolean("compress",false));
  this.basePath=BlobPath.cleanPath();
}
