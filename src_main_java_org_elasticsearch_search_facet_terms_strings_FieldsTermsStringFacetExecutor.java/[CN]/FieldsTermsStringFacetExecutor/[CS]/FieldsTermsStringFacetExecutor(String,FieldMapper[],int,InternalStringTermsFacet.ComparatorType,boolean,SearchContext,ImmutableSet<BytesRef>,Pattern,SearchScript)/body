{
  this.size=size;
  this.comparatorType=comparatorType;
  this.script=script;
  this.indexFieldDatas=new IndexFieldData[fieldMappers.length];
  for (int i=0; i < fieldMappers.length; i++) {
    FieldMapper mapper=fieldMappers[i];
    indexFieldDatas[i]=context.fieldData().getForField(mapper);
  }
  if (excluded.isEmpty() && pattern == null && script == null) {
    aggregator=new HashedAggregator();
  }
 else {
    aggregator=new HashedScriptAggregator(excluded,pattern,script);
  }
  if (allTerms) {
    for (int i=0; i < fieldMappers.length; i++) {
      TermsStringFacetExecutor.loadAllTerms(context,indexFieldDatas[i],aggregator);
    }
  }
}
