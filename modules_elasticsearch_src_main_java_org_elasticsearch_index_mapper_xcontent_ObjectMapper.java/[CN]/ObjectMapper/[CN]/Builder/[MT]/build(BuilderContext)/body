{
  if (dateTimeFormatters == null) {
    dateTimeFormatters=newArrayList();
  }
 else   if (dateTimeFormatters.isEmpty()) {
    dateTimeFormatters.addAll(newArrayList(Defaults.DATE_TIME_FORMATTERS));
  }
  ContentPath.Type origPathType=context.path().pathType();
  context.path().pathType(pathType);
  context.path().add(name);
  Map<String,XContentMapper> mappers=new HashMap<String,XContentMapper>();
  for (  XContentMapper.Builder builder : mappersBuilders) {
    XContentMapper mapper=builder.build(context);
    mappers.put(mapper.name(),mapper);
  }
  ObjectMapper objectMapper=new ObjectMapper(name,enabled,dynamic,pathType,dateTimeFormatters.toArray(new FormatDateTimeFormatter[dateTimeFormatters.size()]),mappers,dynamicTemplates.toArray(new DynamicTemplate[dynamicTemplates.size()]));
  context.path().pathType(origPathType);
  context.path().remove();
  objectMapper.includeInAll(includeInAll);
  return objectMapper;
}
