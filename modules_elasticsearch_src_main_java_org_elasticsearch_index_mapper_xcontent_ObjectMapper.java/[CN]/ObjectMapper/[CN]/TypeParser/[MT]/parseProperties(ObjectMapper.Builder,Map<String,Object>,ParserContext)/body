{
  for (  Map.Entry<String,Object> entry : propsNode.entrySet()) {
    String propName=entry.getKey();
    Map<String,Object> propNode=(Map<String,Object>)entry.getValue();
    String type;
    Object typeNode=propNode.get("type");
    if (typeNode != null) {
      type=typeNode.toString();
    }
 else {
      if (propNode.get("properties") != null) {
        type=ObjectMapper.CONTENT_TYPE;
      }
 else       if (propNode.get("fields") != null) {
        type=MultiFieldMapper.CONTENT_TYPE;
      }
 else {
        throw new MapperParsingException("No type specified for property [" + propName + "]");
      }
    }
    XContentMapper.TypeParser typeParser=parserContext.typeParser(type);
    if (typeParser == null) {
      throw new MapperParsingException("No handler for type [" + type + "] declared on field ["+ propName+ "]");
    }
    objBuilder.add(typeParser.parse(propName,propNode,parserContext));
  }
}
