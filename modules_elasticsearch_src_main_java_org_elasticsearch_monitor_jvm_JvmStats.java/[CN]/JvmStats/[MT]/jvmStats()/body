{
  JvmStats stats=new JvmStats(System.currentTimeMillis(),runtimeMXBean.getUptime());
  stats.mem=new Mem();
  MemoryUsage memUsage=memoryMXBean.getHeapMemoryUsage();
  stats.mem.heapUsed=memUsage.getUsed();
  stats.mem.heapCommitted=memUsage.getCommitted();
  memUsage=memoryMXBean.getNonHeapMemoryUsage();
  stats.mem.nonHeapUsed=memUsage.getUsed();
  stats.mem.nonHeapCommitted=memUsage.getCommitted();
  stats.threads=new Threads();
  stats.threads.count=threadMXBean.getThreadCount();
  stats.threads.peakCount=threadMXBean.getPeakThreadCount();
  List<GarbageCollectorMXBean> gcMxBeans=ManagementFactory.getGarbageCollectorMXBeans();
  stats.gc=new GarbageCollectors();
  stats.gc.collectors=new GarbageCollector[gcMxBeans.size()];
  for (int i=0; i < stats.gc.collectors.length; i++) {
    GarbageCollectorMXBean gcMxBean=gcMxBeans.get(i);
    stats.gc.collectors[i]=new GarbageCollector();
    stats.gc.collectors[i].name=gcMxBean.getName();
    stats.gc.collectors[i].collectionCount=gcMxBean.getCollectionCount();
    stats.gc.collectors[i].collectionTime=gcMxBean.getCollectionTime();
  }
  return stats;
}
