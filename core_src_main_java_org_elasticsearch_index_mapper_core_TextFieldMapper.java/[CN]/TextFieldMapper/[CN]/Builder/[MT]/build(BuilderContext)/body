{
  if (positionIncrementGap != POSITION_INCREMENT_GAP_USE_ANALYZER) {
    fieldType.setIndexAnalyzer(new NamedAnalyzer(fieldType.indexAnalyzer(),positionIncrementGap));
    fieldType.setSearchAnalyzer(new NamedAnalyzer(fieldType.searchAnalyzer(),positionIncrementGap));
    fieldType.setSearchQuoteAnalyzer(new NamedAnalyzer(fieldType.searchQuoteAnalyzer(),positionIncrementGap));
  }
  setupFieldType(context);
  TextFieldMapper fieldMapper=new TextFieldMapper(name,fieldType,defaultFieldType,positionIncrementGap,context.indexSettings(),multiFieldsBuilder.build(this,context),copyTo);
  return fieldMapper.includeInAll(includeInAll);
}
