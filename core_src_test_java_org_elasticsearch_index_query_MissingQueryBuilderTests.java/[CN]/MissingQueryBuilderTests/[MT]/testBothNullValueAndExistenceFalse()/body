{
  QueryShardContext context=createShardContext();
  context.setAllowUnmappedFields(true);
  try {
    MissingQueryBuilder.newFilter(context,"field",false,false);
    fail("Expected QueryShardException");
  }
 catch (  QueryShardException e) {
    assertThat(e.getMessage(),containsString("missing must have either existence, or null_value"));
  }
}
