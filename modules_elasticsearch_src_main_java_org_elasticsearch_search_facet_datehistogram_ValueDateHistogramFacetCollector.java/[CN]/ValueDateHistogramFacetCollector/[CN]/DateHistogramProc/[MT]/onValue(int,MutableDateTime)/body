{
  long time=dateTime.getMillis();
  if (interval != 1) {
    time=CountDateHistogramFacetCollector.bucket(time,interval);
  }
  InternalFullDateHistogramFacet.FullEntry entry=entries.get(time);
  if (entry == null) {
    entry=new InternalFullDateHistogramFacet.FullEntry(time,0,Double.POSITIVE_INFINITY,Double.NEGATIVE_INFINITY,0,0);
    entries.put(time,entry);
  }
  entry.count++;
  valueAggregator.entry=entry;
  valueFieldData.forEachValueInDoc(docId,valueAggregator);
}
