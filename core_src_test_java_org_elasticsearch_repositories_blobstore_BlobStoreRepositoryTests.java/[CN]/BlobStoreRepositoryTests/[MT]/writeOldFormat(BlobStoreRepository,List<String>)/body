{
  final BytesReference bRef;
  try (BytesStreamOutput bStream=new BytesStreamOutput()){
    try (StreamOutput stream=new OutputStreamStreamOutput(bStream)){
      XContentBuilder builder=XContentFactory.contentBuilder(XContentType.JSON,stream);
      builder.startObject();
      builder.startArray("snapshots");
      for (      final String snapshotName : snapshotNames) {
        builder.value(snapshotName);
      }
      builder.endArray();
      builder.endObject();
      builder.close();
    }
     bRef=bStream.bytes();
  }
   try (StreamInput stream=bRef.streamInput()){
    repository.blobContainer().writeBlob(BlobStoreRepository.SNAPSHOTS_FILE,stream,bRef.length());
  }
 }
