{
  File tempDir=newTempDir(LifecycleScope.TEST);
  RecordingChangeListener changes=new RecordingChangeListener(tempDir);
  File testDir=new File(tempDir,"test-dir");
  testDir.mkdir();
  touch(new File(testDir,"test0.txt"));
  touch(new File(testDir,"test1.txt"));
  FileWatcher fileWatcher=new FileWatcher(testDir);
  fileWatcher.addListener(changes);
  fileWatcher.init();
  changes.notifications().clear();
  new File(testDir,"test0.txt").delete();
  new File(testDir,"test1.txt").delete();
  fileWatcher.checkAndNotify();
  assertThat(changes.notifications(),contains(equalTo("onFileDeleted: test-dir/test0.txt"),equalTo("onFileDeleted: test-dir/test1.txt")));
}
