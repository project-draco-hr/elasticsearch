{
  super.writeTo(out);
  out.writeByte(comparatorType.id());
  if (entries != null) {
    out.writeVInt(entries.length);
    for (    CountEntry entry : entries) {
      out.writeLong(entry.getKey());
      out.writeVLong(entry.getCount());
    }
  }
 else {
    out.writeVInt(counts.size());
    for (TLongLongIterator it=counts.iterator(); it.hasNext(); ) {
      it.advance();
      out.writeLong(it.key());
      out.writeVLong(it.value());
    }
  }
  releaseCache();
}
