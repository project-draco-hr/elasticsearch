{
  MappingStartEvent startEvent=(MappingStartEvent)parser.getEvent();
  String tag=startEvent.getTag();
  Tag nodeTag;
  boolean resolved=false;
  if (tag == null || tag.equals("!")) {
    nodeTag=resolver.resolve(NodeId.mapping,null,startEvent.getImplicit());
    resolved=true;
  }
 else {
    nodeTag=new Tag(tag);
  }
  MappingNode node=new MappingNode(nodeTag,resolved,new ArrayList<NodeTuple>(),startEvent.getStartMark(),null,startEvent.getFlowStyle());
  if (anchor != null) {
    anchors.put(anchor,node);
  }
  while (!parser.checkEvent(Event.ID.MappingEnd)) {
    Node itemKey=composeNode(node,null);
    Node itemValue=composeNode(node,itemKey);
    node.getValue().add(new NodeTuple(itemKey,itemValue));
  }
  Event endEvent=parser.getEvent();
  node.setEndMark(endEvent.getEndMark());
  return node;
}
