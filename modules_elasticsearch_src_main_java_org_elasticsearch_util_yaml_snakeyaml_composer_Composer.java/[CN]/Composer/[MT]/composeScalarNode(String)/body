{
  ScalarEvent ev=(ScalarEvent)parser.getEvent();
  String tag=ev.getTag();
  boolean resolved=false;
  Tag nodeTag;
  if (tag == null || tag.equals("!")) {
    nodeTag=resolver.resolve(NodeId.scalar,ev.getValue(),ev.getImplicit().isFirst());
    resolved=true;
  }
 else {
    nodeTag=new Tag(tag);
  }
  YamlNode node=new ScalarNode(nodeTag,resolved,ev.getValue(),ev.getStartMark(),ev.getEndMark(),ev.getStyle());
  if (anchor != null) {
    anchors.put(anchor,node);
  }
  return node;
}
