{
  CompletionSuggestionBuilder completionSuggestionBuilder=new CompletionSuggestionBuilder(name);
  if (in.readBoolean()) {
    int numPayloadField=in.readVInt();
    for (int i=0; i < numPayloadField; i++) {
      completionSuggestionBuilder.payloadFields.add(in.readString());
    }
  }
  if (in.readBoolean()) {
    completionSuggestionBuilder.fuzzyOptions=FuzzyOptions.readFuzzyOptions(in);
  }
  if (in.readBoolean()) {
    completionSuggestionBuilder.regexOptions=RegexOptions.readRegexOptions(in);
  }
  if (in.readBoolean()) {
    int numNamedQueryContexts=in.readVInt();
    for (int i=0; i < numNamedQueryContexts; i++) {
      String queryContextName=in.readString();
      int numQueryContexts=in.readVInt();
      List<QueryContext> queryContexts=new ArrayList<>(numQueryContexts);
      for (int j=0; j < numQueryContexts; j++) {
        queryContexts.add(in.readCompletionSuggestionQueryContext());
      }
      completionSuggestionBuilder.queryContexts.put(queryContextName,queryContexts);
    }
  }
  return completionSuggestionBuilder;
}
