{
  if (sets.isEmpty()) {
    return DocIdSetIterator.empty();
  }
  final DocIdSetIterator[] iterators=new DocIdSetIterator[sets.size()];
  int j=0;
  for (  DocIdSet set : sets) {
    if (set == null) {
      return DocIdSetIterator.empty();
    }
 else {
      DocIdSetIterator docIdSetIterator=set.iterator();
      if (docIdSetIterator == null) {
        return DocIdSetIterator.empty();
      }
      iterators[j++]=docIdSetIterator;
    }
  }
  if (sets.size() == 1) {
    return iterators[0];
  }
  return new IteratorBasedIterator(iterators);
}
