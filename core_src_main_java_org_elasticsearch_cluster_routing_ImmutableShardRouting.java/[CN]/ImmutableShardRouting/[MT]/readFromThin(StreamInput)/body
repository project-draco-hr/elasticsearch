{
  version=in.readLong();
  if (in.readBoolean()) {
    currentNodeId=in.readString();
  }
  if (in.readBoolean()) {
    relocatingNodeId=in.readString();
  }
  primary=in.readBoolean();
  state=ShardRoutingState.fromValue(in.readByte());
  restoreSource=RestoreSource.readOptionalRestoreSource(in);
  if (in.getVersion().onOrAfter(Version.V_1_7_0)) {
    if (in.readBoolean()) {
      unassignedInfo=new UnassignedInfo(in);
    }
  }
}
