{
  out.writeLong(version);
  if (currentNodeId != null) {
    out.writeBoolean(true);
    out.writeString(currentNodeId);
  }
 else {
    out.writeBoolean(false);
  }
  if (relocatingNodeId != null) {
    out.writeBoolean(true);
    out.writeString(relocatingNodeId);
  }
 else {
    out.writeBoolean(false);
  }
  out.writeBoolean(primary);
  out.writeByte(state.value());
  if (restoreSource != null) {
    out.writeBoolean(true);
    restoreSource.writeTo(out);
  }
 else {
    out.writeBoolean(false);
  }
  if (out.getVersion().onOrAfter(Version.V_1_7_0)) {
    if (unassignedInfo != null) {
      out.writeBoolean(true);
      unassignedInfo.writeTo(out);
    }
 else {
      out.writeBoolean(false);
    }
  }
}
