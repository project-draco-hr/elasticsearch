{
  super(shardId,indexSettings);
  this.threadPool=threadPool;
  this.transportService=transportService;
  this.indexShard=(InternalIndexShard)indexShard;
  this.store=store;
  startTransportAction=shardId.index().name() + "/" + shardId.id()+ "/recovery/start";
  transportService.registerHandler(startTransportAction,new StartRecoveryTransportRequestHandler());
  fileChunkTransportAction=shardId.index().name() + "/" + shardId.id()+ "/recovery/fileChunk";
  transportService.registerHandler(fileChunkTransportAction,new FileChunkTransportRequestHandler());
  snapshotTransportAction=shardId.index().name() + "/" + shardId.id()+ "/recovery/snapshot";
  transportService.registerHandler(snapshotTransportAction,new SnapshotTransportRequestHandler());
  this.fileChunkSize=componentSettings.getAsSize("fileChunkSize",new SizeValue(16,SizeUnit.KB));
  logger.trace("Recovery Action registered, using fileChunkSize[{}]",fileChunkSize);
}
