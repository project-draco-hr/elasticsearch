{
  receiveSnapshotRecoveryThread=Thread.currentThread();
  try {
    for (    String existingFile : store.directory().listAll()) {
      if (!request.snapshotFiles.contains(existingFile)) {
        store.directory().deleteFile(existingFile);
      }
    }
    channel.sendResponse(VoidStreamable.INSTANCE);
  }
  finally {
    receiveSnapshotRecoveryThread=null;
  }
}
