{
  receiveSnapshotRecoveryThread=Thread.currentThread();
  try {
    indexShard.performRecoveryFinalization();
    channel.sendResponse(VoidStreamable.INSTANCE);
  }
  finally {
    receiveSnapshotRecoveryThread=null;
  }
}
