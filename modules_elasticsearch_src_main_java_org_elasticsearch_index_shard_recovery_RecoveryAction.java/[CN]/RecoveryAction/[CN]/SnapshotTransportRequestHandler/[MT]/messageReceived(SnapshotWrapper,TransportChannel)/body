{
  if (!snapshot.phase3) {
    cleanOpenIndex();
  }
  indexShard.performRecovery(snapshot.snapshot,snapshot.phase3);
  if (snapshot.phase3) {
    indexShard.refresh(true);
  }
  channel.sendResponse(VoidStreamable.INSTANCE);
}
