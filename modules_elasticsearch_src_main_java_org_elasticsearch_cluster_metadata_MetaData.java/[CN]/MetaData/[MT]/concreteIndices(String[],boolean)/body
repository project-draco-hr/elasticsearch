{
  if (indices == null || indices.length == 0) {
    return concreteAllIndices();
  }
  if (indices.length == 1) {
    String index=indices[0];
    if (index.length() == 0) {
      return concreteAllIndices();
    }
    if (index.equals("_all")) {
      return concreteAllIndices();
    }
    if (this.indices.containsKey(index)) {
      return indices;
    }
    String[] actualLst=aliasAndIndexToIndexMap.get(index);
    if (actualLst == null) {
      if (!ignoreMissing) {
        throw new IndexMissingException(new Index(index));
      }
 else {
        return Strings.EMPTY_ARRAY;
      }
    }
 else {
      return actualLst;
    }
  }
  boolean possiblyAliased=false;
  for (  String index : indices) {
    if (!this.indices.containsKey(index)) {
      possiblyAliased=true;
      break;
    }
  }
  if (!possiblyAliased) {
    return indices;
  }
  Set<String> actualIndices=Sets.newHashSetWithExpectedSize(indices.length);
  for (  String index : indices) {
    String[] actualLst=aliasAndIndexToIndexMap.get(index);
    if (actualLst == null) {
      if (!ignoreMissing) {
        throw new IndexMissingException(new Index(index));
      }
    }
 else {
      for (      String x : actualLst) {
        actualIndices.add(x);
      }
    }
  }
  return actualIndices.toArray(new String[actualIndices.size()]);
}
