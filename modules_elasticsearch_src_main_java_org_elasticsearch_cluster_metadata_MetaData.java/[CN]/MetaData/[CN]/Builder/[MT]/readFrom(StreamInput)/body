{
  Builder builder=new Builder();
  builder.version=in.readLong();
  builder.transientSettings(readSettingsFromStream(in));
  builder.persistentSettings(readSettingsFromStream(in));
  int size=in.readVInt();
  for (int i=0; i < size; i++) {
    builder.put(IndexMetaData.Builder.readFrom(in));
  }
  size=in.readVInt();
  for (int i=0; i < size; i++) {
    builder.put(IndexTemplateMetaData.Builder.readFrom(in));
  }
  return builder.build();
}
