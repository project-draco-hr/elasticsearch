{
  this.indices=ImmutableMap.copyOf(indices);
  this.maxNumberOfShardsPerNode=maxNumberOfShardsPerNode;
  int totalNumberOfShards=0;
  for (  IndexMetaData indexMetaData : indices.values()) {
    totalNumberOfShards+=indexMetaData.totalNumberOfShards();
  }
  this.totalNumberOfShards=totalNumberOfShards;
}
