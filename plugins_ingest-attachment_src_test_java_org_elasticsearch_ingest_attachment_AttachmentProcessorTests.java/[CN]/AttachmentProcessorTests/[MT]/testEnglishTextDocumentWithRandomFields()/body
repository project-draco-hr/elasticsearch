{
  Set<AttachmentProcessor.Field> fields=EnumSet.noneOf(AttachmentProcessor.Field.class);
  List<String> fieldNames=new ArrayList<>();
  int numFields=scaledRandomIntBetween(1,AttachmentProcessor.Field.values().length);
  for (int i=0; i < numFields; i++) {
    AttachmentProcessor.Field field=AttachmentProcessor.Field.values()[i];
    fields.add(field);
    fieldNames.add(field.name().toLowerCase(Locale.ROOT));
  }
  processor=new AttachmentProcessor(randomAsciiOfLength(10),"source_field","target_field",EnumSet.copyOf(fields),10000);
  Map<String,Object> attachmentData=parseDocument("text-in-english.txt",processor);
  assertThat(attachmentData.keySet(),hasSize(1));
  assertThat(attachmentData.keySet(),contains("content"));
}
