{
  String[] stringAddresses=clusterAddresses.split(",");
  TransportAddress[] transportAddresses=new TransportAddress[stringAddresses.length];
  int i=0;
  for (  String stringAddress : stringAddresses) {
    URL url=new URL("http://" + stringAddress);
    transportAddresses[i++]=new InetSocketTransportAddress(new InetSocketAddress(url.getHost(),url.getPort()));
  }
  return new ExternalTestCluster(createTempDir(),externalClusterClientSettings(),transportClientPlugins(),transportAddresses);
}
