{
  ShardSearchFailure shardFailure=new ShardSearchFailure(new RuntimeException("test"));
  DummyAbstractAsyncBulkByScrollAction action=new DummyAbstractAsyncBulkByScrollAction();
  action.onScrollResponse(new SearchResponse(null,scrollId(),5,4,randomLong(),new ShardSearchFailure[]{shardFailure}));
  listener.get();
  assertThat(action.indexingFailures(),emptyCollectionOf(Failure.class));
  assertThat(action.searchFailures(),contains(shardFailure));
}
