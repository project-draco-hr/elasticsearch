{
  Failure failure=new Failure("index","type","id",new RuntimeException("test"));
  DummyAbstractAsyncBulkByScrollAction action=new DummyAbstractAsyncBulkByScrollAction();
  action.onBulkResponse(new BulkResponse(new BulkItemResponse[]{new BulkItemResponse(0,"index",failure)},randomLong()));
  listener.get();
  assertThat(action.indexingFailures(),contains(failure));
  assertThat(action.searchFailures(),emptyCollectionOf(ShardSearchFailure.class));
}
