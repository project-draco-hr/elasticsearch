{
  LocalGatewayState.Builder builder=new Builder();
  builder.version=in.readLong();
  builder.metaData=MetaData.Builder.readFrom(in,globalSettings);
  int size=in.readVInt();
  for (int i=0; i < size; i++) {
    builder.shards.put(ShardId.readShardId(in),in.readLong());
  }
  return builder.build();
}
