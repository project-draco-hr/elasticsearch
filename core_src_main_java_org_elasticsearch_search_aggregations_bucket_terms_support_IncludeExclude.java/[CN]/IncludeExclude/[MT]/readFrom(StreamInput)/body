{
  if (in.readBoolean()) {
    String includeString=in.readOptionalString();
    RegExp include=null;
    if (includeString != null) {
      include=new RegExp(includeString);
    }
    String excludeString=in.readOptionalString();
    RegExp exclude=null;
    if (excludeString != null) {
      exclude=new RegExp(excludeString);
    }
    return new IncludeExclude(include,exclude);
  }
 else {
    SortedSet<BytesRef> includes=null;
    if (in.readBoolean()) {
      int size=in.readVInt();
      includes=new TreeSet<>();
      for (int i=0; i < size; i++) {
        includes.add(in.readBytesRef());
      }
    }
    SortedSet<BytesRef> excludes=null;
    if (in.readBoolean()) {
      int size=in.readVInt();
      excludes=new TreeSet<>();
      for (int i=0; i < size; i++) {
        excludes.add(in.readBytesRef());
      }
    }
    return new IncludeExclude(includes,excludes);
  }
}
