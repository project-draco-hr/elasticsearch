{
  try {
    RecoveryState recoveryState=new RecoveryState(indexShard.shardId(),indexShard.routingEntry().primary(),recoveryType,sourceNode,clusterService.localNode());
    indexShard.recovering("from " + sourceNode,recoveryState);
  }
 catch (  IllegalIndexShardStateException e) {
    logger.debug("{} ignore recovery. already in recovering process, {}",indexShard.shardId(),e.getMessage());
    return;
  }
  final long recoveryId=onGoingRecoveries.startRecovery(indexShard,sourceNode,listener,recoverySettings.activityTimeout());
  threadPool.generic().execute(new RecoveryRunner(recoveryId));
}
