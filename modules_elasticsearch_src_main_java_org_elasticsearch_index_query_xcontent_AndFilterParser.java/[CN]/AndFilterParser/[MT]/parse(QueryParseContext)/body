{
  XContentParser parser=parseContext.parser();
  ArrayList<Filter> filters=newArrayList();
  boolean cache=true;
  String currentFieldName=null;
  XContentParser.Token token;
  while ((token=parser.nextToken()) != XContentParser.Token.END_OBJECT) {
    if (token == XContentParser.Token.FIELD_NAME) {
      currentFieldName=parser.currentName();
    }
 else     if (token == XContentParser.Token.START_ARRAY) {
      if ("filters".equals(currentFieldName)) {
        while ((token=parser.nextToken()) != XContentParser.Token.END_ARRAY) {
          filters.add(parseContext.parseInnerFilter());
        }
      }
    }
 else     if (token.isValue()) {
      if ("cache".equals(currentFieldName)) {
        cache=parser.booleanValue();
      }
    }
  }
  if (filters.isEmpty()) {
    throw new QueryParsingException(index,"[or] filter requires 'filters' to be set on it'");
  }
  if (cache) {
    for (int i=0; i < filters.size(); i++) {
      filters.set(i,parseContext.cacheFilterIfPossible(filters.get(i)));
    }
  }
  return new AndFilter(filters);
}
