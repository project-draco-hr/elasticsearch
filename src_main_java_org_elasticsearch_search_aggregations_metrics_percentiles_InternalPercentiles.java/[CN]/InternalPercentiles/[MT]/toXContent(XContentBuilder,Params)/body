{
  double[] percents=result.percents;
  if (keyed) {
    builder.startObject(name);
    for (int i=0; i < percents.length; ++i) {
      String key=String.valueOf(percents[i]);
      double value=result.estimate(i);
      builder.field(key,value);
      if (valueFormatter != null) {
        builder.field(key + "_as_string",valueFormatter.format(value));
      }
    }
    builder.endObject();
  }
 else {
    builder.startArray(name);
    for (int i=0; i < percents.length; i++) {
      double value=result.estimate(i);
      builder.startObject();
      builder.field(CommonFields.KEY,percents[i]);
      builder.field(CommonFields.VALUE,value);
      if (valueFormatter != null) {
        builder.field(CommonFields.VALUE_AS_STRING,valueFormatter.format(value));
      }
      builder.endObject();
    }
    builder.endArray();
  }
  return builder;
}
