{
  logger.info("--> script: " + script);
  SearchResponse resp=client().prepareSearch("test").setSource(new SearchSourceBuilder().query(QueryBuilders.matchAllQuery()).sort(SortBuilders.scriptSort(new Script(script + "; doc['foo'].value + 2",ScriptType.INLINE,"groovy",null),"number"))).get();
  assertNoFailures(resp);
  assertEquals(1,resp.getHits().getTotalHits());
  assertThat(resp.getHits().getAt(0).getSortValues(),equalTo(new Object[]{7.0}));
}
