{
  logger.info("--> script: " + script);
  SearchResponse resp=client().prepareSearch("test").setSource(new BytesArray("{\"query\": {\"match_all\": {}}," + "\"sort\":{\"_script\": {\"script\": \"" + script + "; doc['foo'].value + 2\", \"type\": \"number\", \"lang\": \"groovy\"}}}")).get();
  assertNoFailures(resp);
  assertEquals(1,resp.getHits().getTotalHits());
  assertThat(resp.getHits().getAt(0).getSortValues(),equalTo(new Object[]{7.0}));
}
