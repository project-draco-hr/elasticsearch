{
  assertThat(a,not(sameInstance(b)));
  assertThat(a,equalTo(b));
  if (a instanceof Map) {
    Map<?,?> mapA=(Map<?,?>)a;
    Map<?,?> mapB=(Map<?,?>)b;
    for (    Map.Entry<?,?> entry : mapA.entrySet()) {
      if (entry.getValue() instanceof List || entry.getValue() instanceof Map) {
        recursiveEqualsButNotSameCheck(entry.getValue(),mapB.get(entry.getKey()));
      }
    }
  }
 else   if (a instanceof List) {
    List<?> listA=(List<?>)a;
    List<?> listB=(List<?>)b;
    for (int i=0; i < listA.size(); i++) {
      Object value=listA.get(i);
      if (value instanceof List || value instanceof Map) {
        recursiveEqualsButNotSameCheck(value,listB.get(i));
      }
    }
  }
}
