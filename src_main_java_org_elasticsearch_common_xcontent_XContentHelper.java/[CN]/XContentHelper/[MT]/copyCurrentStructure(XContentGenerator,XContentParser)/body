{
  XContentParser.Token t=parser.currentToken();
  if (t == XContentParser.Token.FIELD_NAME) {
    generator.writeFieldName(parser.currentName());
    t=parser.nextToken();
  }
switch (t) {
case START_ARRAY:
    generator.writeStartArray();
  while (parser.nextToken() != XContentParser.Token.END_ARRAY) {
    copyCurrentStructure(generator,parser);
  }
generator.writeEndArray();
break;
case START_OBJECT:
generator.writeStartObject();
while (parser.nextToken() != XContentParser.Token.END_OBJECT) {
copyCurrentStructure(generator,parser);
}
generator.writeEndObject();
break;
default :
copyCurrentEvent(generator,parser);
}
}
