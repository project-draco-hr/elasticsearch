{
  if (bytes.hasArray()) {
    return createParser(bytes.array(),bytes.arrayOffset(),bytes.length());
  }
  Compressor compressor=CompressorFactory.compressor(bytes);
  if (compressor != null) {
    CompressedStreamInput compressedInput=compressor.streamInput(bytes.streamInput());
    XContentType contentType=XContentFactory.xContentType(compressedInput);
    compressedInput.resetToBufferStart();
    return XContentFactory.xContent(contentType).createParser(compressedInput);
  }
 else {
    return XContentFactory.xContent(bytes).createParser(bytes.streamInput());
  }
}
