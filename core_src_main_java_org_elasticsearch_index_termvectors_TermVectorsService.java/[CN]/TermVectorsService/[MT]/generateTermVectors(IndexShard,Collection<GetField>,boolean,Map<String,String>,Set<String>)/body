{
  MemoryIndex index=new MemoryIndex(withOffsets);
  for (  GetField getField : getFields) {
    String field=getField.getName();
    if (fields.contains(field) == false) {
      continue;
    }
    Analyzer analyzer=getAnalyzerAtField(indexShard,field,perFieldAnalyzer);
    for (    Object text : getField.getValues()) {
      index.addField(field,text.toString(),analyzer);
    }
  }
  return MultiFields.getFields(index.createSearcher().getIndexReader());
}
