{
  if (blockSize < minBlockSize || blockSize > maxBlockSize) {
    throw new IllegalArgumentException("blockSize must be >= " + minBlockSize + " and <= "+ maxBlockSize+ ", got "+ blockSize);
  }
  if ((blockSize & (blockSize - 1)) != 0) {
    throw new IllegalArgumentException("blockSize must be a power of two, got " + blockSize);
  }
  return Integer.numberOfTrailingZeros(blockSize);
}
