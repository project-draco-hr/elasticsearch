{
  long took=threadPool.estimatedTimeInMillis() - startTime;
  long deleted=0;
  long missing=0;
  long failed=0;
  for (  IndexDeleteByQueryResponse result : results.values()) {
    deleted=deleted + result.getDeleted();
    missing=missing + result.getMissing();
    failed=failed + result.getFailed();
  }
  IndexDeleteByQueryResponse[] indices=results.values().toArray(new IndexDeleteByQueryResponse[results.size()]);
  return new DeleteByQueryResponse(took,timedOut.get(),total.get(),deleted,missing,failed,indices,shardFailures);
}
