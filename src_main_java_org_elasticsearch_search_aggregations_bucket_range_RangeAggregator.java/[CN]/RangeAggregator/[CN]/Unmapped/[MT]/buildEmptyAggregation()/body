{
  InternalAggregations subAggs=buildEmptySubAggregations();
  List<org.elasticsearch.search.aggregations.bucket.range.Range.Bucket> buckets=new ArrayList<>(ranges.size());
  for (  RangeAggregator.Range range : ranges) {
    buckets.add(factory.createBucket(range.key,range.from,range.to,0,subAggs,keyed,formatter));
  }
  return factory.create(name,buckets,formatter,keyed,getMetaData());
}
