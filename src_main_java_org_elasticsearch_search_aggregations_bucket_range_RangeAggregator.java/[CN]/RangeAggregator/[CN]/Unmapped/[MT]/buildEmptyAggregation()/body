{
  InternalAggregations subAggs=buildEmptySubAggregations();
  List<RangeBase.Bucket> buckets=new ArrayList<RangeBase.Bucket>(ranges.size());
  for (  RangeAggregator.Range range : ranges) {
    buckets.add(factory.createBucket(range.key,range.from,range.to,0,subAggs,formatter));
  }
  return factory.create(name,buckets,formatter,keyed);
}
