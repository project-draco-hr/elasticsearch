{
  Settings settings=Settings.builder().put("index.analysis.analyzer.foobar.alias","default").put("index.analysis.analyzer.foobar.type","german").put("index.analysis.analyzer.foobar_search.alias","default_search").put("index.analysis.analyzer.foobar_search.type","default").put(Environment.PATH_HOME_SETTING.getKey(),createTempDir().toString()).put(IndexMetaData.SETTING_VERSION_CREATED,VersionUtils.randomVersion(random())).build();
  AnalysisRegistry newRegistry=getNewRegistry(settings);
  AnalysisService as=getAnalysisService(newRegistry,settings);
  assertThat(as.analyzer("default").analyzer(),is(instanceOf(GermanAnalyzer.class)));
  assertThat(as.analyzer("default_search").analyzer(),is(instanceOf(StandardAnalyzer.class)));
}
