{
  builder.startObject(QueryStringJsonQueryParser.NAME);
  builder.field("query",queryString);
  if (defaultField != null) {
    builder.field("defaultField",defaultField);
  }
  if (fields != null) {
    builder.startArray("fields");
    for (    String field : fields) {
      float boost=-1;
      if (fieldsBoosts != null) {
        boost=fieldsBoosts.get(field);
      }
      if (boost != -1) {
        field+="^" + boost;
      }
      builder.value(field);
    }
    builder.endArray();
  }
  if (useDisMax != null) {
    builder.field("useDisMax",useDisMax);
  }
  if (tieBreaker != -1) {
    builder.field("tieBreaker",tieBreaker);
  }
  if (defaultOperator != null) {
    builder.field("defaultOperator",defaultOperator.name().toLowerCase());
  }
  if (analyzer != null) {
    builder.field("analyzer",analyzer);
  }
  if (allowLeadingWildcard != null) {
    builder.field("allowLeadingWildcard",allowLeadingWildcard);
  }
  if (lowercaseExpandedTerms != null) {
    builder.field("lowercaseExpandedTerms",lowercaseExpandedTerms);
  }
  if (enablePositionIncrements != null) {
    builder.field("enablePositionIncrements",enablePositionIncrements);
  }
  if (fuzzyMinSim != -1) {
    builder.field("fuzzyMinSim",fuzzyMinSim);
  }
  if (boost != -1) {
    builder.field("boost",boost);
  }
  if (fuzzyPrefixLength != -1) {
    builder.field("fuzzyPrefixLength",fuzzyPrefixLength);
  }
  if (phraseSlop != -1) {
    builder.field("phraseSlop",phraseSlop);
  }
  builder.endObject();
}
