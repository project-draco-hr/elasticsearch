{
  String mapping=XContentFactory.jsonBuilder().startObject().startObject("type1").startObject("properties").startObject("location").field("type","geo_shape").endObject().endObject().endObject().endObject().string();
  DocumentMapper defaultMapper=MapperTests.newParser().parse(mapping);
  FieldMapper fieldMapper=defaultMapper.mappers().name("location").mapper();
  assertThat(fieldMapper,instanceOf(GeoShapeFieldMapper.class));
  GeoShapeFieldMapper geoShapeFieldMapper=(GeoShapeFieldMapper)fieldMapper;
  SpatialStrategy strategy=geoShapeFieldMapper.spatialStrategy();
  assertThat(strategy.getDistanceErrorPct(),equalTo(GeoShapeFieldMapper.Defaults.DISTANCE_ERROR_PCT));
  assertThat(strategy.getPrefixTree(),instanceOf(GeohashPrefixTree.class));
  assertThat(strategy.getPrefixTree().getMaxLevels(),equalTo(GeoShapeFieldMapper.Defaults.GEOHASH_LEVELS));
}
