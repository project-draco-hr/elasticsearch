{
  final TopDocs topDocs=s.search(query,s.getIndexReader().maxDoc());
  final TopDocs minScoreTopDocs=s.search(minScoreQuery,s.getIndexReader().maxDoc());
  int j=0;
  for (int i=0; i < topDocs.totalHits; ++i) {
    if (topDocs.scoreDocs[i].score >= minScore) {
      assertEquals(topDocs.scoreDocs[i].doc,minScoreTopDocs.scoreDocs[j].doc);
      assertEquals(topDocs.scoreDocs[i].score,minScoreTopDocs.scoreDocs[j].score,1e-5f);
      j++;
    }
  }
  assertEquals(minScoreTopDocs.totalHits,j);
}
