{
  String mapping=jsonBuilder().startObject().startObject("type").startObject("properties").startObject("location").field("type","geo_shape").endObject().startObject("name").field("type","string").endObject().startObject("title").field("type","string").field("analyzer","text").endObject().endObject().endObject().endObject().string();
  Settings settings=settingsBuilder().put(indexSettings()).put(SETTING_NUMBER_OF_SHARDS,1).put("index.analysis.analyzer.text.tokenizer","standard").putArray("index.analysis.analyzer.text.filter","lowercase","my_shingle").put("index.analysis.filter.my_shingle.type","shingle").put("index.analysis.filter.my_shingle.output_unigrams",true).put("index.analysis.filter.my_shingle.min_shingle_size",2).put("index.analysis.filter.my_shingle.max_shingle_size",3).build();
  assertAcked(transportClient().admin().indices().prepareCreate(lookupIndex).setSettings(settings).addMapping("type",mapping));
  assertAcked(transportClient().admin().indices().prepareCreate(queryIndex).setSettings(settings).addMapping("type",mapping));
  ensureGreen(queryIndex,lookupIndex);
  requests.clear();
}
