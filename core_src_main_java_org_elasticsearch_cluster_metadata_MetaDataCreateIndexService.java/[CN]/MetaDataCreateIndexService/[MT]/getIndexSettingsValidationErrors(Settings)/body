{
  String customPath=IndexMetaData.INDEX_DATA_PATH_SETTING.get(settings);
  List<String> validationErrors=new ArrayList<>();
  if (Strings.isEmpty(customPath) == false && env.sharedDataFile() == null) {
    validationErrors.add("path.shared_data must be set in order to use custom data paths");
  }
 else   if (customPath != null) {
    Path resolvedPath=PathUtils.get(new Path[]{env.sharedDataFile()},customPath);
    if (resolvedPath == null) {
      validationErrors.add("custom path [" + customPath + "] is not a sub-path of path.shared_data ["+ env.sharedDataFile()+ "]");
    }
  }
  Integer number_of_primaries=settings.getAsInt(IndexMetaData.SETTING_NUMBER_OF_SHARDS,null);
  Integer number_of_replicas=settings.getAsInt(IndexMetaData.SETTING_NUMBER_OF_REPLICAS,null);
  if (number_of_primaries != null && number_of_primaries <= 0) {
    validationErrors.add("index must have 1 or more primary shards");
  }
  if (number_of_replicas != null && number_of_replicas < 0) {
    validationErrors.add("index must have 0 or more replica shards");
  }
  return validationErrors;
}
