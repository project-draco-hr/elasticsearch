{
  SearchRequestBuilder searchRequestBuilder=client.prepareSearch();
  XContentBuilder xContentBuilder=XContentFactory.contentBuilder(randomFrom(XContentType.values()));
  xContentBuilder.startObject();
  xContentBuilder.startObject("query");
  xContentBuilder.startObject("match_all");
  xContentBuilder.endObject();
  xContentBuilder.endObject();
  xContentBuilder.endObject();
  searchRequestBuilder.setSource(xContentBuilder.bytes());
  assertThat(searchRequestBuilder.toString(),equalTo(XContentHelper.convertToJson(xContentBuilder.bytes(),false,true)));
}
