{
  ByteArrayInputStream bis=new ByteArrayInputStream(bytes);
  int outputBytes=0;
  InputStream is=new LZFInputStream(bis);
  int val;
  byte[] buffer=new byte[65536 + 23];
  while ((val=is.read(buffer)) != -1) {
    for (int i=0; i < val; i++) {
      byte testVal=buffer[i];
      Assert.assertTrue(testVal == reference[outputBytes]);
      outputBytes++;
    }
  }
  Assert.assertTrue(outputBytes == reference.length);
}
