{
  super.setUp();
  this.testLevel=Log4jESLoggerFactory.getLogger("test").getLevel();
  LogConfigurator.reset();
  Path configDir=getDataPath("config");
  Settings settings=Settings.builder().put("path.conf",configDir.toAbsolutePath()).put("path.home",createTempDir().toString()).build();
  LogConfigurator.configure(settings);
  esTestLogger=Log4jESLoggerFactory.getLogger("test");
  Logger testLogger=((Log4jESLogger)esTestLogger).logger();
  assertThat(testLogger.getLevel(),equalTo(Level.TRACE));
  testAppender=new TestAppender();
  testLogger.addAppender(testAppender);
  deprecationLogger=Log4jESLoggerFactory.getDeprecationLogger("test");
  deprecationAppender=new TestAppender();
  ESLogger logger=Log4jESLoggerFactory.getLogger("deprecation.test");
  logger.setLevel("DEBUG");
  (((Log4jESLogger)logger).logger()).addAppender(deprecationAppender);
}
