{
  super(name,factories,aggregationContext,parent,metaData);
  if (objectMapper == null) {
    parentFilter=context.searchContext().bitsetFilterCache().getBitDocIdSetFilter(NonNestedDocsFilter.INSTANCE);
  }
 else {
    parentFilter=context.searchContext().bitsetFilterCache().getBitDocIdSetFilter(objectMapper.nestedTypeFilter());
  }
  bucketOrdToLastCollectedParentDoc=new LongIntOpenHashMap(32);
}
