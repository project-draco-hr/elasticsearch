{
  URL url=new URL(EC2_METADATA_URL + type.ec2Name);
  BufferedReader urlReader=new BufferedReader(new InputStreamReader(url.openStream()));
  String metadataResult=urlReader.readLine();
  if (metadataResult == null || metadataResult.length() == 0) {
    throw new IOException("no ec2 metadata returned from :" + url);
  }
  return InetAddress.getByName(metadataResult);
}
