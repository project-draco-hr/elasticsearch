{
  try {
    URL url=new URL(EC2_METADATA_URL + type.ec2Name);
    logger.info("obtaining ec2 hostname from ec2 meta-data url {}",url);
    BufferedReader urlReader=new BufferedReader(new InputStreamReader(url.openStream()));
    String metadataResult=urlReader.readLine();
    if (metadataResult == null || metadataResult.length() == 0) {
      logger.error("no ec2 metadata returned from {}",url);
      return null;
    }
    return InetAddress.getByName(metadataResult);
  }
 catch (  IOException e) {
    logger.error("exception obtaining metadata",e);
    return null;
  }
}
