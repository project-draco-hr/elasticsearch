{
  ensureOpen();
  if (clientNode == null) {
    String name=UUID.randomUUID().toString();
    String settingsSource=getClass().getName().replace('.','/') + ".yml";
    Settings finalSettings=settingsBuilder().loadFromClasspath(settingsSource).put(defaultSettings).put("node.client",true).put("name",name).build();
    Node node=nodeBuilder().settings(finalSettings).build();
    node.start();
    this.clientNode=new NodeAndClient(name,node,clientFactory);
  }
  return clientNode.client();
}
