{
  writeProperties(structure,properties);
  Path zip=createTempDir().resolve(structure.getFileName() + ".zip");
  try (ZipOutputStream stream=new ZipOutputStream(Files.newOutputStream(zip))){
    Files.walkFileTree(structure,new SimpleFileVisitor<Path>(){
      @Override public FileVisitResult visitFile(      Path file,      BasicFileAttributes attrs) throws IOException {
        stream.putNextEntry(new ZipEntry(structure.relativize(file).toString()));
        Files.copy(file,stream);
        return FileVisitResult.CONTINUE;
      }
    }
);
  }
   if (randomBoolean()) {
    writeSha1(zip,false);
  }
 else   if (randomBoolean()) {
    writeMd5(zip,false);
  }
  return zip.toUri().toURL().toString();
}
