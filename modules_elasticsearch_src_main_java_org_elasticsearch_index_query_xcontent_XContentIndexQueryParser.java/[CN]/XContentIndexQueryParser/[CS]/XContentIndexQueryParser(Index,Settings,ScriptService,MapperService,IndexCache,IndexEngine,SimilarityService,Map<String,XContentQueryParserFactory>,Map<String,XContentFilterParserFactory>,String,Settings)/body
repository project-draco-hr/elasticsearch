{
  super(index,indexSettings);
  this.name=name;
  this.scriptService=scriptService;
  this.mapperService=mapperService;
  this.similarityService=similarityService;
  this.indexCache=indexCache;
  this.indexEngine=indexEngine;
  List<XContentQueryParser> queryParsers=newArrayList();
  if (namedQueryParsers != null) {
    Map<String,Settings> queryParserGroups=indexSettings.getGroups(XContentIndexQueryParser.Defaults.QUERY_PREFIX);
    for (    Map.Entry<String,XContentQueryParserFactory> entry : namedQueryParsers.entrySet()) {
      String queryParserName=entry.getKey();
      XContentQueryParserFactory queryParserFactory=entry.getValue();
      Settings queryParserSettings=queryParserGroups.get(queryParserName);
      if (queryParserSettings == null) {
        queryParserSettings=EMPTY_SETTINGS;
      }
      queryParsers.add(queryParserFactory.create(queryParserName,queryParserSettings));
    }
  }
  Map<String,XContentQueryParser> queryParsersMap=newHashMap();
  if (queryParsers != null) {
    for (    XContentQueryParser queryParser : queryParsers) {
      add(queryParsersMap,queryParser);
    }
  }
  this.queryParsers=ImmutableMap.copyOf(queryParsersMap);
  List<XContentFilterParser> filterParsers=newArrayList();
  if (namedFilterParsers != null) {
    Map<String,Settings> filterParserGroups=indexSettings.getGroups(XContentIndexQueryParser.Defaults.FILTER_PREFIX);
    for (    Map.Entry<String,XContentFilterParserFactory> entry : namedFilterParsers.entrySet()) {
      String filterParserName=entry.getKey();
      XContentFilterParserFactory filterParserFactory=entry.getValue();
      Settings filterParserSettings=filterParserGroups.get(filterParserName);
      if (filterParserSettings == null) {
        filterParserSettings=EMPTY_SETTINGS;
      }
      filterParsers.add(filterParserFactory.create(filterParserName,filterParserSettings));
    }
  }
  Map<String,XContentFilterParser> filterParsersMap=newHashMap();
  if (filterParsers != null) {
    for (    XContentFilterParser filterParser : filterParsers) {
      add(filterParsersMap,filterParser);
    }
  }
  this.filterParsers=ImmutableMap.copyOf(filterParsersMap);
}
