{
  bytesSinceLastRateLimit+=len;
  if (bytesSinceLastRateLimit >= rateLimiter.getMinPauseCheckBytes()) {
    long pause=rateLimiter.pause(bytesSinceLastRateLimit);
    bytesSinceLastRateLimit=0;
    rateListener.onPause(pause);
  }
  if (bufferedDelegate != null) {
    bufferedDelegate.flushBuffer(b,offset,len);
  }
 else {
    delegate.writeBytes(b,offset,len);
  }
}
