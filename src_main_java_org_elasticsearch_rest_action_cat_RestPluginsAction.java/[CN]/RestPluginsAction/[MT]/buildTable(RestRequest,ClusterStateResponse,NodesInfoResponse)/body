{
  DiscoveryNodes nodes=state.getState().nodes();
  Table table=getTableWithHeader(req);
  for (  DiscoveryNode node : nodes) {
    NodeInfo info=nodesInfo.getNodesMap().get(node.id());
    for (    PluginInfo pluginInfo : info.getPlugins().getInfos()) {
      table.startRow();
      table.addCell(node.id());
      table.addCell(node.name());
      table.addCell(pluginInfo.getName());
      table.addCell(pluginInfo.getVersion());
      String type;
      if (pluginInfo.isSite()) {
        if (pluginInfo.isJvm()) {
          type="j/s";
        }
 else {
          type="s";
        }
      }
 else {
        if (pluginInfo.isJvm()) {
          type="j";
        }
 else {
          type="";
        }
      }
      table.addCell(type);
      table.addCell(pluginInfo.getUrl());
      table.addCell(pluginInfo.getDescription());
      table.endRow();
    }
  }
  return table;
}
