{
  Settings settings=Settings.settingsBuilder().put("path.home",createTempDir().toString()).put("path.conf",this.getDataPath("config")).put("name",getClass().getName()).put(IndexMetaData.SETTING_VERSION_CREATED,Version.CURRENT).build();
  Index index=new Index("test");
  injector=new ModulesBuilder().add(new EnvironmentModule(new Environment(settings)),new SettingsModule(settings),new ThreadPoolModule(new ThreadPool(settings)),new IndicesModule(settings){
    @Override public void configure(){
      bindQueryParsersExtension();
    }
  }
,new ScriptModule(settings),new IndexSettingsModule(index,settings),new IndexCacheModule(settings),new AnalysisModule(settings,new IndicesAnalysisService(settings)),new SimilarityModule(settings),new IndexNameModule(index),new AbstractModule(){
    @Override protected void configure(){
      Multibinder.newSetBinder(binder(),ScoreFunctionParser.class);
      bind(ClusterService.class).toProvider(Providers.of((ClusterService)null));
      bind(CircuitBreakerService.class).to(NoneCircuitBreakerService.class);
    }
  }
).createInjector();
  IndexQueryParserService queryParserService=injector.getInstance(IndexQueryParserService.class);
  context=new QueryParseContext(index,queryParserService);
}
