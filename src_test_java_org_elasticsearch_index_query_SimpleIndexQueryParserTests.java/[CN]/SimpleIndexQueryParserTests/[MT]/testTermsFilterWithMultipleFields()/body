{
  IndexQueryParserService queryParser=queryParser();
  String query=XContentFactory.jsonBuilder().startObject().startObject("filtered").startObject("query").startObject("match_all").endObject().endObject().startObject("filter").startObject("terms").array("foo",123).array("bar",456).endObject().endObject().endObject().string();
  try {
    queryParser.parse(query).query();
    fail();
  }
 catch (  QueryParsingException ex) {
    assertThat(ex.getMessage(),equalTo("[terms] filter does not support multiple fields"));
  }
}
