{
  createIndex("idx");
  IndexRequestBuilder[] lowcardBuilders=new IndexRequestBuilder[NUM_DOCS];
  for (int i=0; i < lowcardBuilders.length; i++) {
    lowcardBuilders[i]=client().prepareIndex("idx","type").setSource(jsonBuilder().startObject().field(SINGLE_VALUED_FIELD_NAME,(double)i).startArray(MULTI_VALUED_FIELD_NAME).value((double)i).value(i + 1d).endArray().endObject());
  }
  indexRandom(randomBoolean(),lowcardBuilders);
  IndexRequestBuilder[] highCardBuilders=new IndexRequestBuilder[100];
  for (int i=0; i < highCardBuilders.length; i++) {
    highCardBuilders[i]=client().prepareIndex("idx","high_card_type").setSource(jsonBuilder().startObject().field(SINGLE_VALUED_FIELD_NAME,(double)i).startArray(MULTI_VALUED_FIELD_NAME).value((double)i).value(i + 1d).endArray().endObject());
  }
  indexRandom(true,highCardBuilders);
  createIndex("idx_unmapped");
  ensureSearchable();
}
