{
  String mapping=XContentFactory.jsonBuilder().startObject().startObject("type").field("numeric_detection",true).field("date_detection",true).endObject().endObject().string();
  DocumentMapper mapper=MapperTestUtils.newParser().parse(mapping);
  ParsedDocument doc=mapper.parse("type","1",XContentFactory.jsonBuilder().startObject().field("long","100").field("double","100.0").field("date","2010-01-01").endObject().bytes());
  assertEquals(1,doc.docs().size());
  Document luceneDoc=doc.docs().get(0);
  assertPrecisionStepEquals(NumberFieldMapper.Defaults.PRECISION_STEP_64_BIT,luceneDoc.getField("long"));
  assertPrecisionStepEquals(NumberFieldMapper.Defaults.PRECISION_STEP_64_BIT,luceneDoc.getField("double"));
  assertPrecisionStepEquals(NumberFieldMapper.Defaults.PRECISION_STEP_64_BIT,luceneDoc.getField("date"));
}
