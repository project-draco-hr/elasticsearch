{
  try {
    client("node1").admin().indices().prepareDelete("test").execute().actionGet();
  }
 catch (  Exception e) {
  }
  client("node1").admin().indices().prepareCreate("test").execute().actionGet();
  client("node1").admin().indices().prepareUpdateSettings("test").setSettings(ImmutableSettings.settingsBuilder().put("index.refresh_interval",-1).put("index.cache.filter.type","none")).execute().actionGet();
  IndexMetaData indexMetaData=client("node1").admin().cluster().prepareState().execute().actionGet().getState().metaData().index("test");
  assertThat(indexMetaData.settings().get("index.refresh_interval"),equalTo("-1"));
  assertThat(indexMetaData.settings().get("index.cache.filter.type"),nullValue());
  client("node1").admin().indices().prepareClose("test").execute().actionGet();
  client("node1").admin().indices().prepareUpdateSettings("test").setSettings(ImmutableSettings.settingsBuilder().put("index.refresh_interval","1s").put("index.cache.filter.type","none")).execute().actionGet();
  indexMetaData=client("node1").admin().cluster().prepareState().execute().actionGet().getState().metaData().index("test");
  assertThat(indexMetaData.settings().get("index.refresh_interval"),equalTo("1s"));
  assertThat(indexMetaData.settings().get("index.cache.filter.type"),equalTo("none"));
}
