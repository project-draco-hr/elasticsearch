{
  this.settings=Collections.unmodifiableSortedMap(new TreeMap<>(settings));
  Map<String,String> forcedUnderscoreSettings=null;
  for (  Map.Entry<String,String> entry : settings.entrySet()) {
    String toUnderscoreCase=Strings.toUnderscoreCase(entry.getKey());
    if (!toUnderscoreCase.equals(entry.getKey())) {
      if (forcedUnderscoreSettings == null) {
        forcedUnderscoreSettings=new HashMap<>();
      }
      forcedUnderscoreSettings.put(toUnderscoreCase,entry.getValue());
    }
  }
  this.forcedUnderscoreSettings=forcedUnderscoreSettings == null ? emptyMap() : unmodifiableMap(forcedUnderscoreSettings);
}
