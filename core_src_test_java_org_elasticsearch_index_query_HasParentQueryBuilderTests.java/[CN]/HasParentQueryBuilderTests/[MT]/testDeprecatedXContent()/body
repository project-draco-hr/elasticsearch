{
  XContentBuilder builder=XContentFactory.jsonBuilder().prettyPrint();
  builder.startObject();
  builder.startObject("has_parent");
  builder.field("query");
  new TermQueryBuilder("a","a").toXContent(builder,ToXContent.EMPTY_PARAMS);
  builder.field("type","foo");
  builder.endObject();
  builder.endObject();
  try {
    parseQuery(builder.string());
    fail("type is deprecated");
  }
 catch (  IllegalArgumentException ex) {
    assertEquals("Deprecated field [type] used, expected [parent_type] instead",ex.getMessage());
  }
  HasParentQueryBuilder queryBuilder=(HasParentQueryBuilder)parseQuery(builder.string(),ParseFieldMatcher.EMPTY);
  assertEquals("foo",queryBuilder.type());
}
