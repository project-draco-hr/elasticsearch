{
  String validQuery=createTestQueryBuilder().toString();
  assertThat(validQuery,containsString("{"));
  int endPosition=validQuery.indexOf("inner_hits");
  if (endPosition == -1) {
    endPosition=validQuery.length() - 1;
  }
  for (int insertionPosition=0; insertionPosition < endPosition; insertionPosition++) {
    if (validQuery.charAt(insertionPosition) == '{') {
      String testQuery=validQuery.substring(0,insertionPosition) + "{ \"newField\" : " + validQuery.substring(insertionPosition)+ "}";
      try {
        parseQuery(testQuery);
        fail("some parsing exception expected for query: " + testQuery);
      }
 catch (      ParsingException|ScriptParseException|ElasticsearchParseException e) {
      }
catch (      JsonParseException e) {
      }
    }
  }
}
