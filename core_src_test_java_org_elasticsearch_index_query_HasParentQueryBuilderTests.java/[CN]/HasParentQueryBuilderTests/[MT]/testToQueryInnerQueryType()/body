{
  String[] searchTypes=new String[]{CHILD_TYPE};
  QueryShardContext.setTypes(searchTypes);
  HasParentQueryBuilder hasParentQueryBuilder=new HasParentQueryBuilder(PARENT_TYPE,new IdsQueryBuilder().addIds("id"));
  Query query=hasParentQueryBuilder.toQuery(createShardContext());
  assertThat(QueryShardContext.getTypes(),equalTo(searchTypes));
  HasChildQueryBuilderTests.assertLateParsingQuery(query,PARENT_TYPE,"id");
}
