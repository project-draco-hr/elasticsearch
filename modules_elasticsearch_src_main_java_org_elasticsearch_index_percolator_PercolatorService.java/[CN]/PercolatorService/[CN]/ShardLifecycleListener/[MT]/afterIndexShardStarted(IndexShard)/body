{
  if (indexShard.shardId().index().name().equals(INDEX_NAME)) {
synchronized (mutex) {
      if (initialQueriesFetchDone) {
        return;
      }
      for (      IndexService indexService : indicesService) {
        loadQueries(indexService.index().name());
      }
      initialQueriesFetchDone=true;
    }
  }
  if (!indexShard.shardId().index().equals(index())) {
    return;
  }
  if (!percolatorAllocated()) {
    return;
  }
  if (indicesService.indexService(indexShard.shardId().index().name()).numberOfShards() != 1) {
    return;
  }
synchronized (mutex) {
    if (initialQueriesFetchDone) {
      return;
    }
    loadQueries(index.name());
    initialQueriesFetchDone=true;
  }
}
