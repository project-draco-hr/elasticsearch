{
  PutIndexedScriptResponse putIndexedScriptResponse=client().preparePutIndexedScript().setId("foobar").setScriptLang("groovy").setSource("{ \"script\": 1 }").get();
  assertTrue(putIndexedScriptResponse.isCreated());
  ensureGreen();
  IndicesExistsRequest existsRequest=new IndicesExistsRequest();
  String[] index=new String[1];
  index[0]=ScriptService.SCRIPT_INDEX;
  existsRequest.indices(index);
  IndicesExistsResponse existsResponse=cluster().client().admin().indices().exists(existsRequest).actionGet();
  assertTrue(existsResponse.isExists());
  GetSettingsRequest settingsRequest=new GetSettingsRequest();
  settingsRequest.indices(ScriptService.SCRIPT_INDEX);
  settingsRequest.indicesOptions(IndicesOptions.strictExpandOpen());
  GetSettingsResponse settingsResponse=client().admin().indices().getSettings(settingsRequest).actionGet();
  String numberOfShards=settingsResponse.getSetting(ScriptService.SCRIPT_INDEX,"index.number_of_shards");
  String numberOfReplicas=settingsResponse.getSetting(ScriptService.SCRIPT_INDEX,"index.auto_expand_replicas");
  assertEquals("Number of shards should be 1","1",numberOfShards);
  assertEquals("Auto expand replicas should be 0-all","0-all",numberOfReplicas);
}
