{
  if (operation == Operation.NOT) {
    if (tru == null && fals == null) {
      Label localfals=new Label();
      Label end=new Label();
      child.fals=localfals;
      child.write(writer);
      writer.push(false);
      writer.goTo(end);
      writer.mark(localfals);
      writer.push(true);
      writer.mark(end);
    }
 else {
      child.tru=fals;
      child.fals=tru;
      child.write(writer);
    }
  }
 else {
    org.objectweb.asm.Type type=actual.type;
    Sort sort=actual.sort;
    child.write(writer);
    if (operation == Operation.BWNOT) {
      if (sort == Sort.DEF) {
        writer.invokeStatic(DEF_UTIL_TYPE,DEF_NOT_CALL);
      }
 else {
        if (sort == Sort.INT) {
          writer.push(-1);
        }
 else         if (sort == Sort.LONG) {
          writer.push(-1L);
        }
 else {
          throw new IllegalStateException(error("Illegal tree structure."));
        }
        writer.math(MethodWriter.XOR,type);
      }
    }
 else     if (operation == Operation.SUB) {
      if (sort == Sort.DEF) {
        writer.invokeStatic(DEF_UTIL_TYPE,DEF_NEG_CALL);
      }
 else {
        writer.math(MethodWriter.NEG,type);
      }
    }
 else     if (operation != Operation.ADD) {
      throw new IllegalStateException(error("Illegal tree structure."));
    }
    writer.writeBranch(tru,fals);
  }
}
