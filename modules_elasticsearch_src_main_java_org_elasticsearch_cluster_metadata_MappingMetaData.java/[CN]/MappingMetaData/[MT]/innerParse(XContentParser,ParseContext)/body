{
  if (!context.parsingStillNeeded()) {
    return;
  }
  XContentParser.Token t=parser.currentToken();
  if (t == null) {
    t=parser.nextToken();
  }
  if (t == XContentParser.Token.START_OBJECT) {
    t=parser.nextToken();
  }
  String routingPart=context.routingParsingStillNeeded() ? routing().pathElements()[context.locationRouting] : null;
  String timestampPart=context.timestampParsingStillNeeded() ? timestamp().pathElements()[context.locationTimestamp] : null;
  for (; t == XContentParser.Token.FIELD_NAME; t=parser.nextToken()) {
    String fieldName=parser.currentName();
    t=parser.nextToken();
    boolean incLocationRouting=false;
    boolean incLocationTimestamp=false;
    if (context.routingParsingStillNeeded() && fieldName.equals(routingPart)) {
      if (context.locationRouting + 1 == routing.pathElements().length) {
        context.routing=parser.textOrNull();
        context.routingResolved=true;
      }
 else {
        incLocationRouting=true;
      }
    }
    if (context.timestampParsingStillNeeded() && fieldName.equals(timestampPart)) {
      if (context.locationTimestamp + 1 == timestamp.pathElements().length) {
        context.timestamp=parser.textOrNull();
        context.timestampResolved=true;
      }
 else {
        incLocationTimestamp=true;
      }
    }
    if (incLocationRouting || incLocationTimestamp) {
      if (t == XContentParser.Token.START_OBJECT) {
        context.locationRouting+=incLocationRouting ? 1 : 0;
        context.locationTimestamp+=incLocationTimestamp ? 1 : 0;
        innerParse(parser,context);
        context.locationRouting-=incLocationRouting ? 1 : 0;
        context.locationTimestamp-=incLocationTimestamp ? 1 : 0;
      }
    }
 else {
      parser.skipChildren();
    }
    if (!context.parsingStillNeeded()) {
      return;
    }
  }
}
