{
  for (  DiscoveryNode node : clusterState.nodes()) {
    if (lifecycle.stoppedOrClosed()) {
      return;
    }
    if (!nodeRequiresConnection(node)) {
      continue;
    }
    if (clusterState.nodes().nodeExists(node.id())) {
      if (!transportService.nodeConnected(node)) {
        try {
          transportService.connectToNode(node);
        }
 catch (        Exception e) {
          if (lifecycle.stoppedOrClosed()) {
            return;
          }
          if (clusterState.nodes().nodeExists(node.id())) {
            logger.warn("failed to reconnect to node {}",e,node);
          }
        }
      }
    }
  }
  if (lifecycle.started()) {
    reconnectToNodes=threadPool.schedule(reconnectInterval,ThreadPool.Names.CACHED,this);
  }
}
