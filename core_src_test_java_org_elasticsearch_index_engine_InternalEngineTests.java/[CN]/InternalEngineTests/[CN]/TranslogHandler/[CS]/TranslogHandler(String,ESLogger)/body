{
  super(new ShardId("test",0),null,logger);
  Settings settings=Settings.settingsBuilder().put(IndexMetaData.SETTING_VERSION_CREATED,Version.CURRENT).build();
  RootObjectMapper.Builder rootBuilder=new RootObjectMapper.Builder("test");
  Index index=new Index(indexName);
  IndexSettings indexSettings=IndexSettingsModule.newIndexSettings(index,settings);
  AnalysisService analysisService=new AnalysisService(indexSettings,Collections.emptyMap(),Collections.emptyMap(),Collections.emptyMap(),Collections.emptyMap());
  SimilarityService similarityService=new SimilarityService(indexSettings,Collections.emptyMap());
  MapperRegistry mapperRegistry=new IndicesModule().getMapperRegistry();
  MapperService mapperService=new MapperService(indexSettings,analysisService,similarityService,mapperRegistry);
  DocumentMapper.Builder b=new DocumentMapper.Builder(settings,rootBuilder,mapperService);
  DocumentMapperParser parser=mapperService.documentMapperParser();
  this.docMapper=b.build(mapperService,parser);
}
