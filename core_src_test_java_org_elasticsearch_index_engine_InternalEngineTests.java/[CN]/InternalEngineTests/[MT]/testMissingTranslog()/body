{
  engine.close();
  Translog translog=createTranslog();
  long id=translog.currentFileGeneration();
  translog.close();
  IOUtils.rm(translog.location().resolve(Translog.getFilename(id)));
  try {
    engine=createEngine(store,primaryTranslogDir);
    fail("engine shouldn't start without a valid translog id");
  }
 catch (  EngineCreationFailureException ex) {
  }
  IndexSettings indexSettings=new IndexSettings(defaultSettings.getIndexMetaData(),Settings.builder().put(defaultSettings.getSettings()).put(EngineConfig.INDEX_FORCE_NEW_TRANSLOG,true).build(),Collections.EMPTY_LIST);
  engine=createEngine(indexSettings,store,primaryTranslogDir,new MergeSchedulerConfig(indexSettings),newMergePolicy());
}
