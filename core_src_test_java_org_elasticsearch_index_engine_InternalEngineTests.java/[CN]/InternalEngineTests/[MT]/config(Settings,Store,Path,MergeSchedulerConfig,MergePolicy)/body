{
  IndexWriterConfig iwc=newIndexWriterConfig();
  TranslogConfig translogConfig=new TranslogConfig(shardId,translogPath,indexSettings,Translog.Durabilty.REQUEST,BigArrays.NON_RECYCLING_INSTANCE,threadPool);
  EngineConfig config=new EngineConfig(shardId,threadPool,new ShardIndexingService(shardId,indexSettings),indexSettings,null,store,createSnapshotDeletionPolicy(),mergePolicy,mergeSchedulerConfig,iwc.getAnalyzer(),iwc.getSimilarity(),new CodecService(shardId.index()),new Engine.FailedEngineListener(){
    @Override public void onFailedEngine(    ShardId shardId,    String reason,    @Nullable Throwable t){
    }
  }
,new TranslogHandler(shardId.index().getName()),IndexSearcher.getDefaultQueryCache(),IndexSearcher.getDefaultQueryCachingPolicy(),translogConfig);
  return config;
}
