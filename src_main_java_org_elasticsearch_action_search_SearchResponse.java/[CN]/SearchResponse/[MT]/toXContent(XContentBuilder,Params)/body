{
  if (scrollId != null) {
    builder.field(Fields._SCROLL_ID,scrollId);
  }
  builder.field(Fields.TOOK,tookInMillis);
  builder.field(Fields.TIMED_OUT,isTimedOut());
  builder.startObject(Fields._SHARDS);
  builder.field(Fields.TOTAL,getTotalShards());
  builder.field(Fields.SUCCESSFUL,getSuccessfulShards());
  builder.field(Fields.FAILED,getFailedShards());
  if (shardFailures.length > 0) {
    builder.startArray(Fields.FAILURES);
    for (    ShardSearchFailure shardFailure : shardFailures) {
      builder.startObject();
      if (shardFailure.shard() != null) {
        builder.field(Fields.INDEX,shardFailure.shard().index());
        builder.field(Fields.SHARD,shardFailure.shard().shardId());
      }
      builder.field(Fields.STATUS,shardFailure.status().getStatus());
      builder.field(Fields.REASON,shardFailure.reason());
      builder.endObject();
    }
    builder.endArray();
  }
  builder.endObject();
  internalResponse.toXContent(builder,params);
  return builder;
}
