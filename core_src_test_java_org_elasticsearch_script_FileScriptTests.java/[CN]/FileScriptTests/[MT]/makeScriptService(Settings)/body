{
  Path homeDir=createTempDir();
  Path scriptsDir=homeDir.resolve("config").resolve("scripts");
  Files.createDirectories(scriptsDir);
  Path mockscript=scriptsDir.resolve("script1.mockscript");
  Files.write(mockscript,"1".getBytes("UTF-8"));
  settings=Settings.builder().put(Environment.PATH_HOME_SETTING.getKey(),homeDir).put(ScriptService.SCRIPT_AUTO_RELOAD_ENABLED_SETTING.getKey(),false).put(settings).build();
  ScriptEngineRegistry scriptEngineRegistry=new ScriptEngineRegistry(Collections.singleton(new MockScriptEngine()));
  ScriptContextRegistry scriptContextRegistry=new ScriptContextRegistry(Collections.emptyList());
  ScriptSettings scriptSettings=new ScriptSettings(scriptEngineRegistry,scriptContextRegistry);
  return new ScriptService(settings,new Environment(settings),null,scriptEngineRegistry,scriptContextRegistry,scriptSettings);
}
