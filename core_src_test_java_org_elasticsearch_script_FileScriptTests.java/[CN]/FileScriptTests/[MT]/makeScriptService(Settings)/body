{
  Path homeDir=createTempDir();
  Path scriptsDir=homeDir.resolve("config").resolve("scripts");
  Files.createDirectories(scriptsDir);
  Path mockscript=scriptsDir.resolve("script1.mockscript");
  Files.write(mockscript,"1".getBytes("UTF-8"));
  settings=Settings.builder().put("path.home",homeDir).put(ScriptService.SCRIPT_AUTO_RELOAD_ENABLED_SETTING,false).put(settings).build();
  Set<ScriptEngineService> engines=new HashSet<>(Collections.singletonList(new MockScriptEngine()));
  return new ScriptService(settings,new Environment(settings),engines,null,new ScriptContextRegistry(Collections.emptyList()));
}
