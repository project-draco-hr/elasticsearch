{
  ImmutableSettings.Builder builder=ImmutableSettings.builder().put(specificEngineOpSettings(GroovyScriptEngineService.NAME,ScriptType.INLINE,ScriptContext.MAPPING),randomFrom(DISABLE_VALUES)).put(specificEngineOpSettings(GroovyScriptEngineService.NAME,ScriptType.INLINE,ScriptContext.UPDATE),randomFrom(DISABLE_VALUES));
  ImmutableSet<String> groovyLangSet=ImmutableSet.of(GroovyScriptEngineService.NAME);
  Set<String> allButGroovyLangSet=new HashSet<>(ALL_LANGS);
  allButGroovyLangSet.remove(GroovyScriptEngineService.NAME);
  this.scriptModes=new ScriptModes(scriptEngines,builder.build(),Loggers.getLogger(ScriptModesTests.class));
  assertScriptModes(ScriptMode.OFF,groovyLangSet,new ScriptType[]{ScriptType.INLINE},ScriptContext.MAPPING,ScriptContext.UPDATE);
  assertScriptModes(ScriptMode.SANDBOX,groovyLangSet,new ScriptType[]{ScriptType.INLINE},ScriptContext.SEARCH,ScriptContext.AGGS);
  assertScriptModesAllOps(ScriptMode.SANDBOX,allButGroovyLangSet,ScriptType.INLINE);
  assertScriptModesAllOps(ScriptMode.SANDBOX,ALL_LANGS,ScriptType.INDEXED);
  assertScriptModesAllOps(ScriptMode.ON,ALL_LANGS,ScriptType.FILE);
}
