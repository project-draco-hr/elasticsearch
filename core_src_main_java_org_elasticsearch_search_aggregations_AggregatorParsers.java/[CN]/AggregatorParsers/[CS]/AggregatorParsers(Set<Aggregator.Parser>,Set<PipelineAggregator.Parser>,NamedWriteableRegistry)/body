{
  Map<String,Aggregator.Parser> aggParsersBuilder=new HashMap<>(aggParsers.size());
  for (  Aggregator.Parser parser : aggParsers) {
    aggParsersBuilder.put(parser.type(),parser);
    AggregatorBuilder<?> factoryPrototype=parser.getFactoryPrototypes();
    namedWriteableRegistry.registerPrototype(AggregatorBuilder.class,factoryPrototype);
  }
  this.aggParsers=unmodifiableMap(aggParsersBuilder);
  Map<String,PipelineAggregator.Parser> pipelineAggregatorParsersBuilder=new HashMap<>(pipelineAggregatorParsers.size());
  for (  PipelineAggregator.Parser parser : pipelineAggregatorParsers) {
    pipelineAggregatorParsersBuilder.put(parser.type(),parser);
    PipelineAggregatorFactory factoryPrototype=parser.getFactoryPrototype();
    namedWriteableRegistry.registerPrototype(PipelineAggregatorFactory.class,factoryPrototype);
  }
  this.pipelineAggregatorParsers=unmodifiableMap(pipelineAggregatorParsersBuilder);
}
