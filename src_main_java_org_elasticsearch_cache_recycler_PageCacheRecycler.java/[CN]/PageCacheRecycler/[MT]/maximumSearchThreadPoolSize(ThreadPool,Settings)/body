{
  final ThreadPoolInfo infos=threadPool.info();
  for (  ThreadPool.Info info : infos) {
    if (info.getName().equals(ThreadPool.Names.SEARCH)) {
      final int maxSize=info.getMax();
      if (maxSize <= 0) {
        return 3 * EsExecutors.boundedNumberOfProcessors(settings);
      }
 else {
        return maxSize;
      }
    }
  }
  throw new ElasticSearchIllegalStateException("Couldn't find the [" + ThreadPool.Names.SEARCH + "] thread pool");
}
