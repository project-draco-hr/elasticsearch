{
  super(settings);
  this.clusterName=clusterName;
  this.threadPool=threadPool;
  this.clusterService=clusterService;
  this.transportService=transportService;
  this.pingService=pingService;
  this.initialPingTimeout=componentSettings.getAsTime("initial_ping_timeout",timeValueSeconds(3));
  this.sendLeaveRequest=componentSettings.getAsBoolean("send_leave_request",true);
  logger.debug("using initial_ping_timeout [{}]",initialPingTimeout);
  this.electMaster=new ElectMasterService(settings);
  this.masterFD=new MasterFaultDetection(settings,threadPool,transportService,this);
  this.masterFD.addListener(new MasterNodeFailureListener());
  this.nodesFD=new NodesFaultDetection(settings,threadPool,transportService);
  this.nodesFD.addListener(new NodeFailureListener());
  this.publishClusterState=new PublishClusterStateAction(settings,transportService,this,new NewClusterStateListener());
  this.pingService.setNodesProvider(this);
  this.membership=new MembershipAction(settings,transportService,this,new MembershipListener());
}
