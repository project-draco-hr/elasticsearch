{
  parser=JsonXContent.jsonXContent.createParser(REST_SPEC_COUNT_API);
  RestApi restApi=new RestApiParser().parse(parser);
  assertThat(restApi,notNullValue());
  assertThat(restApi.getName(),equalTo("count"));
  assertThat(restApi.getMethods().size(),equalTo(2));
  assertThat(restApi.getMethods().get(0),equalTo("POST"));
  assertThat(restApi.getMethods().get(1),equalTo("GET"));
  assertThat(restApi.getPaths().size(),equalTo(3));
  assertThat(restApi.getPaths().get(0),equalTo("/_count"));
  assertThat(restApi.getPaths().get(1),equalTo("/{index}/_count"));
  assertThat(restApi.getPaths().get(2),equalTo("/{index}/{type}/_count"));
  assertThat(restApi.getPathParts().size(),equalTo(2));
  assertThat(restApi.getPathParts().get(0),equalTo("index"));
  assertThat(restApi.getPathParts().get(1),equalTo("type"));
  assertThat(restApi.getParams().size(),equalTo(1));
  assertThat(restApi.getParams().get(0),equalTo("ignore_unavailable"));
  assertThat(restApi.isBodySupported(),equalTo(true));
  assertThat(restApi.isBodyRequired(),equalTo(false));
}
