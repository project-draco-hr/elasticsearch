{
  DateMathParser parser=new DateMathParser(Joda.forPattern("dateOptionalTime"),TimeUnit.MILLISECONDS);
  long gotMillis=parser.parse(toTest,now,roundUp,null);
  long expectedMillis=parser.parse(expected,0);
  if (gotMillis != expectedMillis) {
    fail("Date math not equal\n" + "Original              : " + toTest + "\n"+ "Parsed                : "+ formatter.printer().print(gotMillis)+ "\n"+ "Expected              : "+ expected+ "\n"+ "Expected milliseconds : "+ expectedMillis+ "\n"+ "Actual milliseconds   : "+ gotMillis+ "\n");
  }
}
