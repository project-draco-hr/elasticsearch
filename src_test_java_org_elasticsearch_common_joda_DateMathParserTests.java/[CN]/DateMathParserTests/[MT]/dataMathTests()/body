{
  DateMathParser parser=new DateMathParser(Joda.forPattern("dateOptionalTime"),TimeUnit.MILLISECONDS);
  assertThat(parser.parse("now",0),equalTo(0l));
  assertThat(parser.parse("now+m",0),equalTo(TimeUnit.MINUTES.toMillis(1)));
  assertThat(parser.parse("now+1m",0),equalTo(TimeUnit.MINUTES.toMillis(1)));
  assertThat(parser.parse("now+11m",0),equalTo(TimeUnit.MINUTES.toMillis(11)));
  assertThat(parser.parse("now+1d",0),equalTo(TimeUnit.DAYS.toMillis(1)));
  assertThat(parser.parse("now+1m+1s",0),equalTo(TimeUnit.MINUTES.toMillis(1) + TimeUnit.SECONDS.toMillis(1)));
  assertThat(parser.parse("now+1m-1s",0),equalTo(TimeUnit.MINUTES.toMillis(1) - TimeUnit.SECONDS.toMillis(1)));
  assertThat(parser.parse("now+1m+1s/m",0),equalTo(TimeUnit.MINUTES.toMillis(1)));
  assertThat(parser.parseRoundCeil("now+1m+1s/m",0),equalTo(TimeUnit.MINUTES.toMillis(2)));
  assertThat(parser.parse("now+4y",0),equalTo(TimeUnit.DAYS.toMillis(4 * 365 + 1)));
}
