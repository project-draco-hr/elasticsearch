{
  client().admin().indices().prepareCreate("test").setSettings(ImmutableSettings.settingsBuilder().put("index.number_of_shards",1)).execute().actionGet();
  ensureGreen();
  client().admin().indices().preparePutWarmer("warmer_1").setSearchRequest(client().prepareSearch("test").setTypes("a1").setQuery(QueryBuilders.termQuery("field","value1"))).execute().actionGet();
  client().admin().indices().preparePutWarmer("warmer_2").setSearchRequest(client().prepareSearch("test").setTypes("a2").setQuery(QueryBuilders.termQuery("field","value2"))).execute().actionGet();
  client().prepareIndex("test","type1","1").setSource("field","value1").setRefresh(true).execute().actionGet();
  client().prepareIndex("test","type1","2").setSource("field","value2").setRefresh(true).execute().actionGet();
  GetWarmersResponse getWarmersResponse=client().admin().indices().prepareGetWarmers("tes*").execute().actionGet();
  assertThat(getWarmersResponse.getWarmers().size(),equalTo(1));
  assertThat(getWarmersResponse.getWarmers().get("test").size(),equalTo(2));
  assertThat(getWarmersResponse.getWarmers().get("test").get(0).name(),equalTo("warmer_1"));
  assertThat(getWarmersResponse.getWarmers().get("test").get(1).name(),equalTo("warmer_2"));
  getWarmersResponse=client().admin().indices().prepareGetWarmers("test").addWarmers("warmer_*").execute().actionGet();
  assertThat(getWarmersResponse.getWarmers().size(),equalTo(1));
  assertThat(getWarmersResponse.getWarmers().get("test").size(),equalTo(2));
  assertThat(getWarmersResponse.getWarmers().get("test").get(0).name(),equalTo("warmer_1"));
  assertThat(getWarmersResponse.getWarmers().get("test").get(1).name(),equalTo("warmer_2"));
  getWarmersResponse=client().admin().indices().prepareGetWarmers("test").addWarmers("warmer_1").execute().actionGet();
  assertThat(getWarmersResponse.getWarmers().size(),equalTo(1));
  assertThat(getWarmersResponse.getWarmers().get("test").size(),equalTo(1));
  assertThat(getWarmersResponse.getWarmers().get("test").get(0).name(),equalTo("warmer_1"));
  getWarmersResponse=client().admin().indices().prepareGetWarmers("test").addWarmers("warmer_2").execute().actionGet();
  assertThat(getWarmersResponse.getWarmers().size(),equalTo(1));
  assertThat(getWarmersResponse.getWarmers().get("test").size(),equalTo(1));
  assertThat(getWarmersResponse.getWarmers().get("test").get(0).name(),equalTo("warmer_2"));
  getWarmersResponse=client().admin().indices().prepareGetWarmers("test").addTypes("a*").addWarmers("warmer_2").execute().actionGet();
  assertThat(getWarmersResponse.getWarmers().size(),equalTo(1));
  assertThat(getWarmersResponse.getWarmers().get("test").size(),equalTo(1));
  assertThat(getWarmersResponse.getWarmers().get("test").get(0).name(),equalTo("warmer_2"));
  getWarmersResponse=client().admin().indices().prepareGetWarmers("test").addTypes("a1").addWarmers("warmer_2").execute().actionGet();
  assertThat(getWarmersResponse.getWarmers().size(),equalTo(0));
}
