{
  Tuple<Response,ReplicaRequest> primaryResponse=shardOperationOnPrimary(state.metaData(),request);
  primaryResponse.v2().primaryTerm(indexShardReference.opPrimaryTerm());
  if (logger.isTraceEnabled()) {
    logger.trace("action [{}] completed on shard [{}] for request [{}] with cluster state version [{}]",transportPrimaryAction,shardId,request,state.version());
  }
  ReplicationPhase replicationPhase=new ReplicationPhase(task,primaryResponse.v2(),primaryResponse.v1(),shardId,channel,indexShardReference);
  finishAndMoveToReplication(replicationPhase);
}
