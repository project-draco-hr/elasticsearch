{
  if (refresh) {
    try {
      indexShard.refresh("refresh_flag_index");
    }
 catch (    Throwable e) {
    }
  }
  if (indexShard.getTranslogDurability() == Translog.Durability.REQUEST && location != null) {
    indexShard.sync(location);
  }
  indexShard.maybeFlush();
}
