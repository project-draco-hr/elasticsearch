{
  boolean result=scheduler.awaitTermination(timeout,unit);
  for (  ExecutorHolder executor : executors.values()) {
    if (executor.executor() instanceof ThreadPoolExecutor) {
      result&=((ThreadPoolExecutor)executor.executor()).awaitTermination(timeout,unit);
    }
  }
  ExecutorHolder holder;
  while ((holder=retiredExecutors.poll()) != null) {
    ThreadPoolExecutor executor=(ThreadPoolExecutor)holder.executor();
    result&=executor.awaitTermination(timeout,unit);
  }
  estimatedTimeThread.join(unit.toMillis(timeout));
  return result;
}
