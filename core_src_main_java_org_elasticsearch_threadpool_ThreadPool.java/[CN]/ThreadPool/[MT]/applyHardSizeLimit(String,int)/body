{
  int availableProcessors=EsExecutors.boundedNumberOfProcessors(settings);
  if ((name.equals(Names.BULK) || name.equals(Names.INDEX)) && size > availableProcessors) {
    logger.warn("requested thread pool size [{}] for [{}] is too large; setting to maximum [{}] instead",size,name,availableProcessors);
    size=availableProcessors;
  }
  return size;
}
