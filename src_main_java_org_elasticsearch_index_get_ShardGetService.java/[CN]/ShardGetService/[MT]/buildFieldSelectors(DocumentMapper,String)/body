{
  if (fields == null) {
    return docMapper.sourceMapper().fieldSelector();
  }
  if (fields.length == 0) {
    return null;
  }
  FieldMappersFieldVisitor fieldVisitor=null;
  for (  String fieldName : fields) {
    FieldMappers x=docMapper.mappers().smartName(fieldName);
    if (x != null && x.mapper().stored()) {
      if (fieldVisitor == null) {
        fieldVisitor=new FieldMappersFieldVisitor();
      }
      fieldVisitor.add(x);
    }
  }
  return fieldVisitor;
}
