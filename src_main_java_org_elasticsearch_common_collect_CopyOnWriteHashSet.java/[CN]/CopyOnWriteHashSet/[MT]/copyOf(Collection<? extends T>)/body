{
  if (set instanceof CopyOnWriteHashSet) {
    @SuppressWarnings("unchecked") final CopyOnWriteHashSet<T> cowSet=(CopyOnWriteHashSet<T>)set;
    return cowSet;
  }
 else {
    return new CopyOnWriteHashSet<T>().copyAndAddAll(set);
  }
}
