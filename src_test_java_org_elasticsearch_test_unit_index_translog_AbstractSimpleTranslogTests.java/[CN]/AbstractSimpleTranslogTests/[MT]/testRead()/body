{
  Translog.Location loc1=translog.add(new Translog.Create("test","1",new byte[]{1}));
  Translog.Location loc2=translog.add(new Translog.Create("test","2",new byte[]{2}));
  assertThat(TranslogStreams.readSource(translog.read(loc1)).source,equalTo(new BytesHolder(new byte[]{1})));
  assertThat(TranslogStreams.readSource(translog.read(loc2)).source,equalTo(new BytesHolder(new byte[]{2})));
  translog.sync();
  assertThat(TranslogStreams.readSource(translog.read(loc1)).source,equalTo(new BytesHolder(new byte[]{1})));
  assertThat(TranslogStreams.readSource(translog.read(loc2)).source,equalTo(new BytesHolder(new byte[]{2})));
  Translog.Location loc3=translog.add(new Translog.Create("test","2",new byte[]{3}));
  assertThat(TranslogStreams.readSource(translog.read(loc3)).source,equalTo(new BytesHolder(new byte[]{3})));
  translog.sync();
  assertThat(TranslogStreams.readSource(translog.read(loc3)).source,equalTo(new BytesHolder(new byte[]{3})));
}
