{
  int docId=Lucene.NO_DOC;
  try {
    TermPositions uid=reader.termPositions(term);
    if (!uid.next()) {
      return new DocIdAndVersion(Lucene.NO_DOC,-1);
    }
    docId=uid.doc();
    uid.nextPosition();
    if (!uid.isPayloadAvailable()) {
      return new DocIdAndVersion(docId,-2);
    }
    if (uid.getPayloadLength() < 8) {
      return new DocIdAndVersion(docId,-2);
    }
    byte[] payload=uid.getPayload(new byte[8],0);
    return new DocIdAndVersion(docId,Numbers.bytesToLong(payload));
  }
 catch (  Exception e) {
    return new DocIdAndVersion(docId,-2);
  }
}
