{
  long nextDelay=Long.MAX_VALUE;
  for (  ShardRouting shard : state.routingTable().shardsWithState(ShardRoutingState.UNASSIGNED)) {
    if (shard.primary() == false) {
      long nextShardDelay=shard.unassignedInfo().getLastComputedLeftDelayNanos();
      if (nextShardDelay > 0 && nextShardDelay < nextDelay) {
        nextDelay=nextShardDelay;
      }
    }
  }
  return nextDelay == Long.MAX_VALUE ? 0L : nextDelay;
}
