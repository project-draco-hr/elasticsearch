{
  long delayTimeout=getAllocationDelayTimeoutSetting(settings,indexSettings);
  if (delayTimeout == 0) {
    return 0;
  }
  long delta=unassignedShardsAllocatedTimestamp - timestamp;
  if (delta < 0) {
    return 0;
  }
  return delayTimeout - delta;
}
