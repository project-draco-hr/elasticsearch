{
  Settings settings=settingsBuilder().put(PluginsService.LOAD_PLUGIN_FROM_CLASSPATH,true).put(PluginsService.ES_PLUGIN_PROPERTIES_FILE_KEY,"es-plugin-test.properties").put("plugin.types",InSettingsPlugin.class.getName()).build();
  startNodeWithPlugins(settings,"/org/elasticsearch/plugins/loading/");
  Plugin plugin=getPlugin("in-settings-plugin");
  assertNotNull("InSettingsPlugin (defined below in this class) must be loaded",plugin);
  assertThat(plugin,instanceOf(InSettingsPlugin.class));
  plugin=getPlugin("in-classpath-plugin");
  assertNotNull("InClassPathPlugin (defined in package ) must be loaded",plugin);
  assertThat(plugin,instanceOf(InClassPathPlugin.class));
  plugin=getPlugin("in-jar-plugin");
  assertNotNull("InJarPlugin (packaged as a JAR file in a plugins directory) must be loaded",plugin);
  assertThat(plugin.getClass().getName(),endsWith("InJarPlugin"));
  plugin=getPlugin("in-zip-plugin");
  assertNotNull("InZipPlugin (packaged as a Zipped file in a plugins directory) must be loaded",plugin);
  assertThat(plugin.getClass().getName(),endsWith("InZipPlugin"));
}
