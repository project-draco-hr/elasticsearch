{
  try {
    logger.trace("committing writer with translog id [{}] and sync id [{}]",translogId,syncId);
    Map<String,String> commitData=new HashMap<>();
    commitData.put(Translog.TRANSLOG_ID_KEY,Long.toString(translogId));
    if (syncId != null) {
      commitData.put(Engine.SYNC_COMMIT_ID,syncId);
    }
    indexWriter.setCommitData(commitData);
    writer.commit();
  }
 catch (  Throwable ex) {
    failEngine("lucene commit failed",ex);
    throw ex;
  }
}
