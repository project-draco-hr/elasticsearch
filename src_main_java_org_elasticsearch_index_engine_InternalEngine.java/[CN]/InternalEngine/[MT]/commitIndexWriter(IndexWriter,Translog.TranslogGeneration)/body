{
  try {
    logger.trace("committing writer with translog id [{}] ",commit.translogFileGeneration);
    Map<String,String> commitData=new HashMap<>(2);
    commitData.put(Translog.TRANSLOG_GENERATION_KEY,Long.toString(commit.translogFileGeneration));
    commitData.put(Translog.TRANSLOG_UUID_KEY,commit.translogUUID);
    indexWriter.setCommitData(commitData);
    writer.commit();
  }
 catch (  Throwable ex) {
    failEngine("lucene commit failed",ex);
    throw ex;
  }
}
