{
  try (ReleasableLock _=readLock.acquire()){
    ensureOpen();
    searcherManager.maybeRefreshBlocking();
  }
 catch (  AlreadyClosedException e) {
    ensureOpen();
    maybeFailEngine("refresh",e);
  }
catch (  EngineClosedException e) {
    throw e;
  }
catch (  Throwable t) {
    failEngine("refresh failed",t);
    throw new RefreshFailedEngineException(shardId,t);
  }
  maybePruneDeletedTombstones();
  versionMapRefreshPending.set(false);
}
