{
  final OpenChannelsHandler openChannels=new OpenChannelsHandler(logger);
  this.serverOpenChannels=openChannels;
  channelPipeline.addLast("openChannels",openChannels);
  SizeHeaderFrameDecoder sizeHeader=new SizeHeaderFrameDecoder();
  if (maxCumulationBufferCapacity != null) {
    if (maxCumulationBufferCapacity.bytes() > Integer.MAX_VALUE) {
      sizeHeader.setMaxCumulationBufferCapacity(Integer.MAX_VALUE);
    }
 else {
      sizeHeader.setMaxCumulationBufferCapacity((int)maxCumulationBufferCapacity.bytes());
    }
  }
  if (maxCompositeBufferComponents != -1) {
    sizeHeader.setMaxCumulationBufferComponents(maxCompositeBufferComponents);
  }
  channelPipeline.addLast("size",sizeHeader);
  channelPipeline.addLast("dispatcher",new MessageChannelHandler(this,logger));
}
