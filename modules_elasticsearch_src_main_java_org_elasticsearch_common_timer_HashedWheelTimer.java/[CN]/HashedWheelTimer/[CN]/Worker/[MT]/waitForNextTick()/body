{
  for (; ; ) {
    final long currentTime=System.currentTimeMillis();
    final long sleepTime=tickDuration * tick - (currentTime - startTime);
    if (sleepTime <= 0) {
      break;
    }
    try {
      Thread.sleep(sleepTime);
    }
 catch (    InterruptedException e) {
      if (shutdown.get()) {
        return;
      }
    }
  }
  if (tickDuration * tick > Long.MAX_VALUE - tickDuration) {
    startTime=System.currentTimeMillis();
    tick=1;
  }
 else {
    tick++;
  }
}
