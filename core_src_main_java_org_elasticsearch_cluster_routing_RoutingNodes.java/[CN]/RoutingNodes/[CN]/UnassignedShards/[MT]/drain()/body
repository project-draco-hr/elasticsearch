{
  ShardRouting[] mutableShardRoutings=unassigned.toArray(new ShardRouting[unassigned.size()]);
  unassigned.clear();
  primaries=0;
  transactionId++;
  return mutableShardRoutings;
}
