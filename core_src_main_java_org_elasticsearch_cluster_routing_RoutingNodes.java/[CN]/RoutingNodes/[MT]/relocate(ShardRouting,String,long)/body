{
  ensureMutable();
  relocatingShards++;
  ShardRouting source=shard.relocate(nodeId,expectedShardSize);
  ShardRouting target=source.getTargetRelocatingShard();
  updateAssigned(shard,source);
  node(target.currentNodeId()).add(target);
  assignedShardsAdd(target);
  addRecovery(target);
  return Tuple.tuple(source,target);
}
