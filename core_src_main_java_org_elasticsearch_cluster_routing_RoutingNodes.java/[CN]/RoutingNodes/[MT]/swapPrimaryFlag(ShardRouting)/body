{
  ensureMutable();
  for (  ShardRouting shard : shards) {
    if (shard.primary()) {
      shard.moveFromPrimary();
      if (shard.unassigned()) {
        unassignedShards.primaries--;
      }
    }
 else {
      shard.moveToPrimary();
      if (shard.unassigned()) {
        unassignedShards.primaries++;
      }
    }
  }
}
