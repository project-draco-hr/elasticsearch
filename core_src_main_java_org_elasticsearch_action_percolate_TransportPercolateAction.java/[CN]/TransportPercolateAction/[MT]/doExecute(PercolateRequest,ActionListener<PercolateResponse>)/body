{
  request.startTime=System.currentTimeMillis();
  if (request.getRequest() != null) {
    GetRequest getRequest=new GetRequest(request.getRequest(),request);
    getAction.execute(getRequest,new ActionListener<GetResponse>(){
      @Override public void onResponse(      GetResponse getResponse){
        if (!getResponse.isExists()) {
          onFailure(new DocumentMissingException(null,request.getRequest().type(),request.getRequest().id()));
          return;
        }
        BytesReference docSource=getResponse.getSourceAsBytesRef();
        TransportPercolateAction.super.doExecute(new PercolateRequest(request,docSource),listener);
      }
      @Override public void onFailure(      Throwable e){
        listener.onFailure(e);
      }
    }
);
  }
 else {
    super.doExecute(request,listener);
  }
}
