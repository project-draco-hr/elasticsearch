{
  ForkJoinTask<?>[] q=queue;
  if (q != null) {
    ForkJoinTask<?> t;
    int b, i;
    while (sp != (b=base)) {
      if ((t=q[i=(q.length - 1) & b]) != null && UNSAFE.compareAndSwapObject(q,(i << qShift) + qBase,t,null)) {
        base=b + 1;
        return t;
      }
    }
  }
  return null;
}
