{
  client().prepareSearch("idx").addAggregation(terms("field2").field("nested1.nested2.field2").subAggregation(reverseNested("nested1_to_field1").subAggregation(terms("field1").field("nested1.field1")))).get();
}
