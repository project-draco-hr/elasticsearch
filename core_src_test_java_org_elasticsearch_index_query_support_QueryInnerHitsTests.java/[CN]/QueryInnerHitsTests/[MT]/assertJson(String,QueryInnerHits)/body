{
  QueryInnerHits queryInnerHits=copyAndAssert(hits);
  String actual;
  if (randomBoolean()) {
    actual=oneLineJSON(queryInnerHits);
  }
 else {
    actual=oneLineJSON(hits);
  }
  assertEquals(expected,actual);
  XContentParser parser=hits.getXcontentParser();
  assertEquals(XContentParser.Token.START_OBJECT,parser.nextToken());
  QueryInnerHits other=copyAndAssert(new QueryInnerHits(parser));
  assertEquals(expected,oneLineJSON(other));
}
