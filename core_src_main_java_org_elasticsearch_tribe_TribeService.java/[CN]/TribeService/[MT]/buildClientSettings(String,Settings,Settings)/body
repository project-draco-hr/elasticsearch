{
  for (  String tribeKey : tribeSettings.getAsMap().keySet()) {
    if (tribeKey.startsWith("path.")) {
      throw new IllegalArgumentException("Setting [" + tribeKey + "] not allowed in tribe client ["+ tribeName+ "]");
    }
  }
  Settings.Builder sb=Settings.builder().put(tribeSettings);
  sb.put("node.name",globalSettings.get("node.name") + "/" + tribeName);
  sb.put(Environment.PATH_HOME_SETTING.getKey(),Environment.PATH_HOME_SETTING.get(globalSettings));
  if (Environment.PATH_CONF_SETTING.exists(globalSettings)) {
    sb.put(Environment.PATH_CONF_SETTING.getKey(),Environment.PATH_CONF_SETTING.get(globalSettings));
  }
  if (Environment.PATH_PLUGINS_SETTING.exists(globalSettings)) {
    sb.put(Environment.PATH_PLUGINS_SETTING.getKey(),Environment.PATH_PLUGINS_SETTING.get(globalSettings));
  }
  if (Environment.PATH_LOGS_SETTING.exists(globalSettings)) {
    sb.put(Environment.PATH_LOGS_SETTING.getKey(),Environment.PATH_LOGS_SETTING.get(globalSettings));
  }
  for (  String passthrough : PASS_THROUGH_SETTINGS) {
    if (sb.get(passthrough) == null && globalSettings.get(passthrough) != null) {
      sb.put(passthrough,globalSettings.get(passthrough));
    }
  }
  sb.put(TRIBE_NAME_SETTING.getKey(),tribeName);
  if (sb.get(NetworkModule.HTTP_ENABLED.getKey()) == null) {
    sb.put(NetworkModule.HTTP_ENABLED.getKey(),false);
  }
  sb.put(Node.NODE_CLIENT_SETTING.getKey(),true);
  return sb.build();
}
