{
  for (  Node node : nodes) {
    try {
      node.injector().getInstance(ClusterService.class).add(new TribeClusterStateListener(node));
      node.start();
    }
 catch (    Exception e) {
      for (      Node otherNode : nodes) {
        try {
          otherNode.close();
        }
 catch (        Exception inner) {
          inner.addSuppressed(e);
          logger.warn(new ParameterizedMessage("failed to close node {} on failed start",otherNode),inner);
        }
      }
      if (e instanceof RuntimeException) {
        throw (RuntimeException)e;
      }
      throw new ElasticsearchException(e);
    }
  }
}
