{
  String fieldPattern=queryBuilder.name();
  ObjectMapper objectMapper=context.getObjectMapper(fieldPattern);
  if (objectMapper != null) {
    fieldPattern=fieldPattern + ".*";
  }
  Collection<String> fields=context.simpleMatchToIndexNames(fieldPattern);
  if (getCurrentTypes().length == 0 || fields.size() == 0) {
    assertThat(query,instanceOf(BooleanQuery.class));
    BooleanQuery booleanQuery=(BooleanQuery)query;
    assertThat(booleanQuery.clauses().size(),equalTo(0));
  }
 else {
    assertThat(query,instanceOf(ConstantScoreQuery.class));
    ConstantScoreQuery constantScoreQuery=(ConstantScoreQuery)query;
    assertThat(constantScoreQuery.getQuery(),instanceOf(BooleanQuery.class));
    BooleanQuery booleanQuery=(BooleanQuery)constantScoreQuery.getQuery();
    assertThat(booleanQuery.clauses().size(),equalTo(fields.size()));
    for (int i=0; i < fields.size(); i++) {
      BooleanClause booleanClause=booleanQuery.clauses().get(i);
      assertThat(booleanClause.getOccur(),equalTo(BooleanClause.Occur.SHOULD));
    }
  }
}
