{
  final FieldNamesFieldMapper.FieldNamesFieldType fieldNamesFieldType=(FieldNamesFieldMapper.FieldNamesFieldType)context.mapperService().fullName(FieldNamesFieldMapper.NAME);
  Collection<String> fields=getFieldNamePattern(queryBuilder.name(),context);
  if (fields.isEmpty() || fieldNamesFieldType == null) {
    return Queries.newMatchNoDocsQuery();
  }
  BooleanQuery boolFilter=new BooleanQuery();
  for (  String field : fields) {
    if (fieldNamesFieldType.isEnabled()) {
      boolFilter.add(fieldNamesFieldType.termQuery(field,context),BooleanClause.Occur.SHOULD);
    }
 else {
      MappedFieldType fieldType=context.fieldMapper(field);
      if (fieldType == null) {
        boolFilter.add(new TermRangeQuery(field,null,null,true,true),BooleanClause.Occur.SHOULD);
      }
 else {
        boolFilter.add(fieldType.rangeQuery(null,null,true,true,context),BooleanClause.Occur.SHOULD);
      }
    }
  }
  return new ConstantScoreQuery(boolFilter);
}
