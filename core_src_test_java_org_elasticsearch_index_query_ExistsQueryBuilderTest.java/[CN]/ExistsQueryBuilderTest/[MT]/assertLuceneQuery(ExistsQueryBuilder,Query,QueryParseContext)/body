{
  if (queryBuilder.queryName() != null) {
    Query namedQuery=context.copyNamedFilters().get(queryBuilder.queryName());
    Collection<String> fields=getFieldNamePattern(queryBuilder.name(),context);
    final FieldNamesFieldMapper.FieldNamesFieldType fieldNamesFieldType=(FieldNamesFieldMapper.FieldNamesFieldType)context.mapperService().fullName(FieldNamesFieldMapper.NAME);
    if (fieldNamesFieldType == null || fields.isEmpty()) {
      assertNull(namedQuery);
    }
 else {
      query=((ConstantScoreQuery)query).getQuery();
      assertThat(namedQuery,equalTo(query));
    }
  }
}
