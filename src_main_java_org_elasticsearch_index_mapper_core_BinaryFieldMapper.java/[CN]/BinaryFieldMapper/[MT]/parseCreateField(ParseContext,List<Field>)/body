{
  if (!fieldType().stored()) {
    return;
  }
  byte[] value=context.parseExternalValue(byte[].class);
  if (value == null) {
    if (context.parser().currentToken() == XContentParser.Token.VALUE_NULL) {
      return;
    }
 else {
      value=context.parser().binaryValue();
    }
  }
  if (value == null) {
    return;
  }
  if (compress != null && compress && !CompressorFactory.isCompressed(value,0,value.length)) {
    if (compressThreshold == -1 || value.length > compressThreshold) {
      BytesStreamOutput bStream=new BytesStreamOutput();
      StreamOutput stream=CompressorFactory.defaultCompressor().streamOutput(bStream);
      stream.writeBytes(value,0,value.length);
      stream.close();
      value=bStream.bytes().toBytes();
    }
  }
  fields.add(new Field(names.indexName(),value,fieldType));
}
