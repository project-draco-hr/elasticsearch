{
  if (!fieldType().stored() && !hasDocValues()) {
    return;
  }
  byte[] value=context.parseExternalValue(byte[].class);
  if (value == null) {
    if (context.parser().currentToken() == XContentParser.Token.VALUE_NULL) {
      return;
    }
 else {
      value=context.parser().binaryValue();
    }
  }
  if (value == null) {
    return;
  }
  if (fieldType().stored()) {
    fields.add(new Field(names.indexName(),value,fieldType));
  }
  if (hasDocValues()) {
    CustomBinaryDocValuesField field=(CustomBinaryDocValuesField)context.doc().getByKey(names().indexName());
    if (field == null) {
      field=new CustomBinaryDocValuesField(names().indexName(),value);
      context.doc().addWithKey(names().indexName(),field);
    }
 else {
      field.add(value);
    }
  }
}
