{
  IndexFieldData indexFieldData=getForField(childType);
  AtomicFieldData fieldData=indexFieldData.load(refreshReader());
  SortedBinaryDocValues bytesValues=fieldData.getBytesValues();
  bytesValues.setDocument(0);
  assertThat(bytesValues.count(),equalTo(1));
  assertThat(bytesValues.valueAt(0).utf8ToString(),equalTo("1"));
  bytesValues.setDocument(1);
  assertThat(bytesValues.count(),equalTo(2));
  assertThat(bytesValues.valueAt(0).utf8ToString(),equalTo("1"));
  assertThat(bytesValues.valueAt(1).utf8ToString(),equalTo("2"));
  bytesValues.setDocument(2);
  assertThat(bytesValues.count(),equalTo(2));
  assertThat(bytesValues.valueAt(0).utf8ToString(),equalTo("1"));
  assertThat(bytesValues.valueAt(1).utf8ToString(),equalTo("3"));
  bytesValues.setDocument(3);
  assertThat(bytesValues.count(),equalTo(1));
  assertThat(bytesValues.valueAt(0).utf8ToString(),equalTo("2"));
  bytesValues.setDocument(4);
  assertThat(bytesValues.count(),equalTo(2));
  assertThat(bytesValues.valueAt(0).utf8ToString(),equalTo("2"));
  assertThat(bytesValues.valueAt(1).utf8ToString(),equalTo("4"));
  bytesValues.setDocument(5);
  assertThat(bytesValues.count(),equalTo(2));
  assertThat(bytesValues.valueAt(0).utf8ToString(),equalTo("1"));
  assertThat(bytesValues.valueAt(1).utf8ToString(),equalTo("5"));
  bytesValues.setDocument(6);
  assertThat(bytesValues.count(),equalTo(1));
  assertThat(bytesValues.valueAt(0).utf8ToString(),equalTo("2"));
  bytesValues.setDocument(7);
  assertThat(bytesValues.count(),equalTo(0));
}
