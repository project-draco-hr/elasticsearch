{
  Settings settings=Settings.builder().put(IndexMetaData.SETTING_VERSION_CREATED,Version.CURRENT).build();
  ParseContext.InternalParseContext ctx=new ParseContext.InternalParseContext("test",settings,parser,mapper,new ContentPath(0));
  SourceToParse source=SourceToParse.source(builder.bytes());
  ctx.reset(XContentHelper.createParser(source.source()),new ParseContext.Document(),source);
  assertEquals(XContentParser.Token.START_OBJECT,ctx.parser().nextToken());
  ctx.parser().nextToken();
  return DocumentParser.parseObject(ctx,mapper.root());
}
