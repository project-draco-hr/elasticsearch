{
  bucketCountThresholds.toXContent(builder);
  if (showTermDocCountError != null) {
    builder.field(AbstractTermsParametersParser.SHOW_TERM_DOC_COUNT_ERROR.getPreferredName(),showTermDocCountError);
  }
  if (executionHint != null) {
    builder.field(AbstractTermsParametersParser.EXECUTION_HINT_FIELD_NAME.getPreferredName(),executionHint);
  }
  if (valueType != null) {
    builder.field("value_type",valueType.name().toLowerCase(Locale.ROOT));
  }
  if (order != null) {
    builder.field("order");
    order.toXContent(builder,params);
  }
  if (collectionMode != null) {
    builder.field(SubAggCollectionMode.KEY.getPreferredName(),collectionMode.parseField().getPreferredName());
  }
  if (includeTerms != null) {
    builder.array("include",includeTerms);
  }
  if (includePattern != null) {
    if (includeFlags == 0) {
      builder.field("include",includePattern);
    }
 else {
      builder.startObject("include").field("pattern",includePattern).field("flags",includeFlags).endObject();
    }
  }
  if (excludeTerms != null) {
    builder.array("exclude",excludeTerms);
  }
  if (excludePattern != null) {
    if (excludeFlags == 0) {
      builder.field("exclude",excludePattern);
    }
 else {
      builder.startObject("exclude").field("pattern",excludePattern).field("flags",excludeFlags).endObject();
    }
  }
  return builder;
}
