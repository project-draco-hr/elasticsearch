{
  if (clusterService.state().nodes().localNodeId().equals(node.id())) {
    boolean freed=searchService.freeContext(contextId);
    actionListener.onResponse(freed);
  }
 else {
    transportService.sendRequest(node,SearchFreeContextTransportHandler.ACTION,new SearchFreeContextRequest(request,contextId),new TransportResponseHandler<SearchFreeContextResponse>(){
      @Override public SearchFreeContextResponse newInstance(){
        return new SearchFreeContextResponse();
      }
      @Override public void handleResponse(      SearchFreeContextResponse response){
        actionListener.onResponse(response.isFreed());
      }
      @Override public void handleException(      TransportException exp){
        actionListener.onFailure(exp);
      }
      @Override public String executor(){
        return ThreadPool.Names.SAME;
      }
    }
);
  }
}
