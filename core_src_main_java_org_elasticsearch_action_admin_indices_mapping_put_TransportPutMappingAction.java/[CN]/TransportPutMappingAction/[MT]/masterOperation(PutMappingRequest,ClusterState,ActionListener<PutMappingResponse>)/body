{
  try {
    final Index[] concreteIndices=request.getConcreteIndex() == null ? indexNameExpressionResolver.concreteIndices(state,request) : new Index[]{request.getConcreteIndex()};
    PutMappingClusterStateUpdateRequest updateRequest=new PutMappingClusterStateUpdateRequest().ackTimeout(request.timeout()).masterNodeTimeout(request.masterNodeTimeout()).indices(concreteIndices).type(request.type()).updateAllTypes(request.updateAllTypes()).source(request.source());
    metaDataMappingService.putMapping(updateRequest,new ActionListener<ClusterStateUpdateResponse>(){
      @Override public void onResponse(      ClusterStateUpdateResponse response){
        listener.onResponse(new PutMappingResponse(response.isAcknowledged()));
      }
      @Override public void onFailure(      Exception t){
        logger.debug(new ParameterizedMessage("failed to put mappings on indices [{}], type [{}]",concreteIndices,request.type()),t);
        listener.onFailure(t);
      }
    }
);
  }
 catch (  IndexNotFoundException ex) {
    logger.debug(new ParameterizedMessage("failed to put mappings on indices [{}], type [{}]",request.indices(),request.type()),ex);
    throw ex;
  }
}
