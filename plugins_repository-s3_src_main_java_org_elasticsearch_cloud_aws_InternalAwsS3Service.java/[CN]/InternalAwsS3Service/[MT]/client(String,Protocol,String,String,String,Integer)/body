{
  if (Strings.isNullOrEmpty(endpoint)) {
    if (region != null) {
      endpoint=getEndpoint(region);
      logger.debug("using s3 region [{}], with endpoint [{}]",region,endpoint);
    }
 else {
      endpoint=getDefaultEndpoint();
    }
  }
  return getClient(endpoint,protocol,account,key,maxRetries);
}
