{
  String endpoint=null;
  if (settings.get(CLOUD_S3.ENDPOINT) != null) {
    endpoint=settings.get(CLOUD_S3.ENDPOINT);
    logger.debug("using explicit s3 endpoint [{}]",endpoint);
  }
 else   if (settings.get(CLOUD_AWS.REGION) != null) {
    String region=settings.get(CLOUD_AWS.REGION).toLowerCase(Locale.ROOT);
    endpoint=getEndpoint(region);
    logger.debug("using s3 region [{}], with endpoint [{}]",region,endpoint);
  }
  return endpoint;
}
