{
  String endpoint=null;
  if (CLOUD_S3.ENDPOINT_SETTING.exists(settings)) {
    endpoint=CLOUD_S3.ENDPOINT_SETTING.get(settings);
    logger.debug("using explicit s3 endpoint [{}]",endpoint);
  }
 else   if (CLOUD_S3.REGION_SETTING.exists(settings)) {
    String region=CLOUD_S3.REGION_SETTING.get(settings);
    endpoint=getEndpoint(region);
    logger.debug("using s3 region [{}], with endpoint [{}]",region,endpoint);
  }
  return endpoint;
}
