{
  AWSCredentialsProvider credentials;
  if (key.isEmpty() && secret.isEmpty()) {
    logger.debug("Using either environment variables, system properties or instance profile credentials");
    credentials=new DefaultAWSCredentialsProviderChain();
  }
 else {
    logger.debug("Using basic key/secret credentials");
    credentials=new StaticCredentialsProvider(new BasicAWSCredentials(key,secret));
  }
  return credentials;
}
