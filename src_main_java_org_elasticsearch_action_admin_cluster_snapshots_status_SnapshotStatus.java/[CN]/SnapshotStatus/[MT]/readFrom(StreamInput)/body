{
  snapshotId=SnapshotId.readSnapshotId(in);
  state=State.fromValue(in.readByte());
  int size=in.readVInt();
  ImmutableList.Builder<SnapshotIndexShardStatus> builder=ImmutableList.builder();
  for (int i=0; i < size; i++) {
    builder.add(SnapshotIndexShardStatus.readShardSnapshotStatus(in));
  }
  shards=builder.build();
  updateShardStats();
}
