{
  super(settings);
  this.clusterName=clusterName;
  this.transportService=transportService;
  this.threadPool=threadPool;
  this.minCompatibilityVersion=version.minimumCompatibilityVersion();
  this.headers=headers;
  this.nodesSamplerInterval=this.settings.getAsTime("client.transport.nodes_sampler_interval",timeValueSeconds(5));
  this.pingTimeout=this.settings.getAsTime("client.transport.ping_timeout",timeValueSeconds(5)).millis();
  this.ignoreClusterName=this.settings.getAsBoolean("client.transport.ignore_cluster_name",false);
  if (logger.isDebugEnabled()) {
    logger.debug("node_sampler_interval[" + nodesSamplerInterval + "]");
  }
  if (this.settings.getAsBoolean("client.transport.sniff",false)) {
    this.nodesSampler=new SniffNodesSampler();
  }
 else {
    this.nodesSampler=new SimpleNodeSampler();
  }
  this.nodesSamplerFuture=threadPool.schedule(nodesSamplerInterval,ThreadPool.Names.GENERIC,new ScheduledNodeSampler());
}
