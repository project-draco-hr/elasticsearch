{
  client().admin().indices().prepareCreate(INDEX).setSettings(settingsBuilder).get();
  PutMappingResponse putMappingResponse=client().admin().indices().preparePutMapping(INDEX).setType(TYPE).setSource(jsonBuilder().startObject().startObject(TYPE).startObject("properties").startObject(FIELD).field("type","completion").field("index_analyzer",indexAnalyzer).field("search_analyzer",searchAnalyzer).field("payloads",payloads).field("preserve_separators",preserveSeparators).field("preserve_position_increments",preservePositionIncrements).endObject().endObject().endObject().endObject()).get();
  assertThat(putMappingResponse.isAcknowledged(),is(true));
  ensureYellow();
}
