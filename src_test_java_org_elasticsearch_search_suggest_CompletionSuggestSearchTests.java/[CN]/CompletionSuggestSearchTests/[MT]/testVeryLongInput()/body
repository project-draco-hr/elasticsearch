{
  client().admin().indices().prepareCreate(INDEX).get();
  ElasticSearchAssertions.assertAcked(client().admin().indices().preparePutMapping(INDEX).setType(TYPE).setSource(jsonBuilder().startObject().startObject(TYPE).startObject("properties").startObject(FIELD).field("type","completion").endObject().endObject().endObject().endObject()));
  ensureYellow();
  String longString=replaceReservedChars(randomRealisticUnicodeOfLength(atLeast(5000)),(char)0x01);
  client().prepareIndex(INDEX,TYPE,"1").setSource(jsonBuilder().startObject().startObject(FIELD).startArray("input").value(longString).endArray().field("output","foobar").endObject().endObject()).setRefresh(true).get();
}
