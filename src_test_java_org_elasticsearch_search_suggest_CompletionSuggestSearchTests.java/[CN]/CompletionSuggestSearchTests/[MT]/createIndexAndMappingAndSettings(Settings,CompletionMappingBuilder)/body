{
  assertAcked(client().admin().indices().prepareCreate(INDEX).setSettings(ImmutableSettings.settingsBuilder().put(indexSettings()).put(settings)).addMapping(TYPE,jsonBuilder().startObject().startObject(TYPE).startObject("properties").startObject(FIELD).field("type","completion").field("analyzer",completionMappingBuilder.indexAnalyzer).field("search_analyzer",completionMappingBuilder.searchAnalyzer).field("payloads",completionMappingBuilder.payloads).field("preserve_separators",completionMappingBuilder.preserveSeparators).field("preserve_position_increments",completionMappingBuilder.preservePositionIncrements).endObject().endObject().endObject().endObject()).get());
  ensureYellow();
}
