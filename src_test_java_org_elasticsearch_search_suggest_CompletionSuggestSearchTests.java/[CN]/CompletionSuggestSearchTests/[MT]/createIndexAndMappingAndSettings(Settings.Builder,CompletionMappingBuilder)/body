{
  client().admin().indices().prepareCreate(INDEX).setSettings(settingsBuilder).get();
  PutMappingResponse putMappingResponse=client().admin().indices().preparePutMapping(INDEX).setType(TYPE).setSource(jsonBuilder().startObject().startObject(TYPE).startObject("properties").startObject(FIELD).field("type","completion").field("index_analyzer",completionMappingBuilder.indexAnalyzer).field("search_analyzer",completionMappingBuilder.searchAnalyzer).field("payloads",completionMappingBuilder.payloads).field("preserve_separators",completionMappingBuilder.preserveSeparators).field("preserve_position_increments",completionMappingBuilder.preservePositionIncrements).endObject().endObject().endObject().endObject()).get();
  assertThat(putMappingResponse.isAcknowledged(),is(true));
  ensureYellow();
}
