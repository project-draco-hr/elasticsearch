{
  aggregationPhase.preProcess(searchContext);
  boolean rescore=execute(searchContext,searchContext.searcher());
  if (rescore) {
    rescorePhase.execute(searchContext);
  }
  suggestPhase.execute(searchContext);
  aggregationPhase.execute(searchContext);
  if (searchContext.getProfilers() != null) {
    List<ProfileShardResult> shardResults=Profiler.buildShardResults(searchContext.getProfilers().getProfilers());
    searchContext.queryResult().profileResults(shardResults);
  }
}
