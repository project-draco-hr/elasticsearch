{
  Set<DiscoveryNode> nodesToPublishTo=new HashSet<>(clusterState.nodes().size());
  DiscoveryNode localNode=nodesProvider.nodes().localNode();
  for (  final DiscoveryNode node : clusterState.nodes()) {
    if (node.equals(localNode)) {
      continue;
    }
    nodesToPublishTo.add(node);
  }
  publish(clusterState,nodesToPublishTo,new AckClusterStatePublishResponseHandler(nodesToPublishTo,ackListener));
}
