{
  final String query="{ \"match_all\" : {\"_name\" : \"foobar\"}}";
  QueryBuilder<?> builder=new TemplateQueryBuilder(new Template(query,ScriptType.INLINE,"mockscript",XContentType.JSON,Collections.emptyMap()));
  assertEquals(new MatchAllQueryBuilder().queryName("foobar"),builder.rewrite(queryShardContext()));
  builder=new TemplateQueryBuilder(new Template(query,ScriptType.INLINE,"mockscript",XContentType.JSON,Collections.emptyMap())).queryName("outer");
  assertEquals(new BoolQueryBuilder().must(new MatchAllQueryBuilder().queryName("foobar")).queryName("outer"),builder.rewrite(queryShardContext()));
}
