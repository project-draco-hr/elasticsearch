{
  BytesStreamOutput out=CachedStreamOutput.popEntry().cachedBytes();
  out.writeBoolean(false);
  out.writeByte((byte)1);
  out.writeShort((short)-1);
  out.writeInt(-1);
  out.writeVInt(2);
  out.writeLong(-3);
  out.writeVLong(4);
  out.writeFloat(1.1f);
  out.writeDouble(2.2);
  out.writeUTF("hello");
  out.writeUTF("goodbye");
  BytesStreamInput in=new BytesStreamInput(out.copiedByteArray());
  assertThat(in.readBoolean(),equalTo(false));
  assertThat(in.readByte(),equalTo((byte)1));
  assertThat(in.readShort(),equalTo((short)-1));
  assertThat(in.readInt(),equalTo(-1));
  assertThat(in.readVInt(),equalTo(2));
  assertThat(in.readLong(),equalTo((long)-3));
  assertThat(in.readVLong(),equalTo((long)4));
  assertThat((double)in.readFloat(),closeTo(1.1,0.0001));
  assertThat(in.readDouble(),closeTo(2.2,0.0001));
  assertThat(in.readUTF(),equalTo("hello"));
  assertThat(in.readUTF(),equalTo("goodbye"));
}
