{
  this.indexCreated=indexCreated;
  this.root=rootObjectMapper;
  this.metadataMappers=metadataMappers;
  ImmutableMap.Builder<Class<? extends MetadataFieldMapper>,MetadataFieldMapper> builder=ImmutableMap.builder();
  for (  MetadataFieldMapper metadataMapper : metadataMappers) {
    if (indexCreated.before(Version.V_2_0_0) && LEGACY_INCLUDE_IN_OBJECT.contains(metadataMapper.name())) {
      root.putMapper(metadataMapper);
    }
    builder.put(metadataMapper.getClass(),metadataMapper);
  }
  Arrays.sort(metadataMappers,new Comparator<Mapper>(){
    @Override public int compare(    Mapper o1,    Mapper o2){
      return o1.name().compareTo(o2.name());
    }
  }
);
  this.rootMappersMap=builder.build();
  this.sourceTransforms=sourceTransforms;
  this.meta=meta;
}
