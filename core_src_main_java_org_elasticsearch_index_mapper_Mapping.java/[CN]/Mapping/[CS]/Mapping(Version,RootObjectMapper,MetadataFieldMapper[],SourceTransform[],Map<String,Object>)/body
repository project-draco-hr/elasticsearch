{
  this.indexCreated=indexCreated;
  this.root=rootObjectMapper;
  this.metadataMappers=metadataMappers;
  Map<Class<? extends MetadataFieldMapper>,MetadataFieldMapper> rootMappersMap=new HashMap<>();
  for (  MetadataFieldMapper metadataMapper : metadataMappers) {
    if (indexCreated.before(Version.V_2_0_0_beta1) && LEGACY_INCLUDE_IN_OBJECT.contains(metadataMapper.name())) {
      root.putMapper(metadataMapper);
    }
    rootMappersMap.put(metadataMapper.getClass(),metadataMapper);
  }
  Arrays.sort(metadataMappers,new Comparator<Mapper>(){
    @Override public int compare(    Mapper o1,    Mapper o2){
      return o1.name().compareTo(o2.name());
    }
  }
);
  this.rootMappersMap=unmodifiableMap(rootMappersMap);
  this.sourceTransforms=sourceTransforms;
  this.meta=meta;
}
