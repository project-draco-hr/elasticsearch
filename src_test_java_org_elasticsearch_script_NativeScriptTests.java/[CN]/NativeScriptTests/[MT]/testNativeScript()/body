{
  Settings settings=ImmutableSettings.settingsBuilder().put("script.native.my.type",MyNativeScriptFactory.class.getName()).put("name","testNativeScript").build();
  Injector injector=new ModulesBuilder().add(new ThreadPoolModule(settings),new SettingsModule(settings),new ScriptModule(settings)).createInjector();
  ScriptService scriptService=injector.getInstance(ScriptService.class);
  ExecutableScript executable=scriptService.executable(NativeScriptEngineService.NAME,"my",ScriptType.INLINE,ScriptContext.Standard.SEARCH,null);
  assertThat(executable.run().toString(),equalTo("test"));
  terminate(injector.getInstance(ThreadPool.class));
}
