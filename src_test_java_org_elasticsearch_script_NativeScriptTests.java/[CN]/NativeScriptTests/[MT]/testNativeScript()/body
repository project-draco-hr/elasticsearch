{
  Settings settings=ImmutableSettings.settingsBuilder().put("script.native.my.type",MyNativeScriptFactory.class.getName()).put("name","testNativeScript").put("path.home",createTempDir()).build();
  Injector injector=new ModulesBuilder().add(new EnvironmentModule(new Environment(settings)),new ThreadPoolModule(new ThreadPool(settings)),new SettingsModule(settings),new ScriptModule(settings)).createInjector();
  ScriptService scriptService=injector.getInstance(ScriptService.class);
  ExecutableScript executable=scriptService.executable(new Script(NativeScriptEngineService.NAME,"my",ScriptType.INLINE,null),ScriptContext.Standard.SEARCH);
  assertThat(executable.run().toString(),equalTo("test"));
  terminate(injector.getInstance(ThreadPool.class));
}
