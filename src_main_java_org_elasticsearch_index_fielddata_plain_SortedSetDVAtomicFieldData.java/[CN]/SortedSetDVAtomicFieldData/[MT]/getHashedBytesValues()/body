{
  final SortedSetDocValues values=getValuesNoException(reader,field);
  if (hashes == null) {
synchronized (this) {
      if (hashes == null) {
        final long valueCount=values.getValueCount();
        final IntArray hashes=BigArrays.NON_RECYCLING_INSTANCE.newIntArray(valueCount);
        BytesRef scratch=new BytesRef(16);
        for (long i=0; i < valueCount; ++i) {
          values.lookupOrd(i,scratch);
          hashes.set(i,scratch.hashCode());
        }
        this.hashes=hashes;
      }
    }
  }
  return new SortedSetHashedValues(reader,field,values,hashes);
}
