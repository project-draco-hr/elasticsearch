{
  final SortedSetDocValues values=getValuesNoException(reader,field);
  if (hashes == null) {
synchronized (this) {
      if (hashes == null) {
        final long valueCount=values.getValueCount();
        final IntArray hashes=BigArrays.NON_RECYCLING_INSTANCE.newIntArray(1L + valueCount);
        BytesRef scratch=new BytesRef(16);
        hashes.set(0,scratch.hashCode());
        for (long i=0; i < valueCount; ++i) {
          values.lookupOrd(i,scratch);
          hashes.set(1L + i,scratch.hashCode());
        }
        this.hashes=hashes;
      }
    }
  }
  return new SortedSetHashedValues(reader,field,values,hashes);
}
