{
  name=in.readString();
  order=InternalOrder.Streams.readOrder(in);
  if (in.readBoolean()) {
    emptyBucketInfo=EmptyBucketInfo.readFrom(in);
  }
  formatter=ValueFormatterStreams.readOptional(in);
  keyed=in.readBoolean();
  int size=in.readVInt();
  List<B> buckets=new ArrayList<B>(size);
  for (int i=0; i < size; i++) {
    buckets.add(createBucket(in.readLong(),in.readVLong(),InternalAggregations.readAggregations(in)));
  }
  this.buckets=buckets;
  this.bucketsMap=null;
}
