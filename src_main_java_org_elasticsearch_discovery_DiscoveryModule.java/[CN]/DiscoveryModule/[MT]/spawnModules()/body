{
  Class<? extends Module> defaultDiscoveryModule;
  if (DiscoveryNode.localNode(settings)) {
    defaultDiscoveryModule=LocalDiscoveryModule.class;
  }
 else {
    defaultDiscoveryModule=ZenDiscoveryModule.class;
  }
  return ImmutableList.of(Modules.createModule(settings.getAsClass("discovery.type",defaultDiscoveryModule,"org.elasticsearch.discovery.","DiscoveryModule"),settings));
}
