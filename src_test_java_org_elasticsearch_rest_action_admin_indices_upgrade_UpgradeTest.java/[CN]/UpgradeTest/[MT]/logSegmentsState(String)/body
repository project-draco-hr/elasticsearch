{
  IndicesSegmentResponse segsRsp;
  if (index == null) {
    segsRsp=client().admin().indices().prepareSegments().get();
  }
 else {
    segsRsp=client().admin().indices().prepareSegments(index).get();
  }
  XContentBuilder builder=JsonXContent.contentBuilder();
  logger.debug("Segments State: \n\n" + segsRsp.toXContent(builder.prettyPrint(),ToXContent.EMPTY_PARAMS).string());
}
