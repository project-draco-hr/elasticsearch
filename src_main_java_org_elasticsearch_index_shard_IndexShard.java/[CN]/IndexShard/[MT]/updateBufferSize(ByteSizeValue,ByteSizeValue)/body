{
  final EngineConfig config=engineConfig;
  final ByteSizeValue preValue=config.getIndexingBufferSize();
  config.setIndexingBufferSize(shardIndexingBufferSize);
  if (preValue.bytes() != shardIndexingBufferSize.bytes() && engineUnsafe() != null) {
    if (shardIndexingBufferSize == EngineConfig.INACTIVE_SHARD_INDEXING_BUFFER && preValue != EngineConfig.INACTIVE_SHARD_INDEXING_BUFFER) {
      logger.debug("updating index_buffer_size from [{}] to (inactive) [{}]",preValue,shardIndexingBufferSize);
      try {
        refresh("update index buffer");
      }
 catch (      Throwable e) {
        logger.warn("failed to refresh after setting shard to inactive",e);
      }
    }
 else {
      logger.debug("updating index_buffer_size from [{}] to [{}]",preValue,shardIndexingBufferSize);
    }
  }
  translog().updateBuffer(shardTranslogBufferSize);
}
