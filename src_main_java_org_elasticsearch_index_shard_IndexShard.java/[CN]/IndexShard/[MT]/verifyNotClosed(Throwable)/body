{
  IndexShardState state=this.state;
  if (state == IndexShardState.CLOSED) {
    final IllegalIndexShardStateException exc=new IllegalIndexShardStateException(shardId,state,"operation only allowed when not closed");
    if (suppressed != null) {
      exc.addSuppressed(suppressed);
    }
    throw exc;
  }
}
