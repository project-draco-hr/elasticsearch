{
  Filter searchFilter=mapperService.searchFilter(types);
  if (searchFilter != null) {
    query=new FilteredQuery(query,indexCache.filter().cache(searchFilter,null,indexService.queryParserService().autoFilterCachePolicy()));
  }
  return query;
}
