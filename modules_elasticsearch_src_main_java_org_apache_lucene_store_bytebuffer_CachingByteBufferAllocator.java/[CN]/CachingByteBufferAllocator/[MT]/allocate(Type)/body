{
  ByteBuffer buffer=type == Type.SMALL ? smallCache.poll() : largeCache.poll();
  if (buffer == null) {
    buffer=super.allocate(type);
  }
  return buffer;
}
