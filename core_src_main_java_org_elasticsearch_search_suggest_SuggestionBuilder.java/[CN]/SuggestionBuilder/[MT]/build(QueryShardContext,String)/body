{
  SuggestionContext suggestionContext=innerBuild(context);
  SuggestUtils.suggestionToSuggestionContext(this,context.getMapperService(),suggestionContext);
  SuggestUtils.verifySuggestion(context.getMapperService(),new BytesRef(globalText),suggestionContext);
  suggestionContext.setShardContext(context);
  if (suggestionContext.getField() == null) {
    throw new IllegalArgumentException("The required field option is missing");
  }
  return suggestionContext;
}
