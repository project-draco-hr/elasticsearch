{
  Preconditions.checkArgument(size >= 0,"negative size");
  if (size > maxAlloc) {
    return null;
  }
  while (true) {
    Chunk c=getOrMakeChunk();
    int allocOffset=c.alloc(size);
    if (allocOffset != -1) {
      return new Allocation(c.data,allocOffset);
    }
    tryRetireChunk(c);
  }
}
