{
  HasChildQueryBuilder hasChildQuery=hasChildQuery("child",QueryBuilders.functionScoreQuery(constantScoreQuery(QueryBuilders.termQuery("foo","two"))).boostMode("replace").scoreMode("sum").add(QueryBuilders.matchAllQuery(),weightFactorFunction(1)).add(QueryBuilders.termQuery("foo","three"),weightFactorFunction(1)).add(QueryBuilders.termQuery("foo","four"),weightFactorFunction(1))).scoreMode(scoreMode).minChildren(minChildren);
  if (maxChildren != null) {
    hasChildQuery.maxChildren(maxChildren);
  }
  return client().prepareSearch("test").setQuery(hasChildQuery).addSort("_score",SortOrder.DESC).addSort("id",SortOrder.ASC).get();
}
