{
  MulticastSocket multicastSocket=new MulticastSocket(config.port);
  try {
    multicastSocket.setTimeToLive(config.ttl);
    multicastSocket.setInterface(config.multicastInterface);
    multicastSocket.joinGroup(InetAddress.getByName(config.group));
    multicastSocket.setReceiveBufferSize(config.bufferSize);
    multicastSocket.setSendBufferSize(config.bufferSize);
    multicastSocket.setSoTimeout(60000);
  }
 catch (  Throwable e) {
    IOUtils.closeWhileHandlingException(multicastSocket);
    throw e;
  }
  return multicastSocket;
}
