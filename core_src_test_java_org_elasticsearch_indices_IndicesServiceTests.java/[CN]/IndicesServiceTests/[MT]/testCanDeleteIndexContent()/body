{
  IndicesService indicesService=getIndicesService();
  IndexSettings idxSettings=IndexSettingsModule.newIndexSettings("test",Settings.builder().put(IndexMetaData.SETTING_SHADOW_REPLICAS,true).put(IndexMetaData.SETTING_DATA_PATH,"/foo/bar").put(IndexMetaData.SETTING_NUMBER_OF_SHARDS,randomIntBetween(1,4)).put(IndexMetaData.SETTING_NUMBER_OF_REPLICAS,randomIntBetween(0,3)).build());
  assertFalse("shard on shared filesystem",indicesService.canDeleteIndexContents(idxSettings.getIndex(),idxSettings,false));
  assertTrue("shard on shared filesystem and closed",indicesService.canDeleteIndexContents(idxSettings.getIndex(),idxSettings,true));
}
