{
  IndicesService indicesService=getIndicesService();
  IndexMetaData meta=IndexMetaData.builder("test").settings(settings(Version.CURRENT)).numberOfShards(1).numberOfReplicas(1).build();
  assertFalse("no shard location",indicesService.canDeleteShardContent(new ShardId("test",0),meta));
  IndexService test=createIndex("test");
  assertTrue(test.hasShard(0));
  assertFalse("shard is allocated",indicesService.canDeleteShardContent(new ShardId("test",0),meta));
  test.removeShard(0,"boom");
  assertTrue("shard is removed",indicesService.canDeleteShardContent(new ShardId("test",0),meta));
}
