{
  Preconditions.checkArgument(key != null,"null keys are not supported");
  Preconditions.checkArgument(value != null,"null values are not supported");
  final int hash=key.hashCode();
  final MutableValueInt newValue=new MutableValueInt();
  final InnerNode<K,V> newRoot=root.put(key,hash,TOTAL_HASH_BITS,value,newValue);
  final int newSize=size + newValue.value;
  return new CopyOnWriteHashMap<>(newRoot,newSize);
}
