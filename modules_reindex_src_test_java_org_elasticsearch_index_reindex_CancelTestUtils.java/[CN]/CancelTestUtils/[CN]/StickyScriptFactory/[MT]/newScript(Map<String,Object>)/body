{
  return new ExecutableScript(){
    private Map<String,Object> source;
    @Override @SuppressWarnings("unchecked") public void setNextVar(    String name,    Object value){
      if ("ctx".equals(name)) {
        Map<String,Object> ctx=(Map<String,Object>)value;
        source=(Map<String,Object>)ctx.get("_source");
      }
 else {
        throw new IllegalArgumentException("Unexpected var:  " + name);
      }
    }
    @Override public Object run(){
      try {
        barrier.await(30,TimeUnit.SECONDS);
        barrier.await(30,TimeUnit.SECONDS);
        source.put("giraffes","giraffes");
        return null;
      }
 catch (      InterruptedException|BrokenBarrierException|TimeoutException e) {
        throw new RuntimeException(e);
      }
    }
  }
;
}
