{
  ArrayList<ShardRouting> ordered=new ArrayList<ShardRouting>(activeShards.size() + initializingShards.size());
  int index=pickIndex();
  for (int i=0; i < activeShards.size(); i++) {
    int loc=(index + i) % activeShards.size();
    ShardRouting shardRouting=activeShards.get(loc);
    ordered.add(shardRouting);
    if (nodeId.equals(shardRouting.currentNodeId())) {
      ordered.set(i,ordered.get(0));
      ordered.set(0,shardRouting);
    }
  }
  if (!initializingShards.isEmpty()) {
    ordered.addAll(initializingShards);
  }
  return new PlainShardIterator(shardId,ordered);
}
