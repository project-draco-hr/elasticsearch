{
  if (state == ShardRoutingState.INITIALIZING) {
    return allInitializingShards;
  }
  List<ShardRouting> shards=newArrayList();
  for (  ShardRouting shardEntry : this) {
    if (shardEntry.state() == state) {
      shards.add(shardEntry);
    }
  }
  return shards;
}
