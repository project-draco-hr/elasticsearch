{
  assumeTrue("posix filesystem",isPosix);
  Environment env=createEnv();
  Path pluginDir=createTempDir();
  Path binDir=pluginDir.resolve("bin");
  Files.createDirectory(binDir);
  Files.createFile(binDir.resolve("somescript"));
  String pluginZip=createPlugin("fake",pluginDir);
  try (PosixPermissionsResetter binAttrs=new PosixPermissionsResetter(env.binFile())){
    Set<PosixFilePermission> perms=new HashSet<>(binAttrs.permissions);
    perms.remove(PosixFilePermission.GROUP_EXECUTE);
    binAttrs.setPermissions(perms);
    installPlugin(pluginZip,env);
    assertPlugin("fake",pluginDir,env);
  }
 }
