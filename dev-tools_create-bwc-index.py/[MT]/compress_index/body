def compress_index(version, tmp_dir, output_dir):
    abs_output_dir = os.path.abspath(output_dir)
    zipfile = os.path.join(abs_output_dir, ('index-%s.zip' % version))
    if os.path.exists(zipfile):
        os.remove(zipfile)
    logging.info('Compressing index into %s', zipfile)
    olddir = os.getcwd()
    os.chdir(tmp_dir)
    subprocess.check_call(('zip -r %s *' % zipfile), shell=True)
    os.chdir(olddir)
