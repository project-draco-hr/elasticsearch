{
  Settings settings=Settings.settingsBuilder().put("xxx.tag","A").put("xxx.group","B").build();
  DiscoveryNodeFilters filters=DiscoveryNodeFilters.buildFromSettings(AND,"xxx.",settings);
  DiscoveryNode node=new DiscoveryNode("name1","id1",DummyTransportAddress.INSTANCE,ImmutableMap.<String,String>of("tag","A","group","B"),Version.CURRENT);
  assertThat(filters.match(node),equalTo(true));
  node=new DiscoveryNode("name2","id2",DummyTransportAddress.INSTANCE,ImmutableMap.<String,String>of("tag","A","group","B","name","X"),Version.CURRENT);
  assertThat(filters.match(node),equalTo(true));
  node=new DiscoveryNode("name3","id3",DummyTransportAddress.INSTANCE,ImmutableMap.<String,String>of("tag","A","group","F","name","X"),Version.CURRENT);
  assertThat(filters.match(node),equalTo(false));
  node=new DiscoveryNode("name4","id4",DummyTransportAddress.INSTANCE,ImmutableMap.<String,String>of(),Version.CURRENT);
  assertThat(filters.match(node),equalTo(false));
}
