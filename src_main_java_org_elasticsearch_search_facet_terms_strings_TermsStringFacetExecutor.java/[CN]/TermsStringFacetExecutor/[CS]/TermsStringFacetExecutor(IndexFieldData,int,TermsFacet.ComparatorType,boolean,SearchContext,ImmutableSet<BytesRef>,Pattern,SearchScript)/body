{
  this.indexFieldData=indexFieldData;
  this.size=size;
  this.comparatorType=comparatorType;
  this.script=script;
  this.allTerms=allTerms;
  if (excluded.isEmpty() && pattern == null && script == null) {
    aggregator=new HashedAggregator();
  }
 else {
    aggregator=new HashedScriptAggregator(excluded,pattern,script);
  }
  if (allTerms) {
    loadAllTerms(context,indexFieldData,aggregator);
  }
}
