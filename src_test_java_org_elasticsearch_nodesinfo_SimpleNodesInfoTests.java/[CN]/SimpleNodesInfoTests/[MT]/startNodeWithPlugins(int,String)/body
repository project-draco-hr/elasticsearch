{
  URL resource=SimpleNodesInfoTests.class.getResource("/org/elasticsearch/nodesinfo/node" + Integer.toString(nodeId) + "/");
  ImmutableSettings.Builder settings=settingsBuilder();
  if (resource != null) {
    settings.put("path.plugins",new File(resource.toURI()).getAbsolutePath());
  }
  if (pluginClassNames.length > 0) {
    settings.putArray("plugin.types",pluginClassNames);
  }
  String nodeName=cluster().startNode(settings);
  client().admin().cluster().health(clusterHealthRequest().waitForGreenStatus()).actionGet();
  String serverNodeId=cluster().getInstance(ClusterService.class,nodeName).state().nodes().localNodeId();
  logger.debug("--> server {} started" + serverNodeId);
  return serverNodeId;
}
