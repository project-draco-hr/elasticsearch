{
  long dateInMillis=1435073872l * 1000;
  List<String> dateFormats=Arrays.asList("dateOptionalTime","weekDate","tTime","ordinalDate","hourMinuteSecond","hourMinute");
  for (  String format : dateFormats) {
    XContentBuilder mapping=jsonBuilder().startObject().startObject("properties").startObject("date_field").field("type","date").field("format",format).endObject().endObject().endObject();
    index=createIndex(randomVersionBelow2x,mapping);
    XContentBuilder document=XContentFactory.jsonBuilder().startObject().field("date_field",String.valueOf(dateInMillis)).endObject();
    index(document);
    document=XContentFactory.jsonBuilder().startObject().field("date_field",dateInMillis).endObject();
    index(document);
    client().admin().indices().prepareDelete(index).get();
  }
}
