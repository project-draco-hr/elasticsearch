{
  Processor processor=mock(Processor.class);
  doThrow(new RuntimeException("error")).doNothing().when(processor).execute(ingestDocument);
  Processor processorNext=mock(Processor.class);
  CompoundProcessor compoundProcessor=new CompoundProcessor(Arrays.asList(processor),Arrays.asList(processorNext));
  assertThat(compoundProcessor.getProcessors().size(),equalTo(1));
  assertThat(compoundProcessor.getProcessors().get(0),equalTo(processor));
  assertThat(compoundProcessor.getOnFailureProcessors().size(),equalTo(1));
  assertThat(compoundProcessor.getOnFailureProcessors().get(0),equalTo(processorNext));
  compoundProcessor.execute(ingestDocument);
  verify(processor,times(1)).execute(ingestDocument);
  verify(processorNext,times(1)).execute(ingestDocument);
}
