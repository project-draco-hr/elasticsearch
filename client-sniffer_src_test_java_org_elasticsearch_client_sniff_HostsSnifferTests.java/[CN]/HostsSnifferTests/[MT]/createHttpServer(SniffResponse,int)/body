{
  HttpServer httpServer=HttpServer.create(new InetSocketAddress(0),0);
  httpServer.createContext("/_nodes/http",new HttpHandler(){
    @Override public void handle(    HttpExchange httpExchange) throws IOException {
      if (httpExchange.getRequestMethod().equals(HttpGet.METHOD_NAME)) {
        if (httpExchange.getRequestURI().getRawQuery().equals("timeout=" + sniffTimeout + "ms")) {
          String nodesInfoBody=sniffResponse.nodesInfoBody;
          httpExchange.sendResponseHeaders(sniffResponse.nodesInfoResponseCode,nodesInfoBody.length());
          try (OutputStream out=httpExchange.getResponseBody()){
            out.write(nodesInfoBody.getBytes(Consts.UTF_8));
            return;
          }
         }
      }
      httpExchange.sendResponseHeaders(404,0);
      httpExchange.close();
    }
  }
);
  return httpServer;
}
