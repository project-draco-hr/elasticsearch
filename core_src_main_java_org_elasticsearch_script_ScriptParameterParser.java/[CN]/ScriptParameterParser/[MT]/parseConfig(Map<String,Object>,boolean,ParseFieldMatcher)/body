{
  for (Iterator<Map.Entry<String,Object>> itr=config.entrySet().iterator(); itr.hasNext(); ) {
    Map.Entry<String,Object> entry=itr.next();
    String parameterName=entry.getKey();
    Object parameterValue=entry.getValue();
    if (parseFieldMatcher.match(parameterName,ScriptService.SCRIPT_LANG)) {
      if (parameterValue instanceof String || parameterValue == null) {
        lang=(String)parameterValue;
        if (removeMatchedEntries) {
          itr.remove();
        }
      }
 else {
        throw new ScriptParseException("Value must be of type String: [" + parameterName + "]");
      }
    }
 else {
      for (      ParseField parameter : inlineParameters) {
        if (parseFieldMatcher.match(parameterName,parameter)) {
          String coreParameterName=parameter.getPreferredName();
          String stringValue;
          if (parameterValue instanceof String) {
            stringValue=(String)parameterValue;
          }
 else {
            throw new ScriptParseException("Value must be of type String: [" + parameterName + "]");
          }
          putParameterValue(coreParameterName,stringValue,ScriptType.INLINE);
          if (removeMatchedEntries) {
            itr.remove();
          }
        }
      }
      for (      ParseField parameter : fileParameters) {
        if (parseFieldMatcher.match(parameterName,parameter)) {
          String coreParameterName=parameter.getPreferredName().replace(FILE_SUFFIX,"");
          ;
          String stringValue;
          if (parameterValue instanceof String) {
            stringValue=(String)parameterValue;
          }
 else {
            throw new ScriptParseException("Value must be of type String: [" + parameterName + "]");
          }
          putParameterValue(coreParameterName,stringValue,ScriptType.FILE);
          if (removeMatchedEntries) {
            itr.remove();
          }
        }
      }
      for (      ParseField parameter : indexedParameters) {
        if (parseFieldMatcher.match(parameterName,parameter)) {
          String coreParameterName=parameter.getPreferredName().replace(INDEXED_SUFFIX,"");
          String stringValue=null;
          if (parameterValue instanceof String) {
            stringValue=(String)parameterValue;
          }
 else {
            throw new ScriptParseException("Value must be of type String: [" + parameterName + "]");
          }
          putParameterValue(coreParameterName,stringValue,ScriptType.INDEXED);
          if (removeMatchedEntries) {
            itr.remove();
          }
        }
      }
    }
  }
}
