{
  ContextAndHeaderHolder contextAndHeaders=new ContextAndHeaderHolder();
  buildScriptService(Settings.EMPTY);
  CompiledScript compiledScript1=scriptService.compile(new Script("1+1",ScriptType.INLINE,"test",null),randomFrom(scriptContexts),contextAndHeaders);
  CompiledScript compiledScript2=scriptService.compile(new Script("1+1",ScriptType.INLINE,"test",null),randomFrom(scriptContexts),contextAndHeaders);
  assertThat(compiledScript1.compiled(),sameInstance(compiledScript2.compiled()));
}
