{
  ContextAndHeaderHolder contextAndHeaders=new ContextAndHeaderHolder();
  buildScriptService(Settings.EMPTY);
  CompiledScript compiledScript1=scriptService.compile(new Script("script",ScriptType.INLINE,"test",null),randomFrom(scriptContexts),contextAndHeaders,Collections.emptyMap());
  CompiledScript compiledScript2=scriptService.compile(new Script("script",ScriptType.INLINE,"test2",null),randomFrom(scriptContexts),contextAndHeaders,Collections.emptyMap());
  assertThat(compiledScript1.compiled(),sameInstance(compiledScript2.compiled()));
}
