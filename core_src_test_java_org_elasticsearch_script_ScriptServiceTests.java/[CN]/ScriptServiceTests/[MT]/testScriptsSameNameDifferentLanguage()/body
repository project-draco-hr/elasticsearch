{
  ContextAndHeaderHolder contextAndHeaders=new ContextAndHeaderHolder();
  buildScriptService(Settings.EMPTY);
  createFileScripts("groovy","test");
  CompiledScript groovyScript=scriptService.compile(new Script("file_script",ScriptType.FILE,GroovyScriptEngineService.NAME,null),randomFrom(scriptContexts),contextAndHeaders);
  assertThat(groovyScript.lang(),equalTo(GroovyScriptEngineService.NAME));
  CompiledScript expressionScript=scriptService.compile(new Script("file_script",ScriptType.FILE,"test",null),randomFrom(new ScriptContext[]{ScriptContext.Standard.AGGS,ScriptContext.Standard.SEARCH}),contextAndHeaders);
  assertThat(expressionScript.lang(),equalTo("test"));
}
