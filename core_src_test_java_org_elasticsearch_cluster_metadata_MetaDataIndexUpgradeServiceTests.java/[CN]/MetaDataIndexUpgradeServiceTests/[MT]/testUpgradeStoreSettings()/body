{
  final String type=RandomPicks.randomFrom(random(),Arrays.asList("nio_fs","mmap_fs","simple_fs","default","fs"));
  MetaDataIndexUpgradeService metaDataIndexUpgradeService=new MetaDataIndexUpgradeService(Settings.EMPTY,null);
  Settings indexSettings=Settings.builder().put(IndexMetaData.SETTING_VERSION_CREATED,Version.CURRENT).put(IndexStoreModule.STORE_TYPE,randomBoolean() ? type : type.toUpperCase(Locale.ROOT)).build();
  IndexMetaData test=IndexMetaData.builder("test").settings(indexSettings).numberOfShards(1).numberOfReplicas(1).build();
  IndexMetaData indexMetaData=metaDataIndexUpgradeService.upgradeSettings(test);
  assertEquals(type.replace("_",""),indexMetaData.getSettings().get(IndexStoreModule.STORE_TYPE));
}
