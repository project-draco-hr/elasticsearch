{
  threadPool=new ThreadPool();
  serviceA=build(ImmutableSettings.builder().put("name","TS_A").build(),version0);
  nodeA=new DiscoveryNode("TS_A","TS_A",serviceA.boundAddress().publishAddress(),ImmutableMap.<String,String>of(),version0);
  serviceB=build(ImmutableSettings.builder().put("name","TS_B").build(),version1);
  nodeB=new DiscoveryNode("TS_B","TS_B",serviceB.boundAddress().publishAddress(),ImmutableMap.<String,String>of(),version1);
  serviceA.connectToNode(nodeB);
  serviceA.connectToNode(nodeA);
  serviceB.connectToNode(nodeA);
  serviceB.connectToNode(nodeB);
}
