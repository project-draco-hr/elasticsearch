{
  String requestBody="{ \"field\": \"value\" }";
  StringEntity entity=new StringEntity(requestBody);
  ElasticsearchResponse esResponse;
  String responseBody;
  int statusCode=randomStatusCode(random());
  try (ElasticsearchResponse response=restClient.performRequest(method,"/" + statusCode,Collections.<String,String>emptyMap(),entity)){
    responseBody=EntityUtils.toString(response.getEntity());
    esResponse=response;
  }
 catch (  ElasticsearchResponseException e) {
    responseBody=e.getResponseBody();
    esResponse=e.getElasticsearchResponse();
  }
  assertEquals(statusCode,esResponse.getStatusLine().getStatusCode());
  assertEquals(requestBody,responseBody);
}
