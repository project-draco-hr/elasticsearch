{
  final Settings settings=indexSettings.getSettings();
  String fsLock=settings.get("index.store.fs.lock",settings.get("index.store.fs.fs_lock","native"));
  LockFactory lockFactory;
  if (fsLock.equals("native")) {
    lockFactory=NativeFSLockFactory.INSTANCE;
  }
 else   if (fsLock.equals("simple")) {
    lockFactory=SimpleFSLockFactory.INSTANCE;
  }
 else {
    throw new IllegalArgumentException("unrecognized fs_lock \"" + fsLock + "\": must be native or simple");
  }
  return lockFactory;
}
