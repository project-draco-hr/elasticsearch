{
  Version version=extractVersion(index);
  String indexName=loadIndex(index);
  upgradeIndexFolder();
  importIndex(indexName);
  assertIndexSanity(indexName,version);
  assertBasicSearchWorks(indexName);
  assertAllSearchWorks(indexName);
  assertBasicAggregationWorks(indexName);
  assertRealtimeGetWorks(indexName);
  assertNewReplicasWork(indexName);
  assertUpgradeWorks(indexName,isLatestLuceneVersion(version));
  assertDeleteByQueryWorked(indexName,version);
  assertPositionIncrementGapDefaults(indexName,version);
  unloadIndex(indexName);
}
