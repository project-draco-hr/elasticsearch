{
  if (getFailedShards() == 0) {
    if (getSuccessfulShards() == 0 && getTotalShards() > 0) {
      return RestStatus.SERVICE_UNAVAILABLE;
    }
    return RestStatus.OK;
  }
  if (getSuccessfulShards() == 0 && getTotalShards() > 0) {
    RestStatus status=RestStatus.OK;
    for (    ShardOperationFailedException shardFailure : getShardFailures()) {
      RestStatus shardStatus=shardFailure.status();
      if (shardStatus.getStatus() >= status.getStatus()) {
        status=shardStatus;
      }
    }
    return status;
  }
  return RestStatus.OK;
}
