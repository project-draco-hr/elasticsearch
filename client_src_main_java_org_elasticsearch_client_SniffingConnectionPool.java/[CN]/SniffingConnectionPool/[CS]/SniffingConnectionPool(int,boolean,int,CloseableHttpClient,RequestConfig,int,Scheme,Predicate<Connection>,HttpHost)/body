{
  super(connectionSelector);
  if (sniffInterval <= 0) {
    throw new IllegalArgumentException("sniffInterval must be greater than 0");
  }
  if (sniffAfterFailureDelay <= 0) {
    throw new IllegalArgumentException("sniffAfterFailureDelay must be greater than 0");
  }
  Objects.requireNonNull(scheme,"scheme cannot be null");
  if (hosts == null || hosts.length == 0) {
    throw new IllegalArgumentException("no hosts provided");
  }
  this.sniffOnFailure=sniffOnFailure;
  this.sniffer=new Sniffer(client,sniffRequestConfig,sniffRequestTimeout,scheme.toString());
  this.connections=createConnections(hosts);
  this.snifferTask=new SnifferTask(sniffInterval,sniffAfterFailureDelay);
}
