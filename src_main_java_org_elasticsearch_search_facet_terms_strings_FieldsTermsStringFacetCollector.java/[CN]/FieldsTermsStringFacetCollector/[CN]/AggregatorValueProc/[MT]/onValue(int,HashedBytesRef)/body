{
  if (excluded != null && excluded.contains(value.bytes)) {
    return;
  }
  if (matcher != null && !matcher.reset(value.bytes.utf8ToString()).matches()) {
    return;
  }
  if (script != null) {
    script.setNextDocId(docId);
    script.setNextVar("term",value.bytes.utf8ToString());
    Object scriptValue=script.run();
    if (scriptValue == null) {
      return;
    }
    if (scriptValue instanceof Boolean) {
      if (!((Boolean)scriptValue)) {
        return;
      }
    }
 else {
      value=new HashedBytesRef(scriptValue.toString());
    }
  }
  super.onValue(docId,value);
}
