{
  SearchResponse response=client.prepareSearch().setSearchType(SearchType.COUNT).setQuery(QueryBuilders.constantScoreQuery(FilterBuilders.scriptFilter("random()<matchP").addParam("matchP",matchPercentage).cache(true))).addAggregation(AggregationBuilders.histogram(name).field(field).interval(3600 * 1000)).get();
  if (response.getHits().totalHits() < COUNT * matchPercentage * 0.7) {
    System.err.println("--> warning - big deviation from expected count: " + response.getHits().totalHits() + " expected: "+ COUNT * matchPercentage);
  }
  return response;
}
