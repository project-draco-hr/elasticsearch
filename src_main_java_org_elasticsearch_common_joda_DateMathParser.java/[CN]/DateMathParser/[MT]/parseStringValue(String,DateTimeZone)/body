{
  try {
    DateTimeFormatter parser=getDateTimeFormatterParser(dateTimeFormatter,timeZone);
    return parser.parseMillis(value);
  }
 catch (  RuntimeException e) {
    try {
      long time=Long.parseLong(value);
      return timeUnit.toMillis(time);
    }
 catch (    NumberFormatException e1) {
      throw new ElasticsearchParseException("failed to parse date field [" + value + "], tried both date format ["+ dateTimeFormatter.format()+ "], and timestamp number",e);
    }
  }
}
