{
  Settings settings=Settings.builder().put(NetworkModule.TRANSPORT_SERVICE_TYPE_KEY,"custom").put(NetworkModule.HTTP_ENABLED.getKey(),false).put(NetworkModule.TRANSPORT_TYPE_KEY,"local").build();
  NetworkModule module=new NetworkModule(new NetworkService(settings),settings,false,new NamedWriteableRegistry());
  module.registerTransportService("custom",FakeTransportService.class);
  assertBinding(module,TransportService.class,FakeTransportService.class);
  assertFalse(module.isTransportClient());
  module=new NetworkModule(new NetworkService(settings),settings,true,new NamedWriteableRegistry());
  module.registerTransportService("custom",FakeTransportService.class);
  assertBinding(module,TransportService.class,FakeTransportService.class);
  assertTrue(module.isTransportClient());
}
