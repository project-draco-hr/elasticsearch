{
  NamedWriteableRegistry registry=new NamedWriteableRegistry();
  Settings settings=Settings.EMPTY;
  NetworkModule module=new NetworkModule(new NetworkService(settings),settings,false,registry);
  assertNotNull(registry.getPrototype(Task.Status.class,ReplicationTask.Status.PROTOTYPE.getWriteableName()));
  Task.Status dummy=new DummyTaskStatus();
  module.registerTaskStatus(dummy);
  assertThat(registry.getPrototype(Task.Status.class,"dummy"),sameInstance(dummy));
}
