{
  Settings settings=Settings.EMPTY;
  NetworkModule module=new NetworkModule(new NetworkService(settings),settings,false);
  module.registerRestHandler(FakeRestHandler.class);
  assertSetMultiBinding(module,RestHandler.class,FakeRestHandler.class,RestMainAction.class);
  module=new NetworkModule(new NetworkService(settings),settings,true);
  try {
    module.registerRestHandler(FakeRestHandler.class);
    fail();
  }
 catch (  IllegalArgumentException e) {
    assertTrue(e.getMessage().contains("Cannot register rest handler"));
    assertTrue(e.getMessage().contains("for transport client"));
  }
}
