{
  final ExpressionMetadata compemd=metadata.getExpressionMetadata(ctx);
  final Object postConst=compemd.postConst;
  final Object preConst=compemd.preConst;
  final Branch branch=utility.getBranch(ctx);
  if (postConst != null) {
    if (branch == null) {
      utility.writeConstant(ctx,postConst);
    }
 else {
      if ((boolean)postConst && branch.tru != null) {
        execute.mark(branch.tru);
      }
 else       if (!(boolean)postConst && branch.fals != null) {
        execute.mark(branch.fals);
      }
    }
  }
 else   if (preConst != null) {
    if (branch == null) {
      utility.writeConstant(ctx,preConst);
      caster.checkWriteCast(compemd);
    }
 else {
      throw new IllegalStateException(WriterUtility.error(ctx) + "Unexpected state.");
    }
  }
 else {
    final ExpressionContext exprctx0=ctx.expression(0);
    final ExpressionMetadata expremd0=metadata.getExpressionMetadata(exprctx0);
    final ExpressionContext exprctx1=ctx.expression(1);
    final ExpressionMetadata expremd1=metadata.getExpressionMetadata(exprctx1);
    final org.objectweb.asm.Type type=expremd1.to.type;
    final Sort sort1=expremd1.to.sort;
    writer.visit(exprctx0);
    if (!expremd1.isNull) {
      writer.visit(exprctx1);
    }
    final boolean tru=branch != null && branch.tru != null;
    final boolean fals=branch != null && branch.fals != null;
    final Label jump=tru ? branch.tru : fals ? branch.fals : new Label();
    final Label end=new Label();
    final boolean eq=(ctx.EQ() != null || ctx.EQR() != null) && (tru || !fals) || (ctx.NE() != null || ctx.NER() != null) && fals;
    final boolean ne=(ctx.NE() != null || ctx.NER() != null) && (tru || !fals) || (ctx.EQ() != null || ctx.EQR() != null) && fals;
    final boolean lt=ctx.LT() != null && (tru || !fals) || ctx.GTE() != null && fals;
    final boolean lte=ctx.LTE() != null && (tru || !fals) || ctx.GT() != null && fals;
    final boolean gt=ctx.GT() != null && (tru || !fals) || ctx.LTE() != null && fals;
    final boolean gte=ctx.GTE() != null && (tru || !fals) || ctx.LT() != null && fals;
    boolean writejump=true;
switch (sort1) {
case VOID:
case BYTE:
case SHORT:
case CHAR:
      throw new IllegalStateException(WriterUtility.error(ctx) + "Unexpected state.");
case BOOL:
    if (eq)     execute.ifZCmp(GeneratorAdapter.EQ,jump);
 else     if (ne)     execute.ifZCmp(GeneratorAdapter.NE,jump);
 else {
      throw new IllegalStateException(WriterUtility.error(ctx) + "Unexpected state.");
    }
  break;
case INT:
case LONG:
case FLOAT:
case DOUBLE:
if (eq) execute.ifCmp(type,GeneratorAdapter.EQ,jump);
 else if (ne) execute.ifCmp(type,GeneratorAdapter.NE,jump);
 else if (lt) execute.ifCmp(type,GeneratorAdapter.LT,jump);
 else if (lte) execute.ifCmp(type,GeneratorAdapter.LE,jump);
 else if (gt) execute.ifCmp(type,GeneratorAdapter.GT,jump);
 else if (gte) execute.ifCmp(type,GeneratorAdapter.GE,jump);
 else {
  throw new IllegalStateException(WriterUtility.error(ctx) + "Unexpected state.");
}
break;
case DEF:
if (eq) {
if (expremd1.isNull) {
execute.ifNull(jump);
}
 else if (!expremd0.isNull && ctx.EQ() != null) {
execute.invokeStatic(definition.defobjType.type,DEF_EQ_CALL);
}
 else {
execute.ifCmp(type,GeneratorAdapter.EQ,jump);
}
}
 else if (ne) {
if (expremd1.isNull) {
execute.ifNonNull(jump);
}
 else if (!expremd0.isNull && ctx.NE() != null) {
execute.invokeStatic(definition.defobjType.type,DEF_EQ_CALL);
execute.ifZCmp(GeneratorAdapter.EQ,jump);
}
 else {
execute.ifCmp(type,GeneratorAdapter.NE,jump);
}
}
 else if (lt) {
execute.invokeStatic(definition.defobjType.type,DEF_LT_CALL);
}
 else if (lte) {
execute.invokeStatic(definition.defobjType.type,DEF_LTE_CALL);
}
 else if (gt) {
execute.invokeStatic(definition.defobjType.type,DEF_GT_CALL);
}
 else if (gte) {
execute.invokeStatic(definition.defobjType.type,DEF_GTE_CALL);
}
 else {
throw new IllegalStateException(WriterUtility.error(ctx) + "Unexpected state.");
}
writejump=expremd1.isNull || ne || ctx.EQR() != null;
if (branch != null && !writejump) {
execute.ifZCmp(GeneratorAdapter.NE,jump);
}
break;
default :
if (eq) {
if (expremd1.isNull) {
execute.ifNull(jump);
}
 else if (ctx.EQ() != null) {
execute.invokeStatic(definition.utilityType.type,CHECKEQUALS);
if (branch != null) {
execute.ifZCmp(GeneratorAdapter.NE,jump);
}
writejump=false;
}
 else {
execute.ifCmp(type,GeneratorAdapter.EQ,jump);
}
}
 else if (ne) {
if (expremd1.isNull) {
execute.ifNonNull(jump);
}
 else if (ctx.NE() != null) {
execute.invokeStatic(definition.utilityType.type,CHECKEQUALS);
execute.ifZCmp(GeneratorAdapter.EQ,jump);
}
 else {
execute.ifCmp(type,GeneratorAdapter.NE,jump);
}
}
 else {
throw new IllegalStateException(WriterUtility.error(ctx) + "Unexpected state.");
}
}
if (branch == null) {
if (writejump) {
execute.push(false);
execute.goTo(end);
execute.mark(jump);
execute.push(true);
execute.mark(end);
}
caster.checkWriteCast(compemd);
}
}
}
