{
  name=in.readString();
  metaData=in.readMap();
  int size=in.readVInt();
  if (size == 0) {
    pipelineAggregators=Collections.emptyList();
  }
 else {
    pipelineAggregators=new ArrayList<>(size);
    for (int i=0; i < size; i++) {
      if (in.readBoolean()) {
        pipelineAggregators.add(in.readNamedWriteable(PipelineAggregator.class));
      }
 else {
        BytesReference type=in.readBytesReference();
        PipelineAggregator pipelineAggregator=PipelineAggregatorStreams.stream(type).readResult(in);
        pipelineAggregators.add(pipelineAggregator);
      }
    }
  }
}
