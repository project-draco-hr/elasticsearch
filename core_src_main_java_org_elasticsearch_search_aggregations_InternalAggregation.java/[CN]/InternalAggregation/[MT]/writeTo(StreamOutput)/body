{
  out.writeString(name);
  out.writeGenericValue(metaData);
  out.writeVInt(pipelineAggregators.size());
  for (  PipelineAggregator pipelineAggregator : pipelineAggregators) {
    try {
      pipelineAggregator.getWriteableName();
      out.writeBoolean(true);
      out.writeNamedWriteable(pipelineAggregator);
    }
 catch (    UnsupportedOperationException e) {
      out.writeBoolean(false);
      out.writeBytesReference(pipelineAggregator.type().stream());
      pipelineAggregator.writeTo(out);
    }
  }
  doWriteTo(out);
}
