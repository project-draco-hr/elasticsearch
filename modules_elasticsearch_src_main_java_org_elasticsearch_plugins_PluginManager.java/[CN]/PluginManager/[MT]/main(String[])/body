{
  Tuple<Settings,Environment> initialSettings=InternalSettingsPerparer.prepareSettings(EMPTY_SETTINGS,true);
  if (!initialSettings.v2().pluginsFile().exists()) {
    initialSettings.v2().pluginsFile().mkdirs();
  }
  PluginManager pluginManager=new PluginManager(initialSettings.v2(),"http://elasticsearch.googlecode.com/svn/plugins");
  if (args.length < 1) {
    System.out.println("Usage:");
    System.out.println("    - install [list of plugin names]: Downloads and installs listed plugins");
    System.out.println("    - remove [list of plugin names]: Removes listed plugins");
  }
  String command=args[0];
  if (command.equals("install") || command.equals("-install")) {
    if (args.length < 2) {
      System.out.println("'install' requires an additional parameter with the plugin name");
    }
    for (int i=1; i < args.length; i++) {
      String pluginName=args[i];
      System.out.print("-> Installing " + pluginName + " ");
      try {
        pluginManager.downloadPlugin(pluginName);
        System.out.println(" DONE");
      }
 catch (      IOException e) {
        System.out.println("Failed to install " + pluginName + ", reason: "+ e.getMessage());
      }
    }
  }
 else   if (command.equals("remove") || command.equals("-remove")) {
    if (args.length < 2) {
      System.out.println("'remove' requires an additional parameter with the plugin name");
    }
    for (int i=1; i < args.length; i++) {
      String pluginName=args[i];
      System.out.println("-> Removing " + pluginName + " ");
      try {
        pluginManager.removePlugin(pluginName);
      }
 catch (      IOException e) {
        System.out.println("Failed to remove " + pluginName + ", reason: "+ e.getMessage());
      }
    }
  }
 else {
    System.out.println("No command matching '" + command + "' found");
  }
}
