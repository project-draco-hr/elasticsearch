{
synchronized (pendingJoinRequests) {
    Iterator<Map.Entry<DiscoveryNode,List<MembershipAction.JoinCallback>>> iterator=pendingJoinRequests.entrySet().iterator();
    while (iterator.hasNext()) {
      Map.Entry<DiscoveryNode,List<MembershipAction.JoinCallback>> entry=iterator.next();
      joinCallbacksToRespondTo.addAll(entry.getValue());
      iterator.remove();
    }
  }
  Exception e=new NotMasterException("Node [" + clusterService.localNode() + "] not master for join request");
  innerOnFailure(e);
}
