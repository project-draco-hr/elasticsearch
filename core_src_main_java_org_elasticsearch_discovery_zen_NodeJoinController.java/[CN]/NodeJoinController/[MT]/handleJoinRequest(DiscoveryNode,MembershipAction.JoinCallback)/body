{
synchronized (pendingJoinRequests) {
    List<MembershipAction.JoinCallback> nodeCallbacks=pendingJoinRequests.get(node);
    if (nodeCallbacks == null) {
      nodeCallbacks=new ArrayList<>();
      pendingJoinRequests.put(node,nodeCallbacks);
    }
    nodeCallbacks.add(callback);
  }
  if (accumulateJoins.get() == false) {
    processJoins("join from node[" + node + "]");
  }
 else {
    checkPendingJoinsAndElectIfNeeded();
  }
}
