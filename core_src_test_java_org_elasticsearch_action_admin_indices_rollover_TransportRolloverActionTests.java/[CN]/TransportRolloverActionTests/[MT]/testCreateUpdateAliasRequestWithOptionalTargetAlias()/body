{
  String sourceAlias=randomAsciiOfLength(10);
  String optionalTargetAlias=randomAsciiOfLength(10);
  String sourceIndex=randomAsciiOfLength(10);
  String targetIndex=randomAsciiOfLength(10);
  final RolloverRequest rolloverRequest=new RolloverRequest(sourceAlias,optionalTargetAlias);
  final IndicesAliasesClusterStateUpdateRequest updateRequest=TransportRolloverAction.prepareIndicesAliasesRequest(sourceIndex,targetIndex,rolloverRequest);
  final AliasAction[] actions=updateRequest.actions();
  assertThat(actions.length,equalTo(3));
  boolean foundAdd=false;
  boolean foundRemove=false;
  for (  AliasAction action : actions) {
    if (action.actionType() == AliasAction.Type.ADD) {
      foundAdd=true;
      assertThat(action.index(),equalTo(targetIndex));
      assertThat(action.alias(),anyOf(equalTo(sourceAlias),equalTo(optionalTargetAlias)));
    }
 else     if (action.actionType() == AliasAction.Type.REMOVE) {
      foundRemove=true;
      assertThat(action.index(),equalTo(sourceIndex));
      assertThat(action.alias(),equalTo(sourceAlias));
    }
  }
  assertTrue(foundAdd);
  assertTrue(foundRemove);
}
