{
  super(facetName);
  this.fieldsNames=fieldsNames;
  this.fieldDataCache=context.fieldDataCache();
  fieldsDataType=new FieldDataType[fieldsNames.length];
  fieldsData=new NumericFieldData[fieldsNames.length];
  indexFieldsNames=new String[fieldsNames.length];
  for (int i=0; i < fieldsNames.length; i++) {
    FieldMapper mapper=context.mapperService().smartNameFieldMapper(fieldsNames[i]);
    if (mapper == null) {
      throw new FacetPhaseExecutionException(facetName,"No mapping found for field [" + fieldsNames[i] + "]");
    }
    indexFieldsNames[i]=mapper.names().indexName();
    fieldsDataType[i]=mapper.fieldDataType();
  }
}
