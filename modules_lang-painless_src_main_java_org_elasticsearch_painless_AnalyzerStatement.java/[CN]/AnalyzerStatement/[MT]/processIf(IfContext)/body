{
  final StatementMetadata ifsmd=metadata.getStatementMetadata(ctx);
  final ExpressionContext exprctx=AnalyzerUtility.updateExpressionTree(ctx.expression());
  final ExpressionMetadata expremd=metadata.createExpressionMetadata(exprctx);
  expremd.to=definition.booleanType;
  analyzer.visit(exprctx);
  caster.markCast(expremd);
  if (expremd.postConst != null) {
    throw new IllegalArgumentException(AnalyzerUtility.error(ctx) + "If statement is not necessary.");
  }
  final BlockContext blockctx0=ctx.block(0);
  final StatementMetadata blocksmd0=metadata.createStatementMetadata(blockctx0);
  blocksmd0.lastSource=ifsmd.lastSource;
  blocksmd0.inLoop=ifsmd.inLoop;
  blocksmd0.lastLoop=ifsmd.lastLoop;
  utility.incrementScope();
  analyzer.visit(blockctx0);
  utility.decrementScope();
  ifsmd.anyContinue=blocksmd0.anyContinue;
  ifsmd.anyBreak=blocksmd0.anyBreak;
  ifsmd.count=blocksmd0.count;
  if (ctx.ELSE() != null) {
    final BlockContext blockctx1=ctx.block(1);
    final StatementMetadata blocksmd1=metadata.createStatementMetadata(blockctx1);
    blocksmd1.lastSource=ifsmd.lastSource;
    utility.incrementScope();
    analyzer.visit(blockctx1);
    utility.decrementScope();
    ifsmd.methodEscape=blocksmd0.methodEscape && blocksmd1.methodEscape;
    ifsmd.loopEscape=blocksmd0.loopEscape && blocksmd1.loopEscape;
    ifsmd.allLast=blocksmd0.allLast && blocksmd1.allLast;
    ifsmd.anyContinue|=blocksmd1.anyContinue;
    ifsmd.anyBreak|=blocksmd1.anyBreak;
    ifsmd.count=Math.max(ifsmd.count,blocksmd1.count);
  }
}
