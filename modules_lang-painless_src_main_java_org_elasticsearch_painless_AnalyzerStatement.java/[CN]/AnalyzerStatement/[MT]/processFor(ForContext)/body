{
  final StatementMetadata forsmd=metadata.getStatementMetadata(ctx);
  boolean continuous=false;
  utility.incrementScope();
  final InitializerContext initctx=ctx.initializer();
  if (initctx != null) {
    metadata.createStatementMetadata(initctx);
    analyzer.visit(initctx);
  }
  final ExpressionContext exprctx=AnalyzerUtility.updateExpressionTree(ctx.expression());
  if (exprctx != null) {
    final ExpressionMetadata expremd=metadata.createExpressionMetadata(exprctx);
    expremd.to=definition.booleanType;
    analyzer.visit(exprctx);
    caster.markCast(expremd);
    if (expremd.postConst != null) {
      continuous=(boolean)expremd.postConst;
      if (!continuous) {
        throw new IllegalArgumentException(AnalyzerUtility.error(ctx) + "The loop will never be executed.");
      }
      if (ctx.empty() != null) {
        throw new IllegalArgumentException(AnalyzerUtility.error(ctx) + "The loop is continuous.");
      }
    }
  }
 else {
    continuous=true;
  }
  final AfterthoughtContext atctx=ctx.afterthought();
  if (atctx != null) {
    metadata.createStatementMetadata(atctx);
    analyzer.visit(atctx);
  }
  final BlockContext blockctx=ctx.block();
  if (blockctx != null) {
    final StatementMetadata blocksmd=metadata.createStatementMetadata(blockctx);
    blocksmd.beginLoop=true;
    blocksmd.inLoop=true;
    analyzer.visit(blockctx);
    if (blocksmd.loopEscape && !blocksmd.anyContinue) {
      throw new IllegalArgumentException(AnalyzerUtility.error(ctx) + "All paths escape so the loop is not necessary.");
    }
    if (continuous && !blocksmd.anyBreak) {
      forsmd.methodEscape=true;
      forsmd.allLast=true;
    }
  }
  forsmd.count=1;
  utility.decrementScope();
}
