{
  String fieldName=in.readString();
  ArrayList<GeoPoint> points=(ArrayList<GeoPoint>)in.readGenericValue();
  GeoDistanceSortBuilder result=new GeoDistanceSortBuilder(fieldName,points.toArray(new GeoPoint[points.size()]));
  result.geoDistance(GeoDistance.readGeoDistanceFrom(in));
  result.unit(DistanceUnit.readDistanceUnit(in));
  result.order(SortOrder.readOrderFrom(in));
  if (in.readBoolean()) {
    result.sortMode=SortMode.PROTOTYPE.readFrom(in);
  }
  if (in.readBoolean()) {
    result.setNestedFilter(in.readQuery());
  }
  result.setNestedPath(in.readOptionalString());
  result.coerce(in.readBoolean());
  result.ignoreMalformed(in.readBoolean());
  return result;
}
