{
  expression.analyze(variables);
  expression.expected=expression.actual;
  expression=expression.cast(variables);
  if (expression.actual.sort == Sort.ARRAY) {
    analyzeArray(variables);
  }
 else   if (expression.actual.sort == Sort.DEF || Iterable.class.isAssignableFrom(expression.actual.clazz)) {
    analyzeIterable(variables);
  }
 else {
    throw location.createError(new IllegalArgumentException("Illegal for each type [" + expression.actual.name + "]."));
  }
}
