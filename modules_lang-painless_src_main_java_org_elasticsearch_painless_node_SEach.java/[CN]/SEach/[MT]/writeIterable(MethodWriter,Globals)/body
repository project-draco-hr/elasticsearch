{
  expression.write(writer,globals);
  if (method == null) {
    Type itr=Definition.getType("Iterator");
    String desc=org.objectweb.asm.Type.getMethodDescriptor(itr.type,Definition.DEF_TYPE.type);
    writer.invokeDynamic("iterator",desc,DEF_BOOTSTRAP_HANDLE,DefBootstrap.ITERATOR);
  }
 else   if (java.lang.reflect.Modifier.isInterface(method.owner.clazz.getModifiers())) {
    writer.invokeInterface(method.owner.type,method.method);
  }
 else {
    writer.invokeVirtual(method.owner.type,method.method);
  }
  writer.visitVarInsn(iterator.type.type.getOpcode(Opcodes.ISTORE),iterator.getSlot());
  Label begin=new Label();
  Label end=new Label();
  writer.mark(begin);
  writer.visitVarInsn(iterator.type.type.getOpcode(Opcodes.ILOAD),iterator.getSlot());
  writer.invokeInterface(ITERATOR_TYPE,ITERATOR_HASNEXT);
  writer.ifZCmp(MethodWriter.EQ,end);
  writer.visitVarInsn(iterator.type.type.getOpcode(Opcodes.ILOAD),iterator.getSlot());
  writer.invokeInterface(ITERATOR_TYPE,ITERATOR_NEXT);
  writer.writeCast(cast);
  writer.visitVarInsn(variable.type.type.getOpcode(Opcodes.ISTORE),variable.getSlot());
  block.write(writer,globals);
  writer.goTo(begin);
  writer.mark(end);
}
