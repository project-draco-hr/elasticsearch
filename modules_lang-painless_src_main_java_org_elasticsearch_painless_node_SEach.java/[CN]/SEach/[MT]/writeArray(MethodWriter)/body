{
  expression.write(writer);
  writer.visitVarInsn(array.type.type.getOpcode(Opcodes.ISTORE),array.slot);
  writer.push(-1);
  writer.visitVarInsn(index.type.type.getOpcode(Opcodes.ISTORE),index.slot);
  Label begin=new Label();
  Label end=new Label();
  writer.mark(begin);
  writer.visitIincInsn(index.slot,1);
  writer.visitVarInsn(index.type.type.getOpcode(Opcodes.ILOAD),index.slot);
  writer.visitVarInsn(array.type.type.getOpcode(Opcodes.ILOAD),array.slot);
  writer.arrayLength();
  writer.ifICmp(MethodWriter.GE,end);
  writer.visitVarInsn(array.type.type.getOpcode(Opcodes.ILOAD),array.slot);
  writer.visitVarInsn(index.type.type.getOpcode(Opcodes.ILOAD),index.slot);
  writer.arrayLoad(indexed.type);
  writer.writeCast(cast);
  writer.visitVarInsn(variable.type.type.getOpcode(Opcodes.ISTORE),variable.slot);
  block.write(writer);
  writer.goTo(begin);
  writer.mark(end);
}
