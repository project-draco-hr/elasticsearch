{
  final StatementMetadata trapsmd=metadata.getStatementMetadata(ctx);
  final Branch branch=getBranch(ctx);
  final Label jump=new Label();
  final BlockContext blockctx=ctx.block();
  final EmptyscopeContext emptyctx=ctx.emptyscope();
  execute.mark(jump);
  writeLoadStoreVariable(ctx,true,trapsmd.exception,trapsmd.slot);
  if (blockctx != null) {
    visit(ctx.block());
  }
 else   if (emptyctx == null) {
    throw new IllegalStateException(error(ctx) + "Unexpected writer state.");
  }
  execute.visitTryCatchBlock(branch.begin,branch.end,jump,trapsmd.exception.type.getInternalName());
  if (branch.tru != null && !trapsmd.allLast) {
    execute.goTo(branch.tru);
  }
  return null;
}
