{
  final ExpressionContext exprctx=ctx.expression();
  final Branch branch=markBranch(ctx,exprctx);
  branch.begin=new Label();
  branch.end=new Label();
  branch.fals=branch.end;
  jumps.push(branch);
  execute.mark(branch.begin);
  visit(exprctx);
  final BlockContext blockctx=ctx.block();
  boolean allLast=false;
  if (blockctx != null) {
    final StatementMetadata blocksmd=metadata.getStatementMetadata(blockctx);
    allLast=blocksmd.allLast;
    writeLoopCounter(blocksmd.count > 0 ? blocksmd.count : 1);
    visit(blockctx);
  }
 else   if (ctx.empty() != null) {
    writeLoopCounter(1);
  }
 else {
    throw new IllegalStateException(error(ctx) + "Unexpected writer state.");
  }
  if (!allLast) {
    execute.goTo(branch.begin);
  }
  execute.mark(branch.end);
  jumps.pop();
  return null;
}
