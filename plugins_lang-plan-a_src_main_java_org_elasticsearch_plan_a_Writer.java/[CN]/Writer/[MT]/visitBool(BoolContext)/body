{
  final ExpressionMetadata boolemd=adapter.getExpressionMetadata(ctx);
  final Object postConst=boolemd.postConst;
  final Object preConst=boolemd.preConst;
  final Branch branch=getBranch(ctx);
  if (postConst != null) {
    if (branch == null) {
      writeConstant(ctx,postConst);
    }
 else {
      if ((boolean)postConst && branch.tru != null) {
        execute.mark(branch.tru);
      }
 else       if (!(boolean)postConst && branch.fals != null) {
        execute.mark(branch.fals);
      }
    }
  }
 else   if (preConst != null) {
    if (branch == null) {
      writeConstant(ctx,preConst);
      checkWriteCast(boolemd);
    }
 else {
      throw new IllegalStateException(error(ctx) + "Unexpected writer state.");
    }
  }
 else {
    final ExpressionContext exprctx0=ctx.expression(0);
    final ExpressionContext exprctx1=ctx.expression(1);
    if (branch == null) {
      if (ctx.BOOLAND() != null) {
        final Branch local=markBranch(ctx,exprctx0,exprctx1);
        local.fals=new Label();
        final Label end=new Label();
        visit(exprctx0);
        visit(exprctx1);
        execute.push(true);
        execute.goTo(end);
        execute.mark(local.fals);
        execute.push(false);
        execute.mark(end);
      }
 else       if (ctx.BOOLOR() != null) {
        final Branch branch0=markBranch(ctx,exprctx0);
        branch0.tru=new Label();
        final Branch branch1=markBranch(ctx,exprctx1);
        branch1.fals=new Label();
        final Label aend=new Label();
        visit(exprctx0);
        visit(exprctx1);
        execute.mark(branch0.tru);
        execute.push(true);
        execute.goTo(aend);
        execute.mark(branch1.fals);
        execute.push(false);
        execute.mark(aend);
      }
 else {
        throw new IllegalStateException(error(ctx) + "Unexpected writer state.");
      }
      checkWriteCast(boolemd);
    }
 else {
      if (ctx.BOOLAND() != null) {
        final Branch branch0=markBranch(ctx,exprctx0);
        branch0.fals=branch.fals == null ? new Label() : branch.fals;
        final Branch branch1=markBranch(ctx,exprctx1);
        branch1.tru=branch.tru;
        branch1.fals=branch.fals;
        visit(exprctx0);
        visit(exprctx1);
        if (branch.fals == null) {
          execute.mark(branch0.fals);
        }
      }
 else       if (ctx.BOOLOR() != null) {
        final Branch branch0=markBranch(ctx,exprctx0);
        branch0.tru=branch.tru == null ? new Label() : branch.tru;
        final Branch branch1=markBranch(ctx,exprctx1);
        branch1.tru=branch.tru;
        branch1.fals=branch.fals;
        visit(exprctx0);
        visit(exprctx1);
        if (branch.tru == null) {
          execute.mark(branch0.tru);
        }
      }
 else {
        throw new IllegalStateException(error(ctx) + "Unexpected writer state.");
      }
    }
  }
  return null;
}
