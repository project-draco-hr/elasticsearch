{
  if (request.template() != null) {
    return false;
  }
  if (context.size() != 0) {
    return false;
  }
  if (!CACHEABLE_SEARCH_TYPES.contains(context.searchType())) {
    return false;
  }
  IndexMetaData index=clusterService.state().getMetaData().index(request.index());
  if (index == null) {
    return false;
  }
  if (request.requestCache() == null) {
    if (!isCacheEnabled(index.getSettings(),Boolean.FALSE)) {
      return false;
    }
  }
 else   if (!request.requestCache()) {
    return false;
  }
  if (!(context.searcher().getIndexReader() instanceof DirectoryReader)) {
    return false;
  }
  if (context.nowInMillisUsed()) {
    return false;
  }
  return true;
}
