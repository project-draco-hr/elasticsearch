{
  String index="foo";
  String type="mytype";
  XContentBuilder builder=jsonBuilder().startObject().startObject("_timestamp").field("enabled",true).endObject().endObject();
  assertAcked(client().admin().indices().prepareCreate(index).addMapping(type,builder));
  assertTimestampMappingEnabled(index,type,true);
  XContentBuilder updateMappingBuilder=jsonBuilder().startObject().startObject("properties").startObject("otherField").field("type","text").endObject().endObject().endObject();
  PutMappingResponse putMappingResponse=client().admin().indices().preparePutMapping(index).setType(type).setSource(updateMappingBuilder).get();
  assertAcked(putMappingResponse);
  assertTimestampMappingEnabled(index,type,true);
}
