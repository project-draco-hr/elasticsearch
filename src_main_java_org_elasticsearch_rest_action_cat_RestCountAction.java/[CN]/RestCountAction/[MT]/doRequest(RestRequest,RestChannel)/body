{
  String[] indices=Strings.splitStringByCommaToArray(request.param("index"));
  CountRequest countRequest=new CountRequest(indices);
  countRequest.operationThreading(BroadcastOperationThreading.SINGLE_THREAD);
  String source=request.param("source");
  if (source != null) {
    countRequest.source(source);
  }
 else {
    QuerySourceBuilder querySourceBuilder=RestActions.parseQuerySource(request);
    if (querySourceBuilder != null) {
      countRequest.source(querySourceBuilder);
    }
  }
  client.count(countRequest,new RestResponseListener<CountResponse>(channel){
    @Override public RestResponse buildResponse(    CountResponse countResponse) throws Exception {
      return RestTable.buildResponse(buildTable(request,countResponse),channel);
    }
  }
);
}
