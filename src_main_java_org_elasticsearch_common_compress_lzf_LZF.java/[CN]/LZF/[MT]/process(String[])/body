{
  if (args.length == 2) {
    String oper=args[0];
    boolean compress="-c".equals(oper);
    if (compress || "-d".equals(oper)) {
      String filename=args[1];
      File src=new File(filename);
      if (!src.exists()) {
        System.err.println("File '" + filename + "' does not exist.");
        System.exit(1);
      }
      if (!compress && !filename.endsWith(SUFFIX)) {
        System.err.println("File '" + filename + "' does end with expected suffix ('"+ SUFFIX+ "', won't decompress.");
        System.exit(1);
      }
      byte[] data=readData(src);
      System.out.println("Read " + data.length + " bytes.");
      byte[] result=compress ? LZFEncoder.encode(data) : LZFDecoder.decode(data);
      System.out.println("Processed into " + result.length + " bytes.");
      File resultFile=compress ? new File(filename + SUFFIX) : new File(filename.substring(0,filename.length() - SUFFIX.length()));
      FileOutputStream out=new FileOutputStream(resultFile);
      out.write(result);
      out.close();
      System.out.println("Wrote in file '" + resultFile.getAbsolutePath() + "'.");
      return;
    }
  }
  System.err.println("Usage: java " + getClass().getName() + " -c/-d file");
  System.exit(1);
}
