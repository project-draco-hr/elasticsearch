{
  ScriptSortType type=randomBoolean() ? ScriptSortType.NUMBER : ScriptSortType.STRING;
  ScriptSortBuilder builder=new ScriptSortBuilder(new Script(randomAsciiOfLengthBetween(5,10)),type);
  if (randomBoolean()) {
    builder.order(RandomSortDataGenerator.order(builder.order()));
  }
  if (randomBoolean()) {
    if (type == ScriptSortType.NUMBER) {
      builder.sortMode(RandomSortDataGenerator.mode(builder.sortMode()));
    }
 else {
      Set<SortMode> exceptThis=new HashSet<>();
      exceptThis.add(SortMode.SUM);
      exceptThis.add(SortMode.AVG);
      builder.sortMode(RandomSortDataGenerator.mode(exceptThis));
    }
  }
  if (randomBoolean()) {
    builder.setNestedFilter(RandomSortDataGenerator.nestedFilter(builder.getNestedFilter()));
  }
  if (randomBoolean()) {
    builder.setNestedPath(RandomSortDataGenerator.randomAscii(builder.getNestedPath()));
  }
  return builder;
}
