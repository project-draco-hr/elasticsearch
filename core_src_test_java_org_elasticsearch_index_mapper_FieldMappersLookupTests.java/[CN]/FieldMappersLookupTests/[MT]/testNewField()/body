{
  FieldMappersLookup lookup=new FieldMappersLookup();
  FakeFieldMapper f=new FakeFieldMapper("foo","bar");
  FieldMappersLookup lookup2=lookup.copyAndAddAll(newList(f));
  assertNull(lookup.fullName("foo"));
  assertNull(lookup.indexName("bar"));
  FieldMappers mappers=lookup2.fullName("foo");
  assertNotNull(mappers);
  assertEquals(1,mappers.mappers().size());
  assertEquals(f,mappers.mapper());
  mappers=lookup2.indexName("bar");
  assertNotNull(mappers);
  assertEquals(1,mappers.mappers().size());
  assertEquals(f,mappers.mapper());
  assertEquals(1,Iterators.size(lookup2.iterator()));
}
