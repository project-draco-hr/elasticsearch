{
  if (currentBufferIndex >= file.numBuffers()) {
    if (enforceEOF) {
      throw new IOException("Read past EOF");
    }
  }
 else {
    ByteBuffer buffer=file.getBuffer(currentBufferIndex);
    currentBuffer=buffer.asReadOnlyBuffer();
    currentBuffer.position(0);
    bufferStart=(long)BUFFER_SIZE * (long)currentBufferIndex;
    long buflen=length - bufferStart;
    if (buflen < BUFFER_SIZE) {
      currentBuffer.limit((int)buflen);
      if (enforceEOF && buflen == 0) {
        throw new IOException("Read past EOF");
      }
    }
  }
}
