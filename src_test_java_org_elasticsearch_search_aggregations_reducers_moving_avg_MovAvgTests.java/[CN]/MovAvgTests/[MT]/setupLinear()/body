{
  EvictingQueue<Double> window=EvictingQueue.create(windowSize);
  linearMovAvgCounts=new Double[numValueBuckets];
  window.clear();
  for (int i=0; i < numValueBuckets; i++) {
    double thisValue=docCounts[i];
    if (thisValue == -1) {
      thisValue=0;
    }
    window.offer(thisValue);
    double avg=0;
    long totalWeight=1;
    long current=1;
    for (    double value : window) {
      avg+=value * current;
      totalWeight+=current;
      current+=1;
    }
    linearMovAvgCounts[i]=avg / totalWeight;
  }
  window.clear();
  linearMovAvgValueCounts=new Double[numValueBuckets];
  for (int i=0; i < numValueBuckets; i++) {
    double thisValue=docCounts[i];
    window.offer(thisValue);
    double avg=0;
    long totalWeight=1;
    long current=1;
    for (    double value : window) {
      avg+=value * current;
      totalWeight+=current;
      current+=1;
    }
    linearMovAvgValueCounts[i]=avg / totalWeight;
  }
}
