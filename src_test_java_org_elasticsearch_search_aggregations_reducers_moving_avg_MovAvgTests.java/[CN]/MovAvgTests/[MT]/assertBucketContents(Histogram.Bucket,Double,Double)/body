{
  SimpleValue countMovAvg=actual.getAggregations().get("movavg_counts");
  if (expectedCount == null) {
    assertThat("[_count] movavg is not null",countMovAvg,nullValue());
  }
 else {
    assertThat("[_count] movavg is null",countMovAvg,notNullValue());
    assertThat("[_count] movavg does not match expected [" + countMovAvg.value() + " vs "+ expectedCount+ "]",Math.abs(countMovAvg.value() - expectedCount) <= 0.000001,equalTo(true));
  }
  SimpleValue valuesMovAvg=actual.getAggregations().get("movavg_values");
  if (expectedValue == null) {
    assertThat("[value] movavg is not null",valuesMovAvg,Matchers.nullValue());
  }
 else {
    assertThat("[value] movavg is null",valuesMovAvg,notNullValue());
    assertThat("[value] movavg does not match expected [" + valuesMovAvg.value() + " vs "+ expectedValue+ "]",Math.abs(valuesMovAvg.value() - expectedValue) <= 0.000001,equalTo(true));
  }
}
