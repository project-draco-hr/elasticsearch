{
  try {
    client().prepareSearch("idx").addAggregation(histogram("histo").field(SINGLE_VALUED_FIELD_NAME).interval(interval).minDocCount(0).extendedBounds(0L,(long)(interval * (numValueBuckets - 1))).subAggregation(randomMetric("the_metric",SINGLE_VALUED_VALUE_FIELD_NAME)).subAggregation(movingAvg("movavg_counts").window(windowSize).modelBuilder(randomModelBuilder()).gapPolicy(gapPolicy).predict(0).setBucketsPaths("the_metric"))).execute().actionGet();
    fail("MovingAvg should not accept a prediction size that is zero");
  }
 catch (  SearchPhaseExecutionException exception) {
  }
}
