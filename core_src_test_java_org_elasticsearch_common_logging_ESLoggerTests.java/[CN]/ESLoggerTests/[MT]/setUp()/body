{
  super.setUp();
  this.testLevel=ESLoggerFactory.getLogger("test").getLevel();
  LogConfigurator.reset();
  Path configDir=getDataPath("config");
  Settings settings=Settings.builder().put(Environment.PATH_CONF_SETTING.getKey(),configDir.toAbsolutePath()).put(Environment.PATH_HOME_SETTING.getKey(),createTempDir().toString()).build();
  LogConfigurator.configure(settings,true);
  esTestLogger=ESLoggerFactory.getLogger("test");
  Logger testLogger=esTestLogger.getLogger();
  assertThat(testLogger.getLevel(),equalTo(Level.TRACE));
  testAppender=new TestAppender();
  testLogger.addAppender(testAppender);
  deprecationLogger=ESLoggerFactory.getDeprecationLogger("test");
  deprecationAppender=new TestAppender();
  ESLogger logger=ESLoggerFactory.getLogger("deprecation.test");
  logger.setLevel("DEBUG");
  logger.getLogger().addAppender(deprecationAppender);
}
