{
  Double[] badPercents={-1.0,110.0};
  try {
    SearchResponse response=client().prepareSearch("idx").addAggregation(terms("terms").field("tag").order(Terms.Order.term(true)).subAggregation(histogram("histo").field(SINGLE_VALUED_FIELD_NAME).interval(interval).extendedBounds((long)minRandomValue,(long)maxRandomValue)).subAggregation(percentilesBucket("percentiles_bucket").setBucketsPaths("histo>_count").percents(badPercents))).execute().actionGet();
    PercentilesBucket percentilesBucketValue=response.getAggregations().get("percentiles_bucket");
    fail("Illegal percent's were provided but no exception was thrown.");
  }
 catch (  SearchPhaseExecutionException exception) {
  }
}
