{
  String indexFieldName;
  BytesRef valueBytes;
  MappedFieldType fieldType=context.fieldMapper(queryBuilder.fieldName());
  if (fieldType != null) {
    indexFieldName=fieldType.names().indexName();
    valueBytes=fieldType.indexedValueForSearch(queryBuilder.value());
  }
 else {
    indexFieldName=queryBuilder.fieldName();
    valueBytes=new BytesRef(queryBuilder.value());
  }
  WildcardQuery expectedQuery=new WildcardQuery(new Term(indexFieldName,valueBytes));
  context.parseFieldMatcher(randomBoolean() ? ParseFieldMatcher.EMPTY : ParseFieldMatcher.STRICT);
  MultiTermQuery.RewriteMethod rewriteMethod=QueryParsers.parseRewriteMethod(context.parseFieldMatcher(),queryBuilder.rewrite(),null);
  QueryParsers.setRewriteMethod(expectedQuery,rewriteMethod);
  return expectedQuery;
}
