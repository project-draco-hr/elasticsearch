{
  SearchRequest searchRequest=SearchRequestTests.createSearchRequest();
  ShardId shardId=new ShardId(randomAsciiOfLengthBetween(2,10),randomAsciiOfLengthBetween(2,10),randomInt());
  Snapshot snapshot=new Snapshot(randomAsciiOfLengthBetween(3,10),new SnapshotId(randomAsciiOfLengthBetween(3,10),randomAsciiOfLengthBetween(3,10)));
  RestoreSource restoreSource=new RestoreSource(snapshot,VersionUtils.randomVersion(random()),randomAsciiOfLengthBetween(3,10));
  ShardRouting shardRouting=ShardRouting.newUnassigned(shardId,restoreSource,randomBoolean(),new UnassignedInfo(randomFrom(UnassignedInfo.Reason.values()),"reason"));
  String[] filteringAliases;
  if (randomBoolean()) {
    filteringAliases=generateRandomStringArray(10,10,false,false);
  }
 else {
    filteringAliases=Strings.EMPTY_ARRAY;
  }
  return new ShardSearchTransportRequest(searchRequest,shardRouting,randomIntBetween(1,100),filteringAliases,Math.abs(randomLong()));
}
