{
  DeleteByQueryRequest delete=new DeleteByQueryRequest();
  TestActionListener listener=new TestActionListener();
  newAsyncAction(delete,listener).onBulkFailure(null,new SearchHit[0],new Throwable("This is a bulk failure"));
  waitForCompletion("waiting for bulk failure to complete",listener);
  assertFailure(listener,"This is a bulk failure");
}
