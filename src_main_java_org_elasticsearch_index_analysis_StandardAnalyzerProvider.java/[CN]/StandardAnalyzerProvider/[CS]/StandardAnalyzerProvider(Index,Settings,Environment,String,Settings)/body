{
  super(index,indexSettings,name,settings);
  this.esVersion=indexSettings.getAsVersion(IndexMetaData.SETTING_VERSION_CREATED,org.elasticsearch.Version.CURRENT);
  final CharArraySet defaultStopwords;
  if (esVersion.onOrAfter(Version.V_1_0_0_Beta1)) {
    defaultStopwords=CharArraySet.EMPTY_SET;
  }
 else {
    defaultStopwords=StopAnalyzer.ENGLISH_STOP_WORDS_SET;
  }
  CharArraySet stopWords=Analysis.parseStopWords(env,settings,defaultStopwords,version);
  int maxTokenLength=settings.getAsInt("max_token_length",StandardAnalyzer.DEFAULT_MAX_TOKEN_LENGTH);
  standardAnalyzer=new StandardAnalyzer(version,stopWords);
  standardAnalyzer.setMaxTokenLength(maxTokenLength);
}
