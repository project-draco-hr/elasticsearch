{
  TermsAggregatorFactory factory=new TermsAggregatorFactory(name,valuesSourceType,targetValueType);
  factory.bucketCountThresholds=BucketCountThresholds.readFromStream(in);
  factory.collectMode=SubAggCollectionMode.BREADTH_FIRST.readFrom(in);
  factory.executionHint=in.readOptionalString();
  if (in.readBoolean()) {
    factory.includeExclude=IncludeExclude.readFromStream(in);
  }
  int numOrders=in.readVInt();
  List<Terms.Order> orders=new ArrayList<>(numOrders);
  for (int i=0; i < numOrders; i++) {
    orders.add(InternalOrder.Streams.readOrder(in));
  }
  factory.orders=orders;
  factory.showTermDocCountError=in.readBoolean();
  return factory;
}
