{
  SearchRequest searchRequest=new SearchRequest().source(new SearchSourceBuilder());
  assertEquals("/_search",initialSearchPath(searchRequest));
  searchRequest.indices("a");
  searchRequest.types("b");
  assertEquals("/a/b/_search",initialSearchPath(searchRequest));
  searchRequest.indices("a","b");
  searchRequest.types("c","d");
  assertEquals("/a,b/c,d/_search",initialSearchPath(searchRequest));
  searchRequest.indices("cat,");
  expectBadStartRequest(searchRequest,"Index",",","cat,");
  searchRequest.indices("cat,","dog");
  expectBadStartRequest(searchRequest,"Index",",","cat,");
  searchRequest.indices("dog","cat,");
  expectBadStartRequest(searchRequest,"Index",",","cat,");
  searchRequest.indices("cat/");
  expectBadStartRequest(searchRequest,"Index","/","cat/");
  searchRequest.indices("cat/","dog");
  expectBadStartRequest(searchRequest,"Index","/","cat/");
  searchRequest.indices("dog","cat/");
  expectBadStartRequest(searchRequest,"Index","/","cat/");
  searchRequest.indices("ok");
  searchRequest.types("cat,");
  expectBadStartRequest(searchRequest,"Type",",","cat,");
  searchRequest.types("cat,","dog");
  expectBadStartRequest(searchRequest,"Type",",","cat,");
  searchRequest.types("dog","cat,");
  expectBadStartRequest(searchRequest,"Type",",","cat,");
  searchRequest.types("cat/");
  expectBadStartRequest(searchRequest,"Type","/","cat/");
  searchRequest.types("cat/","dog");
  expectBadStartRequest(searchRequest,"Type","/","cat/");
  searchRequest.types("dog","cat/");
  expectBadStartRequest(searchRequest,"Type","/","cat/");
}
