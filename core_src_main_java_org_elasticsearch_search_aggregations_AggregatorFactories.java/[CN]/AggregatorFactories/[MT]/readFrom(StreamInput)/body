{
  int factoriesSize=in.readVInt();
  AggregatorFactory[] factoriesList=new AggregatorFactory[factoriesSize];
  for (int i=0; i < factoriesSize; i++) {
    AggregatorFactory factory=in.readAggregatorFactory();
    factoriesList[i]=factory;
  }
  int pipelineFactoriesSize=in.readVInt();
  List<PipelineAggregatorFactory> pipelineAggregatorFactoriesList=new ArrayList<PipelineAggregatorFactory>(pipelineFactoriesSize);
  for (int i=0; i < pipelineFactoriesSize; i++) {
    PipelineAggregatorFactory factory=in.readPipelineAggregatorFactory();
    pipelineAggregatorFactoriesList.add(factory);
  }
  AggregatorFactories aggregatorFactories=new AggregatorFactories(factoriesList,Collections.unmodifiableList(pipelineAggregatorFactoriesList));
  return aggregatorFactories;
}
