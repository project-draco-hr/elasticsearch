{
  if (factories.isEmpty() && pipelineAggregatorFactories.isEmpty()) {
    return EMPTY;
  }
  List<PipelineAggregatorFactory> orderedpipelineAggregators=resolvePipelineAggregatorOrder(this.pipelineAggregatorFactories,this.factories);
  return new AggregatorFactories(factories.toArray(new AggregatorFactory[factories.size()]),orderedpipelineAggregators);
}
