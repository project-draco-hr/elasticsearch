{
  if (factories.isEmpty() && pipelineAggregatorFactories.isEmpty()) {
    return EMPTY;
  }
  List<PipelineAggregatorFactory> orderedpipelineAggregators=null;
  if (skipResolveOrder) {
    orderedpipelineAggregators=new ArrayList<>(pipelineAggregatorFactories);
  }
 else {
    orderedpipelineAggregators=resolvePipelineAggregatorOrder(this.pipelineAggregatorFactories,this.factories);
  }
  return new AggregatorFactories(factories.toArray(new AggregatorFactory<?>[factories.size()]),orderedpipelineAggregators);
}
