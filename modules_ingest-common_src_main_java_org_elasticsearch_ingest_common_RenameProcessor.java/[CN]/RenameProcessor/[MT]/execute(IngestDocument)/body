{
  if (document.hasField(field) == false) {
    throw new IllegalArgumentException("field [" + field + "] doesn't exist");
  }
  if (document.hasField(targetField)) {
    throw new IllegalArgumentException("field [" + targetField + "] already exists");
  }
  Object oldValue=document.getFieldValue(field,Object.class);
  document.setFieldValue(targetField,oldValue);
  try {
    document.removeField(field);
  }
 catch (  Exception e) {
    document.removeField(targetField);
    throw e;
  }
}
