{
  ValuesSourceType valuesSourceType=ValuesSourceType.ANY.readFrom(in);
  ValueType targetValueType=null;
  if (in.readBoolean()) {
    targetValueType=ValueType.STRING.readFrom(in);
  }
  ValuesSourceAggregatorFactory<VS,AF> factory=innerReadFrom(name,valuesSourceType,targetValueType,in);
  factory.field=in.readOptionalString();
  if (in.readBoolean()) {
    factory.script=Script.readScript(in);
  }
  if (in.readBoolean()) {
    factory.valueType=ValueType.STRING.readFrom(in);
  }
  factory.format=in.readOptionalString();
  factory.missing=in.readGenericValue();
  if (in.readBoolean()) {
    factory.timeZone=DateTimeZone.forID(in.readString());
  }
  return factory;
}
