{
  if (settings.getMaxLoopCounter() > 0) {
    reserved.usesLoop();
  }
  ANode initializer=ctx.initializer() == null ? null : (ANode)visit(ctx.initializer());
  AExpression expression=ctx.expression() == null ? null : (AExpression)visitExpression(ctx.expression());
  AExpression afterthought=ctx.afterthought() == null ? null : (AExpression)visit(ctx.afterthought());
  if (ctx.trailer() != null) {
    SBlock block=(SBlock)visit(ctx.trailer());
    return new SFor(line(ctx),offset(ctx),location(ctx),settings.getMaxLoopCounter(),initializer,expression,afterthought,block);
  }
 else   if (ctx.empty() != null) {
    return new SFor(line(ctx),offset(ctx),location(ctx),settings.getMaxLoopCounter(),initializer,expression,afterthought,null);
  }
 else {
    throw new IllegalStateException("Error " + location(ctx) + " Illegal tree structure.");
  }
}
