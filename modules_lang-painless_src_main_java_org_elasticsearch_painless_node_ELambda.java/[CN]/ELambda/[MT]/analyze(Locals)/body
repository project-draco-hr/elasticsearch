{
  desugared=new SFunction(reserved,location,"def",name,paramTypeStrs,paramNameStrs,statements,true);
  desugared.generate();
  List<Variable> captures=new ArrayList<>();
  desugared.analyze(Locals.newLambdaScope(locals.getProgramScope(),desugared.parameters,captures));
  EFunctionRef ref=new EFunctionRef(location,"this",name);
  ref.expected=expected;
  locals=Locals.newLocalScope(locals);
  locals.addMethod(desugared.method);
  ref.analyze(locals);
  actual=ref.actual;
  impl=ref;
}
