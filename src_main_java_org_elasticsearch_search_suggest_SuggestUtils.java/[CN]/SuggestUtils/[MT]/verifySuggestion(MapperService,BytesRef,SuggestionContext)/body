{
  if (suggestion.getField() == null) {
    throw new ElasticsearchIllegalArgumentException("The required field option is missing");
  }
  if (suggestion.getText() == null) {
    if (globalText == null) {
      throw new ElasticsearchIllegalArgumentException("The required text option is missing");
    }
    suggestion.setText(globalText);
  }
  if (suggestion.getAnalyzer() == null) {
    suggestion.setAnalyzer(mapperService.searchAnalyzer());
  }
  if (suggestion.getShardSize() == -1) {
    suggestion.setShardSize(Math.max(suggestion.getSize(),5));
  }
}
