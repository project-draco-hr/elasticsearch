{
  Settings settings=settingsBuilder().put("test.class","bar").put("test.class.package","org.elasticsearch.common.settings.bar").build();
  assertThat(settings.getAsClass("no.settings",FooTest.class,"org.elasticsearch.common.settings.","Test").getName(),equalTo("org.elasticsearch.common.settings.foo.FooTest"));
  assertThat(settings.getAsClass("test.class",FooTest.class,"org.elasticsearch.common.settings.","Test").getName(),equalTo("org.elasticsearch.common.settings.bar.BarTest"));
  try {
    settings.getAsClass("test.class",FooTest.class,"com.example.elasticsearch.common.settings.","Test");
    assertThat("Class with wrong package name shouldn't be loaded",false);
  }
 catch (  NoClassSettingsException ex) {
  }
  assertThat(settings.getAsClass("test.class.package",FooTest.class,"com.example.elasticsearch.common.settings.","Test").getName(),equalTo("org.elasticsearch.common.settings.bar.BarTest"));
}
