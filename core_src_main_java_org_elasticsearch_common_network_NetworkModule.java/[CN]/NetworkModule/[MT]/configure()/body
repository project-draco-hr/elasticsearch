{
  bind(NetworkService.class).toInstance(networkService);
  bind(NamedWriteableRegistry.class).toInstance(namedWriteableRegistry);
  boolean nettyRegistered=transportTypes.getExtension(NETTY_TRANSPORT) != null;
  transportServiceTypes.bindType(binder(),settings,TRANSPORT_SERVICE_TYPE_KEY,NETTY_TRANSPORT);
  String defaultTransport=DiscoveryNode.isLocalNode(settings) || nettyRegistered == false ? LOCAL_TRANSPORT : NETTY_TRANSPORT;
  transportTypes.bindType(binder(),settings,TRANSPORT_TYPE_KEY,defaultTransport);
  if (transportClient == false) {
    if (HTTP_ENABLED.get(settings)) {
      bind(HttpServer.class).asEagerSingleton();
      httpTransportTypes.bindType(binder(),settings,HTTP_TYPE_SETTING.getKey(),NETTY_TRANSPORT);
    }
 else {
      bind(HttpServer.class).toProvider(Providers.of(null));
    }
    bind(AllocationCommandRegistry.class).toInstance(allocationCommandRegistry);
  }
}
