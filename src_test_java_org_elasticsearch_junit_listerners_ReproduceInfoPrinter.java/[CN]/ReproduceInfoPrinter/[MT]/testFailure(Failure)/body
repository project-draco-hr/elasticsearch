{
  if (failure.getException() instanceof AssumptionViolatedException) {
    return;
  }
  final Description d=failure.getDescription();
  final StringBuilder b=new StringBuilder();
  b.append("FAILURE  : ").append(d.getDisplayName()).append("\n");
  b.append("REPRODUCE WITH  : mvn test");
  new MavenMessageBuilder(b).appendAllOpts(failure.getDescription());
  b.append("\n");
  b.append("Throwable:\n");
  if (failure.getException() != null) {
    TraceFormatting traces=new TraceFormatting();
    try {
      traces=RandomizedContext.current().getRunner().getTraceFormatting();
    }
 catch (    IllegalStateException e) {
    }
    traces.formatThrowable(b,failure.getException());
  }
  logger.error(b.toString());
}
