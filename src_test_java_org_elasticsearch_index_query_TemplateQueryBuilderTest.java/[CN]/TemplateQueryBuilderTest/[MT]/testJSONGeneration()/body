{
  Map<String,Object> vars=new HashMap<String,Object>();
  vars.put("template","filled");
  TemplateQueryBuilder builder=new TemplateQueryBuilder("I am a $template string",vars);
  XContentBuilder content=XContentFactory.jsonBuilder();
  content.startObject();
  builder.doXContent(content,null);
  content.endObject();
  content.close();
  assertEquals(content.string(),"{\"template\":{\"query\":\"I am a $template string\",\"params\":{\"template\":\"filled\"}}}");
}
