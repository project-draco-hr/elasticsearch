{
  super(settings);
  indicesAnalysisService.analyzerProviderFactories().put("kuromoji",new PreBuiltAnalyzerProviderFactory("kuromoji",AnalyzerScope.INDICES,new JapaneseAnalyzer(Lucene.ANALYZER_VERSION)));
  indicesAnalysisService.charFilterFactories().put("kuromoji_iteration_mark",new KurumojiCharFilterFactoryFactory(new CharFilterFactory(){
    @Override public String name(){
      return "kuromoji_iteration_mark";
    }
    @Override public Reader create(    Reader reader){
      return new JapaneseIterationMarkCharFilter(reader,JapaneseIterationMarkCharFilter.NORMALIZE_KANJI_DEFAULT,JapaneseIterationMarkCharFilter.NORMALIZE_KANA_DEFAULT);
    }
  }
));
  indicesAnalysisService.tokenizerFactories().put("kuromoji_tokenizer",new KurumojiTokenizerFactoryFactory(new TokenizerFactory(){
    @Override public String name(){
      return "kuromoji_tokenizer";
    }
    @Override public Tokenizer create(    Reader reader){
      return new JapaneseTokenizer(reader,null,true,Mode.SEARCH);
    }
  }
));
  indicesAnalysisService.tokenFilterFactories().put("kuromoji_baseform",new KurumojiTokenFilterFactoryFactory(new TokenFilterFactory(){
    @Override public String name(){
      return "kuromoji_baseform";
    }
    @Override public TokenStream create(    TokenStream tokenStream){
      return new JapaneseBaseFormFilter(tokenStream);
    }
  }
));
  indicesAnalysisService.tokenFilterFactories().put("kuromoji_part_of_speech",new KurumojiTokenFilterFactoryFactory(new TokenFilterFactory(){
    @Override public String name(){
      return "kuromoji_part_of_speech";
    }
    @Override public TokenStream create(    TokenStream tokenStream){
      return new JapanesePartOfSpeechStopFilter(Lucene.ANALYZER_VERSION,tokenStream,JapaneseAnalyzer.getDefaultStopTags());
    }
  }
));
  indicesAnalysisService.tokenFilterFactories().put("kuromoji_readingform",new KurumojiTokenFilterFactoryFactory(new TokenFilterFactory(){
    @Override public String name(){
      return "kuromoji_readingform";
    }
    @Override public TokenStream create(    TokenStream tokenStream){
      return new JapaneseReadingFormFilter(tokenStream,true);
    }
  }
));
  indicesAnalysisService.tokenFilterFactories().put("kuromoji_stemmer",new KurumojiTokenFilterFactoryFactory(new TokenFilterFactory(){
    @Override public String name(){
      return "kuromoji_stemmer";
    }
    @Override public TokenStream create(    TokenStream tokenStream){
      return new JapaneseKatakanaStemFilter(tokenStream);
    }
  }
));
}
