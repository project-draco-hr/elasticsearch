{
  Class<? extends ShardsAllocator> existing=shardsAllocators.put(name,clazz);
  if (existing != null) {
    throw new IllegalArgumentException("Cannot register ShardAllocator [" + name + "] to "+ clazz.getName()+ ", already registered to "+ existing.getName());
  }
}
