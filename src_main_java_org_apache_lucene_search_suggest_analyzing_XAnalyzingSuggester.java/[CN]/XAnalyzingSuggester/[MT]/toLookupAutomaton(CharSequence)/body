{
  Automaton automaton=null;
  TokenStream ts=queryAnalyzer.tokenStream("",key.toString());
  try {
    automaton=getTokenStreamToAutomaton().toAutomaton(ts);
  }
  finally {
    IOUtils.closeWhileHandlingException(ts);
  }
  automaton=replaceSep(automaton);
  automaton=Operations.determinize(automaton,Integer.MAX_VALUE);
  return automaton;
}
