{
  final TokenStreamToAutomaton tsta;
  if (preserveSep) {
    tsta=new EscapingTokenStreamToAutomaton();
  }
 else {
    tsta=new TokenStreamToAutomaton();
  }
  tsta.setPreservePositionIncrements(preservePositionIncrements);
  return tsta;
}
