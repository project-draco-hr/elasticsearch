{
  prepareCreate("test").setSettings(settingsBuilder().put(SETTING_NUMBER_OF_SHARDS,5).put(SETTING_NUMBER_OF_REPLICAS,0)).get();
  ensureGreen();
  client().prepareIndex("text","type1","1").setSource("field1","foobar1").setRouting("1").get();
  client().prepareIndex("text","type1","2").setSource("field1","foobar2").setRouting("2").get();
  client().prepareIndex("text","type1","3").setSource("field1","foobar3").setRouting("3").get();
  refresh();
  Suggest suggest=searchSuggest(client(),"foobar",termSuggestion("simple").size(10).minDocFreq(0).field("field1").suggestMode("always"));
  ElasticsearchAssertions.assertSuggestionSize(suggest,0,3,"simple");
}
