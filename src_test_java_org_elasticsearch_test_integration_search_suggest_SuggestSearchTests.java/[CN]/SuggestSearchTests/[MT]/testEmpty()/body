{
  client.admin().indices().prepareDelete().execute().actionGet();
  client.admin().indices().prepareCreate("test").setSettings(settingsBuilder().put(SETTING_NUMBER_OF_SHARDS,5).put(SETTING_NUMBER_OF_REPLICAS,0)).execute().actionGet();
  client.admin().cluster().prepareHealth("test").setWaitForGreenStatus().execute().actionGet();
  Suggest suggest=searchSuggest(client,termSuggestion("test").suggestMode("always").text("abcd").field("text"));
  assertThat(suggest,notNullValue());
  assertThat(suggest.size(),equalTo(1));
  assertThat(suggest.getSuggestion("test").getName(),equalTo("test"));
  assertThat(suggest.getSuggestion("test").getEntries().size(),equalTo(1));
  assertThat(suggest.getSuggestion("test").getEntries().get(0).getText().string(),equalTo("abcd"));
  assertThat(suggest.getSuggestion("test").getEntries().get(0).getOptions().size(),equalTo(0));
  searchSuggest(client,termSuggestion("test").suggestMode("always").text("abcd").field("text"));
  assertThat(suggest,notNullValue());
  assertThat(suggest.size(),equalTo(1));
  assertThat(suggest.getSuggestion("test").getName(),equalTo("test"));
  assertThat(suggest.getSuggestion("test").getEntries().size(),equalTo(1));
  assertThat(suggest.getSuggestion("test").getEntries().get(0).getOptions().size(),equalTo(0));
}
