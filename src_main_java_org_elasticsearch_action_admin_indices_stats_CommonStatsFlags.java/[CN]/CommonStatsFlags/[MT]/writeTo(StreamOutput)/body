{
  long longFlags=0;
  for (  Flag flag : flags) {
    longFlags|=(1 << flag.ordinal());
  }
  out.writeLong(longFlags);
  out.writeStringArrayNullable(types);
  out.writeStringArrayNullable(groups);
  out.writeStringArrayNullable(fieldDataFields);
  if (out.getVersion().onOrAfter(Version.V_0_90_4)) {
    out.writeStringArrayNullable(completionDataFields);
  }
}
