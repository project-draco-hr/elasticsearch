{
  Client transportClient=internalCluster().transportClient();
  ClusterHealthResponse clusterIndexHealths=transportClient.admin().cluster().prepareHealth().get();
  assertThat(clusterIndexHealths.getStatus(),is(ClusterHealthStatus.GREEN));
  try {
    transportClient.admin().cluster().prepareHealth().putHeader("ERROR","MY MESSAGE").get();
    fail("Expected exception, but didnt happen");
  }
 catch (  ElasticsearchException e) {
    assertThat(e.getMessage(),containsString("MY MESSAGE"));
  }
}
