{
  final RestoreContext snapshotContext=new RestoreContext(snapshotId,version,shardId,snapshotShardId,recoveryState);
  try {
    snapshotContext.restore();
  }
 catch (  Exception e) {
    throw new IndexShardRestoreFailedException(shardId,"failed to restore snapshot [" + snapshotId + "]",e);
  }
}
