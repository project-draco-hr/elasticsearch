{
  builder.startObject("_all");
  builder.startObject("primaries");
  primaries().toXContent(builder,params);
  builder.endObject();
  builder.startObject("total");
  primaries().toXContent(builder,params);
  builder.endObject();
  builder.startObject(Fields.INDICES);
  for (  IndexStats indexStats : indices().values()) {
    builder.startObject(indexStats.index());
    builder.startObject("primaries");
    indexStats.primaries().toXContent(builder,params);
    builder.endObject();
    builder.startObject("total");
    indexStats.total().toXContent(builder,params);
    builder.endObject();
    if ("shards".equalsIgnoreCase(params.param("level",null))) {
      builder.startObject(Fields.SHARDS);
      for (      IndexShardStats indexShardStats : indexStats) {
        builder.startArray(Integer.toString(indexShardStats.shardId().id()));
        for (        ShardStats shardStats : indexShardStats) {
          builder.startObject();
          builder.startObject(Fields.ROUTING).field(Fields.STATE,shardStats.shardRouting().state()).field(Fields.PRIMARY,shardStats.shardRouting().primary()).field(Fields.NODE,shardStats.shardRouting().currentNodeId()).field(Fields.RELOCATING_NODE,shardStats.shardRouting().relocatingNodeId()).endObject();
          shardStats.stats().toXContent(builder,params);
          builder.endObject();
        }
        builder.endArray();
      }
      builder.endObject();
    }
    builder.endObject();
  }
  builder.endObject();
  builder.endObject();
  return builder;
}
