{
  createIndex("test");
  ensureGreen();
  PutWarmerResponse putWarmerResponse=client().admin().indices().preparePutWarmer("custom_warmer").setSearchRequest(client().prepareSearch("test").setTypes("test").setQuery(QueryBuilders.matchAllQuery())).get();
  assertThat(putWarmerResponse.isAcknowledged(),equalTo(true));
  GetWarmersResponse getWarmersResponse=client().admin().indices().prepareGetWarmers("test").get();
  assertThat(getWarmersResponse.warmers().size(),equalTo(1));
  ObjectObjectCursor<String,ImmutableList<IndexWarmersMetaData.Entry>> entry=getWarmersResponse.warmers().iterator().next();
  assertThat(entry.key,equalTo("test"));
  assertThat(entry.value.size(),equalTo(1));
  assertThat(entry.value.iterator().next().name(),equalTo("custom_warmer"));
  DeleteWarmerResponse deleteWarmerResponse=client().admin().indices().prepareDeleteWarmer().setIndices("test").setNames("custom_warmer").get();
  assertThat(deleteWarmerResponse.isAcknowledged(),equalTo(true));
  getWarmersResponse=client().admin().indices().prepareGetWarmers("test").get();
  assertThat(getWarmersResponse.warmers().size(),equalTo(0));
}
