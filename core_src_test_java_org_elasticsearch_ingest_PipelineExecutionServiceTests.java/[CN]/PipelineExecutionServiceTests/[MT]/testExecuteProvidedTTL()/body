{
  when(store.get("_id")).thenReturn(new Pipeline("_id","_description",mock(CompoundProcessor.class)));
  IndexRequest indexRequest=new IndexRequest("_index","_type","_id").setPipeline("_id").source(Collections.emptyMap()).ttl(1000L);
  Consumer<Throwable> failureHandler=mock(Consumer.class);
  Consumer<Boolean> completionHandler=mock(Consumer.class);
  executionService.execute(indexRequest,failureHandler,completionHandler);
  assertThat(indexRequest.ttl(),equalTo(new TimeValue(1000L)));
  verify(failureHandler,never()).accept(any());
  verify(completionHandler,times(1)).accept(true);
}
