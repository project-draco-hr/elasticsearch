{
  if (context.version() == false) {
    return;
  }
  final long version;
  try {
    BytesRef uid=Uid.createUidAsBytes(hitContext.hit().type(),hitContext.hit().id());
    version=Versions.loadVersion(hitContext.readerContext().reader(),new Term(UidFieldMapper.NAME,uid));
  }
 catch (  IOException e) {
    throw new ElasticsearchException("Could not query index for _version",e);
  }
  hitContext.hit().version(version < 0 ? -1 : version);
}
