{
  ClusterStateResponse clusterStateResponseFiltered=client().admin().cluster().prepareState().clear().setMetaData(true).setRoutingTable(true).setIndices("foo","fuu","non-existent").get();
  assertThat(clusterStateResponseFiltered.getState().metaData().indices().size(),is(2));
  assertThat(clusterStateResponseFiltered.getState().metaData().indices(),CollectionAssertions.hasKey("foo"));
  assertThat(clusterStateResponseFiltered.getState().metaData().indices(),CollectionAssertions.hasKey("fuu"));
  assertThat(clusterStateResponseFiltered.getState().routingTable().hasIndex("foo"),is(true));
  assertThat(clusterStateResponseFiltered.getState().routingTable().hasIndex("fuu"),is(true));
  assertThat(clusterStateResponseFiltered.getState().routingTable().hasIndex("baz"),is(false));
}
