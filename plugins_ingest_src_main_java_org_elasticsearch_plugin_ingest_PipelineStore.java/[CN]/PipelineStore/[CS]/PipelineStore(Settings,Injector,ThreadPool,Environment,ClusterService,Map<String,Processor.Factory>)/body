{
  super(settings);
  this.injector=injector;
  this.threadPool=threadPool;
  this.clusterService=clusterService;
  this.scrollTimeout=settings.getAsTime("ingest.pipeline.store.scroll.timeout",TimeValue.timeValueSeconds(30));
  this.pipelineUpdateInterval=settings.getAsTime("ingest.pipeline.store.update.interval",TimeValue.timeValueSeconds(1));
  for (  Processor.Factory factory : processors.values()) {
    factory.setConfigDirectory(environment.configFile());
  }
  this.processorFactoryRegistry=Collections.unmodifiableMap(processors);
  clusterService.add(new PipelineStoreListener());
}
