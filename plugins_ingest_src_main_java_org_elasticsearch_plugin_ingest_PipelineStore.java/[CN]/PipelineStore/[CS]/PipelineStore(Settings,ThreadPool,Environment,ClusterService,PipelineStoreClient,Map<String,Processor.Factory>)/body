{
  super(settings);
  this.threadPool=threadPool;
  this.clusterService=clusterService;
  this.pipelineUpdateInterval=settings.getAsTime("ingest.pipeline.store.update.interval",TimeValue.timeValueSeconds(1));
  this.client=client;
  for (  Processor.Factory factory : processors.values()) {
    factory.setConfigDirectory(environment.configFile());
  }
  this.processorFactoryRegistry=Collections.unmodifiableMap(processors);
  clusterService.add(new PipelineStoreListener());
}
