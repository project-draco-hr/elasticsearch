{
  final RecoveryRequest recoveryRequest=new RecoveryRequest(Strings.splitStringByCommaToArray(request.param("index")));
  recoveryRequest.detailed(request.paramAsBoolean("detailed",false));
  recoveryRequest.activeOnly(request.paramAsBoolean("active_only",false));
  recoveryRequest.listenerThreaded(false);
  recoveryRequest.indicesOptions(IndicesOptions.fromRequest(request,recoveryRequest.indicesOptions()));
  client.admin().indices().recoveries(recoveryRequest,new ActionListener<RecoveryResponse>(){
    @Override public void onResponse(    final RecoveryResponse response){
      try {
        channel.sendResponse(RestTable.buildResponse(buildRecoveryTable(request,response),request,channel));
      }
 catch (      Throwable e) {
        try {
          channel.sendResponse(new BytesRestResponse(request,e));
        }
 catch (        IOException e2) {
          logger.error("Unable to send recovery status response",e2);
        }
      }
    }
    @Override public void onFailure(    Throwable e){
      try {
        channel.sendResponse(new BytesRestResponse(request,e));
      }
 catch (      IOException e1) {
        logger.error("Failed to send failure response",e1);
      }
    }
  }
);
}
