{
  XContentBuilder source=jsonBuilder().startObject().startObject("doc").field("field1","value1").endObject().startObject("query").startObject("term").field("field1","value1").endObject().endObject().field("track_scores",true).field("size",123).startObject("sort").startObject("_score").endObject().endObject().endObject();
  XContentBuilder docSource=jsonBuilder().startObject().field("field1","value1").endObject();
  PercolateShardRequest request=new PercolateShardRequest(new ShardId(index,0),null);
  request.documentType("type");
  request.source(source.bytes());
  request.docSource(docSource.bytes());
  PercolateContext context=new PercolateContext(request,new SearchShardTarget("_node","_index",0),mapperService);
  try {
    parser.parse(request,context,mapperService,queryShardContext);
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),equalTo("Can't specify the document to percolate in the source of the request and as document id"));
  }
}
