{
  BulkRequest originalBulkRequest=new BulkRequest();
  for (int i=0; i < 32; i++) {
    originalBulkRequest.add(new IndexRequest("index","type",String.valueOf(i)));
  }
  IngestActionFilter.BulkRequestModifier modifier=new IngestActionFilter.BulkRequestModifier(originalBulkRequest);
  for (int i=0; modifier.hasNext(); i++) {
    modifier.next();
  }
  BulkRequest bulkRequest=modifier.getBulkRequest();
  assertThat(bulkRequest,Matchers.sameInstance(originalBulkRequest));
  ActionListener<BulkResponse> actionListener=Mockito.mock(ActionListener.class);
  assertThat(modifier.wrapActionListenerIfNeeded(actionListener),Matchers.sameInstance(actionListener));
}
