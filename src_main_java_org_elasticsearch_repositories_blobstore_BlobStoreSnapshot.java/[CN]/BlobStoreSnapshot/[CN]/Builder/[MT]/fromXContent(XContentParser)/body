{
  Builder builder=new Builder();
  XContentParser.Token token=parser.currentToken();
  if (token == XContentParser.Token.START_OBJECT) {
    String currentFieldName=parser.currentName();
    if ("snapshot".equals(currentFieldName)) {
      while ((token=parser.nextToken()) != XContentParser.Token.END_OBJECT) {
        if (token == XContentParser.Token.FIELD_NAME) {
          currentFieldName=parser.currentName();
          token=parser.nextToken();
          if (token.isValue()) {
            if ("name".equals(currentFieldName)) {
              builder.name(parser.text());
            }
 else             if ("state".equals(currentFieldName)) {
              builder.state(SnapshotState.valueOf(parser.text()));
            }
 else             if ("reason".equals(currentFieldName)) {
              builder.reason(parser.text());
            }
 else             if ("start_time".equals(currentFieldName)) {
              builder.startTime(parser.longValue());
            }
 else             if ("end_time".equals(currentFieldName)) {
              builder.endTime(parser.longValue());
            }
 else             if ("total_shards".equals(currentFieldName)) {
              builder.totalShard(parser.intValue());
            }
 else             if ("successful_shards".equals(currentFieldName)) {
              builder.successfulShards(parser.intValue());
            }
 else             if ("version_id".equals(currentFieldName)) {
              builder.version(Version.fromId(parser.intValue()));
            }
          }
 else           if (token == XContentParser.Token.START_ARRAY) {
            if ("indices".equals(currentFieldName)) {
              ArrayList<String> indices=new ArrayList<String>();
              while (parser.nextToken() != XContentParser.Token.END_ARRAY) {
                indices.add(parser.text());
              }
              builder.indices(indices);
            }
 else             if ("failures".equals(currentFieldName)) {
              ArrayList<SnapshotShardFailure> failures=new ArrayList<SnapshotShardFailure>();
              while (parser.nextToken() != XContentParser.Token.END_ARRAY) {
                failures.add(SnapshotShardFailure.fromXContent(parser));
              }
              builder.shardFailures(ImmutableList.copyOf(failures));
            }
 else {
              parser.skipChildren();
            }
          }
 else           if (token == XContentParser.Token.START_OBJECT) {
            parser.skipChildren();
          }
        }
      }
    }
  }
  return builder.build();
}
