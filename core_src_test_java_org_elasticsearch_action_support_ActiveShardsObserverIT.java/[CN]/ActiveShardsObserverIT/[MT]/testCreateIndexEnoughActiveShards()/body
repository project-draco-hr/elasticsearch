{
  final String indexName="test-idx";
  Settings settings=Settings.builder().put(indexSettings()).put(INDEX_NUMBER_OF_SHARDS_SETTING.getKey(),randomIntBetween(1,7)).put(INDEX_NUMBER_OF_REPLICAS_SETTING.getKey(),internalCluster().numDataNodes() + randomIntBetween(0,3)).build();
  ActiveShardCount waitForActiveShards=ActiveShardCount.from(randomIntBetween(0,internalCluster().numDataNodes()));
  assertAcked(prepareCreate(indexName).setSettings(settings).setWaitForActiveShards(waitForActiveShards).get());
}
