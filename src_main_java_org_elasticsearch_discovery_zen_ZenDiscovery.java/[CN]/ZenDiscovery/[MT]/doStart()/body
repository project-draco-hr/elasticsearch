{
  Map<String,String> nodeAttributes=discoveryNodeService.buildAttributes();
  final String nodeId=DiscoveryService.generateNodeId(settings);
  localNode=new DiscoveryNode(settings.get("name"),nodeId,transportService.boundAddress().publishAddress(),nodeAttributes,version);
  latestDiscoNodes=new DiscoveryNodes.Builder().put(localNode).localNodeId(localNode.id()).build();
  nodesFD.updateNodes(latestDiscoNodes,-1);
  pingService.start();
  asyncJoinCluster();
}
