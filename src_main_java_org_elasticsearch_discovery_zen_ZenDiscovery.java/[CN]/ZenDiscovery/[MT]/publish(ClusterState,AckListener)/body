{
  if (!master) {
    throw new ElasticSearchIllegalStateException("Shouldn't publish state when not master");
  }
  latestDiscoNodes=clusterState.nodes();
  nodesFD.updateNodes(clusterState.nodes());
  publishClusterState.publish(clusterState,ackListener);
}
