{
  running.set(false);
  Thread joinThread=currentJoinThread.getAndSet(null);
  if (joinThread != null) {
    try {
      joinThread.interrupt();
    }
 catch (    Exception e) {
    }
    try {
      joinThread.join(10000);
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
    }
  }
}
