{
  String pluginName="plugin-test";
  Environment env=initialSettings.v2();
  Path binDir=env.homeFile().resolve("bin");
  Path pluginBinDir=binDir.resolve(pluginName);
  Path pluginConfigDir=env.configFile().resolve(pluginName);
  String pluginUrl=getPluginUrlForResource("plugin_with_bin_and_config.zip");
  assertStatusOk("install " + pluginName + " --url "+ pluginUrl+ " --verbose");
  terminal.getTerminalOutput().clear();
  assertStatusOk("list");
  assertThat(terminal.getTerminalOutput(),hasItem(containsString(pluginName)));
  assertDirectoryExists(pluginBinDir);
  assertDirectoryExists(pluginConfigDir);
  Path toolFile=pluginBinDir.resolve("tool");
  assertFileExists(toolFile);
  PosixFileAttributeView view=Files.getFileAttributeView(toolFile,PosixFileAttributeView.class);
  if (view != null) {
    PosixFileAttributes attributes=view.readAttributes();
    assertThat(attributes.permissions(),hasItem(PosixFilePermission.OWNER_EXECUTE));
    assertThat(attributes.permissions(),hasItem(PosixFilePermission.OWNER_READ));
  }
}
