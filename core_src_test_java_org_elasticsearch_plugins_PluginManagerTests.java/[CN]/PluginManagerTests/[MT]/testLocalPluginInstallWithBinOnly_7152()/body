{
  String pluginName="fake-plugin";
  Path pluginDir=createTempDir().resolve(pluginName);
  Files.createDirectories(pluginDir.resolve("bin"));
  Files.createFile(pluginDir.resolve("bin").resolve("tool"));
  ;
  String pluginUrl=createPlugin(pluginDir,"description","fake desc","version","1.0","elasticsearch.version",Version.CURRENT.toString(),"java.version",System.getProperty("java.specification.version"),"jvm","true","classname","FakePlugin");
  Environment env=initialSettings.v2();
  Path binDir=env.binFile();
  Path pluginBinDir=binDir.resolve(pluginName);
  assertStatusOk(String.format(Locale.ROOT,"install %s --url %s --verbose",pluginName,pluginUrl));
  assertThatPluginIsListed(pluginName);
  assertDirectoryExists(pluginBinDir);
}
