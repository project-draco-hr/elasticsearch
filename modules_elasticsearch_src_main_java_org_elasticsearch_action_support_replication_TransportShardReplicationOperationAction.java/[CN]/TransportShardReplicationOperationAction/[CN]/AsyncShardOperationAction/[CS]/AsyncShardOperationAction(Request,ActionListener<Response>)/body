{
  this.request=request;
  this.listener=listener;
  ClusterState clusterState=clusterService.state();
  request.index(clusterState.metaData().concreteIndex(request.index()));
  checkBlock(request,clusterState);
  if (request.replicationType() != ReplicationType.DEFAULT) {
    replicationType=request.replicationType();
  }
 else {
    replicationType=defaultReplicationType;
  }
}
