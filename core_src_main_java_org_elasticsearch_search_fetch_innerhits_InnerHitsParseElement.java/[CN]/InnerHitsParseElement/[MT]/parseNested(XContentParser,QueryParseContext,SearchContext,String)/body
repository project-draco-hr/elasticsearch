{
  ObjectMapper objectMapper=searchContext.getObjectMapper(nestedPath);
  if (objectMapper == null) {
    throw new IllegalArgumentException("path [" + nestedPath + "] doesn't exist");
  }
  if (objectMapper.nested().isNested() == false) {
    throw new IllegalArgumentException("path [" + nestedPath + "] isn't nested");
  }
  ObjectMapper parentObjectMapper=parseContext.nestedScope().nextLevel(objectMapper);
  ParseResult parseResult=parseSubSearchContext(searchContext,parseContext,parser);
  parseContext.nestedScope().previousLevel();
  return new InnerHitsContext.NestedInnerHits(parseResult.context(),parseResult.query(),parseResult.childInnerHits(),parentObjectMapper,objectMapper);
}
