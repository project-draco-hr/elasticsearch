{
  QueryShardContext context=searchContext.indexShard().getQueryShardContext();
  context.reset(parser);
  Map<String,InnerHitsContext.BaseInnerHits> topLevelInnerHits=parseInnerHits(parser,context,searchContext);
  if (topLevelInnerHits != null) {
    InnerHitsContext innerHitsContext=searchContext.innerHits();
    innerHitsContext.addInnerHitDefinitions(topLevelInnerHits);
  }
}
