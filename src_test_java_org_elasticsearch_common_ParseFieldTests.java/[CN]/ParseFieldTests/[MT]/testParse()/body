{
  String[] values=new String[]{"foo_bar","fooBar"};
  ParseField field=new ParseField(randomFrom(values));
  String[] deprecated=new String[]{"barFoo","bar_foo"};
  ParseField withDeprecations=field.withDeprecation("Foobar",randomFrom(deprecated));
  assertThat(field,not(sameInstance(withDeprecations)));
  assertThat(field.match(randomFrom(values),ParseField.EMPTY_FLAGS),is(true));
  assertThat(field.match("foo bar",ParseField.EMPTY_FLAGS),is(false));
  assertThat(field.match(randomFrom(deprecated),ParseField.EMPTY_FLAGS),is(false));
  assertThat(field.match("barFoo",ParseField.EMPTY_FLAGS),is(false));
  assertThat(withDeprecations.match(randomFrom(values),ParseField.EMPTY_FLAGS),is(true));
  assertThat(withDeprecations.match("foo bar",ParseField.EMPTY_FLAGS),is(false));
  assertThat(withDeprecations.match(randomFrom(deprecated),ParseField.EMPTY_FLAGS),is(true));
  assertThat(withDeprecations.match("barFoo",ParseField.EMPTY_FLAGS),is(true));
  EnumSet<ParseField.Flag> flags=EnumSet.of(ParseField.Flag.STRICT);
  assertThat(field.match(randomFrom(values),flags),is(true));
  assertThat(field.match("foo bar",flags),is(false));
  assertThat(field.match(randomFrom(deprecated),flags),is(false));
  assertThat(field.match("barFoo",flags),is(false));
  assertThat(withDeprecations.match(randomFrom(values),flags),is(true));
  assertThat(withDeprecations.match("foo bar",flags),is(false));
  try {
    withDeprecations.match(randomFrom(deprecated),flags);
    fail();
  }
 catch (  ElasticsearchIllegalArgumentException ex) {
  }
  try {
    withDeprecations.match("barFoo",flags);
    fail();
  }
 catch (  ElasticsearchIllegalArgumentException ex) {
  }
}
