{
  IndexService indexService=percolatorIndexService();
  IndexShard shard=indexService.shard(0);
  shard.refresh(new Engine.Refresh(true));
  Engine.Searcher searcher=shard.searcher();
  try {
    Query query=new XConstantScoreQuery(indexQueriesFilter(indexName));
    QueriesLoaderCollector queries=new QueriesLoaderCollector();
    searcher.searcher().search(query,queries);
    percolator.addQueries(queries.queries());
  }
 catch (  IOException e) {
    throw new PercolatorException(index,"failed to load queries from percolator index");
  }
 finally {
    searcher.release();
  }
}
