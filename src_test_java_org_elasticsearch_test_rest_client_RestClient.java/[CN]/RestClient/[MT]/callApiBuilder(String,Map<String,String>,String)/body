{
  RestApi restApi=restApi(apiName);
  HttpRequestBuilder httpRequestBuilder=httpRequestBuilder().body(body);
  Map<String,String> pathParts=Maps.newHashMap();
  if (params != null) {
    for (    Map.Entry<String,String> entry : params.entrySet()) {
      if (restApi.getPathParts().contains(entry.getKey())) {
        pathParts.put(entry.getKey(),entry.getValue());
      }
 else {
        httpRequestBuilder.addParam(entry.getKey(),entry.getValue());
      }
    }
  }
  return httpRequestBuilder.method(RandomizedTest.randomFrom(restApi.getSupportedMethods(pathParts.keySet()))).path(RandomizedTest.randomFrom(restApi.getFinalPaths(pathParts)));
}
