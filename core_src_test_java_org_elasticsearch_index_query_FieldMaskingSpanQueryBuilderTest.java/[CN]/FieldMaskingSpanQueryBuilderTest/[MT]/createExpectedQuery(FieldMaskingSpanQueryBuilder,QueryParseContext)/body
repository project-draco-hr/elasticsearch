{
  String fieldInQuery=testQueryBuilder.fieldName();
  MappedFieldType fieldType=context.fieldMapper(fieldInQuery);
  if (fieldType != null) {
    fieldInQuery=fieldType.names().indexName();
  }
  SpanQuery innerQuery=testQueryBuilder.innerQuery().toQuery(context);
  Query expectedQuery=new FieldMaskingSpanQuery(innerQuery,fieldInQuery);
  expectedQuery.setBoost(testQueryBuilder.boost());
  if (testQueryBuilder.queryName() != null) {
    context.addNamedQuery(testQueryBuilder.queryName(),expectedQuery);
  }
  return expectedQuery;
}
