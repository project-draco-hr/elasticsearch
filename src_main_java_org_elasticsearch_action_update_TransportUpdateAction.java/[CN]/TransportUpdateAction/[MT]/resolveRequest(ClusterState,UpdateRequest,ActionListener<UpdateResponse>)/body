{
  MetaData metaData=clusterService.state().metaData();
  String aliasOrIndex=request.index();
  request.routing((metaData.resolveIndexRouting(request.routing(),aliasOrIndex)));
  request.index(metaData.concreteSingleIndex(request.index()));
  if (request.routing() == null && state.getMetaData().routingRequired(request.index(),request.type())) {
    throw new RoutingMissingException(request.index(),request.type(),request.id());
  }
  return true;
}
