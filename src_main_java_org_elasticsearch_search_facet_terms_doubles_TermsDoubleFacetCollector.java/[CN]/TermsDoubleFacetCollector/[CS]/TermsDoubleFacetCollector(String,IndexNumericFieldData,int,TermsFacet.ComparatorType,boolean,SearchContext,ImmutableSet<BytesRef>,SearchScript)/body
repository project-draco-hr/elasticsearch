{
  super(facetName);
  this.indexFieldData=indexFieldData;
  this.size=size;
  this.comparatorType=comparatorType;
  this.numberOfShards=context.numberOfShards();
  this.script=script;
  if (this.script == null && excluded.isEmpty()) {
    aggregator=new StaticAggregatorValueProc(CacheRecycler.popDoubleIntMap());
  }
 else {
    aggregator=new AggregatorValueProc(CacheRecycler.popDoubleIntMap(),excluded,this.script);
  }
}
