{
  int sshift=0;
  int ssize=1;
  while (ssize < concurrencyLevel) {
    ++sshift;
    ssize<<=1;
  }
  segmentShift=32 - sshift;
  segmentMask=ssize - 1;
  this.segments=new Segment[ssize];
  for (int i=0; i < segments.length; i++) {
    segments[i]=new Segment();
  }
}
