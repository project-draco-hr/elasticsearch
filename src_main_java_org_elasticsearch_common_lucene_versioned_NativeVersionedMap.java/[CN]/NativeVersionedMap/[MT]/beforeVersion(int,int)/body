{
  Segment segment=segmentFor(hash(key));
  segment.rwl.readLock().lock();
  try {
    int result=segment.map.get(key);
    return result == -1 || versionToCheck < result;
  }
  finally {
    segment.rwl.readLock().unlock();
  }
}
