{
  parseContext.reset(parser);
  try {
    if (strict) {
      parseContext.parseFlags(EnumSet.of(ParseField.Flag.STRICT));
    }
    Query query=parseContext.parseInnerQuery();
    if (query == null) {
      query=Queries.newMatchNoDocsQuery();
    }
    return new ParsedQuery(query,parseContext.copyNamedFilters());
  }
  finally {
    parseContext.reset(null);
  }
}
