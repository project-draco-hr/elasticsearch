{
  ShardRouting unassignedShard0=TestShardRouting.newShardRouting("test",0,null,false,ShardRoutingState.UNASSIGNED);
  ShardRouting initializingShard0=TestShardRouting.newShardRouting("test",0,"node1",randomBoolean(),ShardRoutingState.INITIALIZING);
  ShardRouting initializingShard1=TestShardRouting.newShardRouting("test",1,"node1",randomBoolean(),ShardRoutingState.INITIALIZING);
  ShardRouting startedShard0=new ShardRouting(initializingShard0);
  assertFalse(startedShard0.isRelocationTarget());
  startedShard0.moveToStarted();
  assertFalse(startedShard0.isRelocationTarget());
  ShardRouting startedShard1=new ShardRouting(initializingShard1);
  assertFalse(startedShard1.isRelocationTarget());
  startedShard1.moveToStarted();
  assertFalse(startedShard1.isRelocationTarget());
  ShardRouting sourceShard0a=new ShardRouting(startedShard0);
  sourceShard0a.relocate("node2",-1);
  assertFalse(sourceShard0a.isRelocationTarget());
  ShardRouting targetShard0a=sourceShard0a.buildTargetRelocatingShard();
  assertTrue(targetShard0a.isRelocationTarget());
  ShardRouting sourceShard0b=new ShardRouting(startedShard0);
  sourceShard0b.relocate("node2",-1);
  ShardRouting sourceShard1=new ShardRouting(startedShard1);
  sourceShard1.relocate("node2",-1);
  assertTrue(targetShard0a.isRelocationTargetOf(sourceShard0a));
  assertTrue(sourceShard0a.isRelocationSourceOf(targetShard0a));
  assertFalse(targetShard0a.isRelocationTargetOf(sourceShard1));
  assertFalse(sourceShard1.isRelocationSourceOf(targetShard0a));
  assertFalse(targetShard0a.isRelocationTargetOf(sourceShard0b));
  assertFalse(sourceShard0b.isRelocationSourceOf(targetShard0a));
  assertFalse(targetShard0a.isRelocationTargetOf(unassignedShard0));
  assertFalse(sourceShard0a.isRelocationTargetOf(unassignedShard0));
  assertFalse(unassignedShard0.isRelocationSourceOf(targetShard0a));
  assertFalse(unassignedShard0.isRelocationSourceOf(sourceShard0a));
  assertFalse(targetShard0a.isRelocationTargetOf(initializingShard0));
  assertFalse(sourceShard0a.isRelocationTargetOf(initializingShard0));
  assertFalse(initializingShard0.isRelocationSourceOf(targetShard0a));
  assertFalse(initializingShard0.isRelocationSourceOf(sourceShard0a));
  assertFalse(targetShard0a.isRelocationTargetOf(startedShard0));
  assertFalse(sourceShard0a.isRelocationTargetOf(startedShard0));
  assertFalse(startedShard0.isRelocationSourceOf(targetShard0a));
  assertFalse(startedShard0.isRelocationSourceOf(sourceShard0a));
}
