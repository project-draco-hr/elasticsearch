{
  if (!fieldMatch)   return null;
  if (query instanceof TermQuery)   return ((TermQuery)query).getTerm().field();
 else   if (query instanceof PhraseQuery) {
    PhraseQuery pq=(PhraseQuery)query;
    Term[] terms=pq.getTerms();
    return terms[0].field();
  }
 else   if (query instanceof MultiTermQuery) {
    return ((MultiTermQuery)query).getField();
  }
 else   throw new RuntimeException("query \"" + query.toString() + "\" must be flatten first.");
}
