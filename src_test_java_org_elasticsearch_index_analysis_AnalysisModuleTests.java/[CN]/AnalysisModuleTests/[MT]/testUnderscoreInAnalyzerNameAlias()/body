{
  Settings settings=Settings.builder().put("index.analysis.analyzer.valid_name.tokenizer","keyword").put("index.analysis.analyzer.valid_name.alias","_invalid_name").put("path.home",createTempDir().toString()).put(IndexMetaData.SETTING_VERSION_CREATED,"1").build();
  try {
    getAnalysisService(settings);
    fail("This should fail with IllegalArgumentException because the analyzers alias starts with _");
  }
 catch (  ProvisionException e) {
    assertTrue(e.getCause() instanceof IllegalArgumentException);
    assertThat(e.getCause().getMessage(),equalTo("analyzer name must not start with '_'. got \"_invalid_name\""));
  }
}
