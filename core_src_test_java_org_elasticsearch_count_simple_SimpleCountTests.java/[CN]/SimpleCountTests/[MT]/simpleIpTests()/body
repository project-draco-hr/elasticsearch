{
  createIndex("test");
  client().admin().indices().preparePutMapping("test").setType("type1").setSource(XContentFactory.jsonBuilder().startObject().startObject("type1").startObject("properties").startObject("from").field("type","ip").endObject().startObject("to").field("type","ip").endObject().endObject().endObject().endObject()).execute().actionGet();
  client().prepareIndex("test","type1","1").setSource("from","192.168.0.5","to","192.168.0.10").setRefresh(true).execute().actionGet();
  CountResponse countResponse=client().prepareCount().setQuery(boolQuery().must(rangeQuery("from").lt("192.168.0.7")).must(rangeQuery("to").gt("192.168.0.7"))).execute().actionGet();
  assertHitCount(countResponse,1l);
}
