{
  if (query == null) {
    return null;
  }
  if (smartFieldMappers == null) {
    return query;
  }
  if (!smartFieldMappers.hasDocMapper() || !smartFieldMappers.explicitTypeInName()) {
    return query;
  }
  DocumentMapper docMapper=smartFieldMappers.docMapper();
  return new FilteredQuery(query,parseContext.cacheFilter(docMapper.typeFilter(),null));
}
