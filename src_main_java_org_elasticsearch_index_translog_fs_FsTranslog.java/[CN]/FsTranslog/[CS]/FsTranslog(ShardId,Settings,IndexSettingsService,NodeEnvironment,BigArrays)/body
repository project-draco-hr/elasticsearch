{
  super(shardId,indexSettings);
  this.indexSettingsService=indexSettingsService;
  this.bigArrays=bigArrays;
  Path[] shardLocations=nodeEnv.shardPaths(shardId);
  this.locations=new Path[shardLocations.length];
  for (int i=0; i < shardLocations.length; i++) {
    locations[i]=shardLocations[i].resolve("translog");
    Files.createDirectories(locations[i]);
  }
  this.type=FsTranslogFile.Type.fromString(componentSettings.get("type",FsTranslogFile.Type.BUFFERED.name()));
  this.bufferSize=(int)componentSettings.getAsBytesSize("buffer_size",ByteSizeValue.parseBytesSizeValue("64k")).bytes();
  this.transientBufferSize=(int)componentSettings.getAsBytesSize("transient_buffer_size",ByteSizeValue.parseBytesSizeValue("8k")).bytes();
  indexSettingsService.addListener(applySettings);
}
