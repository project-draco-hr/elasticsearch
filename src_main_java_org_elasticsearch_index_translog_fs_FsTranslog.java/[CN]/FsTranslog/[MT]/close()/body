{
  if (closed.compareAndSet(false,true)) {
    if (indexSettingsService != null) {
      indexSettingsService.removeListener(applySettings);
    }
    rwl.writeLock().lock();
    try {
      IOUtils.close(this.trans,this.current);
    }
  finally {
      rwl.writeLock().unlock();
    }
  }
}
