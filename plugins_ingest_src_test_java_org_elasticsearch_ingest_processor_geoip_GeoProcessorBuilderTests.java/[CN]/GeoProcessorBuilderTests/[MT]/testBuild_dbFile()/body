{
  GeoIpProcessor.Builder builder=new GeoIpProcessor.Builder(geoIpConfigDir,new DatabaseReaderService());
  builder.fromMap(Collections.singletonMap("database_file","GeoLite2-Country.mmdb"));
  GeoIpProcessor processor=(GeoIpProcessor)builder.build();
  assertThat(processor.dbReader.getMetadata().getDatabaseType(),equalTo("GeoLite2-Country"));
}
