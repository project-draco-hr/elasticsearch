{
  indexedDocumentExists=false;
  PercolatorQueryBuilder pqb=doCreateTestQueryBuilder(true);
  try {
    pqb.rewrite(createShardContext());
    fail("ResourceNotFoundException expected");
  }
 catch (  ResourceNotFoundException e) {
    String expectedString="indexed document [" + indexedDocumentIndex + "/"+ indexedDocumentType+ "/"+ indexedDocumentId+ "] couldn't be found";
    assertThat(e.getMessage(),equalTo(expectedString));
  }
}
