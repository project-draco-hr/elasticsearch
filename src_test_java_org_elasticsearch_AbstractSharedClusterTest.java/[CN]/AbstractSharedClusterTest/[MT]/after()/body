{
  logger.info("[{}#{}]: cleaning up after test",getTestClass().getSimpleName(),getTestName());
  MetaData metaData=client().admin().cluster().prepareState().execute().actionGet().getState().getMetaData();
  assertThat("test leaves persistent cluster metadata behind: " + metaData.persistentSettings().getAsMap(),metaData.persistentSettings().getAsMap().size(),equalTo(0));
  assertThat("test leaves transient cluster metadata behind: " + metaData.transientSettings().getAsMap(),metaData.persistentSettings().getAsMap().size(),equalTo(0));
  wipeIndices();
  wipeTemplates();
  ensureAllFilesClosed();
  logger.info("[{}#{}]: cleaned up after test",getTestClass().getSimpleName(),getTestName());
}
