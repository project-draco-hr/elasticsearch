{
  request.routing((state.metaData().resolveIndexRouting(request.routing(),request.index())));
  if (request.routing() == null && state.getMetaData().routingRequired(request.concreteIndex(),request.type())) {
    throw new RoutingMissingException(request.concreteIndex(),request.type(),request.id());
  }
  return true;
}
