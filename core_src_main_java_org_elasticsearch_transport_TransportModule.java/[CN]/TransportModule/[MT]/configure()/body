{
  if (configuredTransportService != null) {
    logger.info("Using [{}] as transport service, overridden by [{}]",configuredTransportService.getName(),configuredTransportServiceSource);
    bind(TransportService.class).to(configuredTransportService).asEagerSingleton();
  }
 else {
    Class<? extends TransportService> defaultTransportService=TransportService.class;
    Class<? extends TransportService> transportService=settings.getAsClass(TRANSPORT_SERVICE_TYPE_KEY,defaultTransportService,"org.elasticsearch.transport.","TransportService");
    if (!TransportService.class.equals(transportService)) {
      bind(TransportService.class).to(transportService).asEagerSingleton();
    }
 else {
      bind(TransportService.class).asEagerSingleton();
    }
  }
  if (configuredTransport != null) {
    logger.info("Using [{}] as transport, overridden by [{}]",configuredTransport.getName(),configuredTransportSource);
    bind(Transport.class).to(configuredTransport).asEagerSingleton();
  }
 else {
    Class<? extends Transport> defaultTransport=DiscoveryNode.localNode(settings) ? LocalTransport.class : NettyTransport.class;
    Class<? extends Transport> transport=settings.getAsClass(TRANSPORT_TYPE_KEY,defaultTransport,"org.elasticsearch.transport.","Transport");
    bind(Transport.class).to(transport).asEagerSingleton();
  }
}
