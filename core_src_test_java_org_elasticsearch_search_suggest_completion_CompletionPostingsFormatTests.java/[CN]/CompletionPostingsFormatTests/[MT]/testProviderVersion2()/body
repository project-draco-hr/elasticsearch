{
  AnalyzingCompletionLookupProvider currentProvider=new AnalyzingCompletionLookupProvider(true,false,true,true);
  RAMDirectory dir=new RAMDirectory();
  writeData(dir,currentProvider);
  IndexInput input=dir.openInput("foo.txt",IOContext.DEFAULT);
  LookupFactory load=currentProvider.load(input);
  CompletionFieldMapper.CompletionFieldType fieldType=FIELD_TYPE.clone();
  fieldType.setProvider(currentProvider);
  AnalyzingCompletionLookupProvider.AnalyzingSuggestHolder analyzingSuggestHolder=load.getAnalyzingSuggestHolder(fieldType);
  assertThat(analyzingSuggestHolder.sepLabel,is(XAnalyzingSuggester.SEP_LABEL));
  assertThat(analyzingSuggestHolder.payloadSep,is(XAnalyzingSuggester.PAYLOAD_SEP));
  assertThat(analyzingSuggestHolder.endByte,is(XAnalyzingSuggester.END_BYTE));
  dir.close();
}
