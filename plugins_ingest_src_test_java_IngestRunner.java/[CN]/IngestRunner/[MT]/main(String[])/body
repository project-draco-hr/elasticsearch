{
  Settings.Builder settings=Settings.builder();
  settings.put("http.cors.enabled","true");
  settings.put("http.cors.allow-origin","*");
  settings.put("script.inline","on");
  settings.put("cluster.name",IngestRunner.class.getSimpleName());
  final CountDownLatch latch=new CountDownLatch(1);
  final Node node=new MockNode(settings.build(),Version.CURRENT,Collections.singleton(IngestPlugin.class));
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public void run(){
      node.close();
      latch.countDown();
    }
  }
);
  node.start();
  latch.await();
}
