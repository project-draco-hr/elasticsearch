{
  if (context.analyzer() != null) {
    return context.analyzer();
  }
  Analyzer analyzer=null;
  if (path != null) {
    String analyzerName=(String)context.context.lookup().source().extractValue(path);
    analyzer=context.context.mapperService().analysisService().analyzer(analyzerName);
  }
  if (analyzer == null) {
    analyzer=context.context.mapperService().documentMapper(context.hitContext.hit().type()).mappers().indexAnalyzer();
  }
  context.analyzer(analyzer);
  return analyzer;
}
