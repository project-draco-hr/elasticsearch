{
  Analyzer analyzer=context.docMapper().mappers().indexAnalyzer();
  if (path != null) {
    String value=null;
    List<IndexableField> fields=context.doc().getFields();
    for (int i=0, fieldsSize=fields.size(); i < fieldsSize; i++) {
      IndexableField field=fields.get(i);
      if (field.name().equals(path)) {
        value=field.stringValue();
        break;
      }
    }
    if (value == null) {
      value=context.ignoredValue(path);
    }
    if (value != null) {
      analyzer=context.analysisService().analyzer(value);
      if (analyzer == null) {
        throw new MapperParsingException("No analyzer found for [" + value + "] from path ["+ path+ "]");
      }
      analyzer=context.docMapper().mappers().indexAnalyzer(analyzer);
    }
  }
  context.analyzer(analyzer);
}
