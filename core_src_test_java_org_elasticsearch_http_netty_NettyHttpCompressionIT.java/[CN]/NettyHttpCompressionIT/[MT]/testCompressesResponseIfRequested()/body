{
  ensureGreen();
  ContentEncodingHeaderExtractor headerExtractor=new ContentEncodingHeaderExtractor();
  CloseableHttpClient internalClient=HttpClients.custom().addInterceptorFirst(headerExtractor).build();
  HttpResponse response=httpClient(internalClient).path("/").addHeader(HttpHeaders.ACCEPT_ENCODING,GZIP_ENCODING).execute();
  assertEquals(200,response.getStatusCode());
  assertTrue(headerExtractor.hasContentEncodingHeader());
  assertEquals(GZIP_ENCODING,headerExtractor.getContentEncodingHeader().getValue());
}
