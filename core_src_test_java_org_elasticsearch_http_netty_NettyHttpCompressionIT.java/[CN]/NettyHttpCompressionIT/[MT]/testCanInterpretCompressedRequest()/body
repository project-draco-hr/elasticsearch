{
  ensureGreen();
  ContentEncodingHeaderExtractor headerExtractor=new ContentEncodingHeaderExtractor();
  try (RestClient client=restClient(HttpClients.custom().addInterceptorFirst(headerExtractor).build())){
    try (ElasticsearchResponse response=client.performRequest("POST","/company/employees/2",Collections.emptyMap(),SAMPLE_DOCUMENT)){
      assertEquals(201,response.getStatusLine().getStatusCode());
      assertEquals(GZIP_ENCODING,headerExtractor.getContentEncodingHeader().getValue());
    }
   }
 }
