{
  String type=RandomPicks.randomFrom(random(),Arrays.asList("nio","mmap","simple"));
  createIndex("test",Settings.builder().put(IndexStoreModule.STORE_TYPE,type + "fs").put(IndexMetaData.SETTING_VERSION_CREATED,Version.V_1_7_0).build());
  client().admin().indices().prepareClose("test").get();
  client().admin().indices().prepareUpdateSettings("test").setSettings(Settings.builder().put(IndexStoreModule.STORE_TYPE,type + "_fs").build()).get();
  GetSettingsResponse getSettingsResponse=client().admin().indices().prepareGetSettings("test").get();
  String actualType=getSettingsResponse.getSetting("test",IndexStoreModule.STORE_TYPE);
  assertEquals(type + "_fs",actualType);
  client().admin().indices().prepareOpen("test").get();
  getSettingsResponse=client().admin().indices().prepareGetSettings("test").get();
  actualType=getSettingsResponse.getSetting("test",IndexStoreModule.STORE_TYPE);
  assertEquals(type + "fs",actualType);
}
