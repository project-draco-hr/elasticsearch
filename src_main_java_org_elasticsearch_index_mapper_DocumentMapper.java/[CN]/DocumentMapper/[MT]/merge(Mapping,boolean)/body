{
  mappingLock.writeLock().lock();
  try {
    final MergeResult mergeResult=newMergeContext(simulate);
    this.mapping.merge(mapping,mergeResult);
    if (simulate == false) {
      addFieldMappers(mergeResult.getNewFieldMappers());
      addObjectMappers(mergeResult.getNewObjectMappers());
      refreshSource();
    }
    return mergeResult;
  }
  finally {
    mappingLock.writeLock().unlock();
  }
}
