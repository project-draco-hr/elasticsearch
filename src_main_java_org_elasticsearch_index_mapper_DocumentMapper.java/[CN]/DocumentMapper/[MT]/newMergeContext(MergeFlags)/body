{
  return new MergeContext(mergeFlags){
    List<String> conflicts=new ArrayList<>();
    @Override public void addFieldMappers(    List<FieldMapper<?>> fieldMappers){
      DocumentMapper.this.addFieldMappers(fieldMappers);
    }
    @Override public void addObjectMappers(    Collection<ObjectMapper> objectMappers){
      DocumentMapper.this.addObjectMappers(objectMappers);
    }
    @Override public void addConflict(    String mergeFailure){
      conflicts.add(mergeFailure);
    }
    @Override public boolean hasConflicts(){
      return conflicts.isEmpty() == false;
    }
    @Override public String[] buildConflicts(){
      return conflicts.toArray(Strings.EMPTY_ARRAY);
    }
  }
;
}
