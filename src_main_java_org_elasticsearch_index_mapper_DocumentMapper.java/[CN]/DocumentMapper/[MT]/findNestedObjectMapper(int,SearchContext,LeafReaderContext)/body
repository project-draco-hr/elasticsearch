{
  ObjectMapper nestedObjectMapper=null;
  for (  ObjectMapper objectMapper : objectMappers().values()) {
    if (!objectMapper.nested().isNested()) {
      continue;
    }
    Filter filter=sc.filterCache().cache(objectMapper.nestedTypeFilter(),null,sc.queryParserService().autoFilterCachePolicy());
    if (filter == null) {
      continue;
    }
    DocIdSet nestedTypeSet=filter.getDocIdSet(context,null);
    if (nestedTypeSet == null) {
      continue;
    }
    DocIdSetIterator iterator=nestedTypeSet.iterator();
    if (iterator == null) {
      continue;
    }
    if (iterator.advance(nestedDocId) == nestedDocId) {
      if (nestedObjectMapper == null) {
        nestedObjectMapper=objectMapper;
      }
 else {
        if (nestedObjectMapper.fullPath().length() < objectMapper.fullPath().length()) {
          nestedObjectMapper=objectMapper;
        }
      }
    }
  }
  return nestedObjectMapper;
}
