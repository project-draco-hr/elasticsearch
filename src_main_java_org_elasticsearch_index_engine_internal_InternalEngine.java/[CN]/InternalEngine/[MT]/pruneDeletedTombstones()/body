{
  long timeMSec=threadPool.estimatedTimeInMillis();
  for (  Map.Entry<BytesRef,VersionValue> entry : versionMap.getAllTombstones()) {
    BytesRef uid=entry.getKey();
synchronized (dirtyLock(uid)) {
      VersionValue versionValue=versionMap.getTombstoneUnderLock(uid);
      if (versionValue != null) {
        if (timeMSec - versionValue.time() > gcDeletesInMillis) {
          versionMap.removeTombstoneUnderLock(uid);
        }
      }
    }
  }
  lastDeleteVersionPruneTimeMSec=timeMSec;
}
