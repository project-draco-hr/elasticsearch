{
  int maxNumMerges=mergeScheduler.getMaxMerges();
  if (numMergesInFlight.incrementAndGet() > maxNumMerges) {
    if (isThrottling.getAndSet(true) == false) {
      logger.info("now throttling indexing: numMergesInFlight={}, maxNumMerges={}",numMergesInFlight,maxNumMerges);
      indexingService.throttlingActivated();
    }
    lock=lockReference;
  }
}
