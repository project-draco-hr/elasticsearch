{
  Tuple<String,String> scriptNameExt=getScriptNameExt(file);
  if (scriptNameExt == null) {
    logger.debug("Skipped script with invalid extension : [{}]",file);
    return;
  }
  if (logger.isTraceEnabled()) {
    logger.trace("Loading script file : [{}]",file);
  }
  ScriptEngineService engineService=getScriptEngineServiceForFileExt(scriptNameExt.v2());
  if (engineService == null) {
    logger.warn("No script engine found for [{}]",scriptNameExt.v2());
  }
 else {
    try {
      if (isAnyScriptContextEnabled(engineService.getType(),engineService,ScriptType.FILE)) {
        logger.info("compiling script file [{}]",file.toAbsolutePath());
        try (InputStreamReader reader=new InputStreamReader(Files.newInputStream(file),StandardCharsets.UTF_8)){
          String script=Streams.copyToString(reader);
          CacheKey cacheKey=new CacheKey(engineService,scriptNameExt.v1(),null,Collections.emptyMap());
          staticCache.put(cacheKey,new CompiledScript(ScriptType.FILE,scriptNameExt.v1(),engineService.getType(),engineService.compile(script,Collections.emptyMap())));
          scriptMetrics.onCompilation();
        }
       }
 else {
        logger.warn("skipping compile of script file [{}] as all scripted operations are disabled for file scripts",file.toAbsolutePath());
      }
    }
 catch (    Throwable e) {
      logger.warn("failed to load/compile script [{}]",e,scriptNameExt.v1());
    }
  }
}
