{
  if (logger.isTraceEnabled()) {
    logger.trace("Loading script file : [{}]",file);
  }
  Tuple<String,String> scriptNameExt=scriptNameExt(file);
  if (scriptNameExt != null) {
    ScriptEngineService engineService=getScriptEngineServiceForFileExt(scriptNameExt.v2());
    if (engineService == null) {
      logger.warn("no script engine found for [{}]",scriptNameExt.v2());
    }
 else {
      try {
        if (isAnyScriptContextEnabled(engineService.types()[0],engineService,ScriptType.FILE)) {
          logger.info("compiling script file [{}]",file.toAbsolutePath());
          try (InputStreamReader reader=new InputStreamReader(Files.newInputStream(file),StandardCharsets.UTF_8)){
            String script=Streams.copyToString(reader);
            String cacheKey=getCacheKey(engineService,scriptNameExt.v1(),null);
            staticCache.put(cacheKey,new CompiledScript(ScriptType.FILE,scriptNameExt.v1(),engineService.types()[0],engineService.compile(script)));
            scriptMetrics.onCompilation();
          }
         }
 else {
          logger.warn("skipping compile of script file [{}] as all scripted operations are disabled for file scripts",file.toAbsolutePath());
        }
      }
 catch (      Throwable e) {
        logger.warn("failed to load/compile script [{}]",e,scriptNameExt.v1());
      }
    }
  }
}
