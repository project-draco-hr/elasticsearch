{
synchronized (mutex) {
    if (this.state != IndexShardState.RECOVERING) {
      throw new IndexShardNotRecoveringException(shardId,state);
    }
    logger.debug("Restored to state [{}] from state [{}]",stateToRestore,state);
    this.state=stateToRestore;
  }
  return this;
}
