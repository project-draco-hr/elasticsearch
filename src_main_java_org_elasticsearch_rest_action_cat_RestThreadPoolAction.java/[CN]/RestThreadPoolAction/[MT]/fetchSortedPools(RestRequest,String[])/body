{
  String[] headers=request.paramAsStringArray("h",null);
  if (headers == null) {
    return defaults;
  }
 else {
    Set<String> requestedPools=new LinkedHashSet<String>(headers.length);
    for (    String header : headers) {
      int dotIndex=header.indexOf('.');
      if (dotIndex != -1) {
        String headerPrefix=header.substring(0,dotIndex);
        if (THREAD_POOL_TO_ALIAS.containsKey(headerPrefix)) {
          requestedPools.add(headerPrefix);
        }
      }
 else       if (ALIAS_TO_THREAD_POOL.containsKey(header)) {
        requestedPools.add(ALIAS_TO_THREAD_POOL.get(header));
      }
    }
    return requestedPools.toArray(new String[requestedPools.size()]);
  }
}
