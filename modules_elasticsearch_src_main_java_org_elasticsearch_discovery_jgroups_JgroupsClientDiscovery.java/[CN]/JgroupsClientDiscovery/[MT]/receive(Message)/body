{
  if (msg.getSrc().equals(channel.getAddress())) {
    return;
  }
  if (msg.getSrc().equals(channel.getView().getCreator())) {
    try {
      byte[] buffer=msg.getBuffer();
      final ClusterState origClusterState=ClusterState.Builder.fromBytes(buffer,settings,localNode);
      final ClusterState clusterState=newClusterStateBuilder().state(origClusterState).nodes(newNodesBuilder().putAll(origClusterState.nodes()).remove(localNode.id())).build();
      System.err.println("Nodes: " + clusterState.nodes().prettyPrint());
      clusterService.submitStateUpdateTask("jgroups-disco-receive(from master)",new ProcessedClusterStateUpdateTask(){
        @Override public ClusterState execute(        ClusterState currentState){
          return clusterState;
        }
        @Override public void clusterStateProcessed(        ClusterState clusterState){
          sendInitialStateEventIfNeeded();
        }
      }
);
    }
 catch (    Exception e) {
      logger.error("Received corrupted cluster state.",e);
    }
  }
}
