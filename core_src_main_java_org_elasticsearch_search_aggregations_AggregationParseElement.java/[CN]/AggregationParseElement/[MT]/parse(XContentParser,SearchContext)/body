{
  QueryParseContext parseContext=new QueryParseContext(queriesRegistry);
  parseContext.reset(parser);
  parseContext.parseFieldMatcher(context.parseFieldMatcher());
  AggregatorFactories.Builder builders=aggregatorParsers.parseAggregators(parser,parseContext);
  AggregationContext aggContext=new AggregationContext(context);
  AggregatorFactories factories=builders.build(aggContext);
  factories.validate();
  context.aggregations(new SearchContextAggregations(factories));
}
