{
  ImmutableSettings.Builder builder=ImmutableSettings.builder().put("discovery.zen.ping.multicast.enabled",false);
  String[] unicastHosts=new String[unicastHostOrdinals.length];
  if (localMode) {
    builder.put(LocalTransport.TRANSPORT_LOCAL_ADDRESS,"node_" + nodeOrdinal);
    for (int i=0; i < unicastHosts.length; i++) {
      unicastHosts[i]="node_" + unicastHostOrdinals[i];
    }
  }
 else   if (nodeOrdinal >= unicastHostPorts.length) {
    throw new ElasticsearchException("nodeOrdinal [" + nodeOrdinal + "] is greater than the number unicast ports ["+ unicastHostPorts.length+ "]");
  }
 else {
    builder.put("transport.tcp.port",unicastHostPorts[nodeOrdinal]);
    builder.put("transport.host","localhost");
    for (int i=0; i < unicastHostOrdinals.length; i++) {
      unicastHosts[i]="localhost:" + (unicastHostPorts[unicastHostOrdinals[i]]);
    }
  }
  builder.putArray("discovery.zen.ping.unicast.hosts",unicastHosts);
  return builder.put(super.node(nodeOrdinal)).build();
}
