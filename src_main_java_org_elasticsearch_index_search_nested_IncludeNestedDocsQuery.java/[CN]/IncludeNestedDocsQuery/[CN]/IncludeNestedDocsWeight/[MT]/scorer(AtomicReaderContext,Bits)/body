{
  final Scorer parentScorer=parentWeight.scorer(context,acceptDocs);
  if (parentScorer == null) {
    return null;
  }
  DocIdSet parents=parentsFilter.getDocIdSet(context,acceptDocs);
  if (parents == null) {
    return null;
  }
  if (!(parents instanceof FixedBitSet)) {
    if (parents.isCacheable()) {
      throw new IllegalStateException("parentFilter must return FixedBitSet; got " + parents);
    }
 else {
      parents=DocIdSets.toFixedBitSet(parents.iterator(),context.reader().maxDoc());
    }
  }
  int firstParentDoc=parentScorer.nextDoc();
  if (firstParentDoc == DocIdSetIterator.NO_MORE_DOCS) {
    return null;
  }
  return new IncludeNestedDocsScorer(this,parentScorer,(FixedBitSet)parents,firstParentDoc);
}
