{
  FixedBitSet result=null;
  TermDocs td=reader.termDocs();
  try {
    td.seek(term);
    int[] docs=new int[Lucene.BATCH_ENUM_DOCS];
    int[] freqs=new int[Lucene.BATCH_ENUM_DOCS];
    int number=td.read(docs,freqs);
    if (number > 0) {
      result=new FixedBitSet(reader.maxDoc());
      while (number > 0) {
        for (int i=0; i < number; i++) {
          result.set(docs[i]);
        }
        number=td.read(docs,freqs);
      }
    }
  }
  finally {
    td.close();
  }
  return result;
}
