{
  if (removalNotification.getKey() != null && removalNotification.getValue() != null) {
    ShardId shardId=ShardUtils.extractShardId(removalNotification.getKey().reader());
    if (shardId != null) {
      IndexShard shard=indexService.shard(shardId.id());
      if (shard != null) {
        shard.filterCache().onRemoval(removalNotification.getKey(),removalNotification.wasEvicted(),sizeInBytes(removalNotification.getValue()));
      }
    }
  }
}
