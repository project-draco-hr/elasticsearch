{
  if (filterToCache == null) {
    return null;
  }
  if (filterToCache instanceof NoCacheFilter) {
    return filterToCache;
  }
  if (CachedFilter.isCached(filterToCache)) {
    return filterToCache;
  }
  if (filterToCache instanceof ResolvableFilter) {
    throw new IllegalArgumentException("Cannot cache instances of ResolvableFilter: " + filterToCache);
  }
  return new FilterCacheFilterWrapper(filterToCache,cacheKey,cachePolicy,this);
}
