{
  URL url=new URL(value);
  try {
    return new Url(url.getProtocol(),url.getHost(),url.getPort() > 0 ? url.getPort() : Protocol.valueOf(url.getProtocol().toUpperCase()).getPort(),URLDecoder.decode(url.getPath(),"UTF-8"),url.getQuery());
  }
 catch (  UnsupportedEncodingException e) {
    throw new IllegalStateException(e);
  }
}
