{
  StringBuilder builder=new StringBuilder(host);
  int defaultPort;
  try {
    Protocol protocol=getProtocol();
    defaultPort=protocol.getPort();
  }
 catch (  Exception e) {
    throw new IllegalStateException("Unable to fetch protocol",e);
  }
  if (port != defaultPort) {
    builder.append(':');
    builder.append(port);
  }
  return builder.toString();
}
