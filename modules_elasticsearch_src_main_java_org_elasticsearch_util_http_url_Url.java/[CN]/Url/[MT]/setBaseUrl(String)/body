{
  Pattern pattern=Pattern.compile("([^:]+)://([^:]+)(:([0-9]+))?");
  Matcher matcher=pattern.matcher(url);
  if (!matcher.matches()) {
    throw new IllegalArgumentException("Invalid url: " + url);
  }
  setScheme(matcher.group(1));
  setHost(matcher.group(2));
  String port=matcher.group(4);
  if (port != null) {
    this.port=Integer.valueOf(port);
  }
 else {
    Protocol protocol=getProtocol();
    this.port=protocol.getPort();
  }
}
