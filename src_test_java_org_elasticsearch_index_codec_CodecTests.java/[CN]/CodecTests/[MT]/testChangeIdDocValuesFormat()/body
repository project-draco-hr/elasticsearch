{
  String mapping=XContentFactory.jsonBuilder().startObject().startObject("type").startObject("_id").startObject("fielddata").field("format","doc_values").endObject().field("doc_values_format","disk").endObject().endObject().endObject().string();
  CodecService codecService=createCodecService();
  DocumentMapper documentMapper=codecService.mapperService().documentMapperParser().parse(mapping);
  assertThat(documentMapper.rootMapper(IdFieldMapper.class).hasDocValues(),equalTo(true));
  assertThat(documentMapper.rootMapper(IdFieldMapper.class).docValuesFormatProvider(),instanceOf(PreBuiltDocValuesFormatProvider.class));
  assertThat(documentMapper.rootMapper(IdFieldMapper.class).docValuesFormatProvider().get(),instanceOf(Lucene410DocValuesFormat.class));
}
