{
  String mapping=XContentFactory.jsonBuilder().startObject().startObject("type").startObject("_version").field("doc_values_format","disk").endObject().endObject().endObject().string();
  CodecService codecService=createCodecService();
  DocumentMapper documentMapper=codecService.mapperService().documentMapperParser().parse(mapping);
  assertThat(documentMapper.rootMapper(VersionFieldMapper.class).docValuesFormatProvider(),instanceOf(PreBuiltDocValuesFormatProvider.class));
  assertThat(documentMapper.rootMapper(VersionFieldMapper.class).docValuesFormatProvider().get(),instanceOf(Lucene410DocValuesFormat.class));
}
