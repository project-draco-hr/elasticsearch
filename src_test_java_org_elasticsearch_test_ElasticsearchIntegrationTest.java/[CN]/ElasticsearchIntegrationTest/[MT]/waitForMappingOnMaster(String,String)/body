{
  boolean applied=awaitBusy(new Predicate<Object>(){
    @Override public boolean apply(    Object input){
      GetMappingsResponse response=client().admin().indices().prepareGetMappings(index).setTypes(type).get();
      ImmutableOpenMap<String,MappingMetaData> mappings=response.getMappings().get(index);
      if (mappings == null) {
        return false;
      }
      return mappings.containsKey(type);
    }
  }
);
  if (!applied) {
    fail("failed to find mappings for index " + index + ", type "+ type+ " on master node");
  }
}
