{
  return new AfterTestRule.Task(){
    @Override public void onTestFailed(){
      if (runTestScopeLifecycle()) {
        try {
          clearClusters();
        }
 catch (        IOException e) {
          throw new RuntimeException("unable to clear clusters",e);
        }
        afterTestFailed();
        currentCluster=null;
      }
    }
    @Override public void onTestFinished(){
      if (runTestScopeLifecycle()) {
        if (currentCluster != null) {
          try {
            currentCluster.afterTest();
          }
 catch (          IOException e) {
            throw new RuntimeException("error during afterTest",e);
          }
          currentCluster=null;
        }
      }
    }
  }
;
}
