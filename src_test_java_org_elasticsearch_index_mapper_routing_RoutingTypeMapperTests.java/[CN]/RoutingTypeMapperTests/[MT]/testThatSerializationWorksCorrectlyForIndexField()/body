{
  String enabledMapping=XContentFactory.jsonBuilder().startObject().startObject("type").startObject("_routing").field("store","no").field("index","no").endObject().endObject().endObject().string();
  DocumentMapper enabledMapper=MapperTestUtils.newParser().parse(enabledMapping);
  XContentBuilder builder=JsonXContent.contentBuilder().startObject();
  enabledMapper.routingFieldMapper().toXContent(builder,null).endObject();
  builder.close();
  Map<String,Object> serializedMap=JsonXContent.jsonXContent.createParser(builder.bytes()).mapAndClose();
  assertThat(serializedMap,hasKey("_routing"));
  assertThat(serializedMap.get("_routing"),instanceOf(Map.class));
  Map<String,Object> routingConfiguration=(Map<String,Object>)serializedMap.get("_routing");
  assertThat(routingConfiguration,hasKey("store"));
  assertThat(routingConfiguration.get("store").toString(),is("false"));
  assertThat(routingConfiguration,hasKey("index"));
  assertThat(routingConfiguration.get("index").toString(),is("no"));
}
