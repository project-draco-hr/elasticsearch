{
  out.writeVInt(entries.size());
  for (  Entry entry : entries) {
    entry.snapshotId().writeTo(out);
    out.writeBoolean(entry.includeGlobalState());
    out.writeByte(entry.state().value());
    out.writeVInt(entry.indices().size());
    for (    String index : entry.indices()) {
      out.writeString(index);
    }
    out.writeLong(entry.startTime());
    out.writeVInt(entry.shards().size());
    for (    ObjectObjectCursor<ShardId,ShardSnapshotStatus> shardEntry : entry.shards()) {
      shardEntry.key.writeTo(out);
      out.writeOptionalString(shardEntry.value.nodeId());
      out.writeByte(shardEntry.value.state().value());
    }
  }
}
