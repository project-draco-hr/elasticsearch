{
  Path tmpDir=newTempDirPath();
  Path invalidSuffix=tmpDir.resolve(loggingConfiguration(randomFrom(LogConfigurator.ALLOWED_SUFFIXES)) + randomInvalidSuffix());
  Files.write(invalidSuffix,"yml: bar".getBytes(StandardCharsets.UTF_8));
  Environment environment=new Environment(ImmutableSettings.builder().put("path.conf",invalidSuffix.toAbsolutePath()).build());
  ImmutableSettings.Builder builder=ImmutableSettings.builder();
  LogConfigurator.resolveConfig(environment,builder);
  Settings logSettings=builder.build();
  assertThat(logSettings.get("yml"),Matchers.nullValue());
}
