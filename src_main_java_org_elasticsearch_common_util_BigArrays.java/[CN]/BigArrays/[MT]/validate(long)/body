{
  final long totalSizeInBytes=ramBytesUsed.addAndGet(delta);
  if (totalSizeInBytes > maxSizeInBytes) {
    throw new ElasticsearchIllegalStateException("Maximum number of bytes allocated exceeded: [" + totalSizeInBytes + "] (> "+ maxSizeInBytes+ ")");
  }
}
