{
  if (array instanceof BigByteArray) {
    ((BigByteArray)array).resize(size);
    return array;
  }
 else {
    AbstractArray arr=(AbstractArray)array;
    final ByteArray newArray=newByteArray(size,arr.clearOnResize);
    final byte[] rawArray=((ByteArrayWrapper)array).array;
    newArray.set(0,rawArray,0,(int)Math.min(rawArray.length,newArray.size()));
    array.close();
    return newArray;
  }
}
