{
  XContentBuilder mapping=XContentFactory.jsonBuilder().startObject().startObject("type1").startObject("properties").startObject("existingfield").field("type","string").field("term_vector","with_positions_offsets_payloads").endObject().endObject().endObject().endObject();
  ElasticSearchAssertions.assertAcked(prepareCreate("test").addMapping("type1",mapping));
  ensureYellow();
  client().prepareIndex("test","type1","0").setSource("existingfield","?").execute().actionGet();
  refresh();
  String[] selectedFields={"existingfield"};
  ActionFuture<TermVectorResponse> termVector=client().termVector(new TermVectorRequest("test","type1","0").selectedFields(selectedFields));
  termVector.actionGet();
  TermVectorResponse actionGet=termVector.actionGet();
  assertThat(actionGet.isExists(),Matchers.equalTo(true));
}
