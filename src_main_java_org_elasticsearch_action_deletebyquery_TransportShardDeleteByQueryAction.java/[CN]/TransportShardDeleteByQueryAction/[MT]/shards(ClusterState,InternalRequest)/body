{
  GroupShardsIterator group=clusterService.operationRouting().deleteByQueryShards(clusterService.state(),request.concreteIndex(),request.request().routing());
  for (  ShardIterator shardIt : group) {
    if (shardIt.shardId().id() == request.request().shardId()) {
      return shardIt;
    }
  }
  throw new ElasticsearchIllegalStateException("No shards iterator found for shard [" + request.request().shardId() + "]");
}
