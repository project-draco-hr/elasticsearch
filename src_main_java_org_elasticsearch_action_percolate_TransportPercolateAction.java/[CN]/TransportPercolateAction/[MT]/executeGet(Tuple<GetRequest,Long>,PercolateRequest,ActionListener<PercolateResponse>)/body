{
  final GetRequest getRequest=tuple.v1();
  final Long getVersion=tuple.v2();
  getAction.execute(tuple.v1(),new ActionListener<GetResponse>(){
    @Override public void onResponse(    GetResponse getResponse){
      if (!getResponse.isExists()) {
        onFailure(new DocumentMissingException(null,getRequest.type(),getRequest.id()));
        return;
      }
      if (getVersion != null && getVersion != getResponse.getVersion()) {
        onFailure(new VersionConflictEngineException(null,getRequest.type(),getRequest.id(),getResponse.getVersion(),getVersion));
        return;
      }
      BytesReference fetchedSource=getResponse.getSourceAsBytesRef();
      TransportPercolateAction.super.doExecute(new PercolateRequest(originalRequest,fetchedSource),listener);
    }
    @Override public void onFailure(    Throwable e){
      listener.onFailure(e);
    }
  }
);
}
