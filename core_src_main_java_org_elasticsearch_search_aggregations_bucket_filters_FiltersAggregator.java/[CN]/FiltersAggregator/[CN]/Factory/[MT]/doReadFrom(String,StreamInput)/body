{
  Factory factory;
  if (in.readBoolean()) {
    int size=in.readVInt();
    List<KeyedFilter> filters=new ArrayList<>(size);
    for (int i=0; i < size; i++) {
      filters.add(KeyedFilter.PROTOTYPE.readFrom(in));
    }
    factory=new Factory(name,filters);
  }
 else {
    int size=in.readVInt();
    QueryBuilder<?>[] filters=new QueryBuilder<?>[size];
    for (int i=0; i < size; i++) {
      filters[i]=in.readQuery();
    }
    factory=new Factory(name,filters);
  }
  factory.otherBucket=in.readBoolean();
  factory.otherBucketKey=in.readString();
  return factory;
}
