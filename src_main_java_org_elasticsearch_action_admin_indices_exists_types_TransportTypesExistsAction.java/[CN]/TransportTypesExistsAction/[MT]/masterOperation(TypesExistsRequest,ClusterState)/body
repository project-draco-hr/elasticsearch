{
  String[] concreteIndices=state.metaData().concreteIndices(request.getIndices(),request.getIgnoreIndices(),false);
  if (concreteIndices.length == 0) {
    return new TypesExistsResponse(false);
  }
  for (  String concreteIndex : concreteIndices) {
    if (!state.metaData().hasConcreteIndex(concreteIndex)) {
      return new TypesExistsResponse(false);
    }
    ImmutableMap<String,MappingMetaData> mappings=state.metaData().getIndices().get(concreteIndex).mappings();
    if (mappings.isEmpty()) {
      return new TypesExistsResponse(false);
    }
    for (    String type : request.getTypes()) {
      if (!mappings.containsKey(type)) {
        return new TypesExistsResponse(false);
      }
    }
  }
  return new TypesExistsResponse(true);
}
