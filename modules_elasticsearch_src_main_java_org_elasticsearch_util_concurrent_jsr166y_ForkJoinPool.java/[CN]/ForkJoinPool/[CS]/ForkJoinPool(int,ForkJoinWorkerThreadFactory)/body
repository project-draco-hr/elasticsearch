{
  checkPermission();
  if (factory == null)   throw new NullPointerException();
  if (parallelism <= 0 || parallelism > MAX_THREADS)   throw new IllegalArgumentException();
  this.poolNumber=poolNumberGenerator.incrementAndGet();
  int arraySize=initialArraySizeFor(parallelism);
  this.parallelism=parallelism;
  this.factory=factory;
  this.maxPoolSize=MAX_THREADS;
  this.maintainsParallelism=true;
  this.workers=new ForkJoinWorkerThread[arraySize];
  this.submissionQueue=new LinkedTransferQueue<ForkJoinTask<?>>();
  this.workerLock=new ReentrantLock();
  this.terminationLatch=new CountDownLatch(1);
  workerCounts=ONE_RUNNING | ONE_TOTAL;
  addWorker();
}
