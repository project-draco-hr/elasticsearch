{
  try {
    if (clusterService.state().nodes().localNodeMaster()) {
      innerUpdateSnapshotState(request);
    }
 else {
      transportService.sendRequest(clusterService.state().nodes().masterNode(),UpdateSnapshotStateRequestHandler.ACTION,request,EmptyTransportResponseHandler.INSTANCE_SAME);
    }
  }
 catch (  Throwable t) {
    logger.warn("[{}] [{}] failed to update snapshot state",t,request.snapshotId(),request.status());
  }
}
