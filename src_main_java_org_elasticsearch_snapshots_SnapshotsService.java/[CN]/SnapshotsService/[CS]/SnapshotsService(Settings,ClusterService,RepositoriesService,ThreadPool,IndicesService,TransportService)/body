{
  super(settings);
  this.clusterService=clusterService;
  this.repositoriesService=repositoriesService;
  this.threadPool=threadPool;
  this.indicesService=indicesService;
  this.transportService=transportService;
  transportService.registerHandler(UpdateSnapshotStateRequestHandler.ACTION,new UpdateSnapshotStateRequestHandler());
  clusterService.addLast(this);
}
