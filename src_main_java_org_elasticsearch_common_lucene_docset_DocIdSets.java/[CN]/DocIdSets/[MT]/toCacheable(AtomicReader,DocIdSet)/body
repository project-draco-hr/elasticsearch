{
  if (set == null) {
    return DocIdSet.EMPTY_DOCIDSET;
  }
  if (set == DocIdSet.EMPTY_DOCIDSET) {
    return DocIdSet.EMPTY_DOCIDSET;
  }
  DocIdSetIterator it=set.iterator();
  if (it == null) {
    return DocIdSet.EMPTY_DOCIDSET;
  }
  int doc=it.nextDoc();
  if (doc == DocIdSetIterator.NO_MORE_DOCS) {
    return DocIdSet.EMPTY_DOCIDSET;
  }
  if (set instanceof FixedBitSet) {
    return set;
  }
  FixedBitSet fixedBitSet=new FixedBitSet(reader.maxDoc());
  do {
    fixedBitSet.set(doc);
    doc=it.nextDoc();
  }
 while (doc != DocIdSetIterator.NO_MORE_DOCS);
  return fixedBitSet;
}
