{
  ensureOpen();
  String[] files=directory.listAll();
  IOException lastException=null;
  for (  String file : files) {
    if (isChecksum(file)) {
      try {
        directory.deleteFileChecksum(file);
      }
 catch (      IOException e) {
        lastException=e;
      }
    }
 else {
      try {
        directory.deleteFile(file);
      }
 catch (      FileNotFoundException e) {
      }
catch (      IOException e) {
        lastException=e;
      }
    }
  }
  if (lastException != null) {
    throw lastException;
  }
}
