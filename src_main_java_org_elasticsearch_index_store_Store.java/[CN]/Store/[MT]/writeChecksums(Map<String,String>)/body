{
synchronized (mutex) {
    for (    Map.Entry<String,String> entry : checksums.entrySet()) {
      StoreFileMetaData metaData=filesMetadata.get(entry.getKey());
      metaData=new StoreFileMetaData(metaData.name(),metaData.length(),entry.getValue(),metaData.directory());
      filesMetadata=MapBuilder.newMapBuilder(filesMetadata).put(entry.getKey(),metaData).immutableMap();
    }
    writeChecksums();
  }
}
