{
  final UnassignedInfo unassignedInfo=new UnassignedInfo(UnassignedInfo.Reason.NODE_LEFT,null);
  long delay=unassignedInfo.getAllocationDelayTimeoutSetting(Settings.builder().put(UnassignedInfo.INDEX_DELAYED_NODE_LEFT_TIMEOUT_SETTING,"10h").build(),Settings.EMPTY);
  assertThat(delay,equalTo(TimeValue.timeValueHours(10).millis()));
  assertBusy(new Runnable(){
    @Override public void run(){
      long delay=unassignedInfo.getDelayAllocationExpirationIn(Settings.builder().put(UnassignedInfo.INDEX_DELAYED_NODE_LEFT_TIMEOUT_SETTING,"10h").build(),Settings.EMPTY);
      assertThat(delay,greaterThan(0l));
      assertThat(delay,lessThan(TimeValue.timeValueHours(10).millis()));
    }
  }
);
}
