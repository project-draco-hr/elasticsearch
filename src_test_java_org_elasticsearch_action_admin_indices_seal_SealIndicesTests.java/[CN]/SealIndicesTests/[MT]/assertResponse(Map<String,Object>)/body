{
  assertNotNull(asMap.get("test"));
  assertThat((Integer)(((HashMap)((ArrayList)asMap.get("test")).get(0)).get("shard_id")),equalTo(0));
  assertThat((String)(((HashMap)((ArrayList)asMap.get("test")).get(0)).get("message")),equalTo("failed on some copies"));
  HashMap<String,String> shardResponses=(HashMap<String,String>)((HashMap)((ArrayList)asMap.get("test")).get(0)).get("responses");
  assertThat(shardResponses.get("node_1"),equalTo("failed for some reason"));
  assertThat(shardResponses.get("node_2"),equalTo("success"));
  HashMap<String,Object> failedShard=(HashMap<String,Object>)(((ArrayList)asMap.get("test")).get(1));
  assertThat((Integer)(failedShard.get("shard_id")),equalTo(1));
  assertThat((String)(failedShard.get("message")),equalTo("all failed :("));
}
