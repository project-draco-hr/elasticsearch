{
  Set<SyncedFlushService.SyncedFlushResult> shardResults=new HashSet<>();
  SyncedFlushService.SyncedFlushResult syncedFlushResult=createSyncedFlushResult(0,"test");
  shardResults.add(syncedFlushResult);
  syncedFlushResult=new SyncedFlushService.SyncedFlushResult(new ShardId("test",1),"all failed :(");
  shardResults.add(syncedFlushResult);
  SealIndicesResponse sealIndicesResponse=new SealIndicesResponse(shardResults);
  BytesStreamOutput out=new BytesStreamOutput();
  sealIndicesResponse.writeTo(out);
  out.close();
  StreamInput in=StreamInput.wrap(out.bytes());
  SealIndicesResponse readResponse=new SealIndicesResponse();
  readResponse.readFrom(in);
  Map<String,Object> asMap=convertToMap(readResponse);
  assertResponse(asMap);
}
