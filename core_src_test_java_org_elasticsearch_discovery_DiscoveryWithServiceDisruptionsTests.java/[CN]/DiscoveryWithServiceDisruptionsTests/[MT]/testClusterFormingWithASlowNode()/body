{
  configureCluster(3,2);
  SlowClusterStateProcessing disruption=new SlowClusterStateProcessing(getRandom(),0,0,1000,2000);
  internalCluster().startNodesAsync(3,Settings.builder().put(DiscoveryService.SETTING_INITIAL_STATE_TIMEOUT,"1ms").put(DiscoverySettings.PUBLISH_TIMEOUT,"3s").build()).get();
  logger.info("applying disruption while cluster is forming ...");
  internalCluster().setDisruptionScheme(disruption);
  disruption.startDisrupting();
  ensureStableCluster(3);
}
