{
  if (sourceBuilder != null) {
    return sourceBuilder.toString();
  }
  if (request.source() != null) {
    try {
      return XContentHelper.toString(request.source());
    }
 catch (    Exception e) {
      return "{ \"error\" : \"" + ExceptionsHelper.detailedMessage(e) + "\"}";
    }
  }
  return new SearchSourceBuilder().toString();
}
