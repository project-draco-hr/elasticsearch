{
  if (!resolveAddress && address.getAddress() != null) {
    out.writeByte((byte)0);
    byte[] bytes=address().getAddress().getAddress();
    out.writeByte((byte)bytes.length);
    out.write(bytes,0,bytes.length);
  }
 else {
    out.writeByte((byte)1);
    out.writeString(maybeLookupHostname());
  }
  out.writeInt(address.getPort());
}
