{
  if (in.readByte() == 0) {
    int len=in.readByte();
    byte[] a=new byte[len];
    in.readFully(a);
    InetAddress inetAddress;
    if (len == 16) {
      inetAddress=Inet6Address.getByAddress(null,a);
    }
 else {
      inetAddress=InetAddress.getByAddress(a);
    }
    int port=in.readInt();
    this.address=new InetSocketAddress(inetAddress,port);
  }
 else {
    this.address=new InetSocketAddress(InetAddress.getByName(in.readString()),in.readInt());
  }
}
