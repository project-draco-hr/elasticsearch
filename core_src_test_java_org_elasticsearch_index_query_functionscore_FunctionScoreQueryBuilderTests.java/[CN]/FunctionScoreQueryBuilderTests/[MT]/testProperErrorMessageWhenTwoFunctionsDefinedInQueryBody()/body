{
  String functionScoreQuery="{\n" + "    \"function_score\": {\n" + "      \"script_score\": {\n"+ "        \"script\": \"_index['text']['foo'].tf()\"\n"+ "      },\n"+ "      \"weight\": 2\n"+ "    }\n"+ "}";
  try {
    parseQuery(functionScoreQuery);
    fail("parsing should have failed");
  }
 catch (  ParsingException e) {
    assertThat(e.getMessage(),containsString("use [functions] array if you want to define several functions."));
  }
}
