{
  this.spellchecker=spellchecker;
  this.field=field;
  this.suggestMode=suggestMode;
  this.reader=reader;
  Terms terms=MultiFields.getTerms(reader,field);
  if (terms == null) {
    throw new ElasticSearchIllegalArgumentException("generator field [" + field + "] doesn't exist");
  }
  final int docCount=terms.getDocCount();
  this.docCount=docCount == -1 ? reader.maxDoc() : docCount;
  this.preFilter=preFilter;
  this.postFilter=postFilter;
  this.nonErrorLikelihood=nonErrorLikelihood;
  float thresholdFrequency=spellchecker.getThresholdFrequency();
  this.frequencyPlateau=thresholdFrequency >= 1.0f ? (int)thresholdFrequency : (int)(docCount * thresholdFrequency);
}
