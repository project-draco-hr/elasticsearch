{
  CharsRef spare=new CharsRef();
  BytesRef byteSpare=new BytesRef();
  Candidate original=set.originalTerm;
  BytesRef term=preFilter(original.term,spare,byteSpare);
  final int frequency=original.frequency;
  spellchecker.setThresholdFrequency(thresholdFrequency(frequency,docCount));
  SuggestWord[] suggestSimilar=spellchecker.suggestSimilar(new Term(field,term),numCandidates,reader,this.suggestMode);
  List<Candidate> candidates=new ArrayList<Candidate>(suggestSimilar.length);
  for (int i=0; i < suggestSimilar.length; i++) {
    SuggestWord suggestWord=suggestSimilar[i];
    BytesRef candidate=new BytesRef(suggestWord.string);
    postFilter(new Candidate(candidate,suggestWord.freq,suggestWord.score,score(suggestWord.freq,suggestWord.score,docCount)),spare,byteSpare,candidates);
  }
  set.addCandidates(candidates);
  return set;
}
