{
  int errno=Integer.MIN_VALUE;
  try {
    int result=JNACLibrary.mlockall(JNACLibrary.MCL_CURRENT);
    if (result != 0) {
      errno=Native.getLastError();
    }
 else {
      LOCAL_MLOCKALL=true;
    }
  }
 catch (  UnsatisfiedLinkError e) {
    return;
  }
  if (errno != Integer.MIN_VALUE) {
    if (errno == JNACLibrary.ENOMEM && System.getProperty("os.name").toLowerCase(Locale.ROOT).contains("linux")) {
      logger.warn("Unable to lock JVM memory (ENOMEM)." + " This can result in part of the JVM being swapped out." + " Increase RLIMIT_MEMLOCK (ulimit).");
    }
 else     if (!System.getProperty("os.name").toLowerCase(Locale.ROOT).contains("mac")) {
      logger.warn("Unknown mlockall error " + errno);
    }
  }
}
