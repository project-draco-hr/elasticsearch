{
  if (indexShard.state() == IndexShardState.CLOSED) {
    return;
  }
  if (indexShard.state() == IndexShardState.STARTED && indexShard.translog().syncNeeded()) {
    threadPool.executor(ThreadPool.Names.FLUSH).execute(new Runnable(){
      @Override public void run(){
        try {
          indexShard.translog().sync();
        }
 catch (        Exception e) {
          if (indexShard.state() == IndexShardState.STARTED) {
            logger.warn("failed to sync translog",e);
          }
        }
        if (indexShard.state() != IndexShardState.CLOSED) {
          flushScheduler=threadPool.schedule(syncInterval,ThreadPool.Names.SAME,Sync.this);
        }
      }
    }
);
  }
 else {
    flushScheduler=threadPool.schedule(syncInterval,ThreadPool.Names.SAME,Sync.this);
  }
}
