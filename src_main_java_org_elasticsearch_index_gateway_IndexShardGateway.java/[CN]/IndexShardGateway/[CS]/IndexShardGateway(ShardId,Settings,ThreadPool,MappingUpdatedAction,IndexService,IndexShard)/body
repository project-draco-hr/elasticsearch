{
  super(shardId,indexSettings);
  this.threadPool=threadPool;
  this.mappingUpdatedAction=mappingUpdatedAction;
  this.indexService=indexService;
  this.indexShard=indexShard;
  this.waitForMappingUpdatePostRecovery=indexSettings.getAsTime("index.gateway.wait_for_mapping_update_post_recovery",TimeValue.timeValueSeconds(30));
  syncInterval=indexSettings.getAsTime("index.gateway.sync",TimeValue.timeValueSeconds(5));
  if (syncInterval.millis() > 0) {
    this.indexShard.translog().syncOnEachOperation(false);
    flushScheduler=threadPool.schedule(syncInterval,ThreadPool.Names.SAME,new Sync());
  }
 else   if (syncInterval.millis() == 0) {
    flushScheduler=null;
    this.indexShard.translog().syncOnEachOperation(true);
  }
 else {
    flushScheduler=null;
  }
}
