{
  for (  Map.Entry<String,ThreadPool.ThreadPoolType> entry : ThreadPool.THREAD_POOL_TYPES.entrySet()) {
    Set<ThreadPool.ThreadPoolType> set=new HashSet<>();
    set.addAll(Arrays.asList(ThreadPool.ThreadPoolType.values()));
    set.remove(entry.getValue());
    ThreadPool.ThreadPoolType invalidThreadPoolType=randomFrom(set.toArray(new ThreadPool.ThreadPoolType[set.size()]));
    String expectedMessage=String.format(Locale.ROOT,"thread pool type for [%s] can only be updated to [%s] but was [%s]",entry.getKey(),entry.getValue().getType(),invalidThreadPoolType.getType());
    String message=validateSetting(validator,entry.getKey(),invalidThreadPoolType.getType());
    assertNotNull(message);
    assertEquals(expectedMessage,message);
  }
}
