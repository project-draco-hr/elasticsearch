{
  createIndex("test");
  ensureGreen("test");
  indexRandom(true,client().prepareIndex("test","doc","1").setSource("x",10),client().prepareIndex("test","doc","2").setSource("x",3),client().prepareIndex("test","doc","3").setSource("x",5));
  SearchResponse rsp=runScript("doc['x'].value * a + b + ((c + doc['x'].value) > 5000000009 ? 1 : 0)","a",2,"b",3.5,"c",5000000000L);
  SearchHits hits=rsp.getHits();
  assertEquals(3,hits.getTotalHits());
  assertEquals(24.5,hits.getAt(0).field("foo").getValue());
  assertEquals(9.5,hits.getAt(1).field("foo").getValue());
  assertEquals(13.5,hits.getAt(2).field("foo").getValue());
}
