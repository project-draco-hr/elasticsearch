{
  builder.startObject(Fields.JVM);
  builder.field(Fields.TIMESTAMP,timestamp);
  builder.timeValueField(Fields.UPTIME,Fields.UPTIME_IN_MILLIS,uptime);
  if (mem != null) {
    builder.startObject(Fields.MEM);
    builder.byteSizeField(Fields.HEAP_USED,Fields.HEAP_USED_IN_BYTES,mem.heapUsed);
    builder.byteSizeField(Fields.HEAP_COMMITTED,Fields.HEAP_COMMITTED_IN_BYTES,mem.heapCommitted);
    builder.byteSizeField(Fields.NON_HEAP_USED,Fields.NON_HEAP_USED_IN_BYTES,mem.nonHeapUsed);
    builder.byteSizeField(Fields.NON_HEAP_COMMITTED,Fields.NON_HEAP_COMMITTED_IN_BYTES,mem.nonHeapCommitted);
    builder.startObject(Fields.POOLS);
    for (    MemoryPool pool : mem) {
      builder.startObject(pool.name(),XContentBuilder.FieldCaseConversion.NONE);
      builder.byteSizeField(Fields.USED,Fields.USED_IN_BYTES,pool.used);
      builder.byteSizeField(Fields.MAX,Fields.MAX_IN_BYTES,pool.max);
      builder.byteSizeField(Fields.PEAK_USED,Fields.PEAK_USED_IN_BYTES,pool.peakUsed);
      builder.byteSizeField(Fields.PEAK_MAX,Fields.PEAK_MAX_IN_BYTES,pool.peakMax);
      builder.endObject();
    }
    builder.endObject();
    builder.endObject();
  }
  if (threads != null) {
    builder.startObject(Fields.THREADS);
    builder.field(Fields.COUNT,threads.count());
    builder.field(Fields.PEAK_COUNT,threads.peakCount());
    builder.endObject();
  }
  if (gc != null) {
    builder.startObject(Fields.GC);
    builder.field(Fields.COLLECTION_COUNT,gc.collectionCount());
    builder.timeValueField(Fields.COLLECTION_TIME,Fields.COLLECTION_TIME_IN_MILLIS,gc.collectionTime());
    builder.startObject(Fields.COLLECTORS);
    for (    GarbageCollector collector : gc) {
      builder.startObject(collector.name(),XContentBuilder.FieldCaseConversion.NONE);
      builder.field(Fields.COLLECTION_COUNT,collector.collectionCount());
      builder.timeValueField(Fields.COLLECTION_TIME,Fields.COLLECTION_TIME_IN_MILLIS,collector.collectionTime);
      builder.endObject();
    }
    builder.endObject();
    builder.endObject();
  }
  if (bufferPools != null) {
    builder.startObject(Fields.BUFFER_POOLS);
    for (    BufferPool bufferPool : bufferPools) {
      builder.startObject(bufferPool.name(),XContentBuilder.FieldCaseConversion.NONE);
      builder.field(Fields.COUNT,bufferPool.count());
      builder.byteSizeField(Fields.USED,Fields.USED_IN_BYTES,bufferPool.used);
      builder.byteSizeField(Fields.TOTAL_CAPACITY,Fields.TOTAL_CAPACITY_IN_BYTES,bufferPool.totalCapacity);
      builder.endObject();
    }
    builder.endObject();
  }
  builder.endObject();
  return builder;
}
