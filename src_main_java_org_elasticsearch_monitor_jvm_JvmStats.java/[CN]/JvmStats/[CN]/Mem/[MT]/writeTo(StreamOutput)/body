{
  out.writeVLong(heapCommitted);
  out.writeVLong(heapUsed);
  out.writeVLong(nonHeapCommitted);
  out.writeVLong(nonHeapUsed);
  if (out.getVersion().onOrAfter(Version.V_0_90_7)) {
    out.writeVLong(heapMax);
  }
  out.writeVInt(pools.length);
  for (  MemoryPool pool : pools) {
    pool.writeTo(out);
  }
}
