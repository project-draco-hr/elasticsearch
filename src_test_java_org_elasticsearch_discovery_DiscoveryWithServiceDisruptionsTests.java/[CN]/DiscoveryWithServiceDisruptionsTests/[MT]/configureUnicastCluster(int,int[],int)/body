{
  if (minimumMasterNode < 0) {
    minimumMasterNode=numberOfNodes / 2 + 1;
  }
  Settings nodeSettings=ImmutableSettings.builder().put(DEFAULT_SETTINGS).put(ElectMasterService.DISCOVERY_ZEN_MINIMUM_MASTER_NODES,minimumMasterNode).build();
  if (discoveryConfig == null) {
    if (unicastHostsOrdinals == null) {
      discoveryConfig=new ClusterDiscoveryConfiguration.UnicastZen(numberOfNodes,nodeSettings);
    }
 else {
      discoveryConfig=new ClusterDiscoveryConfiguration.UnicastZen(numberOfNodes,nodeSettings,unicastHostsOrdinals);
    }
  }
}
