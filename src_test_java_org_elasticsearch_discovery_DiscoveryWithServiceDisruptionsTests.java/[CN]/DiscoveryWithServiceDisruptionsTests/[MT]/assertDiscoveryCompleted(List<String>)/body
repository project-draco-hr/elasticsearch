{
  for (  final String node : nodes) {
    assertTrue("node [" + node + "] is still joining master",awaitBusy(new Predicate<Object>(){
      @Override public boolean apply(      Object input){
        return !((ZenDiscovery)internalCluster().getInstance(Discovery.class,node)).joiningCluster();
      }
    }
,30,TimeUnit.SECONDS));
  }
}
