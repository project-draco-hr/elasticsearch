{
  ImmutableSettings.Builder builder=ImmutableSettings.settingsBuilder().put(super.nodeSettings(nodeOrdinal)).put("discovery.type","zen").put("discovery.zen.ping.multicast.enabled",false).put("http.enabled",false);
  String[] unicastHosts=new String[currentNumOfUnicastHosts];
  if (internalCluster().getDefaultSettings().get("node.mode").equals("local")) {
    builder.put(LocalTransport.TRANSPORT_LOCAL_ADDRESS,"unicast_test_" + nodeOrdinal);
    for (int i=0; i < unicastHosts.length; i++) {
      unicastHosts[i]="unicast_test_" + i;
    }
  }
 else {
    builder.put("transport.tcp.port",currentBaseHttpPort + nodeOrdinal);
    for (int i=0; i < unicastHosts.length; i++) {
      unicastHosts[i]="localhost:" + (currentBaseHttpPort + i);
    }
  }
  builder.putArray("discovery.zen.ping.unicast.hosts",unicastHosts);
  return builder.build();
}
