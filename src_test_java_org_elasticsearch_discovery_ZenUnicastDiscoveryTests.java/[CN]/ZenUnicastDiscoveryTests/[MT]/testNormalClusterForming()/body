{
  int currentNumNodes=randomIntBetween(3,5);
  int currentNumOfUnicastHosts=randomIntBetween(1,currentNumNodes);
  discoveryConfig=new ClusterDiscoveryConfiguration.UnicastZen(currentNumNodes,currentNumOfUnicastHosts);
  internalCluster().startNodesAsync(currentNumNodes).get();
  if (client().admin().cluster().prepareHealth().setWaitForNodes("" + currentNumNodes).get().isTimedOut()) {
    logger.info("cluster forming timed out, cluster state:\n{}",client().admin().cluster().prepareState().get().getState().prettyPrint());
    fail("timed out waiting for cluster to form with [" + currentNumNodes + "] nodes");
  }
}
