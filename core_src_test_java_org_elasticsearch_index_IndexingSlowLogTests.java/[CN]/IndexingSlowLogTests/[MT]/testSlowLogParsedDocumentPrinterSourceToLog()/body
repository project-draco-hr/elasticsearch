{
  BytesReference source=JsonXContent.contentBuilder().startObject().field("foo","bar").endObject().bytes();
  ParsedDocument pd=new ParsedDocument(new StringField("uid","test:id",Store.YES),new LegacyIntField("version",1,Store.YES),"id","test",null,0,-1,null,source,null);
  SlowLogParsedDocumentPrinter p=new SlowLogParsedDocumentPrinter(pd,10,true,0);
  assertThat(p.toString(),not(containsString("source[")));
  p=new SlowLogParsedDocumentPrinter(pd,10,true,Integer.MAX_VALUE);
  assertThat(p.toString(),containsString("source[{\"foo\":\"bar\"}]"));
  p=new SlowLogParsedDocumentPrinter(pd,10,true,3);
  assertThat(p.toString(),containsString("source[{\"f]"));
}
