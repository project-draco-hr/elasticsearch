{
  final InternalAggregation[] aggregations=new InternalAggregation[subAggregators.length];
  final long bucketDocCount=bucketDocCount(bucketOrd);
  for (int i=0; i < subAggregators.length; i++) {
    aggregations[i]=bucketDocCount == 0L ? subAggregators[i].buildEmptyAggregation() : subAggregators[i].buildAggregation(bucketOrd);
  }
  return new InternalAggregations(Arrays.asList(aggregations));
}
