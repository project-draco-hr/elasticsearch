{
  super(name,bucketAggregationMode,factories,estimatedBucketsCount,context,parent);
  docCounts=BigArrays.newLongArray(estimatedBucketsCount,context.pageCacheRecycler(),true);
  List<Aggregator> collectables=new ArrayList<Aggregator>(subAggregators.length);
  for (int i=0; i < subAggregators.length; i++) {
    if (subAggregators[i].shouldCollect()) {
      collectables.add((subAggregators[i]));
    }
  }
  collectableSugAggregators=collectables.toArray(new Aggregator[collectables.size()]);
}
