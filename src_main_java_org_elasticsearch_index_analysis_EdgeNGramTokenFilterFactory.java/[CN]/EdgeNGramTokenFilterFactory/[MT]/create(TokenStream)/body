{
  final Version version=this.version == Version.LUCENE_43 ? Version.LUCENE_44 : this.version;
  if (version.onOrAfter(Version.LUCENE_43)) {
    TokenStream result=tokenStream;
    if (side == Side.BACK) {
      result=new ReverseStringFilter(version,result);
    }
    result=new EdgeNGramTokenFilter(version,result,minGram,maxGram);
    if (side == Side.BACK) {
      result=new ReverseStringFilter(version,result);
    }
    return result;
  }
  return new EdgeNGramTokenFilter(version,tokenStream,side,minGram,maxGram);
}
