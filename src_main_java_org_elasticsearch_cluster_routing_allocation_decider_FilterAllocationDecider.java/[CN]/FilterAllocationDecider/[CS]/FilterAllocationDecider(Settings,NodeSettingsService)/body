{
  super(settings);
  ImmutableMap<String,String> requireMap=settings.getByPrefix("cluster.routing.allocation.require.").getAsMap();
  if (requireMap.isEmpty()) {
    clusterRequireFilters=null;
  }
 else {
    clusterRequireFilters=DiscoveryNodeFilters.buildFromKeyValue(AND,requireMap);
  }
  ImmutableMap<String,String> includeMap=settings.getByPrefix("cluster.routing.allocation.include.").getAsMap();
  if (includeMap.isEmpty()) {
    clusterIncludeFilters=null;
  }
 else {
    clusterIncludeFilters=DiscoveryNodeFilters.buildFromKeyValue(OR,includeMap);
  }
  ImmutableMap<String,String> excludeMap=settings.getByPrefix("cluster.routing.allocation.exclude.").getAsMap();
  if (excludeMap.isEmpty()) {
    clusterExcludeFilters=null;
  }
 else {
    clusterExcludeFilters=DiscoveryNodeFilters.buildFromKeyValue(OR,excludeMap);
  }
  nodeSettingsService.addListener(new ApplySettings());
}
