{
  if (clusterRequireFilters != null) {
    if (!clusterRequireFilters.match(node.node())) {
      return true;
    }
  }
  if (clusterIncludeFilters != null) {
    if (!clusterIncludeFilters.match(node.node())) {
      return true;
    }
  }
  if (clusterExcludeFilters != null) {
    if (clusterExcludeFilters.match(node.node())) {
      return true;
    }
  }
  IndexMetaData indexMd=allocation.routingNodes().metaData().index(shardRouting.index());
  if (indexMd.requireFilters() != null) {
    if (!indexMd.requireFilters().match(node.node())) {
      return true;
    }
  }
  if (indexMd.includeFilters() != null) {
    if (!indexMd.includeFilters().match(node.node())) {
      return true;
    }
  }
  if (indexMd.excludeFilters() != null) {
    if (indexMd.excludeFilters().match(node.node())) {
      return true;
    }
  }
  return false;
}
