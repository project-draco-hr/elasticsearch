{
  bind(TransportService.class).asEagerSingleton();
  bind(TransportServiceManagement.class).asEagerSingleton();
  Class<? extends Module> defaultTransportModule;
  if (settings.getAsBoolean("node.local",false)) {
    defaultTransportModule=LocalTransportModule.class;
  }
 else {
    try {
      Classes.getDefaultClassLoader().loadClass("org.elasticsearch.transport.netty.NettyTransport");
      defaultTransportModule=(Class<? extends Module>)Classes.getDefaultClassLoader().loadClass("org.elasticsearch.transport.netty.NettyTransportModule");
    }
 catch (    ClassNotFoundException e) {
      defaultTransportModule=LocalTransportModule.class;
    }
  }
  Class<? extends Module> moduleClass=settings.getAsClass("transport.type",defaultTransportModule,"org.elasticsearch.transport.","TransportModule");
  createModule(moduleClass,settings).configure(binder());
}
