{
  final CountDownLatch latch=new CountDownLatch(index.numberOfShards());
  for (int shardId=0; shardId < index.numberOfShards(); shardId++) {
    transportNodesListShardStoreMetaData.list(new ShardId(index.index(),shardId),false,nodes.dataNodes().keySet(),new ActionListener<TransportNodesListShardStoreMetaData.NodesStoreFilesMetaData>(){
      @Override public void onResponse(      TransportNodesListShardStoreMetaData.NodesStoreFilesMetaData nodesStoreFilesMetaData){
        latch.countDown();
      }
      @Override public void onFailure(      Throwable e){
        latch.countDown();
      }
    }
);
  }
  try {
    latch.await();
  }
 catch (  InterruptedException e) {
  }
}
