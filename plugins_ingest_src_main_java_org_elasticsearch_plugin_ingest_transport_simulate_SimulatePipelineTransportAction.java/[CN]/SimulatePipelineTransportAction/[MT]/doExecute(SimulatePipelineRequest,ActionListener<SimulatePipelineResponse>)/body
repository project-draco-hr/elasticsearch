{
  Map<String,Object> source=XContentHelper.convertToMap(request.source(),false).v2();
  ParsedSimulateRequest simulateRequest;
  ParsedSimulateRequest.Parser parser=new ParsedSimulateRequest.Parser();
  try {
    simulateRequest=parser.parse(request.id(),source,request.verbose(),pipelineStore);
  }
 catch (  IOException e) {
    listener.onFailure(e);
    return;
  }
  executionService.execute(simulateRequest,new SimulateExecutionService.Listener(){
    @Override public void onResponse(    SimulatePipelineResponse response){
      listener.onResponse(response);
    }
  }
);
}
