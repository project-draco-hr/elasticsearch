{
  startNode("client-node",ImmutableSettings.settingsBuilder().put("node.client",true));
  try {
    client1.admin().indices().prepareDelete("foo").execute().actionGet();
  }
 catch (  IndexMissingException e) {
  }
  client1.prepareIndex("foo","bar","1").setSource(jsonBuilder().startObject().startObject("foo").field("bar","boz").endObject()).execute().actionGet();
  client1.admin().indices().prepareRefresh("foo").execute().actionGet();
  SearchResponse searchResponse=client1.prepareMoreLikeThis("foo","bar","1").execute().actionGet();
  assertThat(searchResponse,notNullValue());
  Client client3=client("client-node");
  searchResponse=client3.prepareMoreLikeThis("foo","bar","1").execute().actionGet();
  assertThat(searchResponse,notNullValue());
  client3.close();
}
