{
  final Map<String,FieldMappers> tempNameFieldMappers=newHashMap();
  final Map<String,FieldMappers> tempIndexNameFieldMappers=newHashMap();
  final Map<String,FieldMappers> tempFullNameFieldMappers=newHashMap();
  final Map<String,Analyzer> indexAnalyzers=newHashMap();
  final Map<String,Analyzer> searchAnalyzers=newHashMap();
  for (  FieldMapper fieldMapper : fieldMappers) {
    FieldMappers mappers=tempNameFieldMappers.get(fieldMapper.name());
    if (mappers == null) {
      mappers=new FieldMappers(fieldMapper);
    }
 else {
      mappers=mappers.concat(fieldMapper);
    }
    tempNameFieldMappers.put(fieldMapper.name(),mappers);
    mappers=tempIndexNameFieldMappers.get(fieldMapper.indexName());
    if (mappers == null) {
      mappers=new FieldMappers(fieldMapper);
    }
 else {
      mappers=mappers.concat(fieldMapper);
    }
    tempIndexNameFieldMappers.put(fieldMapper.indexName(),mappers);
    mappers=tempFullNameFieldMappers.get(fieldMapper.fullName());
    if (mappers == null) {
      mappers=new FieldMappers(fieldMapper);
    }
 else {
      mappers=mappers.concat(fieldMapper);
    }
    tempFullNameFieldMappers.put(fieldMapper.fullName(),mappers);
    if (fieldMapper.indexAnalyzer() != null) {
      indexAnalyzers.put(fieldMapper.indexName(),fieldMapper.indexAnalyzer());
    }
    if (fieldMapper.searchAnalyzer() != null) {
      searchAnalyzers.put(fieldMapper.indexName(),fieldMapper.searchAnalyzer());
    }
  }
  this.fieldMappers=ImmutableList.copyOf(fieldMappers);
  this.nameFieldMappers=ImmutableMap.copyOf(tempNameFieldMappers);
  this.indexNameFieldMappers=ImmutableMap.copyOf(tempIndexNameFieldMappers);
  this.fullNameFieldMappers=ImmutableMap.copyOf(tempFullNameFieldMappers);
  this.indexAnalyzer=new FieldNameAnalyzer(indexAnalyzers,docMapper.indexAnalyzer());
  this.searchAnalyzer=new FieldNameAnalyzer(searchAnalyzers,docMapper.searchAnalyzer());
}
