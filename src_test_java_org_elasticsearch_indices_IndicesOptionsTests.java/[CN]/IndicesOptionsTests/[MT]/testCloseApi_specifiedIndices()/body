{
  assertAcked(prepareCreate("test1"));
  assertAcked(prepareCreate("test2"));
  ensureYellow();
  verify(search("test1","test2"),false);
  verify(count("test1","test2"),false);
  assertAcked(client().admin().indices().prepareClose("test2").get());
  try {
    search("test1","test2").get();
    fail("Exception should have been thrown");
  }
 catch (  ClusterBlockException e) {
  }
  try {
    count("test1","test2").get();
    fail("Exception should have been thrown");
  }
 catch (  ClusterBlockException e) {
  }
  verify(search(),false);
  verify(count(),false);
  verify(search("t*"),false);
  verify(count("t*"),false);
}
