{
  createIndex("test1");
  ensureYellow();
  try {
    client().prepareSearch("test2").setQuery(matchAllQuery()).execute().actionGet();
    fail("Exception should have been thrown.");
  }
 catch (  IndexMissingException e) {
  }
  try {
    client().prepareSearch("test2","test3").setQuery(matchAllQuery()).execute().actionGet();
    fail("Exception should have been thrown.");
  }
 catch (  IndexMissingException e) {
  }
  client().prepareSearch().setQuery(matchAllQuery()).execute().actionGet();
}
