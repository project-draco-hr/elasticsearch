{
  if (!analyzeWildcard) {
    return super.getPrefixQuery(field,termStr);
  }
  TokenStream source=null;
  try {
    source=getAnalyzer().reusableTokenStream(field,new StringReader(termStr));
  }
 catch (  IOException e) {
    return super.getPrefixQuery(field,termStr);
  }
  List<String> tlist=new ArrayList<String>();
  TermAttribute termAtt=source.addAttribute(TermAttribute.class);
  while (true) {
    try {
      if (!source.incrementToken())       break;
    }
 catch (    IOException e) {
      break;
    }
    tlist.add(termAtt.term());
  }
  try {
    source.close();
  }
 catch (  IOException e) {
  }
  if (tlist.size() == 1) {
    return super.getPrefixQuery(field,tlist.get(0));
  }
 else {
    return super.getPrefixQuery(field,termStr);
  }
}
