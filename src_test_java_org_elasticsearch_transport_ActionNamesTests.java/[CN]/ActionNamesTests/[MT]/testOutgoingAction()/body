{
  TransportService transportService=internalCluster().getInstance(TransportService.class);
  String[] actions=transportService.serverHandlers.keySet().toArray(new String[transportService.serverHandlers.keySet().size()]);
  int iters=iterations(10,100);
  for (int i=0; i < iters; i++) {
    boolean customAction=rarely();
    String action;
    if (customAction) {
      action=randomAsciiOfLength(randomInt(30));
    }
 else {
      action=randomFrom(actions);
    }
    Version version=randomVersion();
    String outgoingAction=ActionNames.outgoingAction(action,version);
    if (version.onOrAfter(Version.V_1_4_0) || customAction || post_1_4_actions.contains(action)) {
      assertThat(outgoingAction,equalTo(action));
    }
 else {
      assertThat(outgoingAction,not(equalTo(action)));
      assertThat(outgoingAction,equalTo(ActionNames.pre_1_4_Action(action)));
    }
  }
}
