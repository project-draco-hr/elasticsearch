{
  TransportService transportService=internalCluster().getInstance(TransportService.class);
  List<String> actions=Lists.newArrayList(transportService.serverHandlers.keySet());
  int iters=iterations(10,100);
  for (int i=0; i < iters; i++) {
    boolean customAction=rarely();
    String action;
    if (customAction) {
      do {
        action=randomAsciiOfLength(randomInt(30));
      }
 while (actions.contains(action));
    }
 else {
      action=randomFrom(actions);
    }
    Version version=randomVersion();
    String outgoingAction=ActionNames.outgoingAction(action,version);
    if (version.onOrAfter(Version.V_1_4_0_Beta1) || customAction || post_1_4_actions.contains(action)) {
      assertThat(outgoingAction,equalTo(action));
    }
 else {
      assertThat(outgoingAction,not(equalTo(action)));
      assertThat(outgoingAction,equalTo(ActionNames.pre_1_4_Action(action)));
    }
  }
}
