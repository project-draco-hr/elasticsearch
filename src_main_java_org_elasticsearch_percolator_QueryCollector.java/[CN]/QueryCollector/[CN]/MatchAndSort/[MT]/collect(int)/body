{
  final Query query=getQuery(doc);
  if (query == null) {
    return;
  }
  try {
    collector.reset();
    if (isNestedDoc) {
      searcher.search(query,NonNestedDocsFilter.INSTANCE,collector);
    }
 else {
      searcher.search(query,collector);
    }
    if (collector.exists()) {
      topDocsCollector.collect(doc);
      postMatch(doc);
    }
  }
 catch (  IOException e) {
    logger.warn("[" + current.utf8ToString() + "] failed to execute query",e);
  }
}
