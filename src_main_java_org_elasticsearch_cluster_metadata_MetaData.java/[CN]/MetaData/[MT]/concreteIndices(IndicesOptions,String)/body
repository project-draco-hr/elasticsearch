{
  if (indicesOptions.expandWildcardsOpen() || indicesOptions.expandWildcardsClosed()) {
    if (isAllIndices(aliasesOrIndices)) {
      String[] concreteIndices;
      if (indicesOptions.expandWildcardsOpen() && indicesOptions.expandWildcardsClosed()) {
        concreteIndices=concreteAllIndices();
      }
 else       if (indicesOptions.expandWildcardsOpen()) {
        concreteIndices=concreteAllOpenIndices();
      }
 else {
        concreteIndices=concreteAllClosedIndices();
      }
      if (!indicesOptions.allowNoIndices() && concreteIndices.length == 0) {
        throw new IndexMissingException(new Index("_all"));
      }
      return concreteIndices;
    }
    aliasesOrIndices=convertFromWildcards(aliasesOrIndices,indicesOptions);
  }
  if (aliasesOrIndices.length == 1) {
    return concreteIndices(aliasesOrIndices[0],indicesOptions.allowNoIndices(),indicesOptions.allowAliasesToMultipleIndices());
  }
  boolean possiblyAliased=false;
  for (  String index : aliasesOrIndices) {
    if (!this.indices.containsKey(index)) {
      possiblyAliased=true;
      break;
    }
  }
  if (!possiblyAliased) {
    return aliasesOrIndices;
  }
  Set<String> actualIndices=new HashSet<>();
  for (  String aliasOrIndex : aliasesOrIndices) {
    String[] indices=concreteIndices(aliasOrIndex,indicesOptions.ignoreUnavailable(),indicesOptions.allowAliasesToMultipleIndices());
    Collections.addAll(actualIndices,indices);
  }
  if (!indicesOptions.allowNoIndices() && actualIndices.isEmpty()) {
    throw new IndexMissingException(new Index(Arrays.toString(aliasesOrIndices)));
  }
  return actualIndices.toArray(new String[actualIndices.size()]);
}
