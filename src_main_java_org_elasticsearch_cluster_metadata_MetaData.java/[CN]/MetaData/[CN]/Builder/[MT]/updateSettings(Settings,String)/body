{
  if (indices == null || indices.length == 0) {
    indices=this.indices.map().keySet().toArray(new String[this.indices.map().keySet().size()]);
  }
  for (  String index : indices) {
    IndexMetaData indexMetaData=this.indices.get(index);
    if (indexMetaData == null) {
      throw new IndexMissingException(new Index(index));
    }
    put(IndexMetaData.newIndexMetaDataBuilder(indexMetaData).settings(settingsBuilder().put(indexMetaData.settings()).put(settings)).build());
  }
  return this;
}
