{
  out.writeLong(metaData.version);
  writeSettingsToStream(metaData.transientSettings(),out);
  writeSettingsToStream(metaData.persistentSettings(),out);
  out.writeVInt(metaData.indices.size());
  for (  IndexMetaData indexMetaData : metaData) {
    IndexMetaData.Builder.writeTo(indexMetaData,out);
  }
  out.writeVInt(metaData.templates.size());
  for (  IndexTemplateMetaData template : metaData.templates.values()) {
    IndexTemplateMetaData.Builder.writeTo(template,out);
  }
  out.writeVInt(metaData.customs().size());
  for (  Map.Entry<String,Custom> entry : metaData.customs().entrySet()) {
    out.writeString(entry.getKey());
    lookupFactorySafe(entry.getKey()).writeTo(entry.getValue(),out);
  }
}
