{
  out.writeLong(metaData.version);
  writeSettingsToStream(metaData.transientSettings(),out);
  writeSettingsToStream(metaData.persistentSettings(),out);
  out.writeVInt(metaData.indices.size());
  for (  IndexMetaData indexMetaData : metaData) {
    IndexMetaData.Builder.writeTo(indexMetaData,out);
  }
  out.writeVInt(metaData.templates.size());
  for (  ObjectCursor<IndexTemplateMetaData> cursor : metaData.templates.values()) {
    IndexTemplateMetaData.Builder.writeTo(cursor.value,out);
  }
  out.writeVInt(metaData.customs().size());
  for (  ObjectObjectCursor<String,Custom> cursor : metaData.customs()) {
    out.writeString(cursor.key);
    lookupFactorySafe(cursor.key).writeTo(cursor.value,out);
  }
}
