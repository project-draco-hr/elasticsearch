{
  final Semaphore mdLock=metaDataService.indexMetaDataLock(request.index());
  if (mdLock.tryAcquire()) {
    createIndex(request,listener,mdLock);
    return;
  }
  threadPool.executor(ThreadPool.Names.MANAGEMENT).execute(new ActionRunnable(listener){
    @Override public void doRun() throws InterruptedException {
      if (!mdLock.tryAcquire(request.masterNodeTimeout().nanos(),TimeUnit.NANOSECONDS)) {
        listener.onFailure(new ProcessClusterEventTimeoutException(request.masterNodeTimeout(),"acquire index lock"));
        return;
      }
      createIndex(request,listener,mdLock);
    }
  }
);
}
