{
  reset(parser);
  try {
    parseFieldMatcher(indexSettings.getParseFieldMatcher());
    Query filter=QueryBuilder.rewriteQuery(parseContext().parseInnerQueryBuilder(),this).toFilter(this);
    if (filter == null) {
      return null;
    }
    return new ParsedQuery(filter,copyNamedQueries());
  }
  finally {
    reset(null);
  }
}
