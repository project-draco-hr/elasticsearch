{
  reset();
  try {
    Query filter=QueryBuilder.rewriteQuery(newParseContext(parser).parseInnerQueryBuilder(),this).toFilter(this);
    if (filter == null) {
      return null;
    }
    return new ParsedQuery(filter,copyNamedQueries());
  }
  finally {
    reset();
  }
}
