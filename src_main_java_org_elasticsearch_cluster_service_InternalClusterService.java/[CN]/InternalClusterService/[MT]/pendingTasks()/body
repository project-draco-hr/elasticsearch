{
  long now=System.currentTimeMillis();
  PrioritizedEsThreadPoolExecutor.Pending[] pendings=updateTasksExecutor.getPending();
  List<PendingClusterTask> pendingClusterTasks=new ArrayList<>(pendings.length);
  for (  PrioritizedEsThreadPoolExecutor.Pending pending : pendings) {
    final String source;
    final long timeInQueue;
    if (pending.task instanceof UpdateTask) {
      UpdateTask updateTask=(UpdateTask)pending.task;
      source=updateTask.source;
      timeInQueue=now - updateTask.addedAt;
    }
 else {
      source="unknown";
      timeInQueue=-1;
    }
    pendingClusterTasks.add(new PendingClusterTask(pending.insertionOrder,pending.priority,new StringText(source),timeInQueue));
  }
  return pendingClusterTasks;
}
