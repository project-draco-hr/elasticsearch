{
  if (!ackedUpdateTask.mustAck(node)) {
    return;
  }
  if (t == null) {
    logger.trace("ack received from node [{}], cluster_state update (version: {})",node,version);
  }
 else {
    this.lastFailure=t;
    logger.debug("ack received from node [{}], cluster_state update (version: {})",t,node,version);
  }
  if (countDown.countDown()) {
    logger.trace("all expected nodes acknowledged cluster_state update (version: {})",version);
    ackTimeoutCallback.cancel(true);
    ackedUpdateTask.onAllNodesAcked(lastFailure);
  }
}
