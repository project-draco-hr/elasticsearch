{
  initTestData();
  String script="term = _index['int_payload_field']['b']; return _index['int_payload_field'].get('b', _POSITIONS).tf();";
  try {
    client().prepareSearch("test").setQuery(QueryBuilders.matchAllQuery()).addScriptField("tvtest",script).execute().actionGet();
  }
 catch (  SearchPhaseExecutionException e) {
    assertThat("got: " + e.getDetailedMessage(),e.getDetailedMessage().indexOf("You must call get with all required flags! Instead of  _index['int_payload_field'].get('b', _FREQUENCIES) and _index['int_payload_field'].get('b', _POSITIONS) call  _index['int_payload_field'].get('b', _FREQUENCIES | _POSITIONS)  once]; "),Matchers.greaterThan(-1));
  }
  script="term = _index['int_payload_field'].get('b', _POSITIONS | _FREQUENCIES);return _index['int_payload_field']['b'].tf();";
  client().prepareSearch("test").setQuery(QueryBuilders.matchAllQuery()).addScriptField("tvtest",script).execute().actionGet();
}
