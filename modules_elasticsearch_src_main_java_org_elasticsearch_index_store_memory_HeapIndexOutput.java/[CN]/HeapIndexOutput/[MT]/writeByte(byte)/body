{
  if (bufferPosition == bufferLength) {
    currentBufferIndex++;
    switchCurrentBuffer();
  }
  currentBuffer[bufferPosition++]=b;
}
