{
  ElasticsearchException.WithRestHeadersException ex=serialize(new ElasticsearchException.WithRestHeadersException("msg",new Tuple("foo",new String[]{"foo","bar"})));
  assertEquals("msg",ex.getMessage());
  assertEquals(2,ex.getHeaders().get("foo").size());
  assertEquals("foo",ex.getHeaders().get("foo").get(0));
  assertEquals("bar",ex.getHeaders().get("foo").get(1));
  ElasticsearchException e=serialize((ElasticsearchException)new UnknownHeaderException("msg",new Tuple("foo",new String[]{"foo","bar"})));
  assertTrue(e instanceof NotSerializableExceptionWrapper);
  assertEquals("msg",ex.getMessage());
  assertEquals(2,ex.getHeaders().get("foo").size());
  assertEquals("foo",ex.getHeaders().get("foo").get(0));
  assertEquals("bar",ex.getHeaders().get("foo").get(1));
}
