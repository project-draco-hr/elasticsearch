{
  ElasticsearchException.WithRestHeadersException ex=serialize(new ElasticsearchException.WithRestHeadersException("msg",new Tuple("foo",new String[]{"foo","bar"})));
  assertEquals("msg",ex.getMessage());
  assertEquals(2,ex.getHeaders().get("foo").size());
  assertEquals("foo",ex.getHeaders().get("foo").get(0));
  assertEquals("bar",ex.getHeaders().get("foo").get(1));
  RestStatus status=randomFrom(RestStatus.values());
  ElasticsearchException serialize=serialize((ElasticsearchException)new UnknownHeaderException("msg",status,new Tuple("foo",new String[]{"foo","bar"})));
  assertTrue(serialize instanceof NotSerializableExceptionWrapper);
  NotSerializableExceptionWrapper e=(NotSerializableExceptionWrapper)serialize;
  assertEquals("msg",e.getMessage());
  assertEquals(2,e.getHeaders().get("foo").size());
  assertEquals("foo",e.getHeaders().get("foo").get(0));
  assertEquals("bar",e.getHeaders().get("foo").get(1));
  assertSame(status,e.status());
}
