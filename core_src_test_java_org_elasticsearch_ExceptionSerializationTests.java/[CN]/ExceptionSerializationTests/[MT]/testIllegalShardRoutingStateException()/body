{
  ShardRouting routing=new ShardRouting("test",0,"xyz","def",false,ShardRoutingState.STARTED,0);
  IllegalShardRoutingStateException serialize=serialize(new IllegalShardRoutingStateException(routing,"foo",new NullPointerException()));
  assertNotNull(serialize.shard());
  assertEquals(routing,serialize.shard());
  assertEquals("[test][0], node[xyz], relocating [def], [R], s[STARTED]: foo",serialize.getMessage());
  assertTrue(serialize.getCause() instanceof NullPointerException);
  serialize=serialize(new IllegalShardRoutingStateException(routing,"bar",null));
  assertNotNull(serialize.shard());
  assertEquals(routing,serialize.shard());
  assertEquals("[test][0], node[xyz], relocating [def], [R], s[STARTED]: bar",serialize.getMessage());
  assertNull(serialize.getCause());
}
