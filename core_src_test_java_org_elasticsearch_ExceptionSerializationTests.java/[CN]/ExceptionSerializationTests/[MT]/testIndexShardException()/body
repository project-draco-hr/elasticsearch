{
  ShardId id=new ShardId("foo",1);
  IndexShardException ex=serialize(new IndexShardException(id,"boom",new NullPointerException()));
  assertEquals(id,ex.shardId());
  assertEquals("boom",ex.getMessage());
  assertEquals(new Index("foo"),ex.index());
  assertTrue(ex.getCause() instanceof NullPointerException);
  ex=serialize(new IndexShardException(null,"boom",new NullPointerException()));
  assertEquals("boom",ex.getMessage());
  assertNull(ex.index());
  assertNull(ex.shardId());
}
