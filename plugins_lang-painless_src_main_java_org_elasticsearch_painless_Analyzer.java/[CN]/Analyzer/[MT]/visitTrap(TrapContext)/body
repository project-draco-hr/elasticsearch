{
  final Metadata.StatementMetadata trapsmd=metadata.getStatementMetadata(ctx);
  final String type=ctx.TYPE().getText();
  trapsmd.exception=definition.getType(type);
  try {
    trapsmd.exception.clazz.asSubclass(Exception.class);
  }
 catch (  final ClassCastException exception) {
    throw new IllegalArgumentException(Metadata.error(ctx) + "Invalid exception type [" + trapsmd.exception.name+ "].");
  }
  final String id=ctx.ID().getText();
  trapsmd.slot=addVariable(ctx,id,trapsmd.exception).slot;
  final BlockContext blockctx=ctx.block();
  if (blockctx != null) {
    final Metadata.StatementMetadata blocksmd=metadata.createStatementMetadata(blockctx);
    blocksmd.lastSource=trapsmd.lastSource;
    blocksmd.inLoop=trapsmd.inLoop;
    blocksmd.lastLoop=trapsmd.lastLoop;
    visit(blockctx);
    trapsmd.methodEscape=blocksmd.methodEscape;
    trapsmd.loopEscape=blocksmd.loopEscape;
    trapsmd.allLast=blocksmd.allLast;
    trapsmd.anyContinue=blocksmd.anyContinue;
    trapsmd.anyBreak=blocksmd.anyBreak;
  }
 else   if (ctx.emptyscope() == null) {
    throw new IllegalStateException(Metadata.error(ctx) + "Unexpected parser state.");
  }
  return null;
}
