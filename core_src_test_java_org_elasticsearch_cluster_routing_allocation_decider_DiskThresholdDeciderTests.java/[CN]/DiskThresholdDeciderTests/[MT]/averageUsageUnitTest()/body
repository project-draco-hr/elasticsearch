{
  RoutingNode rn=new RoutingNode("node1",newNode("node1"));
  DiskThresholdDecider decider=new DiskThresholdDecider(Settings.EMPTY);
  Map<String,DiskUsage> usages=new HashMap<>();
  usages.put("node2",new DiskUsage("node2","n2","_na_",100,50));
  usages.put("node3",new DiskUsage("node3","n3","_na_",100,0));
  DiskUsage node1Usage=decider.averageUsage(rn,usages);
  assertThat(node1Usage.getTotalBytes(),equalTo(100L));
  assertThat(node1Usage.getFreeBytes(),equalTo(25L));
}
