{
  Translog.Location loc1=translog.add(new Translog.Create("test","1",new byte[]{1}));
  Translog.Location loc2=translog.add(new Translog.Create("test","2",new byte[]{2}));
  assertThat(translog.read(loc1).getSource().source.toBytesArray(),equalTo(new BytesArray(new byte[]{1})));
  assertThat(translog.read(loc2).getSource().source.toBytesArray(),equalTo(new BytesArray(new byte[]{2})));
  translog.sync();
  assertThat(translog.read(loc1).getSource().source.toBytesArray(),equalTo(new BytesArray(new byte[]{1})));
  assertThat(translog.read(loc2).getSource().source.toBytesArray(),equalTo(new BytesArray(new byte[]{2})));
  Translog.Location loc3=translog.add(new Translog.Create("test","2",new byte[]{3}));
  assertThat(translog.read(loc3).getSource().source.toBytesArray(),equalTo(new BytesArray(new byte[]{3})));
  translog.sync();
  assertThat(translog.read(loc3).getSource().source.toBytesArray(),equalTo(new BytesArray(new byte[]{3})));
}
