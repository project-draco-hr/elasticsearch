{
  SuggestionSearchContext suggestionSearchContext=new SuggestionSearchContext();
  for (  SuggestionBuilder<?> suggestionBuilder : suggestions) {
    SuggestionContext suggestionContext=suggestionBuilder.build(context);
    if (suggestionContext.getText() == null) {
      if (globalText == null) {
        throw new IllegalArgumentException("The required text option is missing");
      }
      suggestionContext.setText(BytesRefs.toBytesRef(globalText));
    }
    suggestionSearchContext.addSuggestion(suggestionBuilder.name(),suggestionContext);
  }
  return suggestionSearchContext;
}
