{
  String templateString="{" + "  \"inline\" : \"{ \\\"size\\\": \\\"{{size}}\\\", \\\"query\\\":{\\\"match_all\\\":{}}}\"," + "  \"params\":{"+ "    \"size\":2"+ "  }\n"+ "}";
  XContentParser templateSourceParser=XContentFactory.xContent(templateString).createParser(templateString);
  context.reset(templateSourceParser);
  TemplateQueryParser parser=injector.getInstance(TemplateQueryParser.class);
  try {
    parser.fromXContent(context.parseContext()).rewrite(context);
    fail("Expected ParsingException");
  }
 catch (  ParsingException e) {
    assertThat(e.getMessage(),containsString("query malformed, no field after start_object"));
  }
}
