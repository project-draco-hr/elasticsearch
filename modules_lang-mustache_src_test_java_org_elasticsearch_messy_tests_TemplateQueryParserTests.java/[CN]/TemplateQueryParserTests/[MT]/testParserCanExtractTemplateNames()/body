{
  String templateString="{ \"file\": \"storedTemplate\" ,\"params\":{\"template\":\"all\" } } ";
  XContentParser templateSourceParser=XContentFactory.xContent(templateString).createParser(templateString);
  QueryShardContext context=contextFactory.get();
  templateSourceParser.nextToken();
  Query query=QueryBuilder.rewriteQuery(TemplateQueryBuilder.fromXContent(context.newParseContext(templateSourceParser)),context).toQuery(context);
  assertTrue("Parsing template query failed.",query instanceof MatchAllDocsQuery);
}
