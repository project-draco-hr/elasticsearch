{
  String templateString="{" + "  \"inline\" : \"{ \\\"match_{{#use_it}}{{template}}{{/use_it}}\\\":{} }\"," + "  \"params\":{"+ "    \"template\":\"all\","+ "    \"use_it\": true"+ "  }"+ "}";
  XContentParser templateSourceParser=XContentFactory.xContent(templateString).createParser(templateString);
  QueryShardContext context=contextFactory.get();
  Query query=QueryBuilder.rewriteQuery(TemplateQueryBuilder.fromXContent(context.newParseContext(templateSourceParser)).get(),context).toQuery(context);
  assertTrue("Parsing template query failed.",query instanceof MatchAllDocsQuery);
}
