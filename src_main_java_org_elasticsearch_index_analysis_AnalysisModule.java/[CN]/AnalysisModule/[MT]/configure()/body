{
  MapBinder<String,CharFilterFactoryFactory> charFilterBinder=MapBinder.newMapBinder(binder(),String.class,CharFilterFactoryFactory.class);
  AnalysisBinderProcessor.CharFiltersBindings charFiltersBindings=new AnalysisBinderProcessor.CharFiltersBindings();
  for (  AnalysisBinderProcessor processor : processors) {
    processor.processCharFilters(charFiltersBindings);
  }
  charFiltersBindings.charFilters.putAll(charFilters);
  Map<String,Settings> charFiltersSettings=settings.getGroups("index.analysis.char_filter");
  for (  Map.Entry<String,Settings> entry : charFiltersSettings.entrySet()) {
    String charFilterName=entry.getKey();
    Settings charFilterSettings=entry.getValue();
    Class<? extends CharFilterFactory> type=null;
    try {
      type=charFilterSettings.getAsClass("type",null,"org.elasticsearch.index.analysis.","CharFilterFactory");
    }
 catch (    NoClassSettingsException e) {
      if (charFilterSettings.get("type") != null) {
        type=charFiltersBindings.charFilters.get(Strings.toUnderscoreCase(charFilterSettings.get("type")));
        if (type == null) {
          type=charFiltersBindings.charFilters.get(Strings.toCamelCase(charFilterSettings.get("type")));
        }
      }
      if (type == null) {
        throw new ElasticSearchIllegalArgumentException("failed to find char filter type [" + charFilterSettings.get("type") + "] for ["+ charFilterName+ "]",e);
      }
    }
    if (type == null) {
      throw new ElasticSearchIllegalArgumentException("Char Filter [" + charFilterName + "] must have a type associated with it");
    }
    charFilterBinder.addBinding(charFilterName).toProvider(FactoryProvider.newFactory(CharFilterFactoryFactory.class,type)).in(Scopes.SINGLETON);
  }
  for (  Map.Entry<String,Class<? extends CharFilterFactory>> entry : charFiltersBindings.charFilters.entrySet()) {
    String charFilterName=entry.getKey();
    Class<? extends CharFilterFactory> clazz=entry.getValue();
    if (charFiltersSettings.containsKey(charFilterName)) {
      continue;
    }
    if (clazz.getAnnotation(AnalysisSettingsRequired.class) != null) {
      continue;
    }
    if (indicesAnalysisService != null && indicesAnalysisService.hasCharFilter(charFilterName)) {
    }
 else {
      charFilterBinder.addBinding(charFilterName).toProvider(FactoryProvider.newFactory(CharFilterFactoryFactory.class,clazz)).in(Scopes.SINGLETON);
    }
  }
  MapBinder<String,TokenFilterFactoryFactory> tokenFilterBinder=MapBinder.newMapBinder(binder(),String.class,TokenFilterFactoryFactory.class);
  AnalysisBinderProcessor.TokenFiltersBindings tokenFiltersBindings=new AnalysisBinderProcessor.TokenFiltersBindings();
  for (  AnalysisBinderProcessor processor : processors) {
    processor.processTokenFilters(tokenFiltersBindings);
  }
  tokenFiltersBindings.tokenFilters.putAll(tokenFilters);
  Map<String,Settings> tokenFiltersSettings=settings.getGroups("index.analysis.filter");
  for (  Map.Entry<String,Settings> entry : tokenFiltersSettings.entrySet()) {
    String tokenFilterName=entry.getKey();
    Settings tokenFilterSettings=entry.getValue();
    Class<? extends TokenFilterFactory> type=null;
    try {
      type=tokenFilterSettings.getAsClass("type",null,"org.elasticsearch.index.analysis.","TokenFilterFactory");
    }
 catch (    NoClassSettingsException e) {
      if (tokenFilterSettings.get("type") != null) {
        type=tokenFiltersBindings.tokenFilters.get(Strings.toUnderscoreCase(tokenFilterSettings.get("type")));
        if (type == null) {
          type=tokenFiltersBindings.tokenFilters.get(Strings.toCamelCase(tokenFilterSettings.get("type")));
        }
      }
      if (type == null) {
        throw new ElasticSearchIllegalArgumentException("failed to find token filter type [" + tokenFilterSettings.get("type") + "] for ["+ tokenFilterName+ "]",e);
      }
    }
    if (type == null) {
      throw new ElasticSearchIllegalArgumentException("token filter [" + tokenFilterName + "] must have a type associated with it");
    }
    tokenFilterBinder.addBinding(tokenFilterName).toProvider(FactoryProvider.newFactory(TokenFilterFactoryFactory.class,type)).in(Scopes.SINGLETON);
  }
  for (  Map.Entry<String,Class<? extends TokenFilterFactory>> entry : tokenFiltersBindings.tokenFilters.entrySet()) {
    String tokenFilterName=entry.getKey();
    Class<? extends TokenFilterFactory> clazz=entry.getValue();
    if (tokenFiltersSettings.containsKey(tokenFilterName)) {
      continue;
    }
    if (clazz.getAnnotation(AnalysisSettingsRequired.class) != null) {
      continue;
    }
    if (indicesAnalysisService != null && indicesAnalysisService.hasTokenFilter(tokenFilterName)) {
    }
 else {
      tokenFilterBinder.addBinding(tokenFilterName).toProvider(FactoryProvider.newFactory(TokenFilterFactoryFactory.class,clazz)).in(Scopes.SINGLETON);
    }
  }
  MapBinder<String,TokenizerFactoryFactory> tokenizerBinder=MapBinder.newMapBinder(binder(),String.class,TokenizerFactoryFactory.class);
  AnalysisBinderProcessor.TokenizersBindings tokenizersBindings=new AnalysisBinderProcessor.TokenizersBindings();
  for (  AnalysisBinderProcessor processor : processors) {
    processor.processTokenizers(tokenizersBindings);
  }
  tokenizersBindings.tokenizers.putAll(tokenizers);
  Map<String,Settings> tokenizersSettings=settings.getGroups("index.analysis.tokenizer");
  for (  Map.Entry<String,Settings> entry : tokenizersSettings.entrySet()) {
    String tokenizerName=entry.getKey();
    Settings tokenizerSettings=entry.getValue();
    Class<? extends TokenizerFactory> type=null;
    try {
      type=tokenizerSettings.getAsClass("type",null,"org.elasticsearch.index.analysis.","TokenizerFactory");
    }
 catch (    NoClassSettingsException e) {
      if (tokenizerSettings.get("type") != null) {
        type=tokenizersBindings.tokenizers.get(Strings.toUnderscoreCase(tokenizerSettings.get("type")));
        if (type == null) {
          type=tokenizersBindings.tokenizers.get(Strings.toCamelCase(tokenizerSettings.get("type")));
        }
      }
      if (type == null) {
        throw new ElasticSearchIllegalArgumentException("failed to find tokenizer type [" + tokenizerSettings.get("type") + "] for ["+ tokenizerName+ "]",e);
      }
    }
    if (type == null) {
      throw new ElasticSearchIllegalArgumentException("token filter [" + tokenizerName + "] must have a type associated with it");
    }
    tokenizerBinder.addBinding(tokenizerName).toProvider(FactoryProvider.newFactory(TokenizerFactoryFactory.class,type)).in(Scopes.SINGLETON);
  }
  for (  Map.Entry<String,Class<? extends TokenizerFactory>> entry : tokenizersBindings.tokenizers.entrySet()) {
    String tokenizerName=entry.getKey();
    Class<? extends TokenizerFactory> clazz=entry.getValue();
    if (tokenizersSettings.containsKey(tokenizerName)) {
      continue;
    }
    if (clazz.getAnnotation(AnalysisSettingsRequired.class) != null) {
      continue;
    }
    if (indicesAnalysisService != null && indicesAnalysisService.hasTokenizer(tokenizerName)) {
    }
 else {
      tokenizerBinder.addBinding(tokenizerName).toProvider(FactoryProvider.newFactory(TokenizerFactoryFactory.class,clazz)).in(Scopes.SINGLETON);
    }
  }
  MapBinder<String,AnalyzerProviderFactory> analyzerBinder=MapBinder.newMapBinder(binder(),String.class,AnalyzerProviderFactory.class);
  AnalysisBinderProcessor.AnalyzersBindings analyzersBindings=new AnalysisBinderProcessor.AnalyzersBindings();
  for (  AnalysisBinderProcessor processor : processors) {
    processor.processAnalyzers(analyzersBindings);
  }
  analyzersBindings.analyzers.putAll(analyzers);
  Map<String,Settings> analyzersSettings=settings.getGroups("index.analysis.analyzer");
  for (  Map.Entry<String,Settings> entry : analyzersSettings.entrySet()) {
    String analyzerName=entry.getKey();
    Settings analyzerSettings=entry.getValue();
    Class<? extends AnalyzerProvider> type=null;
    try {
      type=analyzerSettings.getAsClass("type",null,"org.elasticsearch.index.analysis.","AnalyzerProvider");
    }
 catch (    NoClassSettingsException e) {
      if (analyzerSettings.get("type") != null) {
        type=analyzersBindings.analyzers.get(Strings.toUnderscoreCase(analyzerSettings.get("type")));
        if (type == null) {
          type=analyzersBindings.analyzers.get(Strings.toCamelCase(analyzerSettings.get("type")));
        }
      }
      if (type == null) {
        String tokenizerName=analyzerSettings.get("tokenizer");
        if (tokenizerName != null) {
          type=CustomAnalyzerProvider.class;
        }
 else {
          throw new ElasticSearchIllegalArgumentException("failed to find analyzer type [" + analyzerSettings.get("type") + "] or tokenizer for ["+ analyzerName+ "]",e);
        }
      }
    }
    if (type == null) {
      String tokenizerName=analyzerSettings.get("tokenizer");
      if (tokenizerName != null) {
        type=CustomAnalyzerProvider.class;
      }
 else {
        throw new ElasticSearchIllegalArgumentException("failed to find analyzer type [" + analyzerSettings.get("type") + "] or tokenizer for ["+ analyzerName+ "]");
      }
    }
    analyzerBinder.addBinding(analyzerName).toProvider(FactoryProvider.newFactory(AnalyzerProviderFactory.class,type)).in(Scopes.SINGLETON);
  }
  for (  Map.Entry<String,Class<? extends AnalyzerProvider>> entry : analyzersBindings.analyzers.entrySet()) {
    String analyzerName=entry.getKey();
    Class<? extends AnalyzerProvider> clazz=entry.getValue();
    if (analyzersSettings.containsKey(analyzerName)) {
      continue;
    }
    if (clazz.getAnnotation(AnalysisSettingsRequired.class) != null) {
      continue;
    }
    if (indicesAnalysisService != null && indicesAnalysisService.hasAnalyzer(analyzerName)) {
    }
 else {
      analyzerBinder.addBinding(analyzerName).toProvider(FactoryProvider.newFactory(AnalyzerProviderFactory.class,clazz)).in(Scopes.SINGLETON);
    }
  }
  bind(AnalysisService.class).in(Scopes.SINGLETON);
}
