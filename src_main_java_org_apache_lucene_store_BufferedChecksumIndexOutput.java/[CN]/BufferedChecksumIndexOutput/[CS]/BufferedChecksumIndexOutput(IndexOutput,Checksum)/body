{
  super(delegate instanceof BufferedIndexOutput ? ((BufferedIndexOutput)delegate).getBufferSize() : BufferedIndexOutput.DEFAULT_BUFFER_SIZE);
  if (delegate instanceof BufferedIndexOutput) {
    bufferedDelegate=(BufferedIndexOutput)delegate;
    this.delegate=delegate;
  }
 else {
    this.delegate=delegate;
    bufferedDelegate=null;
  }
  this.digest=digest;
}
