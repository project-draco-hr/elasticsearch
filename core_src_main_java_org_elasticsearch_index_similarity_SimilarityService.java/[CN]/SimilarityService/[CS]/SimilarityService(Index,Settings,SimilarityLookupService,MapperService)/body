{
  super(index,indexSettings);
  this.similarityLookupService=similarityLookupService;
  this.mapperService=mapperService;
  Similarity defaultSimilarity=similarityLookupService.similarity(SimilarityLookupService.DEFAULT_SIMILARITY).get();
  Similarity baseSimilarity=(similarityLookupService.similarity("base") != null) ? similarityLookupService.similarity("base").get() : defaultSimilarity;
  this.perFieldSimilarity=(mapperService != null) ? new PerFieldSimilarity(defaultSimilarity,baseSimilarity,mapperService) : defaultSimilarity;
}
