{
  Throwable originalCause=getCause();
  Throwable cause=originalCause;
  if (cause instanceof CreationException) {
    cause=getFirstGuiceCause((CreationException)cause);
  }
  String message=cause.getMessage();
  if (message == null) {
    message="Unknown Error";
  }
  s.println(message);
  if (cause != null) {
    while (cause.getCause() != null) {
      cause=cause.getCause();
    }
    if (cause != originalCause && (message.equals(cause.toString()) == false)) {
      s.println("Likely root cause: " + cause);
    }
    StackTraceElement stack[]=cause.getStackTrace();
    int linesWritten=0;
    for (int i=0; i < stack.length; i++) {
      if (linesWritten == STACKTRACE_LIMIT) {
        s.println("\t<<<truncated>>>");
        break;
      }
      String line=stack[i].toString();
      if (line.startsWith(GUICE_PACKAGE)) {
        while (i + 1 < stack.length && stack[i + 1].toString().startsWith(GUICE_PACKAGE)) {
          i++;
        }
        s.println("\tat <<<guice>>>");
        linesWritten++;
        continue;
      }
      s.println("\tat " + line.toString());
      linesWritten++;
    }
  }
  s.println("Refer to the log for complete error details.");
}
