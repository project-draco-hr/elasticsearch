{
  if (query instanceof PercolatorQuery) {
    return (PercolatorQuery)query;
  }
 else   if (query instanceof BooleanQuery) {
    for (    BooleanClause clause : ((BooleanQuery)query).clauses()) {
      PercolatorQuery result=locatePercolatorQuery(clause.getQuery());
      if (result != null) {
        return result;
      }
    }
  }
 else   if (query instanceof ConstantScoreQuery) {
    return locatePercolatorQuery(((ConstantScoreQuery)query).getQuery());
  }
 else   if (query instanceof BoostQuery) {
    return locatePercolatorQuery(((BoostQuery)query).getQuery());
  }
  return null;
}
