{
  int size=in.readVInt();
  if (size == 0) {
    facets=ImmutableList.of();
    facetsAsMap=ImmutableMap.of();
  }
 else {
    facets=Lists.newArrayListWithCapacity(size);
    for (int i=0; i < size; i++) {
      BytesReference type=in.readBytesReference();
      Facet facet=InternalFacet.Streams.stream(type).readFacet(in);
      facets.add(facet);
    }
  }
}
