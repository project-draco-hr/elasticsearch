{
  internalCluster().ensureAtMostNumDataNodes(5);
  internalCluster().ensureAtLeastNumDataNodes(1);
  assertAcked(prepareCreate("test1").setSettings(settingsBuilder().put(Store.INDEX_STORE_STATS_REFRESH_INTERVAL,0).build()));
  index("test1","type","1","f","f");
  ensureYellow("test1");
  ClusterStatsResponse response=client().admin().cluster().prepareClusterStats().get();
  String msg=response.toString();
  assertThat(msg,response.getTimestamp(),Matchers.greaterThan(946681200000l));
  assertThat(msg,response.indicesStats.getStore().getSizeInBytes(),Matchers.greaterThan(0l));
  assertThat(msg,response.nodesStats.getFs().getTotal().bytes(),Matchers.greaterThan(0l));
  assertThat(msg,response.nodesStats.getJvm().getVersions().size(),Matchers.greaterThan(0));
  assertThat(msg,response.nodesStats.getVersions().size(),Matchers.greaterThan(0));
  assertThat(msg,response.nodesStats.getVersions().contains(Version.CURRENT),Matchers.equalTo(true));
  assertThat(msg,response.nodesStats.getPlugins().size(),Matchers.greaterThanOrEqualTo(0));
  assertThat(msg,response.nodesStats.getProcess().count,Matchers.greaterThan(0));
  assertThat(msg,response.nodesStats.getProcess().getAvgOpenFileDescriptors(),Matchers.greaterThanOrEqualTo(0L));
  assertThat(msg,response.nodesStats.getProcess().getMinOpenFileDescriptors(),Matchers.greaterThanOrEqualTo(-1L));
  assertThat(msg,response.nodesStats.getProcess().getMaxOpenFileDescriptors(),Matchers.greaterThanOrEqualTo(-1L));
}
