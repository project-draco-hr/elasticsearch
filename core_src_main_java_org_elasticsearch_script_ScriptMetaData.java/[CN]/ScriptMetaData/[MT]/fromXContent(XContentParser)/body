{
  Map<String,ScriptAsBytes> scripts=new HashMap<>();
  String key=null;
  for (Token token=parser.nextToken(); token != Token.END_OBJECT; token=parser.nextToken()) {
switch (token) {
case FIELD_NAME:
      key=parser.currentName();
    break;
case START_OBJECT:
  XContentBuilder contentBuilder=XContentBuilder.builder(parser.contentType().xContent());
contentBuilder.copyCurrentStructure(parser);
scripts.put(key,new ScriptAsBytes(contentBuilder.bytes()));
break;
default :
throw new ParsingException(parser.getTokenLocation(),"Unexpected token [" + token + "]");
}
}
return new ScriptMetaData(scripts);
}
