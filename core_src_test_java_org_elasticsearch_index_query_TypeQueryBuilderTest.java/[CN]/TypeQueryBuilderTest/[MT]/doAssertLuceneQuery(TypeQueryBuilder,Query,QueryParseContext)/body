{
  assertThat(query,either(instanceOf(TermQuery.class)).or(instanceOf(ConstantScoreQuery.class)));
  if (query instanceof ConstantScoreQuery) {
    query=((ConstantScoreQuery)query).getQuery();
    assertThat(query,instanceOf(TermQuery.class));
  }
  TermQuery termQuery=(TermQuery)query;
  assertThat(termQuery.getTerm().field(),equalTo(TypeFieldMapper.NAME));
  assertThat(termQuery.getTerm().bytes(),equalTo(queryBuilder.type()));
}
