{
  assertAcked(client().admin().indices().prepareCreate("test").setSettings(ImmutableSettings.builder().put("index.number_of_shards",1).put("index.number_of_replicas",0)).get());
  ensureGreen("test");
  IndicesService indicesService=getInstanceFromNode(IndicesService.class);
  IndexService indexService=indicesService.indexServiceSafe("test");
  IndexShard indexShard=indexService.shard(0);
  assertEquals(0,indexShard.getOperationsCount());
  indexShard.incrementOperationCounter();
  assertEquals(1,indexShard.getOperationsCount());
  indexShard.incrementOperationCounter();
  assertEquals(2,indexShard.getOperationsCount());
  indexShard.decrementOperationCounter();
  indexShard.decrementOperationCounter();
  assertEquals(0,indexShard.getOperationsCount());
}
