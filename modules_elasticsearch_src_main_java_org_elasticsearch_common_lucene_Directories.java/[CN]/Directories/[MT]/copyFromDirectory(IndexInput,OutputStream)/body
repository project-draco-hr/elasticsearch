{
  final int BUFFER_SIZE=ii.length() < 16384 ? (int)ii.length() : 16384;
  byte[] buffer=new byte[BUFFER_SIZE];
  try {
    long len=ii.length();
    long readCount=0;
    while (readCount < len) {
      int toRead=readCount + BUFFER_SIZE > len ? (int)(len - readCount) : BUFFER_SIZE;
      ii.readBytes(buffer,0,toRead,false);
      readCount+=toRead;
      os.write(buffer,0,toRead);
    }
  }
  finally {
    Closeables.closeQuietly(os);
    Closeables.closeQuietly(ii);
  }
}
