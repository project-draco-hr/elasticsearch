{
  logger.info("-->  creating azure repository with container name [{}]",container);
  try {
    PutRepositoryResponse putRepositoryResponse=client().admin().cluster().preparePutRepository("test-repo").setType("azure").setSettings(ImmutableSettings.settingsBuilder().put(AzureStorageService.Fields.CONTAINER,container).put(AzureStorageService.Fields.BASE_PATH,basePath).put(AzureStorageService.Fields.CHUNK_SIZE,randomIntBetween(1000,10000))).get();
    assertThat(putRepositoryResponse.isAcknowledged(),is(correct));
    client().admin().cluster().prepareDeleteRepository("test-repo").get();
  }
 catch (  RepositoryException e) {
    if (correct) {
      throw e;
    }
  }
}
