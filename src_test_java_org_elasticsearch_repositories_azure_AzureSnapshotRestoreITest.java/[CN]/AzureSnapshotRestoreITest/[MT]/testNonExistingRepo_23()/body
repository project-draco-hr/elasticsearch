{
  Client client=client();
  logger.info("-->  creating azure repository with path [{}]",getRepositoryPath());
  PutRepositoryResponse putRepositoryResponse=client.admin().cluster().preparePutRepository("test-repo").setType("azure").setSettings(ImmutableSettings.settingsBuilder().put(Repository.CONTAINER,getContainerName()).put(Repository.BASE_PATH,getRepositoryPath()).put(Repository.CHUNK_SIZE,randomIntBetween(1000,10000))).get();
  assertThat(putRepositoryResponse.isAcknowledged(),equalTo(true));
  logger.info("--> restore non existing snapshot");
  try {
    client.admin().cluster().prepareRestoreSnapshot("test-repo","no-existing-snapshot").setWaitForCompletion(true).execute().actionGet();
    fail("Shouldn't be here");
  }
 catch (  SnapshotMissingException ex) {
  }
}
