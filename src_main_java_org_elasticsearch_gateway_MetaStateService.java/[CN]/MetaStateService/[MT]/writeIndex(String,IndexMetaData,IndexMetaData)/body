{
  logger.trace("[{}] writing state, reason [{}]",indexMetaData.index(),reason);
  try {
    indexStateFormat.write(indexMetaData,indexMetaData.version(),nodeEnv.indexPaths(new Index(indexMetaData.index())));
  }
 catch (  Throwable ex) {
    logger.warn("[{}]: failed to write index state",ex,indexMetaData.index());
    throw new IOException("failed to write state for [" + indexMetaData.index() + "]",ex);
  }
}
