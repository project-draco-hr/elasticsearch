{
  Request request=new Request();
  PlainActionFuture<Response> listener=new PlainActionFuture<>();
  clusterService.setState(ClusterStateCreationUtils.state(localNode,randomFrom(null,localNode,remoteNode),allNodes));
  new Action(Settings.EMPTY,"testAction",transportService,clusterService,threadPool){
    @Override protected boolean localExecute(    Request request){
      return true;
    }
  }
.execute(request,listener);
  assertTrue(listener.isDone());
  listener.get();
}
