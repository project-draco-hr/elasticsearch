{
  ShardId shardId=lock.getShardId();
  if (canDeleteShardContent(shardId,indexSettings) == false) {
    throw new ElasticsearchIllegalStateException("Can't delete shard " + shardId);
  }
  logger.trace("{} deleting shard reason [{}]",shardId,reason);
  nodeEnv.deleteShardDirectoryUnderLock(lock,indexSettings);
}
