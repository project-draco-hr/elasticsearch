{
  final Tuple<IndexService,Injector> indexServiceInjectorTuple=this.indices.get(shardId.getIndex());
  if (indexServiceInjectorTuple != null && nodeEnv.hasNodeFile()) {
    final IndexService indexService=indexServiceInjectorTuple.v1();
    return indexService.hasShard(shardId.id()) == false;
  }
 else   if (nodeEnv.hasNodeFile()) {
    final Path[] shardLocations=nodeEnv.shardDataPaths(shardId,indexSettings);
    return FileSystemUtils.exists(shardLocations);
  }
  return false;
}
