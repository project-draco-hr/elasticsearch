{
  IndexQueryParserService queryParser=queryParser();
  Query q=queryParser.parse(boolQuery().should(dummyQuery()).must(dummyQuery()).filter(dummyQuery()).mustNot(dummyQuery())).query();
  assertThat(q,instanceOf(BooleanQuery.class));
  BooleanQuery bq=(BooleanQuery)q;
  assertEquals(4,bq.clauses().size());
  for (  BooleanClause clause : bq.clauses()) {
    DummyQuery dummy=(DummyQuery)clause.getQuery();
switch (clause.getOccur()) {
case FILTER:
case MUST_NOT:
      assertEquals(true,dummy.isFilter);
    break;
case MUST:
case SHOULD:
  assertEquals(false,dummy.isFilter);
break;
default :
throw new AssertionError();
}
}
q=queryParser.parse(boolQuery().should(dummyQuery()).should(dummyQuery()).must(dummyQuery()).must(dummyQuery()).filter(dummyQuery()).filter(dummyQuery()).mustNot(dummyQuery()).mustNot(dummyQuery())).query();
assertThat(q,instanceOf(BooleanQuery.class));
bq=(BooleanQuery)q;
assertEquals(8,bq.clauses().size());
for (BooleanClause clause : bq.clauses()) {
DummyQuery dummy=(DummyQuery)clause.getQuery();
switch (clause.getOccur()) {
case FILTER:
case MUST_NOT:
assertEquals(true,dummy.isFilter);
break;
case MUST:
case SHOULD:
assertEquals(false,dummy.isFilter);
break;
default :
throw new AssertionError();
}
}
}
