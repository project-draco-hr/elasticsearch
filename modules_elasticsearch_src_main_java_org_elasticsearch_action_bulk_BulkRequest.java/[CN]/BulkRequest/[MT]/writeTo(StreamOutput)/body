{
  out.writeByte(replicationType.id());
  out.writeByte(consistencyLevel.id());
  out.writeVInt(requests.size());
  for (  ActionRequest request : requests) {
    if (request instanceof IndexRequest) {
      out.writeByte((byte)0);
    }
 else     if (request instanceof DeleteRequest) {
      out.writeByte((byte)1);
    }
    request.writeTo(out);
  }
  out.writeBoolean(refresh);
}
