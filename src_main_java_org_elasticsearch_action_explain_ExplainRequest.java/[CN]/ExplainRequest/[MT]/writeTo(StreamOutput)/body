{
  super.writeTo(out);
  out.writeString(type);
  out.writeString(id);
  out.writeOptionalString(routing);
  out.writeOptionalString(preference);
  out.writeBytesReference(source);
  out.writeStringArray(filteringAlias);
  if (fields != null) {
    out.writeBoolean(true);
    out.writeStringArray(fields);
  }
 else {
    out.writeBoolean(false);
  }
  FetchSourceContext.optionalWriteToStream(fetchSourceContext,out);
  if (out.getVersion().onOrAfter(Version.V_0_90_6)) {
    out.writeVLong(nowInMillis);
  }
}
