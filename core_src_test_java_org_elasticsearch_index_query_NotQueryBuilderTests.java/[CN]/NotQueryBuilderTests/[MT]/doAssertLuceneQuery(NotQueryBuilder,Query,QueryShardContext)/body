{
  Query filter=queryBuilder.innerQuery().toQuery(context);
  if (filter == null) {
    assertThat(query,nullValue());
  }
 else {
    assertThat(query,instanceOf(BooleanQuery.class));
    BooleanQuery booleanQuery=(BooleanQuery)query;
    assertThat(booleanQuery.clauses().size(),equalTo(2));
    assertThat(booleanQuery.clauses().get(0).getOccur(),equalTo(BooleanClause.Occur.MUST));
    assertThat(booleanQuery.clauses().get(0).getQuery(),instanceOf(MatchAllDocsQuery.class));
    assertThat(booleanQuery.clauses().get(1).getOccur(),equalTo(BooleanClause.Occur.MUST_NOT));
    assertThat(booleanQuery.clauses().get(1).getQuery(),instanceOf(filter.getClass()));
  }
}
