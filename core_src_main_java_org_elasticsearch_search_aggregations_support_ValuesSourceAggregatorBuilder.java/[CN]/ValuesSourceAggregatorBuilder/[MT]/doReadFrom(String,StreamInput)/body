{
  ValuesSourceType valuesSourceType=ValuesSourceType.ANY.readFrom(in);
  ValueType targetValueType=null;
  if (in.readBoolean()) {
    targetValueType=ValueType.readFromStream(in);
  }
  ValuesSourceAggregatorBuilder<VS,AB> factory=innerReadFrom(name,valuesSourceType,targetValueType,in);
  factory.field=in.readOptionalString();
  if (in.readBoolean()) {
    factory.script=Script.readScript(in);
  }
  if (in.readBoolean()) {
    factory.valueType=ValueType.readFromStream(in);
  }
  factory.format=in.readOptionalString();
  factory.missing=in.readGenericValue();
  if (in.readBoolean()) {
    factory.timeZone=DateTimeZone.forID(in.readString());
  }
  return (AB)factory;
}
