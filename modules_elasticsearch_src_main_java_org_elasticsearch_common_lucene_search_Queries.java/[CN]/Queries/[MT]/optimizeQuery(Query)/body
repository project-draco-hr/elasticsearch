{
  if (q instanceof BooleanQuery) {
    BooleanQuery booleanQuery=(BooleanQuery)q;
    BooleanClause[] clauses=booleanQuery.getClauses();
    if (clauses.length == 1) {
      BooleanClause clause=clauses[0];
      if (clause.getOccur() == BooleanClause.Occur.MUST) {
        Query query=clause.getQuery();
        query.setBoost(booleanQuery.getBoost() * query.getBoost());
        return optimizeQuery(query);
      }
      if (clause.getOccur() == BooleanClause.Occur.SHOULD && booleanQuery.getMinimumNumberShouldMatch() > 0) {
        Query query=clause.getQuery();
        query.setBoost(booleanQuery.getBoost() * query.getBoost());
        return optimizeQuery(query);
      }
    }
  }
  return q;
}
