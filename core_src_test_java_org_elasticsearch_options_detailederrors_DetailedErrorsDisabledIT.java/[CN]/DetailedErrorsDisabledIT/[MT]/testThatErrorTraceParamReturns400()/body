{
  try (RestClient restClient=restClient()){
    restClient.performRequest("DELETE","/",Collections.singletonMap("error_trace","true"),null);
    fail("request should have failed");
  }
 catch (  ElasticsearchResponseException e) {
    ElasticsearchResponse response=e.getElasticsearchResponse();
    assertThat(response.getFirstHeader("Content-Type"),is("application/json"));
    assertThat(e.getResponseBody(),is("{\"error\":\"error traces in responses are disabled.\"}"));
    assertThat(response.getStatusLine().getStatusCode(),is(400));
  }
}
