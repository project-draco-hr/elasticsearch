{
  valueScript.setNextDocId(docId);
  long time=CountDateHistogramFacetCollector.bucket(dateTime.getMillis(),interval);
  double scriptValue=valueScript.runAsDouble();
  InternalFullDateHistogramFacet.FullEntry entry=entries.get(time);
  if (entry == null) {
    entry=new InternalFullDateHistogramFacet.FullEntry(time,1,scriptValue,scriptValue,1,scriptValue);
    entries.put(time,entry);
  }
 else {
    entry.count++;
    entry.totalCount++;
    entry.total+=scriptValue;
    if (scriptValue < entry.min) {
      entry.min=scriptValue;
    }
    if (scriptValue > entry.max) {
      entry.max=scriptValue;
    }
  }
}
