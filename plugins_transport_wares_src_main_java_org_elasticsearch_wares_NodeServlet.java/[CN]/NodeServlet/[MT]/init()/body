{
  getServletContext().log("Initializing elasticsearch Node '" + getServletName() + "'");
  ImmutableSettings.Builder settings=ImmutableSettings.settingsBuilder();
  InputStream resourceAsStream=getServletContext().getResourceAsStream("/WEB-INF/elasticsearch.json");
  if (resourceAsStream != null) {
    settings.loadFromStream("/WEB-INF/elasticsearch.json",resourceAsStream);
    try {
      resourceAsStream.close();
    }
 catch (    IOException e) {
    }
  }
  resourceAsStream=getServletContext().getResourceAsStream("/WEB-INF/elasticsearch.yml");
  if (resourceAsStream != null) {
    settings.loadFromStream("/WEB-INF/elasticsearch.yml",resourceAsStream);
    try {
      resourceAsStream.close();
    }
 catch (    IOException e) {
    }
  }
  if (settings.get("http.enabled") == null) {
    settings.put("http.enabled",false);
  }
  node=NodeBuilder.nodeBuilder().settings(settings).node();
  restController=((InternalNode)node).injector().getInstance(RestController.class);
  getServletContext().setAttribute(NODE_KEY,node);
}
