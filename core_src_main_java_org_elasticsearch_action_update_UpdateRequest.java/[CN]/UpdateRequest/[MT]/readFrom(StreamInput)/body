{
  super.readFrom(in);
  activeShardCount=ActiveShardCount.readFrom(in);
  type=in.readString();
  id=in.readString();
  routing=in.readOptionalString();
  parent=in.readOptionalString();
  if (in.readBoolean()) {
    script=new Script(in);
  }
  retryOnConflict=in.readVInt();
  refreshPolicy=RefreshPolicy.readFrom(in);
  if (in.readBoolean()) {
    doc=new IndexRequest();
    doc.readFrom(in);
  }
  int size=in.readInt();
  if (size >= 0) {
    fields=new String[size];
    for (int i=0; i < size; i++) {
      fields[i]=in.readString();
    }
  }
  if (in.readBoolean()) {
    upsertRequest=new IndexRequest();
    upsertRequest.readFrom(in);
  }
  docAsUpsert=in.readBoolean();
  version=in.readLong();
  versionType=VersionType.fromValue(in.readByte());
  detectNoop=in.readBoolean();
  scriptedUpsert=in.readBoolean();
}
