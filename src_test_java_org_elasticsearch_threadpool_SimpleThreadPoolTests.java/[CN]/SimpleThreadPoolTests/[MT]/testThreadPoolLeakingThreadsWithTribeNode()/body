{
  Settings settings=ImmutableSettings.builder().put("node.name","thread_pool_leaking_threads_tribe_node").put("path.home",createTempDir()).put("tribe.t1.cluster.name","non_existing_cluster").put("tribe.t1.plugin.mandatory","non_existing").build();
  try {
    NodeBuilder.nodeBuilder().settings(settings).build();
    fail("The node startup is supposed to fail");
  }
 catch (  Throwable t) {
    assertThat(t.getMessage(),containsString("mandatory plugins [non_existing]"));
  }
}
