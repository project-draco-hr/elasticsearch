{
  Directory dir=newDirectory();
  IndexOutput o=dir.createOutput("oneByte",IOContext.DEFAULT);
  VerifyingIndexOutput out=new LegacyVerification.LengthVerifyingIndexOutput(o,2);
  out.writeByte((byte)3);
  try {
    out.verify();
    fail();
  }
 catch (  CorruptIndexException expected) {
  }
  out.close();
  try {
    out.verify();
    fail();
  }
 catch (  CorruptIndexException expected) {
  }
  dir.close();
}
