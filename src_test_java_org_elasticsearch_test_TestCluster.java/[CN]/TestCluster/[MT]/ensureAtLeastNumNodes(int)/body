{
  List<ListenableFuture<String>> futures=Lists.newArrayList();
synchronized (this) {
    int size=nodes.size();
    for (int i=size; i < n; i++) {
      logger.info("increasing cluster size from {} to {}",size,n);
      futures.add(startNodeAsync());
    }
  }
  try {
    Futures.allAsList(futures).get();
  }
 catch (  Exception e) {
    throw new ElasticsearchException("failed to start nodes",e);
  }
}
