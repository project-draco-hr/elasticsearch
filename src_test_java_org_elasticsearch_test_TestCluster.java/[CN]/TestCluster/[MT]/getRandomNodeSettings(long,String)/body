{
  Random random=new Random(seed);
  Builder builder=ImmutableSettings.settingsBuilder().put("cluster.name",clusterName).put("cluster.routing.schedule",(30 + random.nextInt(50)) + "ms").put("gateway.type","none");
  if (ENABLE_MOCK_MODULES && usually(random)) {
    builder.put("index.store.type",MockFSIndexStoreModule.class.getName());
    builder.put(IndexEngineModule.EngineSettings.ENGINE_TYPE,MockEngineModule.class.getName());
  }
  if (isLocalTransportConfigured()) {
    builder.put(TransportModule.TRANSPORT_TYPE_KEY,AssertingLocalTransportModule.class.getName());
  }
 else {
    builder.put(Transport.TransportSettings.TRANSPORT_TCP_COMPRESS,rarely(random));
  }
  builder.put("type",RandomPicks.randomFrom(random,CacheRecycler.Type.values()));
  return builder.build();
}
