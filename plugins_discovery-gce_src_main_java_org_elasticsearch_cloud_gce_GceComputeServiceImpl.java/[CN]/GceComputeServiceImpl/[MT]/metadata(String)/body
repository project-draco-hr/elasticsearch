{
  String urlMetadataNetwork=GCE_METADATA_URL + "/" + metadataPath;
  logger.debug("get metadata from [{}]",urlMetadataNetwork);
  URL url=new URL(urlMetadataNetwork);
  HttpHeaders headers;
  try {
    headers=AccessController.doPrivileged(new PrivilegedExceptionAction<HttpHeaders>(){
      @Override public HttpHeaders run() throws IOException {
        return new HttpHeaders();
      }
    }
);
    headers.put("Metadata-Flavor","Google");
    HttpResponse response;
    response=getGceHttpTransport().createRequestFactory().buildGetRequest(new GenericUrl(url)).setHeaders(headers).execute();
    String metadata=response.parseAsString();
    logger.debug("metadata found [{}]",metadata);
    return metadata;
  }
 catch (  Exception e) {
    throw new IOException("failed to fetch metadata from [" + urlMetadataNetwork + "]",e);
  }
}
