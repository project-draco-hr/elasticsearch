{
  int failedShards=0;
  for (  RestoreInProgress.ShardRestoreStatus status : shards.values()) {
    if (status.state() == RestoreInProgress.State.FAILURE) {
      failedShards++;
    }
  }
  return failedShards;
}
