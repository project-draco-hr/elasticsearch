{
  super.readFrom(in);
  recoveryId=in.readLong();
  shardId=ShardId.readShardId(in);
  int size=in.readVInt();
  operations=Lists.newArrayListWithExpectedSize(size);
  for (int i=0; i < size; i++) {
    if (in.getVersion().onOrAfter(Version.V_1_4_0_Beta)) {
      operations.add(TranslogStreams.CHECKSUMMED_TRANSLOG_STREAM.read(in));
    }
 else {
      operations.add(TranslogStreams.LEGACY_TRANSLOG_STREAM.read(in));
    }
  }
}
