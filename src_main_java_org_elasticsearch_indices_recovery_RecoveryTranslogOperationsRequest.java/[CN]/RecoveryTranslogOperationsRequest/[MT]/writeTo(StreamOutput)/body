{
  super.writeTo(out);
  out.writeLong(recoveryId);
  shardId.writeTo(out);
  out.writeVInt(operations.size());
  for (  Translog.Operation operation : operations) {
    if (out.getVersion().onOrAfter(Version.V_1_4_0_Beta)) {
      TranslogStreams.CHECKSUMMED_TRANSLOG_STREAM.write(out,operation);
    }
 else {
      TranslogStreams.LEGACY_TRANSLOG_STREAM.write(out,operation);
    }
  }
}
