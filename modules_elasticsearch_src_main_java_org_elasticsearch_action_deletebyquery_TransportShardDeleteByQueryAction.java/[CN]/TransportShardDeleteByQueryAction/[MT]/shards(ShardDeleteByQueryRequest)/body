{
  GroupShardsIterator group=indicesService.indexServiceSafe(request.index()).operationRouting().deleteByQueryShards(clusterService.state());
  for (  ShardsIterator shards : group) {
    if (shards.shardId().id() == request.shardId()) {
      return shards;
    }
  }
  throw new ElasticSearchIllegalStateException("No shards iterator found for shard [" + request.shardId() + "]");
}
