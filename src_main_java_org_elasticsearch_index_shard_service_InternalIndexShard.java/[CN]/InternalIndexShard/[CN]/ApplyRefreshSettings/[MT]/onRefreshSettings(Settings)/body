{
synchronized (mutex) {
    if (state == IndexShardState.CLOSED) {
      return;
    }
    TimeValue refreshInterval=settings.getAsTime(INDEX_REFRESH_INTERVAL,InternalIndexShard.this.refreshInterval);
    if (!refreshInterval.equals(InternalIndexShard.this.refreshInterval)) {
      logger.info("updating refresh_interval from [{}] to [{}]",InternalIndexShard.this.refreshInterval,refreshInterval);
      if (refreshScheduledFuture != null) {
        FutureUtils.cancel(refreshScheduledFuture);
        refreshScheduledFuture=null;
      }
      InternalIndexShard.this.refreshInterval=refreshInterval;
      if (refreshInterval.millis() > 0) {
        refreshScheduledFuture=threadPool.schedule(refreshInterval,ThreadPool.Names.SAME,new EngineRefresher());
      }
    }
  }
}
