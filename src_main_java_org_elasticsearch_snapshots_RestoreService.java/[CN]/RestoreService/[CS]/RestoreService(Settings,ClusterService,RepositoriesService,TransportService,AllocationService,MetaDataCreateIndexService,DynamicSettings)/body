{
  super(settings);
  this.clusterService=clusterService;
  this.repositoriesService=repositoriesService;
  this.transportService=transportService;
  this.allocationService=allocationService;
  this.createIndexService=createIndexService;
  this.dynamicSettings=dynamicSettings;
  transportService.registerRequestHandler(UPDATE_RESTORE_ACTION_NAME,UpdateIndexShardRestoreStatusRequest.class,ThreadPool.Names.SAME,new UpdateRestoreStateRequestHandler());
  clusterService.add(this);
}
