{
  logger.trace("[{}] successfully restored shard  [{}]",snapshotId,shardId);
  UpdateIndexShardRestoreStatusRequest request=new UpdateIndexShardRestoreStatusRequest(snapshotId,shardId,new ShardRestoreStatus(clusterService.state().nodes().localNodeId(),RestoreMetaData.State.SUCCESS));
  if (clusterService.state().nodes().localNodeMaster()) {
    innerUpdateRestoreState(request);
  }
 else {
    transportService.sendRequest(clusterService.state().nodes().masterNode(),UpdateRestoreStateRequestHandler.ACTION,request,EmptyTransportResponseHandler.INSTANCE_SAME);
  }
}
