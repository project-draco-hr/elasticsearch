{
  RoutingAllocation allocation=onePrimaryOnNode1And1ReplicaRecovering(yesAllocationDeciders());
  testAllocator.addData(node1,true,"MATCH",new StoreFileMetaData("file1",10,"MATCH_CHECKSUM")).addData(node2,false,"MATCH",new StoreFileMetaData("file1",10,"MATCH_CHECKSUM")).addData(node3,false,randomBoolean() ? "MATCH" : "NO_MATCH",new StoreFileMetaData("file1",10,"MATCH_CHECKSUM"));
  boolean changed=testAllocator.processExistingRecoveries(allocation);
  assertThat(changed,equalTo(false));
  assertThat(allocation.routingNodes().shardsWithState(ShardRoutingState.UNASSIGNED).size(),equalTo(0));
}
