{
  String endpoint=null;
  if (settings.get("cloud.aws.s3.endpoint") != null) {
    endpoint=settings.get("cloud.aws.s3.endpoint");
    logger.debug("using explicit s3 endpoint [{}]",endpoint);
  }
 else   if (settings.get("cloud.aws.region") != null) {
    String region=settings.get("cloud.aws.region").toLowerCase(Locale.ROOT);
    endpoint=getEndpoint(region);
    logger.debug("using s3 region [{}], with endpoint [{}]",region,endpoint);
  }
  return endpoint;
}
