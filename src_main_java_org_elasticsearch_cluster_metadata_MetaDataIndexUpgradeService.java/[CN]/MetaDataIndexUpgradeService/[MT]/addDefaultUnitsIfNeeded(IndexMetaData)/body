{
  if (indexMetaData.getCreationVersion().before(Version.V_2_0_0)) {
    Settings settings=indexMetaData.settings();
    Settings.Builder newSettings=null;
    for (    String byteSizeSetting : INDEX_BYTES_SIZE_SETTINGS) {
      String value=settings.get(byteSizeSetting);
      if (value != null) {
        try {
          Double.parseDouble(value);
        }
 catch (        NumberFormatException nfe) {
          continue;
        }
        logger.warn("byte-sized index setting [{}] with value [{}] is missing units; now adding default units (b)",byteSizeSetting,value);
        if (newSettings == null) {
          newSettings=Settings.builder();
          newSettings.put(settings);
        }
        newSettings.put(byteSizeSetting,value + "b");
      }
    }
    for (    String timeSetting : INDEX_TIME_SETTINGS) {
      String value=settings.get(timeSetting);
      if (value != null) {
        try {
          Double.parseDouble(value);
        }
 catch (        NumberFormatException nfe) {
          continue;
        }
        logger.warn("time index setting [{}] with value [{}] is missing units; now adding default units (ms)",timeSetting,value);
        if (newSettings == null) {
          newSettings=Settings.builder();
          newSettings.put(settings);
        }
        newSettings.put(timeSetting,value + "ms");
      }
    }
    if (newSettings != null) {
      return IndexMetaData.builder(indexMetaData).version(indexMetaData.version()).settings(newSettings.build()).build();
    }
  }
  return indexMetaData;
}
