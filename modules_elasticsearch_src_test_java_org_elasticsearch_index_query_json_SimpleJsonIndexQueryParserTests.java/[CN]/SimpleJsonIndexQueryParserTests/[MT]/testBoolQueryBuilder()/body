{
  IndexQueryParser queryParser=newQueryParser();
  Query parsedQuery=queryParser.parse(boolQuery().must(termQuery("content","test1")).mustNot(termQuery("content","test2")).should(termQuery("content","test3")).must(termQuery("content","test4")).build());
  assertThat(parsedQuery,instanceOf(BooleanQuery.class));
  BooleanQuery booleanQuery=(BooleanQuery)parsedQuery;
  BooleanClause[] clauses=booleanQuery.getClauses();
  assertThat(clauses.length,equalTo(4));
  assertThat(((TermQuery)clauses[0].getQuery()).getTerm(),equalTo(new Term("content","test1")));
  assertThat(clauses[0].getOccur(),equalTo(BooleanClause.Occur.MUST));
  assertThat(((TermQuery)clauses[1].getQuery()).getTerm(),equalTo(new Term("content","test2")));
  assertThat(clauses[1].getOccur(),equalTo(BooleanClause.Occur.MUST_NOT));
  assertThat(((TermQuery)clauses[2].getQuery()).getTerm(),equalTo(new Term("content","test3")));
  assertThat(clauses[2].getOccur(),equalTo(BooleanClause.Occur.SHOULD));
  assertThat(((TermQuery)clauses[3].getQuery()).getTerm(),equalTo(new Term("content","test4")));
  assertThat(clauses[3].getOccur(),equalTo(BooleanClause.Occur.MUST));
}
