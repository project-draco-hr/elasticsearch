{
  Directory dir=new RAMDirectory();
  IndexWriter indexWriter=new IndexWriter(dir,Lucene.STANDARD_ANALYZER,true,IndexWriter.MaxFieldLength.UNLIMITED);
  for (int i=0; i < 100; i++) {
    StringBuilder value=new StringBuilder().append("value");
    for (int j=0; j < i; j++) {
      value.append(" ").append("value");
    }
    indexWriter.addDocument(doc().add(field("id",Integer.toString(i))).add(field("value",value.toString())).boost(i).build());
  }
  assertThat(IndexWriters.estimateRamSize(indexWriter),greaterThan(0l));
  indexWriter.close();
}
