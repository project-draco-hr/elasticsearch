{
  super(shardId,indexSettings,threadPool,indexSettingsService,indexingService,warmer,store,deletionPolicy,translog,mergePolicyProvider,mergeScheduler,analysisService,similarityService,codecService);
  final long seed=indexSettings.getAsLong(ElasticsearchIntegrationTest.INDEX_SEED_SETTING,0l);
  random=new Random(seed);
  final double ratio=indexSettings.getAsDouble(WRAP_READER_RATIO,0.0d);
  wrapper=indexSettings.getAsClass(READER_WRAPPER_TYPE,AssertingDirectoryReader.class);
  wrapReader=random.nextDouble() < ratio;
  if (logger.isTraceEnabled()) {
    logger.trace("Using [{}] for shard [{}] seed: [{}] wrapReader: [{}]",this.getClass().getName(),shardId,seed,wrapReader);
  }
}
