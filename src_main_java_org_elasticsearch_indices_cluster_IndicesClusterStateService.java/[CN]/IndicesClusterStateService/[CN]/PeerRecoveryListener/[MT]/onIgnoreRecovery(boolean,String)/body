{
  if (!removeShard) {
    return;
  }
synchronized (mutex) {
    if (indexService.hasShard(shardRouting.shardId().id())) {
      if (logger.isDebugEnabled()) {
        logger.debug("[{}][{}] removing shard on ignored recovery, reason [{}]",shardRouting.index(),shardRouting.shardId().id(),reason);
      }
      try {
        indexService.removeShard(shardRouting.shardId().id(),"ignore recovery: " + reason);
      }
 catch (      IndexShardMissingException e) {
      }
catch (      Exception e1) {
        logger.warn("[{}][{}] failed to delete shard after ignore recovery",e1,indexService.index().name(),shardRouting.shardId().id());
      }
    }
  }
}
