{
  HashMap<String,IndexAlias> newAliases=newHashMap();
  for (  ObjectCursor<AliasMetaData> cursor : aliases) {
    AliasMetaData aliasMd=cursor.value;
    String alias=aliasMd.alias();
    CompressedXContent filter=aliasMd.filter();
    try {
      if (!indexAliasesService.hasAlias(alias)) {
        if (logger.isDebugEnabled()) {
          logger.debug("[{}] adding alias [{}], filter [{}]",index,alias,filter);
        }
        newAliases.put(alias,indexAliasesService.create(alias,filter));
      }
 else {
        if ((filter == null && indexAliasesService.alias(alias).filter() != null) || (filter != null && !filter.equals(indexAliasesService.alias(alias).filter()))) {
          if (logger.isDebugEnabled()) {
            logger.debug("[{}] updating alias [{}], filter [{}]",index,alias,filter);
          }
          newAliases.put(alias,indexAliasesService.create(alias,filter));
        }
      }
    }
 catch (    Throwable e) {
      logger.warn("[{}] failed to add alias [{}], filter [{}]",e,index,alias,filter);
    }
  }
  indexAliasesService.addAll(newAliases);
}
