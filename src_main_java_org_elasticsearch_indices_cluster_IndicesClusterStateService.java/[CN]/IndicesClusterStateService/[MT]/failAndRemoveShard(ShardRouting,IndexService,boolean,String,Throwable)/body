{
  if (indexService.hasShard(shardRouting.getId())) {
    try {
      indexService.removeShard(shardRouting.getId(),message);
    }
 catch (    IndexShardMissingException e) {
    }
catch (    Throwable e1) {
      logger.warn("[{}][{}] failed to remove shard after failure ([{}])",e1,shardRouting.getIndex(),shardRouting.getId(),message);
    }
  }
  if (sendShardFailure) {
    sendFailShard(shardRouting,indexService.indexUUID(),message,failure);
  }
}
