{
  if (aliasesChanged(event)) {
    for (    IndexMetaData indexMetaData : event.state().metaData()) {
      if (!indicesService.hasIndex(indexMetaData.index())) {
        continue;
      }
      String index=indexMetaData.index();
      IndexService indexService=indicesService.indexService(index);
      IndexAliasesService indexAliasesService=indexService.aliasesService();
      processAliases(index,indexMetaData.aliases().values(),indexAliasesService);
      for (      IndexAlias indexAlias : indexAliasesService) {
        if (!indexMetaData.aliases().containsKey(indexAlias.alias())) {
          indexAliasesService.remove(indexAlias.alias());
        }
      }
    }
    nodeAliasesUpdatedAction.nodeAliasesUpdated(event.state(),new NodeAliasesUpdatedAction.NodeAliasesUpdatedResponse(event.state().nodes().localNodeId(),event.state().version()));
  }
}
