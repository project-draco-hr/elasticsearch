{
  FieldData data=cachedFieldData.get(name);
  if (data == null) {
    FieldMapper mapper=mapperService.smartNameFieldMapper(name);
    if (mapper == null) {
      throw new ElasticSearchIllegalArgumentException("No field found for [" + name + "]");
    }
    data=new FieldData(mapper);
    cachedFieldData.put(name,data);
  }
  if (data.doc() == null) {
    fieldSelector.name(data.mapper().names().indexName());
    try {
      data.doc(reader.document(docId,fieldSelector));
    }
 catch (    IOException e) {
      throw new ElasticSearchParseException("failed to load field [" + name + "]",e);
    }
  }
  return data;
}
