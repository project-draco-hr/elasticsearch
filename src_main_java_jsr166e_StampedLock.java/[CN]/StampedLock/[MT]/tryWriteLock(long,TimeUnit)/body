{
  long nanos=unit.toNanos(time);
  if (!Thread.interrupted()) {
    long next, deadline;
    if ((next=tryWriteLock()) != 0L)     return next;
    if (nanos <= 0L)     return 0L;
    if ((deadline=System.nanoTime() + nanos) == 0L)     deadline=1L;
    if ((next=acquireWrite(true,deadline)) != INTERRUPTED)     return next;
  }
  throw new InterruptedException();
}
