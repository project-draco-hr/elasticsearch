{
  UpgradeSettingsClusterStateUpdateRequest clusterStateUpdateRequest=new UpgradeSettingsClusterStateUpdateRequest().ackTimeout(request.timeout()).versions(request.versions()).masterNodeTimeout(request.masterNodeTimeout());
  updateSettingsService.upgradeIndexSettings(clusterStateUpdateRequest,new ActionListener<ClusterStateUpdateResponse>(){
    @Override public void onResponse(    ClusterStateUpdateResponse response){
      listener.onResponse(new UpgradeSettingsResponse(response.isAcknowledged()));
    }
    @Override public void onFailure(    Exception t){
      logger.debug(new ParameterizedMessage("failed to upgrade minimum compatibility version settings on indices [{}]",request.versions().keySet()),t);
      listener.onFailure(t);
    }
  }
);
}
