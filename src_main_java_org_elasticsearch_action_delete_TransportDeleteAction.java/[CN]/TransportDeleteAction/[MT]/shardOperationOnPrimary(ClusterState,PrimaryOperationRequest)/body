{
  DeleteRequest request=shardRequest.request;
  IndexShard indexShard=indicesService.indexServiceSafe(shardRequest.request.getIndex()).shardSafe(shardRequest.shardId);
  Engine.Delete delete=indexShard.prepareDelete(request.getType(),request.getId(),request.getVersion()).versionType(request.getVersionType()).origin(Engine.Operation.Origin.PRIMARY);
  indexShard.delete(delete);
  request.setVersion(delete.version());
  if (request.isRefresh()) {
    try {
      indexShard.refresh(new Engine.Refresh(false));
    }
 catch (    Exception e) {
    }
  }
  DeleteResponse response=new DeleteResponse(request.getIndex(),request.getType(),request.getId(),delete.version(),delete.notFound());
  return new PrimaryResponse<DeleteResponse,DeleteRequest>(shardRequest.request,response,null);
}
