{
  super.readFrom(in);
  shardRouting=readShardRoutingEntry(in);
  int size=in.readVInt();
  if (size == 0) {
    segments=ImmutableList.of();
  }
 else {
    segments=new ArrayList<Segment>(size);
    for (int i=0; i < size; i++) {
      segments.add(Segment.readSegment(in));
    }
  }
}
