{
  builder.startObject(name);
  if (this.metaData != null) {
    builder.field("meta",this.metaData);
  }
  builder.field(type.name());
  internalXContent(builder,params);
  if (factories != null && (factories.countAggregators() + factories.countPipelineAggregators()) > 0) {
    builder.field("aggregations");
    factories.toXContent(builder,params);
  }
  return builder.endObject();
}
