{
  try {
    allEntries.reset();
    if (allEntries.customBoost() && fieldType().indexOptions().compareTo(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS) >= 0) {
      return AllTokenStream.allTokenStream(name,allEntries,analyzer);
    }
 else {
      return analyzer.tokenStream(name,allEntries);
    }
  }
 catch (  IOException e) {
    throw new ElasticsearchException("Failed to create token stream");
  }
}
