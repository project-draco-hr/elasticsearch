{
  if (disabled) {
    throw new ElasticSearchIllegalStateException("Shutdown is disabled");
  }
  logger.info("Shutting down in [{}]",request.delay);
  threadPool.schedule(new Runnable(){
    @Override public void run(){
      node.close();
    }
  }
,request.delay.millis(),TimeUnit.MILLISECONDS);
  return new NodesShutdownResponse.NodeShutdownResponse(clusterService.state().nodes().localNode());
}
