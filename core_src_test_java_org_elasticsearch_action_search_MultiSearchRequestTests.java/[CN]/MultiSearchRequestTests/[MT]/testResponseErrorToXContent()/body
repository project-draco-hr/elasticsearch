{
  MultiSearchResponse response=new MultiSearchResponse(new MultiSearchResponse.Item[]{new MultiSearchResponse.Item(null,new IllegalStateException("foobar")),new MultiSearchResponse.Item(null,new IllegalStateException("baaaaaazzzz"))});
  XContentBuilder builder=XContentFactory.jsonBuilder();
  response.toXContent(builder,new ToXContent.MapParams(Collections.singletonMap(ElasticsearchException.REST_EXCEPTION_SKIP_STACK_TRACE,"true")));
  assertEquals("\"responses\"[{\"error\":{\"root_cause\":[{\"type\":\"illegal_state_exception\",\"reason\":\"foobar\"}],\"type\":\"illegal_state_exception\",\"reason\":\"foobar\"}},{\"error\":{\"root_cause\":[{\"type\":\"illegal_state_exception\",\"reason\":\"baaaaaazzzz\"}],\"type\":\"illegal_state_exception\",\"reason\":\"baaaaaazzzz\"}}]",builder.string());
}
