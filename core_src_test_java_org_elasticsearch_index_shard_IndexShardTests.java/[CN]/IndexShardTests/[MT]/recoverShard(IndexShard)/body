{
  DiscoveryNode localNode=new DiscoveryNode("foo",DummyTransportAddress.INSTANCE,emptyMap(),emptySet(),Version.CURRENT);
  newShard.markAsRecovering("store",new RecoveryState(newShard.shardId(),newShard.routingEntry().primary(),RecoveryState.Type.STORE,localNode,localNode));
  assertTrue(newShard.recoverFromStore(localNode));
  newShard.updateRoutingEntry(newShard.routingEntry().moveToStarted(),true);
  return newShard;
}
