{
  SnapshotHolder snapshotHolder=snapshots.get(commit.getGeneration());
  if (snapshotHolder == null) {
    snapshotHolder=new SnapshotHolder(0);
    snapshots.put(commit.getGeneration(),snapshotHolder);
  }
  snapshotHolder.counter++;
  return new OneTimeReleaseSnapshotIndexCommit(this,commit);
}
