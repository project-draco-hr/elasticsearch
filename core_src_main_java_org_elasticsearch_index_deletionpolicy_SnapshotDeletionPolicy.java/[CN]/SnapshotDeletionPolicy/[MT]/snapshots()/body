{
synchronized (mutex) {
    if (snapshots == null) {
      throw new IllegalStateException("Snapshot deletion policy has not been init yet...");
    }
    List<SnapshotIndexCommit> result=new ArrayList<>(commits.size());
    for (    SnapshotIndexCommit commit : commits) {
      result.add(snapshot(commit));
    }
    return new SnapshotIndexCommits(result);
  }
}
