{
  ClassLoader cl=Utils.class.getClassLoader();
  String classToLookFor=HdfsPlugin.class.getName().replace(".","/").concat(".class");
  URL classURL=cl.getResource(classToLookFor);
  if (classURL == null) {
    throw new IllegalStateException("Cannot detect itself; something is wrong with this ClassLoader " + cl);
  }
  String base=classURL.toString();
  int index=base.indexOf("!/");
  if (index > 0) {
    base=base.substring(0,index);
    base=base.substring(4);
    index=base.lastIndexOf("/");
    base=base.substring(0,index + 1);
  }
 else {
    base=base.substring(0,base.length() - classToLookFor.length());
  }
  if (!base.endsWith("/")) {
    base=base.concat("/");
  }
  return base;
}
