{
  QueryParseContext context=new QueryParseContext(indicesQueriesRegistry);
  try (XContentParser requestParser=XContentFactory.xContent(source).createParser(source)){
    context.reset(requestParser);
    context.parseFieldMatcher(parseFieldMatcher);
    return context.parseTopLevelQueryBuilder();
  }
 catch (  IOException e) {
    throw new ElasticsearchException("failed to parse source",e);
  }
 finally {
    context.reset(null);
  }
}
