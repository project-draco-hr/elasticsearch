{
  final Index[] concreteIndices=indexNameExpressionResolver.concreteIndices(state,request);
  CloseIndexClusterStateUpdateRequest updateRequest=new CloseIndexClusterStateUpdateRequest().ackTimeout(request.timeout()).masterNodeTimeout(request.masterNodeTimeout()).indices(concreteIndices);
  indexStateService.closeIndex(updateRequest,new ActionListener<ClusterStateUpdateResponse>(){
    @Override public void onResponse(    ClusterStateUpdateResponse response){
      listener.onResponse(new CloseIndexResponse(response.isAcknowledged()));
    }
    @Override public void onFailure(    Exception t){
      logger.debug(new ParameterizedMessage("failed to close indices [{}]",(Object)concreteIndices),t);
      listener.onFailure(t);
    }
  }
);
}
