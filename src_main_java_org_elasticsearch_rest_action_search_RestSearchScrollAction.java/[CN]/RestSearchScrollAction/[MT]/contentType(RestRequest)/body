{
  if (request.hasContent()) {
    return XContentFactory.xContentType(request.content());
  }
 else   if (request.hasParam("source")) {
    return XContentFactory.xContentType(request.param("source"));
  }
  throw new ElasticsearchIllegalArgumentException("Can't guess contentType neither source nor content available");
}
