{
  super(index,indexSettings,name,settings);
  String locale=settings.get("locale",settings.get("language",settings.get("lang",null)));
  if (locale == null) {
    throw new ElasticSearchIllegalArgumentException("missing [locale | language | lang] configuration for hunspell token filter");
  }
  dictionary=hunspellService.getDictionary(locale);
  if (dictionary == null) {
    throw new ElasticSearchIllegalArgumentException(String.format(Locale.ROOT,"Unknown hunspell dictionary for locale [%s]",locale));
  }
  dedup=settings.getAsBoolean("dedup",true);
  recursionLevel=settings.getAsInt("recursion_level",2);
  if (recursionLevel < 0) {
    throw new ElasticSearchIllegalArgumentException(String.format(Locale.ROOT,"Negative recursion level not allowed for hunspell [%d]",recursionLevel));
  }
}
