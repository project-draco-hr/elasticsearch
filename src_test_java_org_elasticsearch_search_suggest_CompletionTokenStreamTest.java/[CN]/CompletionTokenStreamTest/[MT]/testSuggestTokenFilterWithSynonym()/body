{
  Builder builder=new SynonymMap.Builder(true);
  builder.add(new CharsRef("mykeyword"),new CharsRef("mysynonym"),true);
  Tokenizer tokenizer=new MockTokenizer(MockTokenizer.WHITESPACE,true);
  tokenizer.setReader(new StringReader("mykeyword"));
  SynonymFilter filter=new SynonymFilter(tokenizer,builder.build(),true);
  BytesRef payload=new BytesRef("Surface keyword|friggin payload|10");
  TokenStream suggestTokenStream=new ByteTermAttrToCharTermAttrFilter(new CompletionTokenStream(filter,payload,new CompletionTokenStream.ToFiniteStrings(){
    @Override public Set<IntsRef> toFiniteStrings(    TokenStream stream) throws IOException {
      return suggester.toFiniteStrings(suggester.getTokenStreamToAutomaton(),stream);
    }
  }
));
  assertTokenStreamContents(suggestTokenStream,new String[]{"mysynonym","mykeyword"},null,null,new String[]{"Surface keyword|friggin payload|10","Surface keyword|friggin payload|10"},new int[]{2,0},null,null);
}
