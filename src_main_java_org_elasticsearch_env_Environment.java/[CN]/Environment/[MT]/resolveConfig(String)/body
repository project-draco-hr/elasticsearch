{
  String origPath=path;
  Path f1=Paths.get(path);
  if (Files.exists(f1)) {
    return f1;
  }
  if (path.startsWith("/")) {
    path=path.substring(1);
  }
  Path f2=configFile.resolve(path);
  if (Files.exists(f2)) {
    return f2;
  }
  try {
    URL resource=settings.getClassLoader().getResource(path);
    if (resource != null) {
      return Paths.get(resource.toURI());
    }
    if (!path.startsWith("config/")) {
      resource=settings.getClassLoader().getResource("config/" + path);
      if (resource != null) {
        return Paths.get(resource.toURI());
      }
    }
  }
 catch (  URISyntaxException ex) {
    throw new FailedToResolveConfigException("Failed to resolve config path [" + origPath + "], tried file path ["+ f1+ "], path file ["+ f2+ "], and classpath",ex);
  }
  throw new FailedToResolveConfigException("Failed to resolve config path [" + origPath + "], tried file path ["+ f1+ "], path file ["+ f2+ "], and classpath");
}
