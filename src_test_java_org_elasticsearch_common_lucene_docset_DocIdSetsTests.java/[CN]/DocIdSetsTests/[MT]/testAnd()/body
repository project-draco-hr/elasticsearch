{
  IndexService indexService=createIndex("test",SINGLE_SHARD_SETTINGS,"type","l","type=long");
  client().prepareIndex("test","type").setSource("l",new long[]{7,8}).get();
  FilterBuilder filter=FilterBuilders.andFilter(FilterBuilders.termFilter("l",7),FilterBuilders.termFilter("l",8));
  test(indexService,false,filter);
  filter=FilterBuilders.andFilter(FilterBuilders.termFilter("l",7).cache(randomBoolean()),FilterBuilders.scriptFilter("doc['l'].value < 8"));
  test(indexService,false,filter);
  filter=FilterBuilders.andFilter(FilterBuilders.scriptFilter("doc['l'].value > 5"),FilterBuilders.scriptFilter("doc['l'].value < 8"));
  test(indexService,true,filter);
}
