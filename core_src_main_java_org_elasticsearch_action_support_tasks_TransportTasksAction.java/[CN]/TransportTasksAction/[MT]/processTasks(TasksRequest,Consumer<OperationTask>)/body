{
  if (request.taskId() != BaseTasksRequest.ALL_TASKS) {
    Task task=taskManager.getTask(request.taskId());
    if (task != null) {
      if (request.match(task)) {
        operation.accept((OperationTask)task);
      }
 else {
        throw new ResourceNotFoundException("task [{}] doesn't support this operation",request.taskId());
      }
    }
 else {
      throw new ResourceNotFoundException("task [{}] is missing",request.taskId());
    }
  }
 else {
    for (    Task task : taskManager.getTasks().values()) {
      if (request.match(task)) {
        operation.accept((OperationTask)task);
      }
    }
  }
}
