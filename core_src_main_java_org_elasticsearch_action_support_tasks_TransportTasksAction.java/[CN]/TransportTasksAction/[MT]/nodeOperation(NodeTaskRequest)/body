{
  TasksRequest request=nodeTaskRequest.tasksRequest;
  List<TaskResponse> results=new ArrayList<>();
  List<TaskOperationFailure> exceptions=new ArrayList<>();
  for (  Task task : taskManager.getTasks().values()) {
    if (request.match(task)) {
      try {
        results.add(taskOperation(request,task));
      }
 catch (      Exception ex) {
        exceptions.add(new TaskOperationFailure(clusterService.localNode().id(),task.getId(),ex));
      }
    }
  }
  return new NodeTasksResponse(clusterService.localNode().id(),results,exceptions);
}
