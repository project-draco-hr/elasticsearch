{
  int[] ports=getRandomPorts(3);
  Settings settings=settingsBuilder().put("network.host","127.0.0.1").put("transport.tcp.port",ports[0]).put("transport.profiles.default.port",ports[1]).put("transport.profiles.client1.port",ports[2]).build();
  ThreadPool threadPool=new ThreadPool("tst");
  try (NettyTransport ignored=startNettyTransport(settings,threadPool)){
    assertConnectionRefused(ports[0]);
    assertPortIsBound(ports[1]);
    assertPortIsBound(ports[2]);
  }
  finally {
    terminate(threadPool);
  }
}
