{
  if (normalizeLat || normalizeLon) {
    GeoPoint point=new GeoPoint(lat,lon);
    GeoUtils.normalizePoint(point,normalizeLat,normalizeLon);
    lat=point.lat();
    lon=point.lon();
  }
  if (validateLat) {
    if (lat > 90.0 || lat < -90.0) {
      throw new ElasticSearchIllegalArgumentException("illegal latitude value [" + lat + "] for "+ name());
    }
  }
  if (validateLon) {
    if (lon > 180.0 || lon < -180) {
      throw new ElasticSearchIllegalArgumentException("illegal longitude value [" + lon + "] for "+ name());
    }
  }
  if (fieldType.indexed() || fieldType.stored()) {
    Field field=new Field(names.indexName(),Double.toString(lat) + ',' + Double.toString(lon),fieldType);
    context.doc().add(field);
  }
  if (enableGeoHash) {
    parseGeohashField(context,GeoHashUtils.encode(lat,lon,geoHashPrecision));
  }
  if (enableLatLon) {
    context.externalValue(lat);
    latMapper.parse(context);
    context.externalValue(lon);
    lonMapper.parse(context);
  }
}
