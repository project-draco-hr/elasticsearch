{
  ContentPath.Type origPathType=context.path().pathType();
  context.path().pathType(pathType);
  context.path().add(name());
  GeoPoint sparse=context.parseExternalValue(GeoPoint.class);
  if (sparse != null) {
    parse(context,sparse,null);
  }
 else {
    sparse=new GeoPoint();
    XContentParser.Token token=context.parser().currentToken();
    if (token == XContentParser.Token.START_ARRAY) {
      token=context.parser().nextToken();
      if (token == XContentParser.Token.START_ARRAY) {
        while (token != XContentParser.Token.END_ARRAY) {
          parse(context,GeoUtils.parseGeoPoint(context.parser(),sparse),null);
          token=context.parser().nextToken();
        }
      }
 else {
        if (token == XContentParser.Token.VALUE_NUMBER) {
          double lon=context.parser().doubleValue();
          token=context.parser().nextToken();
          double lat=context.parser().doubleValue();
          while ((token=context.parser().nextToken()) != XContentParser.Token.END_ARRAY) {
          }
          parse(context,sparse.reset(lat,lon),null);
        }
 else {
          while (token != XContentParser.Token.END_ARRAY) {
            if (token == XContentParser.Token.VALUE_STRING) {
              parsePointFromString(context,sparse,context.parser().text());
            }
 else {
              parse(context,GeoUtils.parseGeoPoint(context.parser(),sparse),null);
            }
            token=context.parser().nextToken();
          }
        }
      }
    }
 else     if (token == XContentParser.Token.VALUE_STRING) {
      parsePointFromString(context,sparse,context.parser().text());
    }
 else {
      parse(context,GeoUtils.parseGeoPoint(context.parser(),sparse),null);
    }
  }
  context.path().remove();
  context.path().pathType(origPathType);
}
