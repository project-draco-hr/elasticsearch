{
  ContentPath.Type origPathType=context.path().pathType();
  context.path().pathType(pathType);
  GeoStringFieldMapper geoStringMapper=new GeoStringFieldMapper.Builder(name).index(Field.Index.NOT_ANALYZED).omitNorms(true).indexOptions(IndexOptions.DOCS_ONLY).includeInAll(false).store(store).build(context);
  DoubleFieldMapper latMapper=null;
  DoubleFieldMapper lonMapper=null;
  context.path().add(name);
  if (enableLatLon) {
    NumberFieldMapper.Builder latMapperBuilder=doubleField(Names.LAT).includeInAll(false);
    NumberFieldMapper.Builder lonMapperBuilder=doubleField(Names.LON).includeInAll(false);
    if (precisionStep != null) {
      latMapperBuilder.precisionStep(precisionStep);
      lonMapperBuilder.precisionStep(precisionStep);
    }
    latMapper=(DoubleFieldMapper)latMapperBuilder.includeInAll(false).store(store).build(context);
    lonMapper=(DoubleFieldMapper)lonMapperBuilder.includeInAll(false).store(store).build(context);
  }
  StringFieldMapper geohashMapper=null;
  if (enableGeoHash) {
    geohashMapper=stringField(Names.GEOHASH).index(Field.Index.NOT_ANALYZED).includeInAll(false).omitNorms(true).indexOptions(IndexOptions.DOCS_ONLY).build(context);
  }
  context.path().remove();
  context.path().pathType(origPathType);
  return new GeoPointFieldMapper(name,pathType,enableLatLon,enableGeoHash,precisionStep,precision,latMapper,lonMapper,geohashMapper,geoStringMapper,validateLon,validateLat,normalizeLon,normalizeLat);
}
