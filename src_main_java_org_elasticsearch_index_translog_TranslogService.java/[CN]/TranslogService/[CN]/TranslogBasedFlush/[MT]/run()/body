{
  if (indexShard.state() == IndexShardState.CLOSED) {
    return;
  }
  if (disableFlush) {
    reschedule();
    return;
  }
  if (indexShard.state() == IndexShardState.CREATED) {
    reschedule();
    return;
  }
  if (flushThresholdOperations > 0) {
    int currentNumberOfOperations=translog.estimatedNumberOfOperations();
    if (currentNumberOfOperations > flushThresholdOperations) {
      logger.trace("flushing translog, operations [{}], breached [{}]",currentNumberOfOperations,flushThresholdOperations);
      asyncFlushAndReschedule();
      return;
    }
  }
  if (flushThresholdSize.bytes() > 0) {
    long sizeInBytes=translog.translogSizeInBytes();
    if (sizeInBytes > flushThresholdSize.bytes()) {
      logger.trace("flushing translog, size [{}], breached [{}]",new ByteSizeValue(sizeInBytes),flushThresholdSize);
      asyncFlushAndReschedule();
      return;
    }
  }
  if (flushThresholdPeriod.millis() > 0) {
    if ((threadPool.estimatedTimeInMillis() - lastFlushTime) > flushThresholdPeriod.millis()) {
      logger.trace("flushing translog, last_flush_time [{}], breached [{}]",lastFlushTime,flushThresholdPeriod);
      asyncFlushAndReschedule();
      return;
    }
  }
  reschedule();
}
