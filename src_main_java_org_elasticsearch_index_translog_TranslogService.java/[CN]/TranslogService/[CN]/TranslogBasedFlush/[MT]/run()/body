{
  if (indexShard.state() == IndexShardState.CLOSED) {
    return;
  }
  if (disableFlush) {
    return;
  }
  int currentNumberOfOperations=translog.estimatedNumberOfOperations();
  if (currentNumberOfOperations > flushThresholdOperations) {
    logger.trace("flushing translog, operations [{}], breached [{}]",currentNumberOfOperations,flushThresholdOperations);
    asyncFlushAndReschedule();
    return;
  }
  long sizeInBytes=translog.translogSizeInBytes();
  if (sizeInBytes > flushThresholdSize.bytes()) {
    logger.trace("flushing translog, size [{}], breached [{}]",new ByteSizeValue(sizeInBytes),flushThresholdSize);
    asyncFlushAndReschedule();
    return;
  }
  if ((System.currentTimeMillis() - lastFlushTime) > flushThresholdPeriod.millis()) {
    logger.trace("flushing translog, last_flush_time [{}], breached [{}]",lastFlushTime,flushThresholdPeriod);
    asyncFlushAndReschedule();
    return;
  }
  future=threadPool.schedule(interval,ThreadPool.Names.SAME,this);
}
