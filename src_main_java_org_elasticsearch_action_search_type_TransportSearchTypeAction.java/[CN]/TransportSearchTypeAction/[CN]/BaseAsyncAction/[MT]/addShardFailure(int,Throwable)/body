{
  if (shardFailures == null) {
synchronized (shardFailuresMutex) {
      if (shardFailures == null) {
        shardFailures=new AtomicArray<ShardSearchFailure>(shardsIts.size());
      }
    }
  }
  ShardSearchFailure failure=shardFailures.get(shardIndex);
  if (failure == null) {
    shardFailures.set(shardIndex,new ShardSearchFailure(t));
  }
 else {
    if (isOverrideException(t)) {
      shardFailures.set(shardIndex,new ShardSearchFailure(t));
    }
  }
}
