{
  ContentPath.Type origPathType=context.path().pathType();
  context.path().pathType(pathType);
  FieldMapper<?> contentMapper=(FieldMapper<?>)contentBuilder.build(context);
  context.path().add(name);
  FieldMapper<?> dateMapper=(FieldMapper<?>)dateBuilder.build(context);
  FieldMapper<?> authorMapper=(FieldMapper<?>)authorBuilder.build(context);
  FieldMapper<?> titleMapper=(FieldMapper<?>)titleBuilder.build(context);
  FieldMapper<?> nameMapper=(FieldMapper<?>)nameBuilder.build(context);
  FieldMapper<?> keywordsMapper=(FieldMapper<?>)keywordsBuilder.build(context);
  FieldMapper<?> contentTypeMapper=(FieldMapper<?>)contentTypeBuilder.build(context);
  FieldMapper<?> contentLength=(FieldMapper<?>)contentLengthBuilder.build(context);
  FieldMapper<?> language=(FieldMapper<?>)languageBuilder.build(context);
  context.path().remove();
  context.path().pathType(origPathType);
  if (defaultIndexedChars == null && context.indexSettings() != null) {
    defaultIndexedChars=context.indexSettings().getAsInt("index.mapping.attachment.indexed_chars",100000);
  }
  if (defaultIndexedChars == null) {
    defaultIndexedChars=100000;
  }
  if (ignoreErrors == null && context.indexSettings() != null) {
    ignoreErrors=context.indexSettings().getAsBoolean("index.mapping.attachment.ignore_errors",Boolean.TRUE);
  }
  if (ignoreErrors == null) {
    ignoreErrors=Boolean.TRUE;
  }
  if (langDetect == null && context.indexSettings() != null) {
    langDetect=context.indexSettings().getAsBoolean("index.mapping.attachment.detect_language",Boolean.FALSE);
  }
  if (langDetect == null) {
    langDetect=Boolean.FALSE;
  }
  return new AttachmentMapper(buildNames(context),pathType,defaultIndexedChars,ignoreErrors,langDetect,contentMapper,dateMapper,titleMapper,nameMapper,authorMapper,keywordsMapper,contentTypeMapper,contentLength,language,context.indexSettings(),multiFieldsBuilder.build(this,context),copyTo);
}
