{
  CountRequestBuilder countRequestBuilder=new CountRequestBuilder(client);
  XContentBuilder xContentBuilder=XContentFactory.contentBuilder(randomFrom(XContentType.values()));
  xContentBuilder.startObject();
  xContentBuilder.startObject("match_all");
  xContentBuilder.endObject();
  xContentBuilder.endObject();
  countRequestBuilder.setQuery(xContentBuilder);
  assertThat(countRequestBuilder.toString(),equalTo(new QuerySourceBuilder().setQuery(xContentBuilder.bytes()).toString()));
}
