{
  boolean parseUpperInclusive=Defaults.PARSE_UPPER_INCLUSIVE;
  if (context.indexSettings() != null) {
    parseUpperInclusive=context.indexSettings().getAsBoolean("index.mapping.date.parse_upper_inclusive",Defaults.PARSE_UPPER_INCLUSIVE);
  }
  fieldType.setOmitNorms(fieldType.omitNorms() && boost == 1.0f);
  DateFieldMapper fieldMapper=new DateFieldMapper(buildNames(context),dateTimeFormatter,precisionStep,fuzzyFactor,boost,fieldType,nullValue,timeUnit,parseUpperInclusive,ignoreMalformed(context),provider,similarity);
  fieldMapper.includeInAll(includeInAll);
  return fieldMapper;
}
