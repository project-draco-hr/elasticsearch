{
  long now=context == null ? System.currentTimeMillis() : context.nowInMillis();
  DateMathParser dateParser=dateMathParser;
  if (forcedDateParser != null) {
    dateParser=forcedDateParser;
  }
  long time=includeUpper && roundCeil ? dateParser.parseRoundCeil(value,now,zone) : dateParser.parse(value,now,zone);
  return time;
}
