{
  String[] indices=RestActions.splitIndices(request.param("index"));
  SearchRequest searchRequest=new SearchRequest(indices);
  if (request.hasContent()) {
    searchRequest.setSource(request.content(),request.contentUnsafe());
  }
 else {
    String source=request.param("source");
    if (source != null) {
      searchRequest.setSource(source);
    }
  }
  searchRequest.setExtraSource(parseSearchSource(request));
  searchRequest.setSearchType(request.param("search_type"));
  String scroll=request.param("scroll");
  if (scroll != null) {
    searchRequest.setScroll(new Scroll(parseTimeValue(scroll,null)));
  }
  searchRequest.setTypes(RestActions.splitTypes(request.param("type")));
  searchRequest.setRouting(request.param("routing"));
  searchRequest.setPreference(request.param("preference"));
  if (request.hasParam("ignore_indices")) {
    searchRequest.setIgnoreIndices(IgnoreIndices.fromString(request.param("ignore_indices")));
  }
  return searchRequest;
}
