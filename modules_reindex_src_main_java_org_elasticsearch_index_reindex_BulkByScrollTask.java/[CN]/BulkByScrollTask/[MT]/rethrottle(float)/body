{
synchronized (delayedPrepareBulkRequestReference) {
    setRequestsPerSecond(newRequestsPerSecond);
    DelayedPrepareBulkRequest delayedPrepareBulkRequest=this.delayedPrepareBulkRequestReference.get();
    if (delayedPrepareBulkRequest == null) {
      return;
    }
    this.delayedPrepareBulkRequestReference.set(delayedPrepareBulkRequest.rethrottle(newRequestsPerSecond));
  }
}
