{
  NamedWriteableRegistry namedWriteableRegistry=new NamedWriteableRegistry();
  namedWriteableRegistry.registerPrototype(BaseNamedWriteable.class,new TestNamedWriteable(null,null));
  try {
    namedWriteableRegistry.registerPrototype(BaseNamedWriteable.class,new TestNamedWriteable(null,null));
    fail("registerPrototype should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),equalTo("named writeable of type [" + TestNamedWriteable.class.getName() + "] with name ["+ TestNamedWriteable.NAME+ "] is already registered by type ["+ TestNamedWriteable.class.getName()+ "] within category ["+ BaseNamedWriteable.class.getName()+ "]"));
  }
}
