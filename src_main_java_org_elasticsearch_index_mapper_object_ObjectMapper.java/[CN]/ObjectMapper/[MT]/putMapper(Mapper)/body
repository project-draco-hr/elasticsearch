{
  if (mapper instanceof AllFieldMapper.IncludeInAll) {
    ((AllFieldMapper.IncludeInAll)mapper).includeInAllIfNotSet(includeInAll);
  }
synchronized (mutex) {
    ObjectObjectOpenHashMap<String,Mapper> mappers=this.mappers.clone();
    mappers.put(mapper.name(),mapper);
    this.mappers=mappers;
  }
  return this;
}
