{
  if (mapper instanceof AllFieldMapper.IncludeInAll) {
    ((AllFieldMapper.IncludeInAll)mapper).includeInAllIfNotSet(includeInAll);
  }
synchronized (mutex) {
    this.mappers=ImmutableOpenMap.builder(this.mappers).fPut(mapper.name(),mapper).build();
  }
  return this;
}
