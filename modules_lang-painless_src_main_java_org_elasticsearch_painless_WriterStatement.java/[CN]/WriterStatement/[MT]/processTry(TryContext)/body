{
  final TrapContext[] trapctxs=new TrapContext[ctx.trap().size()];
  ctx.trap().toArray(trapctxs);
  final Branch branch=utility.markBranch(ctx,trapctxs);
  Label end=new Label();
  branch.begin=new Label();
  branch.end=new Label();
  branch.tru=trapctxs.length > 1 ? end : null;
  execute.mark(branch.begin);
  final BlockContext blockctx=ctx.block();
  final StatementMetadata blocksmd=metadata.getStatementMetadata(blockctx);
  writer.visit(blockctx);
  if (!blocksmd.allLast) {
    execute.goTo(end);
  }
  execute.mark(branch.end);
  for (  final TrapContext trapctx : trapctxs) {
    writer.visit(trapctx);
  }
  if (!blocksmd.allLast || trapctxs.length > 1) {
    execute.mark(end);
  }
}
