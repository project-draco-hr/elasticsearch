{
  Settings settings=settingsBuilder().put("path.conf",getResource("/indices/analyze/conf_dir")).put("index.analysis.filter.en_US.type","hunspell").put("index.analysis.filter.en_US.locale","en_US").build();
  AnalysisService analysisService=AnalysisTestsHelper.createAnalysisServiceFromSettings(settings);
  TokenFilterFactory tokenFilter=analysisService.tokenFilter("en_US");
  assertThat(tokenFilter,instanceOf(HunspellTokenFilterFactory.class));
  HunspellTokenFilterFactory hunspellTokenFilter=(HunspellTokenFilterFactory)tokenFilter;
  assertThat(hunspellTokenFilter.dedup(),is(true));
  settings=settingsBuilder().put("path.conf",getResource("/indices/analyze/conf_dir")).put("index.analysis.filter.en_US.type","hunspell").put("index.analysis.filter.en_US.dedup",false).put("index.analysis.filter.en_US.locale","en_US").build();
  analysisService=AnalysisTestsHelper.createAnalysisServiceFromSettings(settings);
  tokenFilter=analysisService.tokenFilter("en_US");
  assertThat(tokenFilter,instanceOf(HunspellTokenFilterFactory.class));
  hunspellTokenFilter=(HunspellTokenFilterFactory)tokenFilter;
  assertThat(hunspellTokenFilter.dedup(),is(false));
}
