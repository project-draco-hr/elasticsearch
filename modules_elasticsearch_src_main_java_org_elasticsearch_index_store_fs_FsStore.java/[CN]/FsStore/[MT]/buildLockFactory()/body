{
  String fsLock=componentSettings.get("fs_lock","native");
  LockFactory lockFactory=new NoLockFactory();
  if (fsLock.equals("native")) {
    lockFactory=new NativeFSLockFactory(){
      @Override public void clearLock(      String lockName) throws IOException {
        if (lockDir.exists()) {
          makeLock(lockName).release();
          if (lockPrefix != null) {
            lockName=lockPrefix + "-" + lockName;
          }
          new File(lockDir,lockName).delete();
        }
      }
    }
;
  }
 else   if (fsLock.equals("simple")) {
    lockFactory=new SimpleFSLockFactory();
  }
  return lockFactory;
}
