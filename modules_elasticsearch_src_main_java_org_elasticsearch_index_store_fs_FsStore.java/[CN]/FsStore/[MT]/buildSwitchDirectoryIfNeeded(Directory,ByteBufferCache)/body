{
  boolean cache=componentSettings.getAsBoolean("memory.enabled",false);
  if (!cache) {
    return null;
  }
  Directory memDir=new ByteBufferDirectory(byteBufferCache);
  String[] primaryExtensions=componentSettings.getAsArray("memory.extensions",new String[]{"","del","gen"});
  if (primaryExtensions == null || primaryExtensions.length == 0) {
    return null;
  }
  Boolean forceUseCompound=null;
  for (  String extension : primaryExtensions) {
    if (!("".equals(extension) || "del".equals(extension) || "gen".equals(extension))) {
      forceUseCompound=false;
    }
  }
  return new Tuple<SwitchDirectory,Boolean>(new SwitchDirectory(ImmutableSet.copyOf(primaryExtensions),memDir,fsDirectory,true),forceUseCompound);
}
