{
  XContentBuilder xContentBuilder=jsonBuilder().startObject().startObject("poi").startObject("properties").startObject("suggest").field("type","completion").startObject("context").startObject("location").field("type","geo").field("precision","1m").endObject().endObject().endObject().endObject().endObject().endObject();
  assertAcked(prepareCreate(INDEX).addMapping("poi",xContentBuilder));
  ensureYellow();
  SuggestRequest suggestRequest=new SuggestRequest(INDEX);
  XContentBuilder builder=jsonBuilder().startObject().startObject("suggest").field("text","m").startObject("completion").field("field","suggest").startObject("context").startObject("location").startObject("value").field("lat",0).field("lon",0).endObject().field("precision","1km").endObject().endObject().endObject().endObject().endObject();
  suggestRequest.suggest(builder.bytes());
  SuggestResponse suggestResponse=client().suggest(suggestRequest).get();
  assertNoFailures(suggestResponse);
}
