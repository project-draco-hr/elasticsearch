{
  QueryBuilder<?> rewrite=query.rewrite(queryShardContext);
  if (rewrite != query) {
    return new HasParentQueryBuilder(type,rewrite,score,innerHit);
  }
  return this;
}
