{
  this.templateService=new InternalTemplateService(scriptService);
  this.scriptService=scriptService;
  this.clusterService=clusterService;
  Map<String,Processor.Factory> processorFactories=new HashMap<>();
  for (  Map.Entry<String,Function<ProcessorsRegistry,Processor.Factory<?>>> entry : providers.entrySet()) {
    processorFactories.put(entry.getKey(),entry.getValue().apply(this));
  }
  this.processorFactories=Collections.unmodifiableMap(processorFactories);
}
