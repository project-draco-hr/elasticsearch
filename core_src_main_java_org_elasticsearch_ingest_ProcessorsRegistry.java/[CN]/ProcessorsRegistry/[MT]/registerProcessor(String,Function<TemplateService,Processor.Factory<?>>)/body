{
  Function<TemplateService,Processor.Factory<?>> provider=processorFactoryProviders.putIfAbsent(name,processorFactoryProvider);
  if (provider != null) {
    throw new IllegalArgumentException("Processor factory already registered for name [" + name + "]");
  }
}
