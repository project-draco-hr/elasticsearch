{
  for (  DiscoveryNode node : event.nodesDelta().addedNodes()) {
    try {
      transportService.connectToNode(node);
    }
 catch (    Exception e) {
      logger.warn("Failed to connect to discovered node [" + node + "]",e);
    }
  }
  this.discoveredNodes=event.state().nodes();
  HashSet<DiscoveryNode> newNodes=new HashSet<DiscoveryNode>(nodes);
  newNodes.addAll(discoveredNodes.nodes().values());
  nodes=new ImmutableList.Builder<DiscoveryNode>().addAll(newNodes).build();
  for (  DiscoveryNode node : event.nodesDelta().removedNodes()) {
    transportService.disconnectFromNode(node);
  }
}
