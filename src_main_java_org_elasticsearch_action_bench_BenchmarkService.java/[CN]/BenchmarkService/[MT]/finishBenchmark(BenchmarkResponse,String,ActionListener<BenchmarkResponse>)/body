{
  clusterService.submitStateUpdateTask("finish_benchmark",new FinishBenchmarkTask("finish_benchmark",benchmarkId,new BenchmarkStateListener(){
    @Override public void onResponse(    ClusterState newClusterState,    BenchmarkMetaData.Entry changed){
      listener.onResponse(benchmarkResponse);
    }
    @Override public void onFailure(    Throwable t){
      listener.onFailure(t);
    }
  }
,!benchmarkResponse.isAborted() && !benchmarkResponse.hasFailures()));
}
