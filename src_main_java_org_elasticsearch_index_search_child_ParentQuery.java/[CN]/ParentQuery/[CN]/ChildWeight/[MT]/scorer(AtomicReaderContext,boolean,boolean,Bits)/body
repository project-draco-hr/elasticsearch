{
  DocIdSet childrenDocSet=childrenFilter.getDocIdSet(context,acceptDocs);
  if (DocIdSets.isEmpty(childrenDocSet)) {
    return null;
  }
  BytesValues.WithOrdinals bytesValues=parentChildIndexFieldData.load(context).getBytesValues(parentType);
  if (bytesValues == null) {
    return null;
  }
  Ordinals.Docs ordinals=bytesValues.ordinals();
  final int maxOrd=(int)ordinals.getMaxOrd();
  final BigArrays bigArrays=searchContext.bigArrays();
  if (parentIdsIndexCache == null) {
    parentIdsIndexCache=bigArrays.newLongArray(BigArrays.overSize(maxOrd),false);
  }
 else   if (parentIdsIndexCache.size() < maxOrd) {
    parentIdsIndexCache=bigArrays.grow(parentIdsIndexCache,maxOrd);
  }
  parentIdsIndexCache.fill(0,maxOrd,-1L);
  if (seenOrdinalsCache == null || seenOrdinalsCache.length() < maxOrd) {
    seenOrdinalsCache=new FixedBitSet(maxOrd);
  }
 else {
    seenOrdinalsCache.clear(0,maxOrd);
  }
  return new ChildScorer(this,parentIds,scores,childrenDocSet.iterator(),bytesValues,ordinals,seenOrdinalsCache,parentIdsIndexCache);
}
