{
  TermsAggregatorBuilder factory=new TermsAggregatorBuilder(aggregationName,targetValueType);
  List<OrderElement> orderElements=(List<OrderElement>)otherOptions.get(TermsAggregatorBuilder.ORDER_FIELD);
  if (orderElements != null) {
    List<Terms.Order> orders=new ArrayList<>(orderElements.size());
    for (    OrderElement orderElement : orderElements) {
      orders.add(resolveOrder(orderElement.key(),orderElement.asc()));
    }
    factory.order(orders);
  }
  if (bucketCountThresholds != null) {
    factory.bucketCountThresholds(bucketCountThresholds);
  }
  if (collectMode != null) {
    factory.collectMode(collectMode);
  }
  if (executionHint != null) {
    factory.executionHint(executionHint);
  }
  if (incExc != null) {
    factory.includeExclude(incExc);
  }
  Boolean showTermDocCountError=(Boolean)otherOptions.get(TermsAggregatorBuilder.SHOW_TERM_DOC_COUNT_ERROR);
  if (showTermDocCountError != null) {
    factory.showTermDocCountError(showTermDocCountError);
  }
  return factory;
}
