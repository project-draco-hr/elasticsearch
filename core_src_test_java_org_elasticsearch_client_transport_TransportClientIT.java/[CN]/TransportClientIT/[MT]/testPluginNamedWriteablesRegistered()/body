{
  Settings baseSettings=Settings.builder().put(Environment.PATH_HOME_SETTING.getKey(),createTempDir()).build();
  try (TransportClient client=new MockTransportClient(baseSettings,pluginList(MockPlugin.class))){
    NamedWriteableRegistry registry=client.injector.getInstance(NamedWriteableRegistry.class);
    assertNotNull(registry.getReader(MockPlugin.MockNamedWriteable.class,MockPlugin.MockNamedWriteable.NAME));
  }
 }
