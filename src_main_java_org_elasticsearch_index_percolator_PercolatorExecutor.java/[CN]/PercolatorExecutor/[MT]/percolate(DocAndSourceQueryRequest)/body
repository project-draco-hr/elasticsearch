{
  Query query=null;
  if (Strings.hasLength(request.query()) && !request.query().equals("*")) {
    query=percolatorIndexServiceSafe().queryParserService().parse(QueryBuilders.queryString(request.query())).query();
  }
  return percolate(new DocAndQueryRequest(request.doc(),query));
}
