{
  if (removeTrailing) {
    if (version.onOrAfter(Version.LUCENE_4_4)) {
      return new StopFilter(tokenStream,stopWords);
    }
 else {
      return new Lucene43StopFilter(enablePositionIncrements,tokenStream,stopWords);
    }
  }
 else {
    return new SuggestStopFilter(tokenStream,stopWords);
  }
}
