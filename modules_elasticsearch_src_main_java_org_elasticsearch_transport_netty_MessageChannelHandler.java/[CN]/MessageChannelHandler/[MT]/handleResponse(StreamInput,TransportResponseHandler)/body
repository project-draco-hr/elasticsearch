{
  final Streamable streamable=handler.newInstance();
  try {
    streamable.readFrom(buffer);
  }
 catch (  Exception e) {
    handleException(handler,new TransportSerializationException("Failed to deserialize response of type [" + streamable.getClass().getName() + "]",e));
    return;
  }
  if (handler.spawn()) {
    threadPool.execute(new Runnable(){
      @SuppressWarnings({"unchecked"}) @Override public void run(){
        try {
          handler.handleResponse(streamable);
        }
 catch (        Exception e) {
          handleException(handler,new ResponseHandlerFailureTransportException("Failed to handler response",e));
        }
      }
    }
);
  }
 else {
    try {
      handler.handleResponse(streamable);
    }
 catch (    Exception e) {
      handleException(handler,new ResponseHandlerFailureTransportException("Failed to handler response",e));
    }
  }
}
