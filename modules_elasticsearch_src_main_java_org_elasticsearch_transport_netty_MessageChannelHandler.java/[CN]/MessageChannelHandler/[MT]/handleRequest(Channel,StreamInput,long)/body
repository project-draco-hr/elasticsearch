{
  final String action=buffer.readUTF();
  final NettyTransportChannel transportChannel=new NettyTransportChannel(transport,action,channel,requestId);
  try {
    final TransportRequestHandler handler=transportServiceAdapter.handler(action);
    if (handler == null) {
      throw new ActionNotFoundTransportException(action);
    }
    final Streamable streamable=handler.newInstance();
    streamable.readFrom(buffer);
    if (handler.executor() == ThreadPool.Names.SAME) {
      handler.messageReceived(streamable,transportChannel);
    }
 else {
      threadPool.executor(handler.executor()).execute(new RequestHandler(handler,streamable,transportChannel,action));
    }
  }
 catch (  Exception e) {
    try {
      transportChannel.sendResponse(e);
    }
 catch (    IOException e1) {
      logger.warn("Failed to send error message back to client for action [" + action + "]",e);
      logger.warn("Actual Exception",e1);
    }
  }
  return action;
}
