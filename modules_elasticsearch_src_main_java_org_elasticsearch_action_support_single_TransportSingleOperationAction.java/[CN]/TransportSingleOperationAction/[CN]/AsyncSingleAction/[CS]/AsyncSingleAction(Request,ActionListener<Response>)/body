{
  this.request=request;
  this.listener=listener;
  ClusterState clusterState=clusterService.state();
  nodes=clusterState.nodes();
  this.shards=indicesService.indexServiceSafe(request.index).operationRouting().getShards(clusterState,request.type(),request.id());
  this.shardsIt=shards.iterator();
}
