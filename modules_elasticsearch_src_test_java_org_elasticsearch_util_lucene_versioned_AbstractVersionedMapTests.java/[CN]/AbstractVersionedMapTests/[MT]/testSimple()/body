{
  VersionedMap versionedMap=create();
  assertThat(true,equalTo(versionedMap.beforeVersion(1,1)));
  assertThat(true,equalTo(versionedMap.beforeVersion(2,2)));
  versionedMap.putVersion(1,2);
  assertThat(true,equalTo(versionedMap.beforeVersion(1,1)));
  assertThat(false,equalTo(versionedMap.beforeVersion(1,2)));
  assertThat(true,equalTo(versionedMap.beforeVersion(2,2)));
  versionedMap.putVersionIfAbsent(1,0);
  assertThat(true,equalTo(versionedMap.beforeVersion(1,1)));
  assertThat(true,equalTo(versionedMap.beforeVersion(2,2)));
  versionedMap.putVersion(2,1);
  assertThat(true,equalTo(versionedMap.beforeVersion(2,0)));
  assertThat(false,equalTo(versionedMap.beforeVersion(2,1)));
  assertThat(false,equalTo(versionedMap.beforeVersion(2,2)));
  assertThat(false,equalTo(versionedMap.beforeVersion(2,3)));
}
