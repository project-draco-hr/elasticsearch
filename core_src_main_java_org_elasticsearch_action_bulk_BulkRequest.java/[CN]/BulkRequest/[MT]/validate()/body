{
  ActionRequestValidationException validationException=null;
  if (requests.isEmpty()) {
    validationException=addValidationError("no requests added",validationException);
  }
  for (  ActionRequest request : requests) {
    if ((request instanceof DeleteRequest && ((DeleteRequest)request).refresh()) || (request instanceof UpdateRequest && ((UpdateRequest)request).refresh()) || (request instanceof IndexRequest && ((IndexRequest)request).refresh())) {
      validationException=addValidationError("Refresh is not supported on an item request, set the refresh flag on the BulkRequest instead.",validationException);
    }
    ActionRequestValidationException ex=request.validate();
    if (ex != null) {
      if (validationException == null) {
        validationException=new ActionRequestValidationException();
      }
      validationException.addValidationErrors(ex.validationErrors());
    }
  }
  return validationException;
}
