{
  ChannelPipeline pipeline=Channels.pipeline();
  pipeline.addLast("openChannels",transport.serverOpenChannels);
  pipeline.addLast("decoder",new HttpRequestDecoder((int)transport.maxInitialLineLength.bytes(),(int)transport.maxHeaderSize.bytes(),(int)transport.maxChunkSize.bytes()));
  if (transport.compression) {
    pipeline.addLast("decoder_compress",new HttpContentDecompressor());
  }
  pipeline.addLast("aggregator",new HttpChunkAggregator((int)transport.maxContentLength.bytes()));
  pipeline.addLast("encoder",new HttpResponseEncoder());
  if (transport.compression) {
    pipeline.addLast("encoder_compress",new HttpContentCompressor(transport.compressionLevel));
  }
  pipeline.addLast("handler",requestHandler);
  return pipeline;
}
