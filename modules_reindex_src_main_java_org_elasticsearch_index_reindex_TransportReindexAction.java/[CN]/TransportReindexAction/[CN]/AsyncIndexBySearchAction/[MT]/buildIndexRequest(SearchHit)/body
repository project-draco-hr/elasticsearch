{
  IndexRequest index=new IndexRequest(mainRequest.getDestination());
  index.id(doc.id());
  if (index.type() == null) {
    index.type(doc.type());
  }
  index.source(doc.sourceRef());
  if (index.versionType() != INTERNAL) {
    index.version(doc.version());
  }
  return index;
}
