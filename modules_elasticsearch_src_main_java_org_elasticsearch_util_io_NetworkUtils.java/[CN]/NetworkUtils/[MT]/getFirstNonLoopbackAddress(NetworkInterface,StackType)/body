{
  if (intf == null)   throw new IllegalArgumentException("Network interface pointer is null");
  for (Enumeration addresses=intf.getInetAddresses(); addresses.hasMoreElements(); ) {
    InetAddress address=(InetAddress)addresses.nextElement();
    if (!address.isLoopbackAddress()) {
      if ((address instanceof Inet4Address && ipVersion == StackType.IPv4) || (address instanceof Inet6Address && ipVersion == StackType.IPv6))       return address;
    }
  }
  return null;
}
