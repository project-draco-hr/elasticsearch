{
  if (!enabled) {
    return null;
  }
  Field sourceField;
  if (compressionThreshold == Defaults.NO_COMPRESSION || jsonContext.source().length() < compressionThreshold) {
    sourceField=new Field(name,jsonContext.source(),store,index);
  }
 else {
    try {
      sourceField=new Field(name,compressor.compressString(jsonContext.source()),store);
    }
 catch (    IOException e) {
      throw new MapperCompressionException("Failed to compress data",e);
    }
  }
  return sourceField;
}
