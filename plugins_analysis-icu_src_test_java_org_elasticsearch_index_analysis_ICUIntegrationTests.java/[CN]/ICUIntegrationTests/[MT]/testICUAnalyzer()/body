{
  createIndex("test");
  ensureGreen("test");
  AnalyzeResponse response1=client().admin().indices().prepareAnalyze("B??ton enflamm??").setIndex("test").setAnalyzer("my_analyzer").execute().get();
  AnalyzeResponse response2=client().admin().indices().prepareAnalyze("baton enflamme").setIndex("test").setAnalyzer("my_analyzer").execute().get();
  assertThat(response1,notNullValue());
  assertThat(response2,notNullValue());
  assertThat(response1.getTokens().size(),is(response2.getTokens().size()));
  for (int i=0; i < response2.getTokens().size(); i++) {
    assertThat(response1.getTokens().get(i).getTerm(),is(response2.getTokens().get(i).getTerm()));
  }
}
