{
  try (ReleasableLock lock=readLock.acquire()){
    ArrayList<TranslogReader> translogs=new ArrayList<>();
    try {
      if (currentCommittingTranslog != null) {
        translogs.add(currentCommittingTranslog.clone());
      }
      translogs.add(current.newReaderFromWriter());
      View view=new View(translogs,onViewClose);
      outstandingViews.add(view);
      translogs.clear();
      return view;
    }
  finally {
      IOUtils.closeWhileHandlingException(translogs);
    }
  }
 }
