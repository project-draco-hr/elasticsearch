{
  if (closed.get()) {
    return;
  }
  final ThreadPool threadPool=config.getThreadPool();
  if (syncNeeded()) {
    threadPool.executor(ThreadPool.Names.FLUSH).execute(new Runnable(){
      @Override public void run(){
        try {
          sync();
        }
 catch (        Exception e) {
          logger.warn("failed to sync translog",e);
        }
        if (closed.get() == false) {
          syncScheduler=threadPool.schedule(config.getSyncInterval(),ThreadPool.Names.SAME,Sync.this);
        }
      }
    }
);
  }
 else {
    syncScheduler=threadPool.schedule(config.getSyncInterval(),ThreadPool.Names.SAME,Sync.this);
  }
}
