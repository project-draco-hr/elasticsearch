{
  if (rootDoc == 0 || rootDocuments == null || innerDocuments == null) {
    return compareTopMissing(wrappedComparator);
  }
  int prevRootDoc=rootDocuments.prevSetBit(rootDoc - 1);
  int nestedDoc=innerDocuments.nextSetBit(prevRootDoc + 1);
  if (nestedDoc >= rootDoc || nestedDoc == -1) {
    return compareTopMissing(wrappedComparator);
  }
  @SuppressWarnings("unchecked") int cmp=wrappedComparator.compareTop(nestedDoc);
  if (cmp > 0) {
    return cmp;
  }
  while (true) {
    nestedDoc=innerDocuments.nextSetBit(nestedDoc + 1);
    if (nestedDoc >= rootDoc || nestedDoc == -1) {
      return cmp;
    }
    @SuppressWarnings("unchecked") int cmp1=wrappedComparator.compareTop(nestedDoc);
    if (cmp1 > 0) {
      return cmp1;
    }
 else {
      if (cmp1 == 0) {
        cmp=0;
      }
    }
  }
}
