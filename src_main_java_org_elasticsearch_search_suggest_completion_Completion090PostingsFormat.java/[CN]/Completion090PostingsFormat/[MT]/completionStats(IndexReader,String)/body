{
  CompletionStats completionStats=new CompletionStats();
  for (  AtomicReaderContext atomicReaderContext : indexReader.leaves()) {
    AtomicReader atomicReader=atomicReaderContext.reader();
    try {
      for (      String fieldName : atomicReader.fields()) {
        Terms terms=atomicReader.fields().terms(fieldName);
        if (terms instanceof CompletionTerms) {
          CompletionTerms completionTerms=(CompletionTerms)terms;
          completionStats.add(completionTerms.stats(fields));
        }
      }
    }
 catch (    IOException e) {
      logger.error("Could not get completion stats: {}",e,e.getMessage());
    }
  }
  return completionStats;
}
