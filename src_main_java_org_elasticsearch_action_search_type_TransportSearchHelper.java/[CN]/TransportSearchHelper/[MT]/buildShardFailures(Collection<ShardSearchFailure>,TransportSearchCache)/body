{
  ShardSearchFailure[] ret;
  if (shardFailures.isEmpty()) {
    ret=ShardSearchFailure.EMPTY_ARRAY;
  }
 else {
    ret=shardFailures.toArray(ShardSearchFailure.EMPTY_ARRAY);
  }
  searchCache.releaseShardFailures(shardFailures);
  return ret;
}
