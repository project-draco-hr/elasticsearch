{
  StringBuilder sb=new StringBuilder().append(type).append(';');
  sb.append(searchPhaseResults.asList().size()).append(';');
  for (  AtomicArray.Entry<? extends SearchPhaseResult> entry : searchPhaseResults.asList()) {
    SearchPhaseResult searchPhaseResult=entry.value;
    sb.append(searchPhaseResult.id()).append(':').append(searchPhaseResult.shardTarget().nodeId()).append(';');
  }
  if (attributes == null) {
    sb.append("0;");
  }
 else {
    sb.append(attributes.size()).append(";");
    for (    Map.Entry<String,String> entry : attributes.entrySet()) {
      sb.append(entry.getKey()).append(':').append(entry.getValue()).append(';');
    }
  }
  BytesRef bytesRef=new BytesRef(sb);
  return Base64.encodeBytes(bytesRef.bytes,bytesRef.offset,bytesRef.length,Base64.URL_SAFE);
}
