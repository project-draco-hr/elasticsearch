{
  TransportReindexAction.AsyncIndexBySearchAction action=action();
  action.mainRequest.getDestination().routing("=cat");
  IndexRequest index=new IndexRequest();
  action.copyMetadata(index,doc(RoutingFieldMapper.NAME,"foo"));
  assertEquals("cat",index.routing());
}
