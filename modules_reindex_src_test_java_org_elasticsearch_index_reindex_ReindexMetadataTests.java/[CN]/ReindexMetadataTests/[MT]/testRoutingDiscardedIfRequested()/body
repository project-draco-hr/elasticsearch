{
  TransportReindexAction.AsyncIndexBySearchAction action=action();
  action.mainRequest.getDestination().routing("discard");
  IndexRequest index=new IndexRequest();
  action.copyMetadata(AbstractAsyncBulkIndexByScrollAction.wrap(index),doc(RoutingFieldMapper.NAME,"foo"));
  assertEquals(null,index.routing());
}
