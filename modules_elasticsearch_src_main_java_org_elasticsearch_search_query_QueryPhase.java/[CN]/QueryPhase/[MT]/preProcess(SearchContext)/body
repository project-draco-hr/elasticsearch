{
  if (context.query() == null) {
    throw new SearchParseException(context,"No query specified in search request");
  }
  if (context.queryBoost() != 1.0f) {
    context.query(new FunctionScoreQuery(context.query(),new BoostFactorFunctionProvider(context.queryBoost())));
  }
  facetsPhase.preProcess(context);
}
