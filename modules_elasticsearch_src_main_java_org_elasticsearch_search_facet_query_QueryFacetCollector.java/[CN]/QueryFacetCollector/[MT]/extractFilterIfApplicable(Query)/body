{
  if (query instanceof FilteredQuery) {
    FilteredQuery fQuery=(FilteredQuery)query;
    if (fQuery.getQuery() instanceof MatchAllDocsQuery) {
      return fQuery.getFilter();
    }
    if (fQuery.getQuery() instanceof DeletionAwareConstantScoreQuery) {
      DeletionAwareConstantScoreQuery scoreQuery=(DeletionAwareConstantScoreQuery)fQuery.getQuery();
      if (scoreQuery.getFilter() instanceof MatchAllDocsFilter) {
        return fQuery.getFilter();
      }
    }
  }
  return null;
}
