{
  List<MutableShardRouting> shards=newArrayList();
  for (  MutableShardRouting shardEntry : this) {
    if (!shardEntry.index().equals(index)) {
      continue;
    }
    for (    ShardRoutingState state : states) {
      if (shardEntry.state() == state) {
        shards.add(shardEntry);
      }
    }
  }
  return shards;
}
