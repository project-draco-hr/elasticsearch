{
  List<SearchHit> hits=new ArrayList<>();
  hits.add(new InternalSearchHit(0,"1",new StringText("type"),Collections.emptyMap()).sourceRef(new BytesArray("{\"name\": \"_name1\", \"description\": \"_description1\"}")));
  when(docReader.readAll()).thenReturn(hits);
  assertThat(store.get("1"),nullValue());
  store.updatePipelines();
  assertThat(store.get("1").getId(),equalTo("_name1"));
  assertThat(store.get("1").getDescription(),equalTo("_description1"));
  hits.add(new InternalSearchHit(0,"2",new StringText("type"),Collections.emptyMap()).sourceRef(new BytesArray("{\"name\": \"_name2\", \"description\": \"_description2\"}")));
  store.updatePipelines();
  assertThat(store.get("1").getId(),equalTo("_name1"));
  assertThat(store.get("1").getDescription(),equalTo("_description1"));
  assertThat(store.get("2").getId(),equalTo("_name2"));
  assertThat(store.get("2").getDescription(),equalTo("_description2"));
}
