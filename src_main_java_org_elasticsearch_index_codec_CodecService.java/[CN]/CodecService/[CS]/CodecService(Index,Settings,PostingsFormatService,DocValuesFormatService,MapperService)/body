{
  super(index,indexSettings);
  this.postingsFormatService=postingsFormatService;
  this.docValuesFormatService=docValuesFormatService;
  this.mapperService=mapperService;
  MapBuilder<String,Codec> codecs=MapBuilder.<String,Codec>newMapBuilder();
  if (mapperService == null) {
    codecs.put(DEFAULT_CODEC,Codec.getDefault());
  }
 else {
    codecs.put(DEFAULT_CODEC,new PerFieldMappingPostingFormatCodec(mapperService,postingsFormatService.get(PostingsFormatService.DEFAULT_FORMAT).get(),docValuesFormatService.get(DocValuesFormatService.DEFAULT_FORMAT).get(),logger));
  }
  for (  String codec : Codec.availableCodecs()) {
    codecs.put(codec,Codec.forName(codec));
  }
  this.codecs=codecs.immutableMap();
  this.loadBloomFilter=indexSettings.getAsBoolean(INDEX_CODEC_BLOOM_LOAD,INDEX_CODEC_BLOOM_LOAD_DEFAULT);
}
