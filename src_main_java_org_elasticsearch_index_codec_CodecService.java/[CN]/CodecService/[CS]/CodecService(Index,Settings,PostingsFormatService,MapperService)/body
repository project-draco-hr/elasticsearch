{
  super(index,indexSettings);
  this.postingsFormatService=postingsFormatService;
  this.mapperService=mapperService;
  MapBuilder<String,Codec> codecs=MapBuilder.<String,Codec>newMapBuilder();
  if (mapperService == null) {
    codecs.put("default",Codec.getDefault());
  }
 else {
    codecs.put("default",new PerFieldMappingPostingFormatCodec(mapperService,postingsFormatService.get("default").get()));
  }
  for (  String codec : Codec.availableCodecs()) {
    codecs.put(codec,Codec.forName(codec));
  }
  this.codecs=codecs.immutableMap();
}
