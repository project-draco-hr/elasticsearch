{
  long bulkRetries=0;
  long searchRetries=0;
  int attempt=0;
  while (attempt < ATTEMPTS) {
    client().admin().indices().prepareDelete("*").get();
    setup.run();
    Tuple<Long,Long> result=attemptTestCase(expectCreated,requestBuilder);
    bulkRetries+=result.v1();
    searchRetries+=result.v2();
    attempt+=1;
    if (bulkRetries == 0) {
      logger.warn("Didn't get any bulk retries after {} attempts",attempt);
      continue;
    }
    if (searchRetries == 0) {
      logger.warn("Didn't get any search retries after {} attempts",attempt);
      continue;
    }
    break;
  }
  assertThat(bulkRetries,greaterThan(0L));
  assertThat(searchRetries,greaterThan(0L));
}
