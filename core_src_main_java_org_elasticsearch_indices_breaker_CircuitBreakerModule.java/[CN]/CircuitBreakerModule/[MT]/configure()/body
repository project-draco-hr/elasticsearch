{
  String type=settings.get(TYPE_KEY);
  Class<? extends CircuitBreakerService> impl;
  if (type == null || type.equals("hierarchy")) {
    impl=HierarchyCircuitBreakerService.class;
  }
 else   if (type.equals("none")) {
    impl=NoneCircuitBreakerService.class;
  }
 else {
    throw new IllegalArgumentException("Unknown circuit breaker type [" + type + "]");
  }
  bind(CircuitBreakerService.class).to(impl).asEagerSingleton();
}
