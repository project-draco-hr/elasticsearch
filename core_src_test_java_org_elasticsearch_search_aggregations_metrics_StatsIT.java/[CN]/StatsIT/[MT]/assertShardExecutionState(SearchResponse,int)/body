{
  ShardSearchFailure[] failures=response.getShardFailures();
  if (failures.length != expectedFailures) {
    for (    ShardSearchFailure failure : failures) {
      logger.error(new ParameterizedMessage("Shard Failure: {}",failure),failure.getCause());
    }
    fail("Unexpected shard failures!");
  }
  assertThat("Not all shards are initialized",response.getSuccessfulShards(),equalTo(response.getTotalShards()));
}
