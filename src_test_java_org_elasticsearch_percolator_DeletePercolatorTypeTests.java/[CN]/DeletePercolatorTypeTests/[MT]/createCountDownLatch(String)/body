{
  List<Node> nodes=nodes();
  final CountDownLatch latch=new CountDownLatch(nodes.size());
  for (  Node node : nodes) {
    IndicesService indexServices=((InternalNode)node).injector().getInstance(IndicesService.class);
    MapperService mapperService=indexServices.indexService(index).mapperService();
    mapperService.addTypeListener(new DocumentTypeListener(){
      @Override public void created(      String type){
      }
      @Override public void removed(      String type){
        latch.countDown();
      }
    }
);
  }
  return latch;
}
