{
  Set<String> addedDocFreq=Sets.newHashSet();
  for (  IndexableField field : doc.getFields("field")) {
    String term=field.stringValue();
    FreqHolder freqHolder=reference.get(term);
    if (freqHolder == null) {
      freqHolder=new FreqHolder();
      reference.put(term,freqHolder);
    }
    if (!addedDocFreq.contains(term)) {
      freqHolder.docFreq++;
      addedDocFreq.add(term);
    }
    freqHolder.totalTermFreq++;
  }
}
