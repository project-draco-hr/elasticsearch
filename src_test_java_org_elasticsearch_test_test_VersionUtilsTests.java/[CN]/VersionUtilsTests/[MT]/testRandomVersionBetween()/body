{
  int numReps=randomIntBetween(10,20);
  while (numReps-- > 0) {
    Version v1=VersionUtils.randomVersion(random());
    Version v2=VersionUtils.randomVersion(random());
    if (v1.after(v2)) {
      Version tmp=v1;
      v1=v2;
      v2=tmp;
    }
    Version got=VersionUtils.randomVersionBetween(random(),v1,v2);
    assertTrue(got.onOrAfter(v1));
    assertTrue(got.onOrBefore(v2));
    got=VersionUtils.randomVersionBetween(random(),null,v2);
    assertTrue(got.onOrAfter(VersionUtils.getFirstVersion()));
    assertTrue(got.onOrBefore(v2));
    got=VersionUtils.randomVersionBetween(random(),v1,null);
    assertTrue(got.onOrAfter(v1));
    assertTrue(got.onOrBefore(Version.CURRENT));
    got=VersionUtils.randomVersionBetween(random(),v1,v1);
    assertEquals(got,v1);
  }
}
