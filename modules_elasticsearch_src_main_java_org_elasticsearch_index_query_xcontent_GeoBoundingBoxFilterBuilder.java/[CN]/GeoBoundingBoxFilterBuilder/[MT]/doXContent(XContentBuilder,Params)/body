{
  builder.startObject(GeoBoundingBoxFilterParser.NAME);
  builder.startObject(name);
  if (topLeftGeohash != null) {
    builder.field("top_left",topLeftGeohash);
  }
 else   if (topLeft != null) {
    builder.startArray("top_left").value(topLeft.lat).value(topLeft.lon).endArray();
  }
 else {
    throw new QueryBuilderException("geo_bounding_box requires 'top_left' to be set");
  }
  if (bottomRightGeohash != null) {
    builder.field("bottom_right",bottomRightGeohash);
  }
 else   if (bottomRight != null) {
    builder.startArray("bottom_right").value(bottomRight.lat).value(bottomRight.lon).endArray();
  }
 else {
    throw new QueryBuilderException("geo_bounding_box requires 'bottom_right' to be set");
  }
  builder.endObject();
  builder.endObject();
}
