{
  Injector injector=new ModulesBuilder().add(new IndicesQueriesModule(),new CacheRecyclerModule(settings),new CodecModule(settings),new IndexSettingsModule(new Index("test"),settings),new IndexNameModule(new Index("test")),new IndexQueryParserModule(settings),new AnalysisModule(settings),new SimilarityModule(settings),new ScriptModule(settings),new SettingsModule(settings),new IndexEngineModule(settings),new IndexCacheModule(settings),new FunctionScoreModule(),new AbstractModule(){
    @Override protected void configure(){
      bind(ClusterService.class).toProvider(Providers.of((ClusterService)null));
      bind(CircuitBreakerService.class).to(DummyCircuitBreakerService.class);
    }
  }
).createInjector();
  return injector.getInstance(IndexQueryParserService.class);
}
