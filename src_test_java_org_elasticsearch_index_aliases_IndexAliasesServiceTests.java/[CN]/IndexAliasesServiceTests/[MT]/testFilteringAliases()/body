{
  IndexAliasesService indexAliasesService=newIndexAliasesService();
  indexAliasesService.add("cats",filter(termFilter("animal","cat")));
  indexAliasesService.add("dogs",filter(termFilter("animal","dog")));
  indexAliasesService.add("all",null);
  assertThat(indexAliasesService.hasAlias("cats"),equalTo(true));
  assertThat(indexAliasesService.hasAlias("dogs"),equalTo(true));
  assertThat(indexAliasesService.hasAlias("turtles"),equalTo(false));
  assertThat(indexAliasesService.aliasFilter("cats").toString(),equalTo("cache(QueryWrapperFilter(animal:cat))"));
  assertThat(indexAliasesService.aliasFilter("cats","dogs").toString(),equalTo("QueryWrapperFilter(cache(QueryWrapperFilter(animal:cat)) cache(QueryWrapperFilter(animal:dog)))"));
  assertThat(indexAliasesService.aliasFilter("all"),nullValue());
  assertThat(indexAliasesService.aliasFilter("cats","all"),nullValue());
  assertThat(indexAliasesService.aliasFilter("all","cats"),nullValue());
  indexAliasesService.add("cats",filter(termFilter("animal","feline")));
  indexAliasesService.add("dogs",filter(termFilter("animal","canine")));
  assertThat(indexAliasesService.aliasFilter("dogs","cats").toString(),equalTo("QueryWrapperFilter(cache(QueryWrapperFilter(animal:canine)) cache(QueryWrapperFilter(animal:feline)))"));
}
