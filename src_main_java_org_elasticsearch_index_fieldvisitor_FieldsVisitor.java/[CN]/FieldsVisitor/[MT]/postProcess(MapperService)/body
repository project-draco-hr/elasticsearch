{
  if (uid != null) {
    DocumentMapper documentMapper=mapperService.documentMapper(uid.type());
    if (documentMapper != null) {
      postProcess(documentMapper);
      return;
    }
  }
  for (  Map.Entry<String,List<Object>> entry : fields().entrySet()) {
    FieldMappers fieldMappers=mapperService.indexName(entry.getKey());
    if (fieldMappers == null) {
      continue;
    }
    List<Object> fieldValues=entry.getValue();
    for (int i=0; i < fieldValues.size(); i++) {
      fieldValues.set(i,fieldMappers.mapper().valueForSearch(fieldValues.get(i)));
    }
  }
}
