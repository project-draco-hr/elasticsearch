{
  String[] files=directory().listAll();
  IOException lastException=null;
  for (  String file : files) {
    if (file.startsWith(CHECKSUMS_PREFIX)) {
      ((StoreDirectory)directory()).deleteFileChecksum(file);
    }
 else {
      try {
        directory().deleteFile(file);
      }
 catch (      FileNotFoundException e) {
      }
catch (      IOException e) {
        lastException=e;
      }
    }
  }
  if (lastException != null) {
    throw lastException;
  }
}
