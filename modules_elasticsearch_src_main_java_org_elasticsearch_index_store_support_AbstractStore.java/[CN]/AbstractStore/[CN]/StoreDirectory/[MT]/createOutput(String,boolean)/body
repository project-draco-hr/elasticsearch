{
  IndexOutput out=delegate.createOutput(name);
  if (filesMetadata.containsKey(name)) {
    try {
      delegate.deleteFile(name + ".cks");
    }
 catch (    Exception e) {
    }
  }
synchronized (mutex) {
    StoreFileMetaData metaData=new StoreFileMetaData(name,-1,-1,null);
    filesMetadata=MapBuilder.newMapBuilder(filesMetadata).put(name,metaData).immutableMap();
    files=filesMetadata.keySet().toArray(new String[filesMetadata.size()]);
  }
  return new StoreIndexOutput(out,name,computeChecksum);
}
