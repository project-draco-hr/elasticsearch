{
  client().prepareIndex("index","type","1").setSource("field","value").execute().get();
  refresh();
  try {
    SearchResponse searchResponse=client().prepareSearch("index").setSize(1).setScroll("1m").get();
    assertThat(searchResponse.getScrollId(),is(notNullValue()));
    ClearScrollResponse clearScrollResponse=client().prepareClearScroll().addScrollId(searchResponse.getScrollId()).get();
    assertThat(clearScrollResponse.isSucceeded(),is(true));
    cluster().transportClient().prepareSearchScroll(searchResponse.getScrollId()).get();
    fail("Expected exception to happen due to non-existing scroll id");
  }
 catch (  ElasticsearchException e) {
    assertThat(e.status(),is(RestStatus.NOT_FOUND));
  }
}
