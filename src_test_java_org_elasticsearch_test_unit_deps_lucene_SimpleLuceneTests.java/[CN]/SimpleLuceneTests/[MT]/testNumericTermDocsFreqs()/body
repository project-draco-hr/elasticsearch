{
  Directory dir=new RAMDirectory();
  IndexWriter indexWriter=new IndexWriter(dir,new IndexWriterConfig(Lucene.VERSION,Lucene.STANDARD_ANALYZER));
  Document doc=new Document();
  FieldType type=IntField.TYPE_STORED;
  type.setIndexOptions(FieldInfo.IndexOptions.DOCS_AND_FREQS);
  IntField field=new IntField("int1",1,type);
  doc.add(field);
  field=new IntField("int1",1,type);
  doc.add(field);
  field=new IntField("int2",1,type);
  doc.add(field);
  field=new IntField("int2",1,type);
  doc.add(field);
  indexWriter.addDocument(doc);
  IndexReader reader=IndexReader.open(indexWriter,true);
  AtomicReader atomicReader=SlowCompositeReaderWrapper.wrap(reader);
  DocsEnum termDocs=atomicReader.termDocsEnum(new Term("int1"));
  assertThat(termDocs.nextDoc(),equalTo(0));
  assertThat(termDocs.docID(),equalTo(0));
  assertThat(termDocs.freq(),equalTo(1));
  termDocs=atomicReader.termDocsEnum(new Term("int2"));
  assertThat(termDocs.nextDoc(),equalTo(0));
  assertThat(termDocs.docID(),equalTo(0));
  assertThat(termDocs.freq(),equalTo(2));
  reader.close();
  indexWriter.close();
}
