{
  assertAcked(client().admin().indices().prepareCreate("test").setSettings(SETTING_NUMBER_OF_SHARDS,1));
  indexRandom(true,client().prepareIndex("test","type1","1").setSource("field1","value1_1"),client().prepareIndex("test","type1","2").setSource("field1","value1_2"),client().prepareIndex("test","type1","3").setSource("field2","value2_3"),client().prepareIndex("test","type1","4").setSource("field3","value3_4"));
  assertHitCount(client().prepareSearch().setQuery(filteredQuery(matchAllQuery(),limitFilter(2))).get(),4l);
}
