{
  this.source=mapping;
  Map<String,Object> mappingMap=XContentHelper.createParser(mapping.compressedReference()).mapOrderedAndClose();
  if (mappingMap.size() != 1) {
    throw new IllegalStateException("Can't derive type from mapping, no root type: " + mapping.string());
  }
  this.type=mappingMap.keySet().iterator().next();
  initMappers((Map<String,Object>)mappingMap.get(this.type));
}
