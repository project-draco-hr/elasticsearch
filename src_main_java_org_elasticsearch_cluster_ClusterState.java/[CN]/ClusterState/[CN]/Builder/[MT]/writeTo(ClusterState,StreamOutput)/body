{
  out.writeLong(state.version());
  MetaData.Builder.writeTo(state.metaData(),out);
  RoutingTable.Builder.writeTo(state.routingTable(),out);
  DiscoveryNodes.Builder.writeTo(state.nodes(),out);
  ClusterBlocks.Builder.writeClusterBlocks(state.blocks(),out);
  state.allocationExplanation().writeTo(out);
  out.writeVInt(state.customs().size());
  for (  Map.Entry<String,Custom> entry : state.customs().entrySet()) {
    out.writeString(entry.getKey());
    lookupFactorySafe(entry.getKey()).writeTo(entry.getValue(),out);
  }
}
