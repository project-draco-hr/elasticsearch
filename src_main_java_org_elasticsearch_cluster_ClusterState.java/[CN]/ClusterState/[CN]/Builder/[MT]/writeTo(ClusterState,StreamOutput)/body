{
  out.writeLong(state.version());
  MetaData.Builder.writeTo(state.metaData(),out);
  RoutingTable.Builder.writeTo(state.routingTable(),out);
  DiscoveryNodes.Builder.writeTo(state.nodes(),out);
  ClusterBlocks.Builder.writeClusterBlocks(state.blocks(),out);
  state.allocationExplanation().writeTo(out);
  out.writeVInt(state.customs().size());
  for (  ObjectObjectCursor<String,Custom> cursor : state.customs()) {
    out.writeString(cursor.key);
    lookupFactorySafe(cursor.key).writeTo(cursor.value,out);
  }
}
