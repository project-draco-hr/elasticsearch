{
  Custom.Factory<T> factory=customFactories.get(type);
  if (factory == null) {
    throw new ElasticSearchIllegalArgumentException("No custom state factory registered for type [" + type + "]");
  }
  return factory;
}
