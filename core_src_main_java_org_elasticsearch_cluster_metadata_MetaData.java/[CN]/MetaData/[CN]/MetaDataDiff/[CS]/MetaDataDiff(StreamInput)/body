{
  clusterUUID=in.readString();
  version=in.readLong();
  transientSettings=Settings.readSettingsFromStream(in);
  persistentSettings=Settings.readSettingsFromStream(in);
  indices=DiffableUtils.readImmutableOpenMapDiff(in,IndexMetaData.PROTO);
  templates=DiffableUtils.readImmutableOpenMapDiff(in,IndexTemplateMetaData.PROTO);
  customs=DiffableUtils.readImmutableOpenMapDiff(in,new KeyedReader<Custom>(){
    @Override public Custom readFrom(    StreamInput in,    String key) throws IOException {
      return lookupPrototypeSafe(key).readFrom(in);
    }
    @Override public Diff<Custom> readDiffFrom(    StreamInput in,    String key) throws IOException {
      return lookupPrototypeSafe(key).readDiffFrom(in);
    }
  }
);
}
