{
  try {
    ScoreFunction scoreFunction=new ScriptScoreFunction("Float.NaN",null,new FloatValueScript(Float.NaN));
    scoreFunction.score(randomInt(),randomFloat());
    fail("should have thrown an exception about the script_score returning NaN");
  }
 catch (  ScriptException e) {
    assertThat("message contains error about script_score returning NaN: " + e.getMessage(),e.getMessage().contains("NaN"),equalTo(true));
  }
}
