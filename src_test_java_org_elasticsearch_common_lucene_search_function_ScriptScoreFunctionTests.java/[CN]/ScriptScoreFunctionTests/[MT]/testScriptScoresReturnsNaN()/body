{
  ScoreFunction scoreFunction=new ScriptScoreFunction(new Script("Float.NaN"),new FloatValueScript(Float.NaN));
  LeafScoreFunction leafScoreFunction=scoreFunction.getLeafScoreFunction(null);
  try {
    leafScoreFunction.score(randomInt(),randomFloat());
    fail("should have thrown an exception about the script_score returning NaN");
  }
 catch (  ScriptException e) {
    assertThat("message contains error about script_score returning NaN: " + e.getMessage(),e.getMessage().contains("NaN"),equalTo(true));
  }
}
