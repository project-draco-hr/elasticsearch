{
  if (indexShardRoutingTable.size() == 0) {
    return false;
  }
  for (  ShardRouting shardRouting : indexShardRoutingTable) {
    if (!shardRouting.started()) {
      return false;
    }
    DiscoveryNode node=state.nodes().get(shardRouting.currentNodeId());
    if (node == null) {
      return false;
    }
    if (node.getVersion().before(Version.V_1_3_0)) {
      logger.debug("Skip deleting deleting shard instance [{}], a node holding a shard instance is < 1.3.0",shardRouting);
      return false;
    }
    if (shardRouting.relocatingNodeId() != null) {
      node=state.nodes().get(shardRouting.relocatingNodeId());
      if (node == null) {
        return false;
      }
      if (node.getVersion().before(Version.V_1_3_0)) {
        logger.debug("Skip deleting deleting shard instance [{}], a node holding a shard instance is < 1.3.0",shardRouting);
        return false;
      }
    }
    String localNodeId=state.getNodes().localNode().id();
    if (localNodeId.equals(shardRouting.currentNodeId()) || localNodeId.equals(shardRouting.relocatingNodeId())) {
      return false;
    }
  }
  return true;
}
