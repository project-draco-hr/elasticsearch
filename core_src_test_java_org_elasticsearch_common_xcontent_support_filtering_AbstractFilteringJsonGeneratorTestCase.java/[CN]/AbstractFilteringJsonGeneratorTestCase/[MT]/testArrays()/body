{
  XContentBuilder expected=newXContentBuilder().startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject();
  assertXContentBuilder(expected,newXContentBuilder("t*",true).startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject());
  assertXContentBuilder(expected,newXContentBuilder("tags",true).startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject());
  assertXContentBuilder(expected,newXContentBuilder("a",false).startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject());
  assertXContentBuilder(newXContentBuilder().startObject().endObject(),newXContentBuilder("foo",true).startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject());
  assertXContentBuilder(newXContentBuilder().startObject().endObject(),newXContentBuilder("t*",false).startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject());
  assertXContentBuilder(newXContentBuilder().startObject().endObject(),newXContentBuilder("tags",false).startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject());
  expected=newXContentBuilder().startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject();
  assertXContentBuilder(expected,newXContentBuilder("t*",true).startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  assertXContentBuilder(expected,newXContentBuilder("tags",true).startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  assertXContentBuilder(expected,newXContentBuilder("a",false).startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  assertXContentBuilder(newXContentBuilder().startObject().endObject(),newXContentBuilder("foo",true).startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  assertXContentBuilder(newXContentBuilder().startObject().endObject(),newXContentBuilder("t*",false).startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  assertXContentBuilder(newXContentBuilder().startObject().endObject(),newXContentBuilder("tags",false).startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  expected=newXContentBuilder().startObject().startArray("tags").startObject().field("firstname","ipsum").endObject().endArray().endObject();
  assertXContentBuilder(expected,newXContentBuilder("t*.firstname",true).startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  assertXContentBuilder(expected,newXContentBuilder("t*.lastname",false).startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
}
