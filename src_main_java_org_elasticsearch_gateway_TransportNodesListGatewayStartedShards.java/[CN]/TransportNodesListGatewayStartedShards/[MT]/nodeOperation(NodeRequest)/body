{
  try {
    logger.trace("loading shard state info for {}",request.shardId);
    ShardStateInfo shardStateInfo=shardsState.loadShardInfo(request.shardId);
    if (shardStateInfo != null) {
      logger.debug("{} shard state info found: [{}]",request.shardId,shardStateInfo);
      return new NodeGatewayStartedShards(clusterService.localNode(),shardStateInfo.version);
    }
    logger.trace("no shard info found for {}",request.shardId);
    return new NodeGatewayStartedShards(clusterService.localNode(),-1);
  }
 catch (  Exception e) {
    throw new ElasticsearchException("failed to load started shards",e);
  }
}
