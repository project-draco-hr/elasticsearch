{
  try {
    logger.trace("{} loading local shard state info",request.shardId);
    ShardStateMetaData shardStateMetaData=ShardStateMetaData.load(logger,request.shardId,nodeEnv.shardPaths(request.shardId));
    if (shardStateMetaData != null) {
      logger.debug("{} shard state info found: [{}]",request.shardId,shardStateMetaData);
      return new NodeGatewayStartedShards(clusterService.localNode(),shardStateMetaData.version);
    }
    logger.trace("{} no local shard info found",request.shardId);
    return new NodeGatewayStartedShards(clusterService.localNode(),-1);
  }
 catch (  Exception e) {
    throw new ElasticsearchException("failed to load started shards",e);
  }
}
