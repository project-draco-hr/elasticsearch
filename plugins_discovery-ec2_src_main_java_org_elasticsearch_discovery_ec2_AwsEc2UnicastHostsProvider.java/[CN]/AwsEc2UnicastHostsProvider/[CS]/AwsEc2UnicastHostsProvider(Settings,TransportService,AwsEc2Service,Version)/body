{
  super(settings);
  this.transportService=transportService;
  this.client=awsEc2Service.client();
  this.version=version;
  this.hostType=HostType.valueOf(settings.get(DISCOVERY_EC2.HOST_TYPE,"private_ip").toUpperCase(Locale.ROOT));
  this.bindAnyGroup=settings.getAsBoolean(DISCOVERY_EC2.ANY_GROUP,true);
  this.groups=new HashSet<>();
  groups.addAll(Arrays.asList(settings.getAsArray(DISCOVERY_EC2.GROUPS)));
  this.tags=settings.getByPrefix(DISCOVERY_EC2.TAG_PREFIX).getAsMap();
  Set<String> availabilityZones=new HashSet<>();
  availabilityZones.addAll(Arrays.asList(settings.getAsArray(DISCOVERY_EC2.AVAILABILITY_ZONES)));
  if (settings.get(DISCOVERY_EC2.AVAILABILITY_ZONES) != null) {
    availabilityZones.addAll(Strings.commaDelimitedListToSet(settings.get(DISCOVERY_EC2.AVAILABILITY_ZONES)));
  }
  this.availabilityZones=availabilityZones;
  if (logger.isDebugEnabled()) {
    logger.debug("using host_type [{}], tags [{}], groups [{}] with any_group [{}], availability_zones [{}]",hostType,tags,groups,bindAnyGroup,availabilityZones);
  }
}
