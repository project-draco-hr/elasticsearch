{
  IndexQueryParserService queryParser=queryParser();
  String query=copyToStringFromClasspath("/org/elasticsearch/test/unit/index/query/mlt.json");
  Query parsedQuery=queryParser.parse(query).query();
  assertThat(parsedQuery,instanceOf(MoreLikeThisQuery.class));
  MoreLikeThisQuery mltQuery=(MoreLikeThisQuery)parsedQuery;
  assertThat(mltQuery.getMoreLikeFields()[0],equalTo("name.first"));
  assertThat(mltQuery.getMoreLikeFields()[1],equalTo("name.last"));
  assertThat(mltQuery.getLikeText(),equalTo("something"));
  assertThat(mltQuery.getMinTermFrequency(),equalTo(1));
  assertThat(mltQuery.getMaxQueryTerms(),equalTo(12));
}
