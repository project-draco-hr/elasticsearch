{
  Object m=e.getMessage();
  if (!(m instanceof ChannelBuffer)) {
    ctx.sendUpstream(e);
    return;
  }
  ChannelBuffer input=(ChannelBuffer)m;
  if (!input.readable()) {
    return;
  }
  ChannelBuffer cumulation=this.cumulation;
  if (cumulation != null && cumulation.readable()) {
    cumulation.discardReadBytes();
    cumulation.writeBytes(input);
    callDecode(ctx,e.getChannel(),cumulation,true);
  }
 else {
    int actualSize=callDecode(ctx,e.getChannel(),input,false);
    if (input.readable()) {
      if (actualSize > 0) {
        cumulation=ChannelBuffers.dynamicBuffer(actualSize,ctx.getChannel().getConfig().getBufferFactory());
      }
 else {
        cumulation=ChannelBuffers.dynamicBuffer(ctx.getChannel().getConfig().getBufferFactory());
      }
      cumulation.writeBytes(input);
      this.cumulation=cumulation;
    }
  }
}
