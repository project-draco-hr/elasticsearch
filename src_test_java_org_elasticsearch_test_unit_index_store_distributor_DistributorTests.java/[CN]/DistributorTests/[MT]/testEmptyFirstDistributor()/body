{
  FakeFsDirectory[] directories=new FakeFsDirectory[]{new FakeFsDirectory("dir0",10L),new FakeFsDirectory("dir1",20L),new FakeFsDirectory("dir2",30L)};
  FakeDirectoryService directoryService=new FakeDirectoryService(directories);
  LeastUsedDistributor distributor=new LeastUsedDistributor(directoryService);
  for (int i=0; i < 5; i++) {
    assertThat(distributor.any(),equalTo((Directory)directories[2]));
  }
  directories[2].setUsableSpace(5L);
  for (int i=0; i < 5; i++) {
    assertThat(distributor.any(),equalTo((Directory)directories[1]));
  }
  directories[1].setUsableSpace(0L);
  for (int i=0; i < 5; i++) {
    assertThat(distributor.any(),equalTo((Directory)directories[0]));
  }
}
