{
  if (currentState.nodes().masterNodeId() == null) {
    return false;
  }
  if (!currentState.nodes().masterNodeId().equals(newClusterState.nodes().masterNodeId())) {
    logger.warn("received a cluster state from a different master then the current one, rejecting (received {}, current {})",newClusterState.nodes().masterNode(),currentState.nodes().masterNode());
    throw new IllegalStateException("cluster state from a different master then the current one, rejecting (received " + newClusterState.nodes().masterNode() + ", current "+ currentState.nodes().masterNode()+ ")");
  }
 else   if (newClusterState.version() < currentState.version()) {
    logger.debug("received a cluster state that has a lower version than the current one, ignoring (received {}, current {})",newClusterState.version(),currentState.version());
    return true;
  }
 else {
    return false;
  }
}
