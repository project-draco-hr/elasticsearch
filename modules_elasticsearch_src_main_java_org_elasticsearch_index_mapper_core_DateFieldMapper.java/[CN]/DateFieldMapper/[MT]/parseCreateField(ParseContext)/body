{
  String dateAsString=null;
  long value=-1;
  if (context.externalValueSet()) {
    Object externalValue=context.externalValue();
    if (externalValue instanceof Number) {
      value=((Number)externalValue).longValue();
    }
 else {
      dateAsString=(String)externalValue;
      if (dateAsString == null) {
        dateAsString=nullValue;
      }
    }
  }
 else {
    XContentParser.Token token=context.parser().currentToken();
    if (token == XContentParser.Token.VALUE_NULL) {
      dateAsString=nullValue;
    }
 else     if (token == XContentParser.Token.VALUE_NUMBER) {
      value=context.parser().longValue();
    }
 else {
      dateAsString=context.parser().text();
    }
  }
  if (value != -1) {
    return new LongFieldMapper.CustomLongNumericField(this,value);
  }
  if (dateAsString == null) {
    return null;
  }
  if (context.includeInAll(includeInAll)) {
    context.allEntries().addText(names.fullName(),dateAsString,boost);
  }
  value=parseStringValue(dateAsString);
  return new LongFieldMapper.CustomLongNumericField(this,value);
}
