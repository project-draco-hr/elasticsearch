{
  Set<String> nodes=Sets.newHashSet();
  for (  IndexShardRoutingTable shardRoutingTable : this) {
    for (    ShardRouting shardRouting : shardRoutingTable) {
      if (shardRouting.assignedToNode()) {
        nodes.add(shardRouting.currentNodeId());
      }
    }
  }
  return nodes.size();
}
