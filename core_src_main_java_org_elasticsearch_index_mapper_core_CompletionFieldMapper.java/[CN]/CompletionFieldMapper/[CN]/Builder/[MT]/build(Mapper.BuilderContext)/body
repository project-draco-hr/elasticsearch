{
  setupFieldType(context);
  CompletionFieldType completionFieldType=(CompletionFieldType)fieldType;
  completionFieldType.setProvider(new AnalyzingCompletionLookupProvider(preserveSeparators,false,preservePositionIncrements,payloads));
  completionFieldType.setContextMapping(contextMapping);
  return new CompletionFieldMapper(fieldType,maxInputLength,context.indexSettings(),multiFieldsBuilder.build(this,context),copyTo);
}
