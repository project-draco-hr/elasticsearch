{
  builder.startObject(NAME);
  String fieldname;
switch (templateType) {
case FILE:
    fieldname="file";
  break;
case INDEXED:
fieldname="id";
break;
case INLINE:
fieldname=TemplateQueryParser.QUERY;
break;
default :
throw new IllegalArgumentException("Unknown template type " + templateType);
}
builder.field(fieldname,template);
builder.field(TemplateQueryParser.PARAMS,vars);
builder.endObject();
}
