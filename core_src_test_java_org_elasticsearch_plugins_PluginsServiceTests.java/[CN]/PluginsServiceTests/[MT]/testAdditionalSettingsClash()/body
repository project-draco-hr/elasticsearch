{
  Settings settings=Settings.builder().put("path.home",createTempDir()).putArray("plugin.types",AdditionalSettingsPlugin1.class.getName(),AdditionalSettingsPlugin2.class.getName()).build();
  PluginsService service=new PluginsService(settings,new Environment(settings));
  try {
    service.updatedSettings();
    fail("Expected exception when building updated settings");
  }
 catch (  IllegalArgumentException e) {
    String msg=e.getMessage();
    assertTrue(msg,msg.contains("Cannot have additional setting [foo.bar]"));
    assertTrue(msg,msg.contains("plugin [additional-settings1]"));
    assertTrue(msg,msg.contains("plugin [additional-settings2]"));
  }
}
