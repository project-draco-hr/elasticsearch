{
  Settings settings=Settings.builder().put("path.home",createTempDir()).build();
  PluginsService service=newPluginsService(settings,AdditionalSettingsPlugin1.class,AdditionalSettingsPlugin2.class);
  try {
    service.updatedSettings();
    fail("Expected exception when building updated settings");
  }
 catch (  IllegalArgumentException e) {
    String msg=e.getMessage();
    assertTrue(msg,msg.contains("Cannot have additional setting [foo.bar]"));
    assertTrue(msg,msg.contains("plugin [additional-settings1]"));
    assertTrue(msg,msg.contains("plugin [additional-settings2]"));
  }
}
