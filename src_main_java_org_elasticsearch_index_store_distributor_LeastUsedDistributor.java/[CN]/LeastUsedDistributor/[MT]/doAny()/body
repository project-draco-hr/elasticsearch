{
  Directory directory=null;
  long size=Long.MIN_VALUE;
  for (  Directory delegate : delegates) {
    if (delegate instanceof FSDirectory) {
      long currentSize=((FSDirectory)delegate).getDirectory().getUsableSpace();
      if (currentSize > size) {
        size=currentSize;
        directory=delegate;
      }
 else       if (currentSize == size && ThreadLocalRandom.current().nextBoolean()) {
        directory=delegate;
      }
 else {
      }
    }
 else {
      directory=delegate;
    }
  }
  return directory;
}
