{
  RoutingNodes routingNodes=allocation.routingNodes();
  for (  ObjectCursor<DiscoveryNode> cursor : allocation.nodes().dataNodes().values()) {
    DiscoveryNode node=cursor.value;
    if (!routingNodes.nodesToShards().containsKey(node.id())) {
      RoutingNode routingNode=new RoutingNode(node.id(),node);
      routingNodes.nodesToShards().put(node.id(),routingNode);
    }
  }
}
