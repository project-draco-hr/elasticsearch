{
  if (this.version.onOrAfter(Version.LUCENE_43)) {
    if (matcher == null) {
      return new XNGramTokenizer(version,reader,minGram,maxGram);
    }
 else {
      return new XNGramTokenizer(version,reader,minGram,maxGram){
        @Override protected boolean isTokenChar(        int chr){
          return matcher.isTokenChar(chr);
        }
      }
;
    }
  }
  return new NGramTokenizer(reader,minGram,maxGram);
}
