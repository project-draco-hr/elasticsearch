{
  super(index,indexSettings,name,settings);
  this.inject=settings.getAsBoolean("replace",true);
  String encoder=settings.get("encoder");
  if (encoder == null) {
    throw new ElasticSearchIllegalArgumentException("encoder must be set on phonetic token filter");
  }
  if ("metaphone".equalsIgnoreCase(encoder)) {
    this.encoder=new Metaphone();
  }
 else   if ("soundex".equalsIgnoreCase(encoder)) {
    this.encoder=new Soundex();
  }
 else   if ("caverphone".equalsIgnoreCase(encoder)) {
    this.encoder=new Caverphone();
  }
 else   if ("refined_soundex".equalsIgnoreCase(encoder) || "refinedSoundex".equalsIgnoreCase(encoder)) {
    this.encoder=new RefinedSoundex();
  }
 else   if ("double_metaphone".equalsIgnoreCase(encoder) || "doubleMetaphone".equalsIgnoreCase(encoder)) {
    this.encoder=new DoubleMetaphone();
  }
 else {
    throw new ElasticSearchIllegalArgumentException("unknown encoder [" + encoder + "] for phonetic token filter");
  }
}
