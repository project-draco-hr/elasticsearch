{
  CachedStreamOutput.Entry entry=CachedStreamOutput.popEntry();
  try {
    StreamOutput compressed=entry.bytes(this);
    compressed.writeBytes(data,offset,length);
    compressed.close();
    return entry.bytes().bytes().copyBytesArray().toBytes();
  }
  finally {
    CachedStreamOutput.pushEntry(entry);
  }
}
