{
  closeAfterSuite(new Closeable(){
    @Override public void close() throws IOException {
      assertAllFilesClosed();
    }
  }
);
  closeAfterSuite(new Closeable(){
    @Override public void close() throws IOException {
      assertAllSearchersClosed();
    }
  }
);
  defaultHandler=Thread.getDefaultUncaughtExceptionHandler();
  Thread.setDefaultUncaughtExceptionHandler(new ElasticsearchUncaughtExceptionHandler(defaultHandler));
  Requests.CONTENT_TYPE=randomFrom(XContentType.values());
  Requests.INDEX_CONTENT_TYPE=randomFrom(XContentType.values());
}
