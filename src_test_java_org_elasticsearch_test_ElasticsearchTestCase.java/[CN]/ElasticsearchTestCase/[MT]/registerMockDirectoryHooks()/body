{
  closeAfterSuite(new Closeable(){
    @Override public void close() throws IOException {
      ensureAllFilesClosed();
    }
  }
);
  closeAfterSuite(new Closeable(){
    @Override public void close() throws IOException {
      ensureAllSearchersClosed();
    }
  }
);
  defaultHandler=Thread.getDefaultUncaughtExceptionHandler();
  Thread.setDefaultUncaughtExceptionHandler(new ElasticsearchUncaughtExceptionHandler(defaultHandler));
}
