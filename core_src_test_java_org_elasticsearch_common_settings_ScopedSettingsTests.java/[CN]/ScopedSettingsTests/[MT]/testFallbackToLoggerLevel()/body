{
  final String level=ESLoggerFactory.getRootLogger().getLevel();
  try {
    ClusterSettings settings=new ClusterSettings(Settings.builder().put("logger.level","ERROR").build(),ClusterSettings.BUILT_IN_CLUSTER_SETTINGS);
    assertEquals(level,ESLoggerFactory.getRootLogger().getLevel());
    settings.applySettings(Settings.builder().put("logger._root","TRACE").build());
    assertEquals("TRACE",ESLoggerFactory.getRootLogger().getLevel());
    settings.applySettings(Settings.builder().build());
    assertEquals("ERROR",ESLoggerFactory.getRootLogger().getLevel());
  }
  finally {
    ESLoggerFactory.getRootLogger().setLevel(level);
  }
}
