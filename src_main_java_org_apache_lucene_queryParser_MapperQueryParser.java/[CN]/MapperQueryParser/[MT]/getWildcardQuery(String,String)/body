{
  if (AllFieldMapper.NAME.equals(field) && termStr.equals("*")) {
    return newMatchAllDocsQuery();
  }
  String indexedNameField=field;
  currentMapper=null;
  Analyzer oldAnalyzer=analyzer;
  try {
    MapperService.SmartNameFieldMappers fieldMappers=parseContext.smartFieldMappers(field);
    if (fieldMappers != null) {
      if (!forcedAnalyzer) {
        analyzer=fieldMappers.searchAnalyzer();
      }
      currentMapper=fieldMappers.fieldMappers().mapper();
      if (currentMapper != null) {
        indexedNameField=currentMapper.names().indexName();
      }
      return wrapSmartNameQuery(getPossiblyAnalyzedWildcardQuery(indexedNameField,termStr),fieldMappers,parseContext);
    }
    return getPossiblyAnalyzedWildcardQuery(indexedNameField,termStr);
  }
  finally {
    analyzer=oldAnalyzer;
  }
}
