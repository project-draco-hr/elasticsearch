{
  if (System.nanoTime() - lastWriteNS >= inactiveTimeNS) {
    boolean wasActive=active.getAndSet(false);
    if (wasActive) {
      logger.debug("shard is now inactive");
      indicesLifecycle.onShardInactive(this);
    }
  }
}
