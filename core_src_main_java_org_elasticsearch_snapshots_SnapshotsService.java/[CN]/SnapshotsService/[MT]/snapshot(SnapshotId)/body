{
  List<SnapshotMetaData.Entry> entries=currentSnapshots(snapshotId.getRepository(),new String[]{snapshotId.getSnapshot()});
  if (!entries.isEmpty()) {
    return inProgressSnapshot(entries.iterator().next());
  }
  return repositoriesService.repository(snapshotId.getRepository()).readSnapshot(snapshotId);
}
