{
  Set<Snapshot> snapshotSet=newHashSet();
  List<SnapshotsInProgress.Entry> entries=currentSnapshots(repositoryName,null);
  for (  SnapshotsInProgress.Entry entry : entries) {
    snapshotSet.add(inProgressSnapshot(entry));
  }
  Repository repository=repositoriesService.repository(repositoryName);
  List<SnapshotId> snapshotIds=repository.snapshots();
  for (  SnapshotId snapshotId : snapshotIds) {
    snapshotSet.add(repository.readSnapshot(snapshotId));
  }
  ArrayList<Snapshot> snapshotList=newArrayList(snapshotSet);
  CollectionUtil.timSort(snapshotList);
  return ImmutableList.copyOf(snapshotList);
}
