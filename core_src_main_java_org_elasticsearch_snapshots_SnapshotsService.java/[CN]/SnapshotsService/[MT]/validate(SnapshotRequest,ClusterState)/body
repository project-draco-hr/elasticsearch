{
  RepositoriesMetaData repositoriesMetaData=state.getMetaData().custom(RepositoriesMetaData.TYPE);
  if (repositoriesMetaData == null || repositoriesMetaData.repository(request.repository()) == null) {
    throw new RepositoryMissingException(request.repository());
  }
  validate(new SnapshotId(request.repository(),request.name()));
}
