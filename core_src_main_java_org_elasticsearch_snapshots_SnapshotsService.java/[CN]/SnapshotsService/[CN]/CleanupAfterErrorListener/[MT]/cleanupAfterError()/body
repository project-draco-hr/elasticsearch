{
  if (snapshotCreated) {
    try {
      repositoriesService.repository(snapshot.snapshot().getRepository()).finalizeSnapshot(snapshot.snapshot().getSnapshotId(),snapshot.indices(),snapshot.startTime(),ExceptionsHelper.detailedMessage(t),0,Collections.emptyList());
    }
 catch (    Throwable t2) {
      logger.warn("[{}] failed to close snapshot in repository",snapshot.snapshot());
    }
  }
  userCreateSnapshotListener.onFailure(t);
}
