{
  if (snapshotCreated) {
    try {
      repositoriesService.repository(snapshot.snapshotId().getRepository()).finalizeSnapshot(snapshot.snapshotId(),snapshot.indices(),snapshot.startTime(),ExceptionsHelper.detailedMessage(t),0,Collections.<SnapshotShardFailure>emptyList());
    }
 catch (    Throwable t2) {
      logger.warn("[{}] failed to close snapshot in repository",snapshot.snapshotId());
    }
  }
  userCreateSnapshotListener.onFailure(t);
}
