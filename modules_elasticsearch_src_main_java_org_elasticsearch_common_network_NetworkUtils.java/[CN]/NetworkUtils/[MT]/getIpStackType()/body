{
  boolean isIPv4StackAvailable=isStackAvailable(true);
  boolean isIPv6StackAvailable=isStackAvailable(false);
  if (isIPv4StackAvailable && !isIPv6StackAvailable) {
    return StackType.IPv4;
  }
 else   if (isIPv6StackAvailable && !isIPv4StackAvailable) {
    return StackType.IPv6;
  }
 else   if (isIPv4StackAvailable && isIPv6StackAvailable) {
    if (Boolean.getBoolean(IPv4_SETTING))     return StackType.IPv4;
    if (Boolean.getBoolean(IPv6_SETTING))     return StackType.IPv6;
    return StackType.IPv6;
  }
  return StackType.Unknown;
}
