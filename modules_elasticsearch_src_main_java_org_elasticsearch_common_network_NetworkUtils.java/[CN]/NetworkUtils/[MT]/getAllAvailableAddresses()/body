{
  Set<InetAddress> retval=new HashSet<InetAddress>();
  Enumeration en;
  try {
    en=NetworkInterface.getNetworkInterfaces();
    if (en == null)     return retval;
    while (en.hasMoreElements()) {
      NetworkInterface intf=(NetworkInterface)en.nextElement();
      Enumeration<InetAddress> addrs=intf.getInetAddresses();
      while (addrs.hasMoreElements())       retval.add(addrs.nextElement());
    }
  }
 catch (  SocketException e) {
    logger.warn("Failed to derive all available interfaces",e);
  }
  return retval;
}
