{
  Settings settings=ImmutableSettings.settingsBuilder().put("index.analysis.filter.non_broken_keep_filter.type","keep").put("index.analysis.filter.non_broken_keep_filter.keep_words_path","does/not/exists.txt").build();
  try {
    AnalysisTestsHelper.createAnalysisServiceFromSettings(settings);
    fail("expected an exception due to non existent keep_words_path");
  }
 catch (  Throwable e) {
    assertThat(e.getCause(),instanceOf(FailedToResolveConfigException.class));
  }
  settings=ImmutableSettings.settingsBuilder().put(settings).put("index.analysis.filter.non_broken_keep_filter.keep_words",new String[]{"test"}).build();
  try {
    AnalysisTestsHelper.createAnalysisServiceFromSettings(settings);
    fail("expected an exception indicating that you can't use [keep_words_path] with [keep_words] ");
  }
 catch (  Throwable e) {
    assertThat(e.getCause(),instanceOf(ElasticSearchIllegalArgumentException.class));
  }
}
