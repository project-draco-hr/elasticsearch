{
  Settings settings=settingsBuilder().put("plugin.types",NativeScriptPlugin.class.getName()).put("name","node1").build();
  Node node1=nodeBuilder().clusterName(clusterName).settings(settings).node();
  Client client=node1.client();
  client.admin().cluster().prepareHealth(indexName).setWaitForGreenStatus().setTimeout("10s").execute().actionGet();
  try {
    client.admin().indices().prepareDelete(indexName).execute().actionGet();
  }
 catch (  ElasticsearchException e) {
  }
  IndicesAdminClient admin=client.admin().indices();
  admin.prepareCreate(indexName).addMapping("doc","x","type=long","y","type=double");
  client.admin().cluster().prepareHealth(indexName).setWaitForGreenStatus().setTimeout("10s").execute().actionGet();
  return client;
}
