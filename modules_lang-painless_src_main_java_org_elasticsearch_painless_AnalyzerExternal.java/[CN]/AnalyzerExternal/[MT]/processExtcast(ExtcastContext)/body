{
  final ExtNodeMetadata castenmd=metadata.getExtNodeMetadata(ctx);
  final ParserRuleContext parent=castenmd.parent;
  final ExternalMetadata parentemd=metadata.getExternalMetadata(parent);
  final ExtprecContext precctx=ctx.extprec();
  final ExtcastContext castctx=ctx.extcast();
  final ExtvarContext varctx=ctx.extvar();
  final ExtnewContext newctx=ctx.extnew();
  final ExtstringContext stringctx=ctx.extstring();
  if (precctx != null) {
    metadata.createExtNodeMetadata(parent,precctx);
    analyzer.visit(precctx);
  }
 else   if (castctx != null) {
    metadata.createExtNodeMetadata(parent,castctx);
    analyzer.visit(castctx);
  }
 else   if (varctx != null) {
    metadata.createExtNodeMetadata(parent,varctx);
    analyzer.visit(varctx);
  }
 else   if (newctx != null) {
    metadata.createExtNodeMetadata(parent,newctx);
    analyzer.visit(newctx);
  }
 else   if (stringctx != null) {
    metadata.createExtNodeMetadata(ctx,stringctx);
    analyzer.visit(stringctx);
  }
 else {
    throw new IllegalStateException(AnalyzerUtility.error(ctx) + "Unexpected state.");
  }
  final DecltypeContext declctx=ctx.decltype();
  final ExpressionMetadata declemd=metadata.createExpressionMetadata(declctx);
  analyzer.visit(declctx);
  castenmd.castTo=caster.getLegalCast(ctx,parentemd.current,declemd.from,true);
  castenmd.type=declemd.from;
  parentemd.current=declemd.from;
  parentemd.statement=false;
}
