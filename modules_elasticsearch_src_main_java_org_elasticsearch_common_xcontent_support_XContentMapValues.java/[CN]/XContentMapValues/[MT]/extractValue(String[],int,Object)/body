{
  if (index == pathElements.length) {
    return currentValue;
  }
  if (currentValue == null) {
    return null;
  }
  if (currentValue instanceof Map) {
    Map map=(Map)currentValue;
    return extractValue(pathElements,index + 1,map.get(pathElements[index]));
  }
  if (currentValue instanceof List) {
    List valueList=(List)currentValue;
    List newList=new ArrayList(valueList.size());
    for (    Object o : valueList) {
      Object listValue=extractValue(pathElements,index,o);
      if (listValue != null) {
        newList.add(listValue);
      }
    }
    return newList;
  }
  return null;
}
