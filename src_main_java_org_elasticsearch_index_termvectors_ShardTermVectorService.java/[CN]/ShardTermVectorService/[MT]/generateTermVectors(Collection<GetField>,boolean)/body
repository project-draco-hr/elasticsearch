{
  MemoryIndex index=new MemoryIndex(withOffsets);
  for (  GetField getField : getFields) {
    String field=getField.getName();
    Analyzer analyzer=indexShard.mapperService().smartNameFieldMapper(field).indexAnalyzer();
    if (analyzer == null) {
      analyzer=indexShard.mapperService().analysisService().defaultIndexAnalyzer();
    }
    for (    Object text : getField.getValues()) {
      index.addField(field,text.toString(),analyzer);
    }
  }
  return MultiFields.getFields(index.createSearcher().getIndexReader());
}
