{
  if (currentBufferIndex >= file.numberOfBuffers()) {
    if (enforceEOF)     throw new IOException("Read past EOF");
 else {
      currentBufferIndex--;
      currentBuffer.position(bufferSize);
    }
  }
 else {
    currentBuffer=file.buffer(currentBufferIndex).asReadOnlyBuffer();
    currentBuffer.position(0);
    bufferStart=(long)bufferSize * (long)currentBufferIndex;
  }
}
