{
  long start=System.currentTimeMillis();
  boolean shardExists;
  do {
    shardExists=shardDirectory(server,index,shard).exists();
  }
 while (shardExists && (System.currentTimeMillis() - start) < timeout.millis());
  return shardExists;
}
