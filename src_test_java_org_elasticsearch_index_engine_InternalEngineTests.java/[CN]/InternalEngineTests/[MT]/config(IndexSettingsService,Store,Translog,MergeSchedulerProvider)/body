{
  IndexWriterConfig iwc=newIndexWriterConfig();
  EngineConfig config=new EngineConfig(shardId,false,threadPool,new ShardIndexingService(shardId,EMPTY_SETTINGS,new ShardSlowLogIndexingService(shardId,EMPTY_SETTINGS,indexSettingsService)),indexSettingsService,null,store,createSnapshotDeletionPolicy(),translog,createMergePolicy(),mergeSchedulerProvider,iwc.getAnalyzer(),iwc.getSimilarity(),new CodecService(shardId.index()),new Engine.FailedEngineListener(){
    @Override public void onFailedEngine(    ShardId shardId,    String reason,    @Nullable Throwable t){
    }
  }
);
  return config;
}
