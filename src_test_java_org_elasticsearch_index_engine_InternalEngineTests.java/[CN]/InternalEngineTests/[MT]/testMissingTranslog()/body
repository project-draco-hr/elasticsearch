{
  engine.close();
  Translog translog=createTranslog();
  translog.markCommitted(translog.currentId());
  translog.close();
  try {
    engine=createEngine(store,primaryTranslogDir);
    fail("engine shouldn't start without a valid translog id");
  }
 catch (  EngineCreationFailureException ex) {
  }
  IndexSettingsService indexSettingsService=new IndexSettingsService(shardId.index(),ImmutableSettings.builder().put(defaultSettings).put(EngineConfig.INDEX_IGNORE_UNKNOWN_TRANSLOG,true).build());
  engine=createEngine(indexSettingsService,store,primaryTranslogDir,createMergeScheduler(indexSettingsService));
}
