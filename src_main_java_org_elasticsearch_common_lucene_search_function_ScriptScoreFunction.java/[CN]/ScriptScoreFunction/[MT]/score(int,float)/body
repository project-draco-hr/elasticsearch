{
  script.setNextDocId(docId);
  scorer.docid=docId;
  scorer.score=subQueryScore;
  double result=script.runAsDouble();
  if (Double.isNaN(result)) {
    throw new ScriptException("script_score returned NaN");
  }
  return result;
}
