{
  Explanation exp;
  if (script instanceof ExplainableSearchScript) {
    script.setNextDocId(docId);
    scorer.docid=docId;
    scorer.score=subQueryScore.getValue();
    exp=((ExplainableSearchScript)script).explain(subQueryScore);
  }
 else {
    double score=score(docId,subQueryScore.getValue());
    String explanation="script score function, computed with script:\"" + sScript;
    if (params != null) {
      explanation+="\" and parameters: \n" + params.toString();
    }
    exp=new Explanation(CombineFunction.toFloat(score),explanation);
    Explanation scoreExp=new Explanation(subQueryScore.getValue(),"_score: ");
    scoreExp.addDetail(subQueryScore);
    exp.addDetail(scoreExp);
  }
  return exp;
}
