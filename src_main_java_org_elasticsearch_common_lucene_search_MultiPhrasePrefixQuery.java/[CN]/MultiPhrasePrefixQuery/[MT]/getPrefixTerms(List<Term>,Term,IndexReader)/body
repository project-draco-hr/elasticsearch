{
  TermEnum enumerator=reader.terms(prefix);
  try {
    do {
      Term term=enumerator.term();
      if (term != null && term.text().startsWith(prefix.text()) && term.field().equals(field)) {
        terms.add(term);
      }
 else {
        break;
      }
      if (terms.size() >= maxExpansions) {
        break;
      }
    }
 while (enumerator.next());
  }
  finally {
    enumerator.close();
  }
}
