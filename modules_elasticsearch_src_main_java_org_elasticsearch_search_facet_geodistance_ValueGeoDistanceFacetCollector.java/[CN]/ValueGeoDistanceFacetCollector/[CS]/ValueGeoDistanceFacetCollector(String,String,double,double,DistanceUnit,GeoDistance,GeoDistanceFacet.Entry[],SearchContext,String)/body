{
  super(facetName,fieldName,lat,lon,unit,geoDistance,entries,context);
  MapperService.SmartNameFieldMappers smartMappers=context.smartFieldMappers(valueFieldName);
  if (smartMappers == null || !smartMappers.hasMapper()) {
    throw new FacetPhaseExecutionException(facetName,"No mapping found for field [" + valueFieldName + "]");
  }
  this.indexValueFieldName=smartMappers.mapper().names().indexName();
  this.valueFieldDataType=smartMappers.mapper().fieldDataType();
  this.aggregator=new Aggregator(fixedSourceDistance,entries);
}
