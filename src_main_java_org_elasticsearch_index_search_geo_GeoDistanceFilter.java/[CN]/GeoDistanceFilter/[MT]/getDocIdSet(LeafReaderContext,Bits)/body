{
  DocIdSet boundingBoxDocSet=null;
  if (boundingBoxFilter != null) {
    boundingBoxDocSet=boundingBoxFilter.getDocIdSet(context,null);
    if (DocIdSets.isEmpty(boundingBoxDocSet)) {
      return null;
    }
  }
  final MultiGeoPointValues values=indexFieldData.load(context).getGeoPointValues();
  GeoDistanceDocSet distDocSet=new GeoDistanceDocSet(context.reader().maxDoc(),acceptedDocs,values,fixedSourceDistance,distanceBoundingCheck,distance);
  if (boundingBoxDocSet == null) {
    return distDocSet;
  }
 else {
    return new AndDocIdSet(new DocIdSet[]{boundingBoxDocSet,distDocSet});
  }
}
