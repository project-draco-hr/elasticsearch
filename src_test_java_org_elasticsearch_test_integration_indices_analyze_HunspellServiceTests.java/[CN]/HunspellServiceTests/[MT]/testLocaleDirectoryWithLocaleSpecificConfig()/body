{
  Settings settings=ImmutableSettings.settingsBuilder().put("path.conf",getClass().getResource("/indices/analyze/conf_dir").getFile()).put("indices.analysis.hunspell.dictionary.lazy",true).put("indices.analysis.hunspell.dictionary.ignore_case",true).put("indices.analysis.hunspell.dictionary.en_US.strict_affix_parsing",false).put("indices.analysis.hunspell.dictionary.en_US.ignore_case",false).build();
  Node node=startNode("node1",settings);
  HunspellDictionary dictionary=((InternalNode)node).injector().getInstance(HunspellService.class).getDictionary("en_US");
  assertThat(dictionary,notNullValue());
  Version expectedVersion=Lucene.parseVersion(settings.get("version"),Lucene.ANALYZER_VERSION,logger);
  assertThat(dictionary.getVersion(),equalTo(expectedVersion));
  assertThat(dictionary.isIgnoreCase(),equalTo(false));
  dictionary=((InternalNode)node).injector().getInstance(HunspellService.class).getDictionary("en_US_custom");
  assertThat(dictionary,notNullValue());
  assertThat(dictionary.getVersion(),equalTo(expectedVersion));
  assertThat(dictionary.isIgnoreCase(),equalTo(true));
}
