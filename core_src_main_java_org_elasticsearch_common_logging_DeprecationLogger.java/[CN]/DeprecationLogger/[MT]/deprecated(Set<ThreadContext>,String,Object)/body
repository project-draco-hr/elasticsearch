{
  Iterator<ThreadContext> iterator=threadContexts.iterator();
  if (iterator.hasNext()) {
    final String formattedMsg=LoggerMessageFormat.format(msg,params);
    while (iterator.hasNext()) {
      try {
        iterator.next().addResponseHeader(DEPRECATION_HEADER,formattedMsg);
      }
 catch (      IllegalStateException e) {
      }
    }
    logger.debug(formattedMsg);
  }
 else {
    logger.debug(msg,params);
  }
}
