{
  int index=insertionIndex(key);
  final boolean isNewMapping;
  final short newValue;
  if (index < 0) {
    index=-index - 1;
    newValue=(_values[index]+=adjust_amount);
    isNewMapping=false;
  }
 else {
    newValue=(_values[index]=put_amount);
    isNewMapping=true;
  }
  K oldKey=(K)_set[index];
  _set[index]=key;
  if (isNewMapping) {
    postInsertHook(oldKey == FREE);
  }
  return newValue;
}
