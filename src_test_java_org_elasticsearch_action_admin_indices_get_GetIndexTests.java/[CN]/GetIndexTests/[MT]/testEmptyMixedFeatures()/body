{
  int numFeatures=randomIntBetween(1,allFeatures.length);
  List<String> features=new ArrayList<String>(numFeatures);
  for (int i=0; i < numFeatures; i++) {
    features.add(randomFrom(allFeatures));
  }
  GetIndexResponse response=client().admin().indices().prepareGetIndex().addIndices("empty_idx").setFeatures(features.toArray(new String[features.size()])).get();
  String[] indices=response.indices();
  assertThat(indices,notNullValue());
  assertThat(indices.length,equalTo(1));
  assertThat(indices[0],equalTo("empty_idx"));
  assertEmptyAliases(response);
  if (features.contains("_mapping") || features.contains("_mappings")) {
    assertEmptyOrOnlyDefaultMappings(response,"empty_idx");
  }
 else {
    assertEmptyMappings(response);
  }
  if (features.contains("_settings")) {
    assertNonEmptySettings(response,"empty_idx");
  }
 else {
    assertEmptySettings(response);
  }
  assertEmptyWarmers(response);
}
