{
  if (closed) {
    return;
  }
  closed=true;
  try {
    InternalEngine currentEngine=this.currentEngine.getAndSet(null);
    if (currentEngine != null) {
      currentEngine.close();
    }
    mergeScheduler.removeFailureListener(mergeSchedulerFailureListener);
    mergeScheduler.removeListener(mergeSchedulerListener);
    indexSettingsService.removeListener(settingsListener);
  }
  finally {
    store.decRef();
  }
}
