{
  int requiredAllocation=1;
  try {
    if ("quorum".equals(setting)) {
      if (nodeCount > 2) {
        requiredAllocation=(nodeCount / 2) + 1;
      }
    }
 else     if ("quorum-1".equals(setting) || "half".equals(setting)) {
      if (nodeCount > 2) {
        requiredAllocation=((1 + nodeCount) / 2);
      }
    }
 else     if ("one".equals(setting)) {
      requiredAllocation=1;
    }
 else     if ("full".equals(setting) || "all".equals(setting)) {
      requiredAllocation=nodeCount;
    }
 else     if ("full-1".equals(setting) || "all-1".equals(setting)) {
      if (nodeCount > 1) {
        requiredAllocation=nodeCount - 1;
      }
    }
 else {
      requiredAllocation=Integer.parseInt(setting);
    }
  }
 catch (  Exception e) {
    logger.warn("failed to derived initial_meta from value {}",setting);
  }
  return requiredAllocation;
}
