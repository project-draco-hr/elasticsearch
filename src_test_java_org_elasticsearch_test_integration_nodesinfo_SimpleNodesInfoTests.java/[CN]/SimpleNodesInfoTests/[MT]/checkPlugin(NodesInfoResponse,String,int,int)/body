{
  assertThat(response.getNodesMap().get(nodeId),notNullValue());
  PluginsInfo plugins=response.getNodesMap().get(nodeId).getPlugins();
  assertThat(plugins,notNullValue());
  int num_site_plugins=0;
  int num_jvm_plugins=0;
  for (  PluginInfo pluginInfo : plugins.getInfos()) {
    assertThat(pluginInfo.isJvm() || pluginInfo.isSite(),is(true));
    if (pluginInfo.isSite() && !pluginInfo.isJvm()) {
      assertThat(pluginInfo.getName(),isOneOf(Fields.SITE_PLUGIN,TestNoVersionPlugin.Fields.NAME));
      assertThat(pluginInfo.getDescription(),isOneOf(Fields.SITE_PLUGIN_DESCRIPTION,Fields.SITE_PLUGIN_NO_DESCRIPTION,Fields.JVM_PLUGIN_NO_DESCRIPTION));
      assertThat(pluginInfo.getUrl(),notNullValue());
      num_site_plugins++;
    }
    if (pluginInfo.isJvm() && !pluginInfo.isSite()) {
      assertThat(pluginInfo.getName(),isOneOf(TestPlugin.Fields.NAME,TestNoVersionPlugin.Fields.NAME));
      assertThat(pluginInfo.getDescription(),isOneOf(TestPlugin.Fields.DESCRIPTION,TestNoVersionPlugin.Fields.DESCRIPTION));
      assertThat(pluginInfo.getUrl(),nullValue());
      num_jvm_plugins++;
    }
    if (pluginInfo.isJvm() && pluginInfo.isSite()) {
      assertThat(pluginInfo.getName(),is(TestNoVersionPlugin.Fields.NAME));
      assertThat(pluginInfo.getDescription(),is(TestNoVersionPlugin.Fields.DESCRIPTION));
      assertThat(pluginInfo.getUrl(),notNullValue());
      num_jvm_plugins++;
    }
  }
  assertThat(num_site_plugins,is(expectedSitePlugins));
  assertThat(num_jvm_plugins,is(expectedJvmPlugins));
}
