{
  out.writeString(fieldName);
  boolean hasShapeBytes=shapeBytes != null;
  out.writeBoolean(hasShapeBytes);
  if (hasShapeBytes) {
    out.writeBytesReference(shapeBytes);
  }
 else {
    out.writeOptionalString(indexedShapeId);
    out.writeOptionalString(indexedShapeType);
    out.writeOptionalString(indexedShapeIndex);
    out.writeOptionalString(indexedShapePath);
  }
  relation.writeTo(out);
  if (strategy == null) {
    out.writeBoolean(false);
  }
 else {
    out.writeBoolean(true);
    strategy.writeTo(out);
  }
}
