{
  builder.startObject(NAME);
  builder.startObject(fieldName);
  if (strategy != null) {
    builder.field(GeoShapeQueryParser.STRATEGY_FIELD.getPreferredName(),strategy.getStrategyName());
  }
  if (shapeBytes != null) {
    builder.field(GeoShapeQueryParser.SHAPE_FIELD.getPreferredName());
    XContentParser parser=XContentFactory.xContent(XContentType.JSON).createParser(shapeBytes);
    parser.nextToken();
    builder.copyCurrentStructure(parser);
  }
 else {
    builder.startObject(GeoShapeQueryParser.INDEXED_SHAPE_FIELD.getPreferredName()).field(GeoShapeQueryParser.SHAPE_ID_FIELD.getPreferredName(),indexedShapeId).field(GeoShapeQueryParser.SHAPE_TYPE_FIELD.getPreferredName(),indexedShapeType);
    if (indexedShapeIndex != null) {
      builder.field(GeoShapeQueryParser.SHAPE_INDEX_FIELD.getPreferredName(),indexedShapeIndex);
    }
    if (indexedShapePath != null) {
      builder.field(GeoShapeQueryParser.SHAPE_PATH_FIELD.getPreferredName(),indexedShapePath);
    }
    builder.endObject();
  }
  if (relation != null) {
    builder.field(GeoShapeQueryParser.RELATION_FIELD.getPreferredName(),relation.getRelationName());
  }
  builder.endObject();
  printBoostAndQueryName(builder);
  builder.endObject();
}
