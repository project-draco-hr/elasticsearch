{
  boolean hasValue=!(Double.isInfinite(value) || Double.isNaN(value));
  builder.field(CommonFields.VALUE,hasValue ? value : null);
  if (hasValue && !(valueFormatter instanceof ValueFormatter.Raw)) {
    builder.field(CommonFields.VALUE_AS_STRING,valueFormatter.format(value));
  }
  return builder;
}
