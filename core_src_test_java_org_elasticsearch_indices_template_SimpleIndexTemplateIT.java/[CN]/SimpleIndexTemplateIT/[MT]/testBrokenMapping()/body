{
  client().admin().indices().prepareDeleteTemplate("*").get();
  GetIndexTemplatesResponse response=client().admin().indices().prepareGetTemplates().get();
  assertThat(response.getIndexTemplates(),empty());
  client().admin().indices().preparePutTemplate("template_1").setTemplate("te*").addMapping("type1","abcde").get();
  response=client().admin().indices().prepareGetTemplates().get();
  assertThat(response.getIndexTemplates(),hasSize(1));
  assertThat(response.getIndexTemplates().get(0).getMappings().size(),equalTo(1));
  assertThat(response.getIndexTemplates().get(0).getMappings().get("type1").string(),equalTo("abcde"));
  try {
    createIndex("test");
    fail("create index should have failed due to broken index templates mapping");
  }
 catch (  ElasticsearchParseException e) {
  }
}
