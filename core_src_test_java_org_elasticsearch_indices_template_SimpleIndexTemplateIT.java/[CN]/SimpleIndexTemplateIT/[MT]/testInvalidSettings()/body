{
  client().admin().indices().prepareDeleteTemplate("*").get();
  GetIndexTemplatesResponse response=client().admin().indices().prepareGetTemplates().get();
  assertThat(response.getIndexTemplates(),empty());
  try {
    client().admin().indices().preparePutTemplate("template_1").setTemplate("te*").setSettings(Settings.builder().put("does_not_exist","test")).get();
    fail();
  }
 catch (  IllegalArgumentException ex) {
    assertEquals("unknown setting [does_not_exist]",ex.getMessage());
  }
  response=client().admin().indices().prepareGetTemplates().get();
  assertThat(response.getIndexTemplates(),hasSize(1));
  assertThat(response.getIndexTemplates().get(0).getSettings().getAsMap().size(),equalTo(1));
  assertNull(response.getIndexTemplates().get(0).getSettings().get("index.does_not_exist"));
  createIndex("test");
  GetSettingsResponse getSettingsResponse=client().admin().indices().prepareGetSettings("test").get();
  assertNull(getSettingsResponse.getIndexToSettings().get("test").getAsMap().get("index.does_not_exist"));
}
