{
  boolean hasValue=!Double.isInfinite(max);
  builder.field(CommonFields.VALUE,hasValue ? max : null);
  if (hasValue && !(valueFormatter instanceof ValueFormatter.Raw)) {
    builder.field(CommonFields.VALUE_AS_STRING,valueFormatter.format(max));
  }
  return builder;
}
