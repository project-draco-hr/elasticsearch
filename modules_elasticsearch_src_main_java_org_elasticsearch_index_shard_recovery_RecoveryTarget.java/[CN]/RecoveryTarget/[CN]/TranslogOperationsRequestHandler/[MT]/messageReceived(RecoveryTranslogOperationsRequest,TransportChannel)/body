{
  InternalIndexShard shard=(InternalIndexShard)indicesService.indexServiceSafe(request.shardId().index().name()).shardSafe(request.shardId().id());
  for (  Translog.Operation operation : request.operations()) {
    shard.performRecoveryOperation(operation);
  }
  RecoveryStatus onGoingRecovery=onGoingRecoveries.get(shard.shardId());
  if (onGoingRecovery == null) {
    throw new IndexShardClosedException(shard.shardId());
  }
  onGoingRecovery.currentTranslogOperations+=request.operations().size();
  channel.sendResponse(VoidStreamable.INSTANCE);
}
