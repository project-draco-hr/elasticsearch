{
  createIndexMapped("test","type","test","string","num","double");
  ensureYellow();
  int numDocs=2;
  client().index(indexRequest("test").type("type1").source(jsonBuilder().startObject().field("test","value").field("num",1).endObject())).actionGet();
  refresh();
  DecayFunctionBuilder gfb3=new LinearDecayFunctionBuilder();
  gfb3.setParameters("num",Integer.toString(numDocs),Integer.toString(numDocs / 2));
  ActionFuture<SearchResponse> response=client().search(searchRequest().searchType(SearchType.QUERY_THEN_FETCH).source(searchSource().explain(true).size(numDocs).query(functionScoreQuery(termQuery("test","value")).add(new MatchAllFilterBuilder(),gfb3).scoreMode("multiply"))));
  response.actionGet();
}
