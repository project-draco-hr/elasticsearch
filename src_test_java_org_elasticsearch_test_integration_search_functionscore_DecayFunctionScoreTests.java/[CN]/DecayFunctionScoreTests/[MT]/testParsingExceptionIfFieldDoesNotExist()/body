{
  createIndexMapped("test","type","test","string","geo","geo_point");
  ensureYellow();
  int numDocs=2;
  client().index(indexRequest("test").type("type1").source(jsonBuilder().startObject().field("test","value").startObject("geo").field("lat",1).field("lon",2).endObject().endObject())).actionGet();
  refresh();
  DecayFunctionBuilder gfb2=new LinearDecayFunctionBuilder();
  gfb2.addGeoParams("type1.geo",110,100,"1000km");
  ActionFuture<SearchResponse> response=client().search(searchRequest().searchType(SearchType.QUERY_THEN_FETCH).source(searchSource().explain(true).size(numDocs).query(functionScoreQuery(termQuery("test","value")).add(new MatchAllFilterBuilder(),gfb2).scoreMode("multiply"))));
  SearchResponse sr=response.actionGet();
}
