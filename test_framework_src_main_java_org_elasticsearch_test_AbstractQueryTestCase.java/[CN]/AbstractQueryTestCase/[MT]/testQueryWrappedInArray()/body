{
  QB queryBuilder=createTestQueryBuilder();
  String validQuery=queryBuilder.toString();
  String queryName=queryBuilder.getName();
  int i=validQuery.indexOf("\"" + queryName + "\"");
  assertThat(i,greaterThan(0));
  int insertionPosition;
  for (insertionPosition=i; insertionPosition < validQuery.length(); insertionPosition++) {
    if (validQuery.charAt(insertionPosition) == ':') {
      break;
    }
  }
  insertionPosition++;
  int endArrayPosition;
  for (endArrayPosition=validQuery.length() - 1; endArrayPosition >= 0; endArrayPosition--) {
    if (validQuery.charAt(endArrayPosition) == '}') {
      break;
    }
  }
  String testQuery=validQuery.substring(0,insertionPosition) + "[" + validQuery.substring(insertionPosition,endArrayPosition)+ "]"+ validQuery.substring(endArrayPosition,validQuery.length());
  try {
    parseQuery(testQuery);
    fail("some parsing exception expected for query: " + testQuery);
  }
 catch (  ParsingException e) {
    assertEquals("[" + queryName + "] query malformed, no start_object after query name",e.getMessage());
  }
}
