{
  Path tmpDir=createTempDir();
  Path invalidSuffix=tmpDir.resolve(loggingConfiguration(randomFrom(LogConfigurator.ALLOWED_SUFFIXES)) + randomInvalidSuffix());
  Files.write(invalidSuffix,"yml: bar".getBytes(StandardCharsets.UTF_8));
  Environment environment=new Environment(Settings.builder().put(Environment.PATH_CONF_SETTING.getKey(),invalidSuffix.toAbsolutePath()).put(Environment.PATH_HOME_SETTING.getKey(),createTempDir().toString()).build());
  Settings.Builder builder=Settings.builder();
  LogConfigurator.resolveConfig(environment,builder);
  Settings logSettings=builder.build();
  assertThat(logSettings.get("yml"),nullValue());
}
