{
  Path tmpDir=createTempDir();
  Path loggingConf=tmpDir.resolve(loggingConfiguration("yaml"));
  Files.write(loggingConf,Arrays.asList("logger.test_config_not_read: INFO, console","appender.console.type: console"),StandardCharsets.UTF_8);
  Environment environment=InternalSettingsPreparer.prepareEnvironment(Settings.builder().put(Environment.PATH_CONF_SETTING.getKey(),tmpDir.toAbsolutePath()).put(Environment.PATH_HOME_SETTING.getKey(),createTempDir().toString()).build(),new CliToolTestCase.MockTerminal());
  LogConfigurator.configure(environment.settings(),false);
  ESLogger esLogger=Log4jESLoggerFactory.getLogger("test_config_not_read");
  assertNotNull(esLogger);
  Logger logger=((Log4jESLogger)esLogger).logger();
  Appender appender=logger.getAppender("console");
  assertNull(appender);
}
