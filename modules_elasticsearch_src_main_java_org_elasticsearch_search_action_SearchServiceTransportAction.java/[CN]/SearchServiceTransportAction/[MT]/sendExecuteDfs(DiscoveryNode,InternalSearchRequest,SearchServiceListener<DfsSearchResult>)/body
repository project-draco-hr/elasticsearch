{
  if (clusterService.state().nodes().localNodeId().equals(node.id())) {
    try {
      DfsSearchResult result=searchService.executeDfsPhase(request);
      listener.onResult(result);
    }
 catch (    Exception e) {
      listener.onFailure(e);
    }
  }
 else {
    transportService.sendRequest(node,SearchDfsTransportHandler.ACTION,request,new BaseTransportResponseHandler<DfsSearchResult>(){
      @Override public DfsSearchResult newInstance(){
        return new DfsSearchResult();
      }
      @Override public void handleResponse(      DfsSearchResult response){
        listener.onResult(response);
      }
      @Override public void handleException(      RemoteTransportException exp){
        listener.onFailure(exp);
      }
      @Override public boolean spawn(){
        return false;
      }
    }
);
  }
}
