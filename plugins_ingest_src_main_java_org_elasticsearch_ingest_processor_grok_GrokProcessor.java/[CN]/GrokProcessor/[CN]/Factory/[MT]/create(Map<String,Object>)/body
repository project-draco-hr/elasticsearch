{
  String matchField=ConfigurationUtils.readStringProperty(config,"field");
  String matchPattern=ConfigurationUtils.readStringProperty(config,"pattern");
  Map<String,String> patternBank=new HashMap<>();
  Path patternsDirectory=grokConfigDirectory.resolve("patterns");
  try (DirectoryStream<Path> stream=Files.newDirectoryStream(patternsDirectory)){
    for (    Path patternFilePath : stream) {
      if (Files.isRegularFile(patternFilePath)) {
        try (InputStream is=Files.newInputStream(patternFilePath,StandardOpenOption.READ)){
          PatternUtils.loadBankFromStream(patternBank,is);
        }
       }
    }
  }
   Grok grok=new Grok(patternBank,matchPattern);
  return new GrokProcessor(grok,matchField);
}
