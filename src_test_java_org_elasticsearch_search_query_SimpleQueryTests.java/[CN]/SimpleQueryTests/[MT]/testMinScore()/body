{
  createIndex("test");
  ensureGreen();
  client().prepareIndex("test","test","1").setSource("score",1.5).get();
  client().prepareIndex("test","test","2").setSource("score",1).get();
  client().prepareIndex("test","test","3").setSource("score",2).get();
  client().prepareIndex("test","test","4").setSource("score",0.5).get();
  refresh();
  SearchResponse searchResponse=client().prepareSearch("test").setQuery(functionScoreQuery(scriptFunction("_doc['score'].value"))).setMinScore(1.5f).get();
  assertHitCount(searchResponse,2);
  assertFirstHit(searchResponse,hasId("3"));
  assertSecondHit(searchResponse,hasId("1"));
}
