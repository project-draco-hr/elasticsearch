{
  assertAcked(prepareCreate("test").addMapping("type1","num_byte","type=byte","num_short","type=short","num_integer","type=integer","num_long","type=long","num_float","type=float","num_double","type=double"));
  ensureGreen();
  client().prepareIndex("test","type1","1").setSource("field1","test1","num_long",1).get();
  client().prepareIndex("test","type1","2").setSource("field1","test1","num_long",2).get();
  client().prepareIndex("test","type1","3").setSource("field1","test2","num_long",3).get();
  client().prepareIndex("test","type1","4").setSource("field1","test2","num_long",4).get();
  refresh();
  SearchResponse searchResponse=client().prepareSearch("test").setPostFilter(boolFilter().should(rangeFilter("num_long",1,2)).should(rangeFilter("num_long",3,4))).get();
  assertHitCount(searchResponse,4l);
  searchResponse=client().prepareSearch("test").setPostFilter(boolFilter().should(rangeFilter("num_long",1,2)).should(rangeFilter("num_long",3,4))).get();
  assertHitCount(searchResponse,4l);
  searchResponse=client().prepareSearch("test").setPostFilter(boolFilter().must(termFilter("field1","test1")).should(rangeFilter("num_long",1,2)).should(rangeFilter("num_long",3,4))).get();
  assertHitCount(searchResponse,2l);
}
