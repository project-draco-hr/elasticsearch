{
  if (request.recoveryType() == RecoveryState.Type.RELOCATION && shard.routingEntry().primary()) {
    ElasticsearchIllegalStateException exception=new ElasticsearchIllegalStateException("Can't relocate primary - failing");
    shard.failShard("primary_relocation",exception);
    throw exception;
  }
  logger.trace("{} recovery [phase2] to {}: skipping phase 1 for shared filesystem",request.shardId(),request.targetNode());
}
