{
  Map<String,Object> config=new HashMap<>();
  config.put("foo","fooScriptValue");
  config.put("bar_file","barScriptValue");
  config.put("lang","myLang");
  config.put("baz_id","bazScriptValue");
  Set<String> parameters=new HashSet<>();
  parameters.add("foo");
  parameters.add("bar");
  parameters.add("baz");
  ScriptParameterParser paramParser=new ScriptParameterParser(parameters);
  assertThat(paramParser.getScriptParameterValue("foo"),nullValue());
  assertThat(paramParser.getScriptParameterValue("bar"),nullValue());
  assertThat(paramParser.getScriptParameterValue("baz"),nullValue());
  assertThat(paramParser.getScriptParameterValue("bar_file"),nullValue());
  assertThat(paramParser.getScriptParameterValue("baz_id"),nullValue());
  assertThat(paramParser.lang(),nullValue());
  paramParser.parseConfig(config,false);
  assertParameterValue(paramParser,"foo","fooScriptValue",ScriptType.INLINE);
  assertParameterValue(paramParser,"bar","barScriptValue",ScriptType.FILE);
  assertParameterValue(paramParser,"baz","bazScriptValue",ScriptType.INDEXED);
  assertThat(paramParser.getScriptParameterValue("bar_file"),nullValue());
  assertThat(paramParser.getScriptParameterValue("baz_id"),nullValue());
  assertThat(paramParser.lang(),equalTo("myLang"));
  assertThat(config.size(),equalTo(4));
  assertThat((String)config.get("foo"),equalTo("fooScriptValue"));
  assertThat((String)config.get("bar_file"),equalTo("barScriptValue"));
  assertThat((String)config.get("baz_id"),equalTo("bazScriptValue"));
  assertThat((String)config.get("lang"),equalTo("myLang"));
}
