{
  long gcDeletesInMillis=indexSettings.getAsTime("index.gc_deletes",TimeValue.timeValueMillis(RobinEngine.this.gcDeletesInMillis)).millis();
  if (gcDeletesInMillis != RobinEngine.this.gcDeletesInMillis) {
    logger.info("updating index.gc_deletes from [{}] to [{}]",TimeValue.timeValueMillis(RobinEngine.this.gcDeletesInMillis),TimeValue.timeValueMillis(gcDeletesInMillis));
    RobinEngine.this.gcDeletesInMillis=gcDeletesInMillis;
  }
  int termIndexInterval=settings.getAsInt("index.term_index_interval",RobinEngine.this.termIndexInterval);
  int termIndexDivisor=settings.getAsInt("index.term_index_divisor",RobinEngine.this.termIndexDivisor);
  int indexConcurrency=settings.getAsInt("index.index_concurrency",RobinEngine.this.indexConcurrency);
  String codecName=settings.get("index.codec",RobinEngine.this.codecName);
  boolean requiresFlushing=false;
  if (termIndexInterval != RobinEngine.this.termIndexInterval || termIndexDivisor != RobinEngine.this.termIndexDivisor) {
    rwl.readLock().lock();
    try {
      if (termIndexInterval != RobinEngine.this.termIndexInterval) {
        logger.info("updating index.term_index_interval from [{}] to [{}]",RobinEngine.this.termIndexInterval,termIndexInterval);
        RobinEngine.this.termIndexInterval=termIndexInterval;
        indexWriter.getConfig().setTermIndexInterval(termIndexInterval);
      }
      if (termIndexDivisor != RobinEngine.this.termIndexDivisor) {
        logger.info("updating index.term_index_divisor from [{}] to [{}]",RobinEngine.this.termIndexDivisor,termIndexDivisor);
        RobinEngine.this.termIndexDivisor=termIndexDivisor;
        indexWriter.getConfig().setReaderTermsIndexDivisor(termIndexDivisor);
        requiresFlushing=true;
      }
      if (indexConcurrency != RobinEngine.this.indexConcurrency) {
        logger.info("updating index.index_concurrency from [{}] to [{}]",RobinEngine.this.indexConcurrency,indexConcurrency);
        RobinEngine.this.indexConcurrency=indexConcurrency;
        requiresFlushing=true;
      }
      if (!codecName.equals(RobinEngine.this.codecName)) {
        logger.info("updating index.codec from [{}] to [{}]",RobinEngine.this.codecName,codecName);
        RobinEngine.this.codecName=codecName;
        requiresFlushing=true;
      }
    }
  finally {
      rwl.readLock().unlock();
    }
    if (requiresFlushing) {
      flush(new Flush().type(Flush.Type.NEW_WRITER));
    }
  }
}
