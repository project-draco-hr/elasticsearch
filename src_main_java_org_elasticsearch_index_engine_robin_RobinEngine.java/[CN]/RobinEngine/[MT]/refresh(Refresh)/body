{
  if (indexWriter == null) {
    throw new EngineClosedException(shardId);
  }
  rwl.readLock().lock();
  try {
    IndexWriter currentWriter=indexWriter;
    if (currentWriter == null) {
      throw new EngineClosedException(shardId,failedEngine);
    }
    try {
synchronized (refreshMutex) {
        if (dirty || refresh.force()) {
          dirty=false;
          searcherManager.maybeRefresh();
        }
      }
    }
 catch (    AlreadyClosedException e) {
    }
catch (    OutOfMemoryError e) {
      failEngine(e);
      throw new RefreshFailedEngineException(shardId,e);
    }
catch (    IllegalStateException e) {
      if (e.getMessage().contains("OutOfMemoryError")) {
        failEngine(e);
      }
      throw new RefreshFailedEngineException(shardId,e);
    }
catch (    Exception e) {
      if (indexWriter == null) {
        throw new EngineClosedException(shardId,failedEngine);
      }
 else       if (currentWriter != indexWriter) {
      }
 else {
        throw new RefreshFailedEngineException(shardId,e);
      }
    }
  }
  finally {
    rwl.readLock().unlock();
  }
}
