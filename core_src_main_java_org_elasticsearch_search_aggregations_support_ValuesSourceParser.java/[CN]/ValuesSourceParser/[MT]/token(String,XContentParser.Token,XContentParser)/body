{
  if ("missing".equals(currentFieldName) && token.isValue()) {
    input.missing=parser.objectText();
    return true;
  }
  if (token == XContentParser.Token.VALUE_STRING) {
    if ("field".equals(currentFieldName)) {
      input.field=parser.text();
    }
 else     if (formattable && "format".equals(currentFieldName)) {
      input.format=parser.text();
    }
 else     if (scriptable) {
      if ("value_type".equals(currentFieldName) || "valueType".equals(currentFieldName)) {
        input.valueType=ValueType.resolveForScript(parser.text());
        if (targetValueType != null && input.valueType.isNotA(targetValueType)) {
          throw new SearchParseException(context,aggType.name() + " aggregation [" + aggName+ "] was configured with an incompatible value type ["+ input.valueType+ "]. ["+ aggType+ "] aggregation can only work on value of type ["+ targetValueType+ "]",parser.getTokenLocation());
        }
      }
 else       if (!scriptParameterParser.token(currentFieldName,token,parser)) {
        return false;
      }
      return true;
    }
 else {
      return false;
    }
    return true;
  }
  if (scriptable && token == XContentParser.Token.START_OBJECT) {
    if (ScriptField.SCRIPT.match(currentFieldName)) {
      input.script=Script.parse(parser);
      return true;
    }
 else     if ("params".equals(currentFieldName)) {
      input.params=parser.map();
      return true;
    }
    return false;
  }
  return false;
}
