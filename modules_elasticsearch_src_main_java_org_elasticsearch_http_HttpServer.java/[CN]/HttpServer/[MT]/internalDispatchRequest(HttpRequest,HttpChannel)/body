{
  final HttpServerHandler httpHandler=getHandler(request);
  if (httpHandler != null) {
    if (httpHandler.spawn()) {
      threadPool.execute(new Runnable(){
        @Override public void run(){
          try {
            httpHandler.handleRequest(request,channel);
          }
 catch (          Exception e) {
            try {
              channel.sendResponse(new JsonThrowableHttpResponse(request,e));
            }
 catch (            IOException e1) {
              logger.error("Failed to send failure response for uri [" + request.uri() + "]",e1);
            }
          }
        }
      }
);
    }
 else {
      try {
        httpHandler.handleRequest(request,channel);
      }
 catch (      Exception e) {
        try {
          channel.sendResponse(new JsonThrowableHttpResponse(request,e));
        }
 catch (        IOException e1) {
          logger.error("Failed to send failure response for uri [" + request.uri() + "]",e1);
        }
      }
    }
  }
 else {
    channel.sendResponse(new StringHttpResponse(BAD_REQUEST,"No handler found for uri [" + request.uri() + "] and method ["+ request.method()+ "]"));
  }
}
