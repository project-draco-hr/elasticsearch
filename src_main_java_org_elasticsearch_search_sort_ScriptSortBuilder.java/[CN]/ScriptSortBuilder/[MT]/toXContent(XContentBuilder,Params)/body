{
  builder.startObject("_script");
  builder.field("script",script);
  builder.field("type",type);
  if (order == SortOrder.DESC) {
    builder.field("reverse",true);
  }
  if (lang != null) {
    builder.field("lang",lang);
  }
  if (this.params != null) {
    builder.field("params",this.params);
  }
  if (sortMode != null) {
    builder.field("mode",sortMode);
  }
  if (nestedPath != null) {
    builder.field("nested_path",nestedPath);
  }
  if (nestedFilter != null) {
    builder.field("nested_filter",nestedFilter,params);
  }
  builder.endObject();
  return builder;
}
