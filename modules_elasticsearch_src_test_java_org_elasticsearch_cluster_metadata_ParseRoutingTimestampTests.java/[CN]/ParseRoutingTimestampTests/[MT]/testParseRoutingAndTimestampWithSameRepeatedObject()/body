{
  MappingMetaData md=new MappingMetaData("type1",new CompressedString(""),new MappingMetaData.Routing(true,"obj1.routing"),new MappingMetaData.Timestamp(true,"obj1.timestamp","dateOptionalTime"));
  byte[] bytes=jsonBuilder().startObject().field("field1","value1").field("field2","value2").startObject("obj0").field("field1","value1").field("field2","value2").endObject().startObject("obj1").field("routing","routing_value").endObject().startObject("obj1").field("timestamp","1").endObject().endObject().copiedBytes();
  Tuple<String,String> parsed=md.parseRoutingAndTimestamp(XContentFactory.xContent(bytes).createParser(bytes),true,true);
  assertThat(parsed.v1(),equalTo("routing_value"));
  assertThat(parsed.v2(),equalTo("1"));
}
