{
  byte[] html=copyToBytesFromClasspath("/org/elasticsearch/index/mapper/xcontent/" + filename);
  XContentBuilder xcb=jsonBuilder().startObject().field("_id",1).startObject("file").field("_name",filename).field("content",html);
  if (forcedLanguage.length > 0) {
    xcb.field("language",forcedLanguage[0]);
  }
  xcb.endObject().endObject();
  ParseContext.Document doc=docMapper.parse(xcb.bytes()).rootDoc();
  assertThat(doc.get(docMapper.mappers().smartName("file.language").mapper().names().indexName()),equalTo(expected));
}
