{
  XContentBuilder expected=newXContentBuilder().startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject();
  assertXContentBuilder(expected,newXContentBuilder("t*").startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject());
  assertXContentBuilder(expected,newXContentBuilder("tags").startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject());
  assertXContentBuilder(newXContentBuilder().startObject().endObject(),newXContentBuilder("foo").startObject().startArray("tags").value("lorem").value("ipsum").value("dolor").endArray().endObject());
  expected=newXContentBuilder().startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject();
  assertXContentBuilder(expected,newXContentBuilder("t*").startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  assertXContentBuilder(expected,newXContentBuilder("tags").startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  assertXContentBuilder(newXContentBuilder().startObject().endObject(),newXContentBuilder("foo").startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
  expected=newXContentBuilder().startObject().startArray("tags").startObject().field("firstname","ipsum").endObject().endArray().endObject();
  assertXContentBuilder(expected,newXContentBuilder("t*.firstname").startObject().startArray("tags").startObject().field("lastname","lorem").endObject().startObject().field("firstname","ipsum").endObject().endArray().endObject());
}
