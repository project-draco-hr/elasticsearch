{
  if (lhs != null) {
    Class<?> c=lhs.getClass();
    if (c == returnValue.getClass()) {
      return returnValue;
    }
    if (c == Integer.class) {
      return getNumber(returnValue).intValue();
    }
 else     if (c == Long.class) {
      return getNumber(returnValue).longValue();
    }
 else     if (c == Double.class) {
      return getNumber(returnValue).doubleValue();
    }
 else     if (c == Float.class) {
      return getNumber(returnValue).floatValue();
    }
 else     if (c == Short.class) {
      return getNumber(returnValue).shortValue();
    }
 else     if (c == Byte.class) {
      return getNumber(returnValue).byteValue();
    }
 else     if (c == Character.class) {
      return (char)getNumber(returnValue).intValue();
    }
    return lhs.getClass().cast(returnValue);
  }
 else {
    return returnValue;
  }
}
