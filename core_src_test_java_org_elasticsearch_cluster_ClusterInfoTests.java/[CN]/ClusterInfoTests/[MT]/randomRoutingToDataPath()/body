{
  int numEntries=randomIntBetween(0,128);
  ImmutableOpenMap.Builder<ShardRouting,String> builder=ImmutableOpenMap.builder(numEntries);
  for (int i=0; i < numEntries; i++) {
    RestoreSource restoreSource=new RestoreSource(new Snapshot(randomAsciiOfLength(4),new SnapshotId(randomAsciiOfLength(4),randomAsciiOfLength(4))),Version.CURRENT,randomAsciiOfLength(4));
    UnassignedInfo.Reason reason=randomFrom(UnassignedInfo.Reason.values());
    UnassignedInfo unassignedInfo=new UnassignedInfo(reason,randomAsciiOfLength(4));
    ShardId shardId=new ShardId(randomAsciiOfLength(32),randomAsciiOfLength(32),randomIntBetween(0,Integer.MAX_VALUE));
    ShardRouting shardRouting=ShardRouting.newUnassigned(shardId,restoreSource,randomBoolean(),unassignedInfo);
    builder.put(shardRouting,randomAsciiOfLength(32));
  }
  return builder.build();
}
