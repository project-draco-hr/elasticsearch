{
  TransportAddress addr=((InternalNode)node).injector().getInstance(TransportService.class).boundAddress().publishAddress();
  TransportClient client=new TransportClient(settingsBuilder().put("client.transport.nodes_sampler_interval","1s").put("name",TRANSPORT_CLIENT_PREFIX + node.settings().get("name")).put("plugins." + PluginsService.LOAD_PLUGIN_FROM_CLASSPATH,false).put(ClusterName.SETTING,clusterName).put("client.transport.sniff",sniff).build());
  client.addTransportAddress(addr);
  return client;
}
