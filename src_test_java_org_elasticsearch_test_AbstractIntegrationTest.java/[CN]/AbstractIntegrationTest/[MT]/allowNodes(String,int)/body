{
  cluster().ensureAtLeastNumNodes(numNodes);
  ImmutableSettings.Builder builder=ImmutableSettings.builder();
  if (numNodes > 0) {
    getExcludeSettings(index,numNodes,builder);
  }
  Settings build=builder.build();
  if (!build.getAsMap().isEmpty()) {
    client().admin().indices().prepareUpdateSettings(index).setSettings(build).execute().actionGet();
  }
}
