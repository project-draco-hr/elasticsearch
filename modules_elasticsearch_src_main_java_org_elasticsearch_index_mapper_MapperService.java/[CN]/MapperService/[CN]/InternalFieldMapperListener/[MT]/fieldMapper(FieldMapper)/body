{
synchronized (mutex) {
    if (fieldMapper instanceof IdFieldMapper) {
      idFieldMappers=idFieldMappers.concat(fieldMapper);
    }
    if (fieldMapper instanceof TypeFieldMapper) {
      typeFieldMappers=typeFieldMappers.concat(fieldMapper);
    }
    if (fieldMapper instanceof SourceFieldMapper) {
      sourceFieldMappers=sourceFieldMappers.concat(fieldMapper);
    }
    if (fieldMapper instanceof UidFieldMapper) {
      uidFieldMappers=uidFieldMappers.concat(fieldMapper);
    }
    FieldMappers mappers=nameFieldMappers.get(fieldMapper.name());
    if (mappers == null) {
      mappers=new FieldMappers(fieldMapper);
    }
 else {
      mappers=mappers.concat(fieldMapper);
    }
    nameFieldMappers=newMapBuilder(nameFieldMappers).put(fieldMapper.name(),mappers).immutableMap();
    mappers=indexNameFieldMappers.get(fieldMapper.indexName());
    if (mappers == null) {
      mappers=new FieldMappers(fieldMapper);
    }
 else {
      mappers=mappers.concat(fieldMapper);
    }
    indexNameFieldMappers=newMapBuilder(indexNameFieldMappers).put(fieldMapper.indexName(),mappers).immutableMap();
    mappers=fullNameFieldMappers.get(fieldMapper.indexName());
    if (mappers == null) {
      mappers=new FieldMappers(fieldMapper);
    }
 else {
      mappers=mappers.concat(fieldMapper);
    }
    fullNameFieldMappers=newMapBuilder(fullNameFieldMappers).put(fieldMapper.fullName(),mappers).immutableMap();
  }
}
