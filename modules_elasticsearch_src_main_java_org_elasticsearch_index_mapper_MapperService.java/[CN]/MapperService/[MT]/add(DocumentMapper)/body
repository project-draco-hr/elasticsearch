{
synchronized (mutex) {
    if (mapper.type().charAt(0) == '_') {
      throw new InvalidTypeNameException("Document mapping type name can't start with '_'");
    }
    remove(mapper.type());
    mappers=newMapBuilder(mappers).put(mapper.type(),mapper).immutableMap();
    mapper.addFieldMapperListener(fieldMapperListener,true);
  }
}
