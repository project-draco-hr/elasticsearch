{
  super.readFrom(in);
  replicationType=ReplicationType.fromId(in.readByte());
  consistencyLevel=WriteConsistencyLevel.fromId(in.readByte());
  type=in.readSharedString();
  id=in.readString();
  routing=in.readOptionalString();
  script=in.readOptionalString();
  scriptLang=in.readOptionalString();
  scriptParams=in.readMap();
  retryOnConflict=in.readVInt();
  refresh=in.readBoolean();
  if (in.readBoolean()) {
    doc=new IndexRequest();
    doc.readFrom(in);
  }
  int size=in.readInt();
  if (size >= 0) {
    fields=new String[size];
    for (int i=0; i < size; i++) {
      fields[i]=in.readString();
    }
  }
  if (in.readBoolean()) {
    upsertRequest=new IndexRequest();
    upsertRequest.readFrom(in);
  }
  if (in.getVersion().onOrAfter(Version.V_0_90_2)) {
    docAsUpsert=in.readBoolean();
  }
  version=in.readLong();
  versionType=VersionType.fromValue(in.readByte());
}
