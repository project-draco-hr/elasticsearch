{
  super.readFrom(in);
  consistencyLevel=WriteConsistencyLevel.fromId(in.readByte());
  type=in.readString();
  id=in.readString();
  routing=in.readOptionalString();
  script=in.readOptionalString();
  if (Strings.hasLength(script)) {
    scriptType=ScriptService.ScriptType.readFrom(in);
  }
  scriptLang=in.readOptionalString();
  scriptParams=in.readMap();
  retryOnConflict=in.readVInt();
  refresh=in.readBoolean();
  if (in.readBoolean()) {
    doc=new IndexRequest();
    doc.readFrom(in);
  }
  int size=in.readInt();
  if (size >= 0) {
    fields=new String[size];
    for (int i=0; i < size; i++) {
      fields[i]=in.readString();
    }
  }
  if (in.readBoolean()) {
    upsertRequest=new IndexRequest();
    upsertRequest.readFrom(in);
  }
  docAsUpsert=in.readBoolean();
  version=in.readLong();
  versionType=VersionType.fromValue(in.readByte());
  detectNoop=in.readBoolean();
  scriptedUpsert=in.readBoolean();
}
