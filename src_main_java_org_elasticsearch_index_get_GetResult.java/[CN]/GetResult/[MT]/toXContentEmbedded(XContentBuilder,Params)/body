{
  builder.field(Fields.EXISTS,exists);
  if (source != null) {
    RestXContentBuilder.restDocumentSource(source,builder,params);
  }
  if (fields != null && !fields.isEmpty()) {
    builder.startObject(Fields.FIELDS);
    for (    GetField field : fields.values()) {
      if (field.getValues().isEmpty()) {
        continue;
      }
      if (field.getValues().size() == 1) {
        builder.field(field.getName(),field.getValues().get(0));
      }
 else {
        builder.field(field.getName());
        builder.startArray();
        for (        Object value : field.getValues()) {
          builder.value(value);
        }
        builder.endArray();
      }
    }
    builder.endObject();
  }
  return builder;
}
