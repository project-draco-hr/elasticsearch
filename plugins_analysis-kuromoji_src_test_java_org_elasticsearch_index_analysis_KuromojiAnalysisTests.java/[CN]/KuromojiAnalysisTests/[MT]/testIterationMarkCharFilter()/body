{
  AnalysisService analysisService=createAnalysisService();
  CharFilterFactory charFilterFactory=analysisService.charFilter("kuromoji_im_only_kanji");
  assertNotNull(charFilterFactory);
  assertThat(charFilterFactory,instanceOf(KuromojiIterationMarkCharFilterFactory.class));
  String source="????????????????????????????????????????????????????????????";
  String expected="????????????????????????????????????????????????????????????";
  assertCharFilterEquals(charFilterFactory.create(new StringReader(source)),expected);
  charFilterFactory=analysisService.charFilter("kuromoji_im_only_kana");
  assertNotNull(charFilterFactory);
  assertThat(charFilterFactory,instanceOf(KuromojiIterationMarkCharFilterFactory.class));
  expected="????????????????????????????????????????????????????????????";
  assertCharFilterEquals(charFilterFactory.create(new StringReader(source)),expected);
  charFilterFactory=analysisService.charFilter("kuromoji_im_default");
  assertNotNull(charFilterFactory);
  assertThat(charFilterFactory,instanceOf(KuromojiIterationMarkCharFilterFactory.class));
  expected="????????????????????????????????????????????????????????????";
  assertCharFilterEquals(charFilterFactory.create(new StringReader(source)),expected);
}
