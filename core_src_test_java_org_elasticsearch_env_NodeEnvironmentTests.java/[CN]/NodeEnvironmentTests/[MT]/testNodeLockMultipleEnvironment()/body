{
  final NodeEnvironment first=newNodeEnvironment();
  String[] dataPaths=first.getSettings().getAsArray("path.data");
  NodeEnvironment second=new NodeEnvironment(first.getSettings(),new Environment(first.getSettings()));
  assertEquals(first.nodeDataPaths().length,dataPaths.length);
  assertEquals(second.nodeDataPaths().length,dataPaths.length);
  for (int i=0; i < dataPaths.length; i++) {
    assertEquals(first.nodeDataPaths()[i].getParent(),second.nodeDataPaths()[i].getParent());
  }
  IOUtils.close(first,second);
}
