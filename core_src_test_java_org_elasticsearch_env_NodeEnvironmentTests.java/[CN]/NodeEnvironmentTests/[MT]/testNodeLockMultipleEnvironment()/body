{
  final NodeEnvironment first=newNodeEnvironment();
  List<String> dataPaths=Environment.PATH_DATA_SETTING.get(first.getSettings());
  NodeEnvironment second=new NodeEnvironment(first.getSettings(),new Environment(first.getSettings()));
  assertEquals(first.nodeDataPaths().length,dataPaths.size());
  assertEquals(second.nodeDataPaths().length,dataPaths.size());
  for (int i=0; i < dataPaths.size(); i++) {
    assertEquals(first.nodeDataPaths()[i].getParent(),second.nodeDataPaths()[i].getParent());
  }
  IOUtils.close(first,second);
}
