{
  Settings settings=Settings.settingsBuilder().put("index.analysis.filter.my_stop.type","stop").put("index.analysis.filter.my_stop.enable_position_increments",false).put("index.analysis.filter.my_stop.version","4.3").put(Environment.PATH_HOME_SETTING.getKey(),createTempDir().toString()).build();
  AnalysisService analysisService=AnalysisTestsHelper.createAnalysisServiceFromSettings(settings);
  TokenFilterFactory tokenFilter=analysisService.tokenFilter("my_stop");
  assertThat(tokenFilter,instanceOf(StopTokenFilterFactory.class));
  Tokenizer tokenizer=new WhitespaceTokenizer();
  tokenizer.setReader(new StringReader("foo bar"));
  TokenStream create=tokenFilter.create(tokenizer);
  assertThat(create,instanceOf(Lucene43StopFilter.class));
}
