{
  this.index=index;
  this.type=rootObjectMapper.name();
  this.docMapperParser=docMapperParser;
  this.meta=meta;
  this.rootObjectMapper=rootObjectMapper;
  this.uidFieldMapper=uidFieldMapper;
  this.idFieldMapper=idFieldMapper;
  this.typeFieldMapper=typeFieldMapper;
  this.indexFieldMapper=indexFieldMapper;
  this.sourceFieldMapper=sourceFieldMapper;
  this.sizeFieldMapper=sizeFieldMapper;
  this.parentFieldMapper=parentFieldMapper;
  this.routingFieldMapper=routingFieldMapper;
  this.allFieldMapper=allFieldMapper;
  this.analyzerMapper=analyzerMapper;
  this.boostFieldMapper=boostFieldMapper;
  this.indexAnalyzer=indexAnalyzer;
  this.searchAnalyzer=searchAnalyzer;
  this.typeFilter=typeMapper().fieldFilter(type);
  rootObjectMapper.putMapper(idFieldMapper);
  if (boostFieldMapper != null) {
    rootObjectMapper.putMapper(boostFieldMapper);
  }
  if (parentFieldMapper != null) {
    rootObjectMapper.putMapper(parentFieldMapper);
    routingFieldMapper.markAsRequired();
  }
  rootObjectMapper.putMapper(routingFieldMapper);
  final List<FieldMapper> tempFieldMappers=newArrayList();
  if (indexFieldMapper.enabled()) {
    tempFieldMappers.add(indexFieldMapper);
  }
  tempFieldMappers.add(typeFieldMapper);
  tempFieldMappers.add(sourceFieldMapper);
  tempFieldMappers.add(sizeFieldMapper);
  tempFieldMappers.add(uidFieldMapper);
  tempFieldMappers.add(allFieldMapper);
  rootObjectMapper.traverse(new FieldMapperListener(){
    @Override public void fieldMapper(    FieldMapper fieldMapper){
      tempFieldMappers.add(fieldMapper);
    }
  }
);
  this.fieldMappers=new DocumentFieldMappers(this,tempFieldMappers);
  refreshSource();
}
