{
  try {
    XContentBuilder builder=RestXContentBuilder.restContentBuilder(request).prettyPrint();
    builder.startObject();
    builder.field("ok",true);
    if (settings.get("name") != null) {
      builder.field("name",settings.get("name"));
    }
    builder.startObject("version").field("number",Version.number()).field("date",Version.date()).field("snapshot_build",Version.snapshotBuild()).endObject();
    builder.field("tagline","You Know, for Search");
    builder.field("cover","DON'T PANIC");
    if (rootNode != null) {
      builder.startObject("quote");
      List arrayNode=(List)rootNode.get("quotes");
      Map<String,Object> quoteNode=(Map<String,Object>)arrayNode.get(ThreadLocalRandom.current().nextInt(quotesSize));
      builder.field("book",quoteNode.get("book").toString());
      builder.field("chapter",quoteNode.get("chapter").toString());
      List textNodes=(List)quoteNode.get("text");
      int index=0;
      for (      Object textNode : textNodes) {
        builder.field("text" + (++index),textNode.toString());
      }
      builder.endObject();
    }
    builder.endObject();
    channel.sendResponse(new XContentRestResponse(request,RestResponse.Status.OK,builder));
  }
 catch (  Exception e) {
    try {
      channel.sendResponse(new XContentThrowableRestResponse(request,e));
    }
 catch (    IOException e1) {
      logger.warn("Failed to send response",e);
    }
  }
}
