{
  IndexWarmersMetaData.Entry entry=new IndexWarmersMetaData.Entry("test1",new String[]{"typ1"},false,new BytesArray("{\"query\" : { \"match_all\" : {}}}"));
  assertAcked(prepareCreate("foobar").addCustom(new IndexWarmersMetaData(entry)));
  ensureYellow();
  verify(client().admin().indices().prepareDeleteWarmer().setIndices("foo").setNames("test1"),true);
  assertThat(client().admin().indices().prepareGetWarmers("foobar").setWarmers("test1").get().getWarmers().size(),equalTo(1));
  verify(client().admin().indices().prepareDeleteWarmer().setIndices("foobar").setNames("test1"),false);
  assertThat(client().admin().indices().prepareGetWarmers("foobar").setWarmers("test1").get().getWarmers().size(),equalTo(0));
}
