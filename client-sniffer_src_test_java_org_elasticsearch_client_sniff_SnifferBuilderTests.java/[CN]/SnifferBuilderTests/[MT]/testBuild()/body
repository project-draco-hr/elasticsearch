{
  int numNodes=RandomInts.randomIntBetween(random(),1,5);
  HttpHost[] hosts=new HttpHost[numNodes];
  for (int i=0; i < numNodes; i++) {
    hosts[i]=new HttpHost("localhost",9200 + i);
  }
  HostsSniffer hostsSniffer=new MockHostsSniffer();
  try (RestClient client=RestClient.builder(hosts).build()){
    try {
      Sniffer.builder(null,hostsSniffer).build();
      fail("should have failed");
    }
 catch (    NullPointerException e) {
      assertEquals("restClient cannot be null",e.getMessage());
    }
    try {
      Sniffer.builder(client,null).build();
      fail("should have failed");
    }
 catch (    NullPointerException e) {
      assertEquals("hostsSniffer cannot be null",e.getMessage());
    }
    try {
      Sniffer.builder(client,hostsSniffer).setSniffInterval(RandomInts.randomIntBetween(random(),Integer.MIN_VALUE,0));
      fail("should have failed");
    }
 catch (    IllegalArgumentException e) {
      assertEquals("sniffInterval must be greater than 0",e.getMessage());
    }
    try {
      Sniffer.builder(client,hostsSniffer).setSniffAfterFailureDelay(RandomInts.randomIntBetween(random(),Integer.MIN_VALUE,0));
      fail("should have failed");
    }
 catch (    IllegalArgumentException e) {
      assertEquals("sniffAfterFailureDelay must be greater than 0",e.getMessage());
    }
    try (Sniffer sniffer=Sniffer.builder(client,hostsSniffer).build()){
      assertNotNull(sniffer);
    }
     Sniffer.Builder builder=Sniffer.builder(client,hostsSniffer);
    if (random().nextBoolean()) {
      builder.setSniffInterval(RandomInts.randomIntBetween(random(),1,Integer.MAX_VALUE));
    }
    if (random().nextBoolean()) {
      builder.setSniffAfterFailureDelay(RandomInts.randomIntBetween(random(),1,Integer.MAX_VALUE));
    }
    if (random().nextBoolean()) {
      builder.setSniffOnFailure(random().nextBoolean());
    }
    try (Sniffer sniffer=builder.build()){
      assertNotNull(sniffer);
    }
   }
 }
