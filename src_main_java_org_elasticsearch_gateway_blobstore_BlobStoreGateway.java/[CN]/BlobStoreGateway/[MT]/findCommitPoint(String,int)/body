{
  BlobPath path=BlobStoreIndexGateway.shardPath(basePath,index,shardId);
  ImmutableBlobContainer container=blobStore.immutableBlobContainer(path);
  ImmutableMap<String,BlobMetaData> blobs=container.listBlobs();
  List<CommitPoint> commitPointsList=Lists.newArrayList();
  for (  BlobMetaData md : blobs.values()) {
    if (md.length() == 0) {
      continue;
    }
    if (md.name().startsWith("commit-")) {
      try {
        commitPointsList.add(CommitPoints.fromXContent(container.readBlobFully(md.name())));
      }
 catch (      Exception e) {
        logger.warn("failed to read commit point at path {} with name [{}]",e,path,md.name());
      }
    }
  }
  CommitPoints commitPoints=new CommitPoints(commitPointsList);
  if (commitPoints.commits().isEmpty()) {
    return null;
  }
  return commitPoints.commits().get(0);
}
