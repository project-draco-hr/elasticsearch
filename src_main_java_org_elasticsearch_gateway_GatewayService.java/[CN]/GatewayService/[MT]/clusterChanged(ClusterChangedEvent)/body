{
  if (lifecycle.stoppedOrClosed()) {
    return;
  }
  if (event.state().blocks().hasGlobalBlock(Discovery.NO_MASTER_BLOCK)) {
    recovered.set(false);
    scheduledRecovery.set(false);
  }
  if (event.localNodeMaster() && event.state().blocks().hasGlobalBlock(STATE_NOT_RECOVERED_BLOCK)) {
    checkStateMeetsSettingsAndMaybeRecover(event.state(),true);
  }
}
