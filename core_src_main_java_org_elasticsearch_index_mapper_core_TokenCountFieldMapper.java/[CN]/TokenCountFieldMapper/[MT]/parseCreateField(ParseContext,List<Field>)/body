{
  ValueAndBoost valueAndBoost=StringFieldMapper.parseCreateFieldForString(context,null,fieldType.boost());
  if (valueAndBoost.value() == null && nullValue() == null) {
    return;
  }
  if (fieldType.indexOptions() != NONE || fieldType.stored() || fieldType().hasDocValues()) {
    int count;
    if (valueAndBoost.value() == null) {
      count=nullValue();
    }
 else {
      count=countPositions(analyzer.analyzer().tokenStream(fieldType().names().shortName(),valueAndBoost.value()));
    }
    addIntegerFields(context,fields,count,valueAndBoost.boost());
  }
  if (fields.isEmpty()) {
    context.ignoredValue(fieldType.names().indexName(),valueAndBoost.value());
  }
}
