{
  if (name == null) {
    throw new ElasticsearchIllegalArgumentException("plugin name must be supplied with --remove [name].");
  }
  PluginHandle pluginHandle=PluginHandle.parse(name);
  boolean removed=false;
  if (Strings.isNullOrEmpty(pluginHandle.name)) {
    throw new ElasticsearchIllegalArgumentException("plugin name is incorrect");
  }
  File pluginToDelete=pluginHandle.extractedDir(environment);
  if (pluginToDelete.exists()) {
    debug("Removing: " + pluginToDelete.getPath());
    FileSystemUtils.deleteRecursively(pluginToDelete,true);
    removed=true;
  }
  pluginToDelete=pluginHandle.distroFile(environment);
  if (pluginToDelete.exists()) {
    debug("Removing: " + pluginToDelete.getPath());
    pluginToDelete.delete();
    removed=true;
  }
  File binLocation=pluginHandle.binDir(environment);
  if (binLocation.exists()) {
    debug("Removing: " + binLocation.getPath());
    FileSystemUtils.deleteRecursively(binLocation);
    removed=true;
  }
  if (removed) {
    log("Removed " + name);
  }
 else {
    log("Plugin " + name + " not found. Run plugin --list to get list of installed plugins.");
  }
}
