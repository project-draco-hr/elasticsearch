{
  Tuple<Settings,Environment> initialSettings=InternalSettingsPerparer.prepareSettings(EMPTY_SETTINGS,true);
  if (!initialSettings.v2().pluginsFile().exists()) {
    FileSystemUtils.mkdirs(initialSettings.v2().pluginsFile());
  }
  String url=null;
  boolean verbose=false;
  for (int i=0; i < args.length; i++) {
    String command=args[i];
    if ("-u".equals(command) || "--url".equals(command) || "url".equals(command)|| "-url".equals(command)) {
      try {
        url=args[i + 1];
      }
 catch (      Exception e) {
        displayHelp("Error while installing plugin, reason: " + e.getClass().getSimpleName() + ": "+ e.getMessage());
        System.exit(1);
      }
    }
 else     if ("-v".equals(command) || "--v".equals(command) || "verbose".equals(command)|| "-verbose".equals(command)) {
      verbose=true;
    }
  }
  PluginManager pluginManager=new PluginManager(initialSettings.v2(),url);
  if (args.length < 1) {
    displayHelp(null);
  }
  for (int c=0; c < args.length; c++) {
    String command=args[c];
    if (command.equals("-i") || command.equals("--install") || command.equals("install")|| command.equals("-install")) {
      String pluginName=null;
      try {
        pluginName=args[++c];
        System.out.println("-> Installing " + pluginName + "...");
        pluginManager.downloadAndExtract(pluginName,verbose);
      }
 catch (      IOException e) {
        System.out.println("Failed to install " + pluginName + ", reason: "+ e.getMessage());
      }
catch (      Exception e) {
        displayHelp("Error while installing plugin, reason: " + e.getClass().getSimpleName() + ": "+ e.getMessage());
        System.exit(1);
      }
    }
 else     if (command.equals("-r") || command.equals("--remove") || command.equals("remove")|| command.equals("-remove")) {
      String pluginName=null;
      try {
        pluginName=args[++c];
        System.out.println("-> Removing " + pluginName + " ");
        pluginManager.removePlugin(pluginName);
      }
 catch (      IOException e) {
        System.out.println("Failed to remove " + pluginName + ", reason: "+ e.getMessage());
      }
catch (      Exception e) {
        displayHelp("Error while removing plugin, reason: " + e.getClass().getSimpleName() + ": "+ e.getMessage());
      }
    }
 else     if (command.equals("-l") || command.equals("--list")) {
      pluginManager.listInstalledPlugins();
    }
 else     if (command.equals("-h") || command.equals("--help")) {
      displayHelp(null);
    }
 else {
      displayHelp("Command [" + args[c] + "] unknown.");
      System.exit(1);
    }
  }
}
