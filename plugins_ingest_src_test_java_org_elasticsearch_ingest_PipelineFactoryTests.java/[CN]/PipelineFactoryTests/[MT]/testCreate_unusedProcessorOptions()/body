{
  Pipeline.Factory factory=new Pipeline.Factory();
  Map<String,Processor.Factory> processorRegistry=new HashMap<>();
  processorRegistry.put("mutate",new MutateProcessor.Factory());
  Map<String,Object> processorConfig=new HashMap<>();
  processorConfig.put("uppercase",Arrays.asList("field1"));
  processorConfig.put("foo","bar");
  Map<String,Object> pipelineConfig=new HashMap<>();
  pipelineConfig.put("description","_description");
  pipelineConfig.put("processors",Collections.singletonList(Collections.singletonMap("mutate",processorConfig)));
  try {
    factory.create("_id",pipelineConfig,processorRegistry);
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),equalTo("processor [mutate] doesn't support one or more provided configuration parameters [[foo]]"));
  }
}
