{
  while (inPos < inEnd) {
    out[outPos++]=in[inPos++];
    literals++;
    if (literals == LZFChunk.MAX_LITERAL) {
      out[outPos - literals - 1]=(byte)(literals - 1);
      literals=0;
      outPos++;
    }
  }
  out[outPos - literals - 1]=(byte)(literals - 1);
  if (literals == 0) {
    outPos--;
  }
  return outPos;
}
