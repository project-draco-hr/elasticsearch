{
  super(index,indexSettings);
  Map<String,Settings> queryParserGroupSettings;
  if (indexSettings != null) {
    queryParserGroupSettings=indexSettings.getGroups(Defaults.PREFIX);
  }
 else {
    queryParserGroupSettings=newHashMap();
  }
  Map<String,IndexQueryParser> qparsers=newHashMap();
  if (indexQueryParsersFactories != null) {
    for (    Map.Entry<String,IndexQueryParserFactory> entry : indexQueryParsersFactories.entrySet()) {
      String qparserName=entry.getKey();
      Settings qparserSettings=queryParserGroupSettings.get(qparserName);
      if (qparserSettings == null) {
        qparserSettings=EMPTY_SETTINGS;
      }
      qparsers.put(qparserName,entry.getValue().create(qparserName,qparserSettings));
    }
  }
  if (!qparsers.containsKey(Defaults.DEFAULT)) {
    IndexQueryParser defaultQueryParser=new XContentIndexQueryParser(index,indexSettings,mapperService,indexCache,indexEngine,analysisService,similarityService,null,null,Defaults.DEFAULT,null);
    qparsers.put(Defaults.DEFAULT,defaultQueryParser);
  }
  indexQueryParsers=ImmutableMap.copyOf(qparsers);
  defaultIndexQueryParser=indexQueryParser(Defaults.DEFAULT);
}
