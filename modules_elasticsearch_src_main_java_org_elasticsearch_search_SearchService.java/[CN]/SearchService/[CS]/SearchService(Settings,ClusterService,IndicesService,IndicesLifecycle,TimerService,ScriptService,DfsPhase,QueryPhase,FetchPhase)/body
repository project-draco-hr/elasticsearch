{
  super(settings);
  this.clusterService=clusterService;
  this.indicesService=indicesService;
  this.timerService=timerService;
  this.scriptService=scriptService;
  this.dfsPhase=dfsPhase;
  this.queryPhase=queryPhase;
  this.fetchPhase=fetchPhase;
  this.defaultKeepAlive=componentSettings.getAsTime("default_keep_alive",timeValueMinutes(5));
  Map<String,SearchParseElement> elementParsers=new HashMap<String,SearchParseElement>();
  elementParsers.putAll(dfsPhase.parseElements());
  elementParsers.putAll(queryPhase.parseElements());
  elementParsers.putAll(fetchPhase.parseElements());
  this.elementParsers=ImmutableMap.copyOf(elementParsers);
  indicesLifecycle.addListener(indicesLifecycleListener);
}
