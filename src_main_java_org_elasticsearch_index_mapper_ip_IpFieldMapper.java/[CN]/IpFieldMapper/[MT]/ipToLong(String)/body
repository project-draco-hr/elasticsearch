{
  try {
    String[] octets=pattern.split(ip);
    if (octets.length != 4) {
      throw new ElasticsearchIllegalArgumentException("failed to parse ip [" + ip + "], not full ip address (4 dots)");
    }
    return (Long.parseLong(octets[0]) << 24) + (Integer.parseInt(octets[1]) << 16) + (Integer.parseInt(octets[2]) << 8)+ Integer.parseInt(octets[3]);
  }
 catch (  Exception e) {
    if (e instanceof ElasticsearchIllegalArgumentException) {
      throw (ElasticsearchIllegalArgumentException)e;
    }
    throw new ElasticsearchIllegalArgumentException("failed to parse ip [" + ip + "]",e);
  }
}
