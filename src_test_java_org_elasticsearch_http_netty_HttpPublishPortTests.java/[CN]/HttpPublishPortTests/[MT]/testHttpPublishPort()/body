{
  NodesInfoResponse response=client().admin().cluster().prepareNodesInfo().clear().setHttp(true).get();
  assertThat(response.getNodes(),arrayWithSize(greaterThanOrEqualTo(1)));
  NodeInfo nodeInfo=response.getNodes()[0];
  BoundTransportAddress address=nodeInfo.getHttp().address();
  assertThat(address.publishAddress(),instanceOf(InetSocketTransportAddress.class));
  InetSocketTransportAddress publishAddress=(InetSocketTransportAddress)address.publishAddress();
  assertThat(publishAddress.address().getPort(),is(9080));
}
