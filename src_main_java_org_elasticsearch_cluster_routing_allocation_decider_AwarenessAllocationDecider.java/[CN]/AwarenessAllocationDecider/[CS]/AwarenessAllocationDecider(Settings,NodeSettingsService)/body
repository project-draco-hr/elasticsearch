{
  super(settings);
  this.awarenessAttributes=settings.getAsArray(CLUSTER_ROUTING_ALLOCATION_AWARENESS_ATTRIBUTES);
  forcedAwarenessAttributes=Maps.newHashMap();
  Map<String,Settings> forceGroups=settings.getGroups(CLUSTER_ROUTING_ALLOCATION_AWARENESS_FORCE_GROUP);
  for (  Map.Entry<String,Settings> entry : forceGroups.entrySet()) {
    String[] aValues=entry.getValue().getAsArray("values");
    if (aValues.length > 0) {
      forcedAwarenessAttributes.put(entry.getKey(),aValues);
    }
  }
  nodeSettingsService.addListener(new ApplySettings());
}
