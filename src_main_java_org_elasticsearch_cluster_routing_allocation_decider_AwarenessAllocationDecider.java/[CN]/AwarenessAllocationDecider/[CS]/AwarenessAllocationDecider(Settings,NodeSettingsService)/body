{
  super(settings);
  this.awarenessAttributes=settings.getAsArray("cluster.routing.allocation.awareness.attributes");
  forcedAwarenessAttributes=Maps.newHashMap();
  Map<String,Settings> forceGroups=settings.getGroups("cluster.routing.allocation.awareness.force.");
  for (  Map.Entry<String,Settings> entry : forceGroups.entrySet()) {
    String[] aValues=entry.getValue().getAsArray("values");
    if (aValues.length > 0) {
      forcedAwarenessAttributes.put(entry.getKey(),aValues);
    }
  }
  nodeSettingsService.addListener(new ApplySettings());
}
