{
  Settings settings=ImmutableSettings.builder().put(TransportModule.TRANSPORT_TYPE_KEY,NettyTransport.class).put(DiscoveryModule.DISCOVERY_TYPE_KEY,ZenDiscoveryModule.class).put("node.mode","network").put("gateway.type","local").put("discovery.type","zen").put(TransportModule.TRANSPORT_SERVICE_TYPE_KEY,TransportService.class.getName()).build();
  Tuple<Settings,Environment> finalSettings=InternalSettingsPreparer.prepareSettings(settings,true);
  assertFalse("backward compatibility tests must run in network mode. You probably have a system property overriding the test settings.",DiscoveryNode.localNode(finalSettings.v1()));
  return settings;
}
