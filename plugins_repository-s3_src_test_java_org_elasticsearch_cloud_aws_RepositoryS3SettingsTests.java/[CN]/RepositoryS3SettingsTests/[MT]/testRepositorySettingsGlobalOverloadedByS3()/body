{
  Settings nodeSettings=buildSettings(AWS,S3);
  RepositorySettings repositorySettings=new RepositorySettings(nodeSettings,Settings.EMPTY);
  assertThat(getValue(repositorySettings,Repository.KEY_SETTING,Repositories.KEY_SETTING),is("s3-key"));
  assertThat(getValue(repositorySettings,Repository.SECRET_SETTING,Repositories.SECRET_SETTING),is("s3-secret"));
  assertThat(getValue(repositorySettings,Repository.BUCKET_SETTING,Repositories.BUCKET_SETTING),isEmptyString());
  assertThat(getValue(repositorySettings,Repository.PROTOCOL_SETTING,Repositories.PROTOCOL_SETTING),is(Protocol.HTTP));
  assertThat(getValue(repositorySettings,Repository.REGION_SETTING,Repositories.REGION_SETTING),is("s3-region"));
  assertThat(getValue(repositorySettings,Repository.ENDPOINT_SETTING,Repositories.ENDPOINT_SETTING),is("s3-endpoint"));
  assertThat(AwsS3Service.CLOUD_S3.PROXY_HOST_SETTING.get(nodeSettings),is("s3-proxy-host"));
  assertThat(AwsS3Service.CLOUD_S3.PROXY_PORT_SETTING.get(nodeSettings),is(20000));
  assertThat(AwsS3Service.CLOUD_S3.PROXY_USERNAME_SETTING.get(nodeSettings),is("s3-proxy-username"));
  assertThat(AwsS3Service.CLOUD_S3.PROXY_PASSWORD_SETTING.get(nodeSettings),is("s3-proxy-password"));
  assertThat(AwsS3Service.CLOUD_S3.SIGNER_SETTING.get(nodeSettings),is("s3-signer"));
  assertThat(getValue(repositorySettings,Repository.SERVER_SIDE_ENCRYPTION_SETTING,Repositories.SERVER_SIDE_ENCRYPTION_SETTING),is(false));
  assertThat(getValue(repositorySettings,Repository.BUFFER_SIZE_SETTING,Repositories.BUFFER_SIZE_SETTING).getMb(),is(100L));
  assertThat(getValue(repositorySettings,Repository.MAX_RETRIES_SETTING,Repositories.MAX_RETRIES_SETTING),is(3));
  assertThat(getValue(repositorySettings,Repository.CHUNK_SIZE_SETTING,Repositories.CHUNK_SIZE_SETTING).getGb(),is(1L));
  assertThat(getValue(repositorySettings,Repository.COMPRESS_SETTING,Repositories.COMPRESS_SETTING),is(false));
  assertThat(getValue(repositorySettings,Repository.STORAGE_CLASS_SETTING,Repositories.STORAGE_CLASS_SETTING),isEmptyString());
  assertThat(getValue(repositorySettings,Repository.CANNED_ACL_SETTING,Repositories.CANNED_ACL_SETTING),isEmptyString());
  assertThat(getValue(repositorySettings,Repository.BASE_PATH_SETTING,Repositories.BASE_PATH_SETTING),isEmptyString());
  assertThat(getValue(repositorySettings,Repository.CLIENT_SYMMETRIC_KEY,Repositories.CLIENT_SYMMETRIC_KEY),isEmptyString());
  assertThat(getValue(repositorySettings,Repository.CLIENT_PRIVATE_KEY,Repositories.CLIENT_PRIVATE_KEY),isEmptyString());
  assertThat(getValue(repositorySettings,Repository.CLIENT_PUBLIC_KEY,Repositories.CLIENT_PUBLIC_KEY),isEmptyString());
}
