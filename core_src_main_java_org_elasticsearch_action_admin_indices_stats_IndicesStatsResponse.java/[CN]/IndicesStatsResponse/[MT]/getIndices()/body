{
  if (indicesStats != null) {
    return indicesStats;
  }
  Map<String,IndexStats> indicesStats=new HashMap<>();
  Set<String> indices=new HashSet<>();
  for (  ShardStats shard : shards) {
    indices.add(shard.getShardRouting().getIndex());
  }
  for (  String index : indices) {
    List<ShardStats> shards=new ArrayList<>();
    for (    ShardStats shard : this.shards) {
      if (shard.getShardRouting().index().equals(index)) {
        shards.add(shard);
      }
    }
    indicesStats.put(index,new IndexStats(index,shards.toArray(new ShardStats[shards.size()])));
  }
  this.indicesStats=indicesStats;
  return indicesStats;
}
