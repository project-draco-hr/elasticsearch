{
  final Set<Index> concreteIndices=new HashSet<>(Arrays.asList(indexNameExpressionResolver.concreteIndices(state,request)));
  if (concreteIndices.isEmpty()) {
    listener.onResponse(new DeleteIndexResponse(true));
    return;
  }
  deleteIndexService.deleteIndices(new MetaDataDeleteIndexService.Request(concreteIndices).timeout(request.timeout()).masterTimeout(request.masterNodeTimeout()),new MetaDataDeleteIndexService.Listener(){
    @Override public void onResponse(    MetaDataDeleteIndexService.Response response){
      listener.onResponse(new DeleteIndexResponse(response.acknowledged()));
    }
    @Override public void onFailure(    Throwable t){
      listener.onFailure(t);
    }
  }
);
}
