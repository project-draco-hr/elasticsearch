{
  if (blockingClient) {
    clientBootstrap=new ClientBootstrap(new OioClientSocketChannelFactory(Executors.newCachedThreadPool(daemonThreadFactory(settings,TRANSPORT_CLIENT_WORKER_THREAD_NAME_PREFIX))));
  }
 else {
    int bossCount=NETTY_BOSS_COUNT.get(settings);
    clientBootstrap=new ClientBootstrap(new NioClientSocketChannelFactory(Executors.newCachedThreadPool(daemonThreadFactory(settings,TRANSPORT_CLIENT_BOSS_THREAD_NAME_PREFIX)),bossCount,new NioWorkerPool(Executors.newCachedThreadPool(daemonThreadFactory(settings,TRANSPORT_CLIENT_WORKER_THREAD_NAME_PREFIX)),workerCount),new HashedWheelTimer(daemonThreadFactory(settings,"transport_client_timer"))));
  }
  clientBootstrap.setPipelineFactory(configureClientChannelPipelineFactory());
  clientBootstrap.setOption("connectTimeoutMillis",connectTimeout.millis());
  boolean tcpNoDelay=settings.getAsBoolean("transport.netty.tcp_no_delay",TCP_NO_DELAY.get(settings));
  clientBootstrap.setOption("tcpNoDelay",tcpNoDelay);
  boolean tcpKeepAlive=settings.getAsBoolean("transport.netty.tcp_keep_alive",TCP_KEEP_ALIVE.get(settings));
  clientBootstrap.setOption("keepAlive",tcpKeepAlive);
  ByteSizeValue tcpSendBufferSize=settings.getAsBytesSize("transport.netty.tcp_send_buffer_size",TCP_SEND_BUFFER_SIZE.get(settings));
  if (tcpSendBufferSize.bytes() > 0) {
    clientBootstrap.setOption("sendBufferSize",tcpSendBufferSize.bytes());
  }
  ByteSizeValue tcpReceiveBufferSize=settings.getAsBytesSize("transport.netty.tcp_receive_buffer_size",TCP_RECEIVE_BUFFER_SIZE.get(settings));
  if (tcpReceiveBufferSize.bytes() > 0) {
    clientBootstrap.setOption("receiveBufferSize",tcpReceiveBufferSize.bytes());
  }
  clientBootstrap.setOption("receiveBufferSizePredictorFactory",receiveBufferSizePredictorFactory);
  boolean reuseAddress=settings.getAsBoolean("transport.netty.reuse_address",TCP_REUSE_ADDRESS.get(settings));
  clientBootstrap.setOption("reuseAddress",reuseAddress);
  return clientBootstrap;
}
