{
  Query query=queries.get(token);
  QueryProfileBreakdown breakdown=timings.get(token);
  Map<String,Long> timings=breakdown.toTimingMap();
  List<Integer> children=tree.get(token);
  List<ProfileResult> childrenProfileResults=Collections.emptyList();
  if (children != null) {
    childrenProfileResults=new ArrayList<>(children.size());
    for (    Integer child : children) {
      ProfileResult childNode=doGetQueryTree(child);
      childrenProfileResults.add(childNode);
    }
  }
  long nodeTime=getNodeTime(timings,childrenProfileResults);
  String queryDescription=query.getClass().getSimpleName();
  String luceneName=query.toString();
  return new ProfileResult(queryDescription,luceneName,timings,childrenProfileResults,nodeTime);
}
