{
  String name=parser.currentName();
  ImmutableSettings.Builder settingsBuilder=null;
  String type=null;
  String currentFieldName=null;
  XContentParser.Token token=parser.nextToken();
  while ((token=parser.nextToken()) != XContentParser.Token.END_OBJECT) {
    if (token == XContentParser.Token.FIELD_NAME) {
      currentFieldName=parser.currentName();
    }
 else     if (token == XContentParser.Token.START_OBJECT) {
      if ("settings".equals(currentFieldName)) {
        settingsBuilder=ImmutableSettings.settingsBuilder().globalSettings(globalSettings);
        while ((token=parser.nextToken()) != XContentParser.Token.END_OBJECT) {
          String key=parser.currentName();
          token=parser.nextToken();
          String value=parser.text();
          settingsBuilder.put(key,value);
        }
      }
    }
 else     if (token.isValue()) {
      if ("type".equals(currentFieldName)) {
        type=parser.text();
      }
    }
  }
  Builder builder=new Builder(new IndexerName(name,type));
  if (settingsBuilder != null) {
    builder.settings(settingsBuilder);
  }
  return builder.build();
}
