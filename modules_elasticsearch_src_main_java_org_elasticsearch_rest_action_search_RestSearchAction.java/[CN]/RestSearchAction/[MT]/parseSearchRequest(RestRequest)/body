{
  String[] indices=RestActions.splitIndices(request.param("index"));
  SearchRequest searchRequest=new SearchRequest(indices);
  if (request.hasContent()) {
    searchRequest.source(request.contentAsBytes());
  }
  searchRequest.extraSource(parseSearchSource(request));
  searchRequest.searchType(parseSearchType(request.param("searchType")));
  SearchSourceBuilder extraSourceBuilder=null;
  int from=request.paramAsInt("from",-1);
  if (from != -1) {
    if (extraSourceBuilder == null) {
      extraSourceBuilder=searchSource();
    }
    extraSourceBuilder.from(from);
  }
  int size=request.paramAsInt("size",-1);
  if (size != -1) {
    if (extraSourceBuilder == null) {
      extraSourceBuilder=searchSource();
    }
    extraSourceBuilder.size(size);
  }
  String scroll=request.param("scroll");
  if (scroll != null) {
    searchRequest.scroll(new Scroll(parseTimeValue(scroll,null)));
  }
  searchRequest.timeout(request.paramAsTime("timeout",null));
  String typesParam=request.param("type");
  if (typesParam != null) {
    searchRequest.types(RestActions.splitTypes(typesParam));
  }
  searchRequest.queryHint(request.param("queryHint"));
  if (extraSourceBuilder != null) {
    searchRequest.extraSource(extraSourceBuilder);
  }
  return searchRequest;
}
