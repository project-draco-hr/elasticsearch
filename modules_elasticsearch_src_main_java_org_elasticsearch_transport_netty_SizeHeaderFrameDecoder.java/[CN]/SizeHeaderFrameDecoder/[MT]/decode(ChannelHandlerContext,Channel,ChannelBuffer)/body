{
  if (buffer.readableBytes() < 4) {
    return null;
  }
  int dataLen=buffer.getInt(buffer.readerIndex());
  if (dataLen <= 0) {
    throw new StreamCorruptedException("invalid data length: " + dataLen);
  }
  if (buffer.readableBytes() < dataLen + 4) {
    return null;
  }
  buffer.skipBytes(4);
  return new ChannelBufferInputStream(buffer,dataLen);
}
