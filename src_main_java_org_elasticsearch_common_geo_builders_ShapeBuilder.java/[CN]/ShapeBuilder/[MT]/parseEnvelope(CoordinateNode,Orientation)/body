{
  if (coordinates.children.size() != 2) {
    throw new ElasticsearchParseException("Invalid number of points (" + coordinates.children.size() + ") provided for "+ "geo_shape ('envelope') when expecting an array of 2 coordinates");
  }
  GeoPoint uL=coordinates.children.get(0).coordinate;
  GeoPoint lR=coordinates.children.get(1).coordinate;
  if (((lR.x < uL.x) || (uL.y < lR.y))) {
    GeoPoint uLtmp=uL;
    uL=new GeoPoint(Math.max(uL.y,lR.y),Math.min(uL.x,lR.x));
    lR=new GeoPoint(Math.min(uLtmp.y,lR.y),Math.max(uLtmp.x,lR.x));
  }
  return newEnvelope(orientation).topLeft(uL).bottomRight(lR);
}
