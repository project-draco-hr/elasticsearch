{
  int left=super.endRecovery();
  if (left == 0) {
    try {
      engine.flush();
    }
 catch (    IllegalIndexShardStateException|FlushNotAllowedEngineException e) {
    }
catch (    Throwable e) {
      logger.warn("failed to flush shard post recovery",e);
    }
  }
  return left;
}
