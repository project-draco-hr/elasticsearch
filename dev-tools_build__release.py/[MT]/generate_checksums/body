def generate_checksums(artifacts):
    res = []
    for a in artifacts:
        directory = os.path.dirname(a.fullpath)
        file = os.path.basename(a.fullpath)
        ext = 'sha1.txt'
        checksum_file = ('%s.%s' % (file, ext))
        if os.system(('cd %s; shasum %s > %s' % (directory, file, checksum_file))):
            raise RuntimeError(('Failed to generate checksum for file %s' % a))
        res = (res + [Artifact(directory, file, ext), a])
    return res
