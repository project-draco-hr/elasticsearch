def generate_checksums(files):
    res = []
    for release_file in files:
        directory = os.path.dirname(release_file)
        file = os.path.basename(release_file)
        checksum_file = ('%s.sha1.txt' % file)
        if os.system(('cd %s; shasum %s > %s' % (directory, file, checksum_file))):
            raise RuntimeError(('Failed to generate checksum for file %s' % release_file))
        res = (res + [os.path.join(directory, checksum_file), release_file])
    return res
