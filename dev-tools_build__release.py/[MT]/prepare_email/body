def prepare_email(artifact_id, release_version, repository, artifact_name, artifact_description, project_url, severity_labels_bug='bug', severity_labels_update='update', severity_labels_new='new', severity_labels_doc='doc'):
    issues_bug = list_issues(release_version, repository, severity=severity_labels_bug)
    issues_update = list_issues(release_version, repository, severity=severity_labels_update)
    issues_new = list_issues(release_version, repository, severity=severity_labels_new)
    issues_doc = list_issues(release_version, repository, severity=severity_labels_doc)
    plain_issues_bug = format_issues_plain(issues_bug, 'Fix')
    plain_issues_update = format_issues_plain(issues_update, 'Update')
    plain_issues_new = format_issues_plain(issues_new, 'New')
    plain_issues_doc = format_issues_plain(issues_doc, 'Doc')
    html_issues_bug = format_issues_html(issues_bug, 'Fix')
    html_issues_update = format_issues_html(issues_update, 'Update')
    html_issues_new = format_issues_html(issues_new, 'New')
    html_issues_doc = format_issues_html(issues_doc, 'Doc')
    if ((((len(issues_bug) + len(issues_update)) + len(issues_new)) + len(issues_doc)) > 0):
        plain_empty_message = ''
        html_empty_message = ''
    else:
        plain_empty_message = 'No issue listed for this release'
        html_empty_message = '<p>No issue listed for this release</p>'
    msg = MIMEMultipart('alternative')
    msg['Subject'] = ('[ANN] %s %s released' % (artifact_name, release_version))
    text = ('\nHeya,\n\n\nWe are pleased to announce the release of the %(artifact_name)s, version %(release_version)s.\n\n%(artifact_description)s.\n\n%(project_url)s\n\nRelease Notes - %(artifact_id)s - Version %(release_version)s\n\n%(empty_message)s\n%(issues_bug)s\n%(issues_update)s\n%(issues_new)s\n%(issues_doc)s\n\nIssues, Pull requests, Feature requests are warmly welcome on %(artifact_id)s project repository: %(project_url)s\nFor questions or comments around this plugin, feel free to use elasticsearch mailing list: https://groups.google.com/forum/#!forum/elasticsearch\n\nEnjoy,\n\n-The Elasticsearch team\n' % {'release_version': release_version, 'artifact_id': artifact_id, 'artifact_name': artifact_name, 'artifact_description': artifact_description, 'project_url': project_url, 'empty_message': plain_empty_message, 'issues_bug': plain_issues_bug, 'issues_update': plain_issues_update, 'issues_new': plain_issues_new, 'issues_doc': plain_issues_doc, })
    html = ('\n<html>\n    <body>\n        <p>Heya,</p>\n\n        <p>We are pleased to announce the release of the <b>%(artifact_name)s</b>, <b>version %(release_version)s</b></p>\n\n<blockquote>%(artifact_description)s.</blockquote>\n\n<h1>Release Notes - Version %(release_version)s</h1>\n%(empty_message)s\n%(issues_bug)s\n%(issues_update)s\n%(issues_new)s\n%(issues_doc)s\n\n<p>Issues, Pull requests, Feature requests are warmly welcome on\n<a href=\'%(project_url)s\'>%(artifact_id)s</a> project repository!</p>\n<p>For questions or comments around this plugin, feel free to use elasticsearch\n<a href=\'https://groups.google.com/forum/#!forum/elasticsearch\'>mailing list</a>!</p>\n\n<p>Enjoy,</p>\n\n<p>- The <a href="http://www.elasticsearch.com/">Elasticsearch team</a></p>\n</body></html>\n' % {'release_version': release_version, 'artifact_id': artifact_id, 'artifact_name': artifact_name, 'artifact_description': artifact_description, 'project_url': project_url, 'empty_message': html_empty_message, 'issues_bug': html_issues_bug, 'issues_update': html_issues_update, 'issues_new': html_issues_new, 'issues_doc': html_issues_doc, })
    part1 = MIMEText(text, 'plain')
    part2 = MIMEText(html, 'html')
    msg.attach(part1)
    msg.attach(part2)
    return msg
