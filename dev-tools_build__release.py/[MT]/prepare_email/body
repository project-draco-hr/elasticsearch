def prepare_email(artifact_id, release_version, repository, artifact_name, artifact_description, project_url, severity_labels_bug='bug', severity_labels_update='update', severity_labels_new='new', severity_labels_doc='doc'):
    issues_bug = list_issues(release_version, repository, severity=severity_labels_bug)
    issues_update = list_issues(release_version, repository, severity=severity_labels_update)
    issues_new = list_issues(release_version, repository, severity=severity_labels_new)
    issues_doc = list_issues(release_version, repository, severity=severity_labels_doc)
    plain_issues_bug = format_issues_plain(issues_bug, 'Fix')
    plain_issues_update = format_issues_plain(issues_update, 'Update')
    plain_issues_new = format_issues_plain(issues_new, 'New')
    plain_issues_doc = format_issues_plain(issues_doc, 'Doc')
    html_issues_bug = format_issues_html(issues_bug, 'Fix')
    html_issues_update = format_issues_html(issues_update, 'Update')
    html_issues_new = format_issues_html(issues_new, 'New')
    html_issues_doc = format_issues_html(issues_doc, 'Doc')
    if ((((len(issues_bug) + len(issues_update)) + len(issues_new)) + len(issues_doc)) > 0):
        plain_empty_message = ''
        html_empty_message = ''
    else:
        plain_empty_message = 'No issue listed for this release'
        html_empty_message = '<p>No issue listed for this release</p>'
    msg = MIMEMultipart('alternative')
    msg['Subject'] = ('[ANN] %s %s released' % (artifact_name, release_version))
    text = (template_email_txt % {'release_version': release_version, 'artifact_id': artifact_id, 'artifact_name': artifact_name, 'artifact_description': artifact_description, 'project_url': project_url, 'empty_message': plain_empty_message, 'issues_bug': plain_issues_bug, 'issues_update': plain_issues_update, 'issues_new': plain_issues_new, 'issues_doc': plain_issues_doc, })
    html = (template_email_html % {'release_version': release_version, 'artifact_id': artifact_id, 'artifact_name': artifact_name, 'artifact_description': artifact_description, 'project_url': project_url, 'empty_message': html_empty_message, 'issues_bug': html_issues_bug, 'issues_update': html_issues_update, 'issues_new': html_issues_new, 'issues_doc': html_issues_doc, })
    part1 = MIMEText(text, 'plain')
    part2 = MIMEText(html, 'html')
    msg.attach(part1)
    msg.attach(part2)
    return msg
