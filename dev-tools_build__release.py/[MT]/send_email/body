def send_email(msg, dry_run=True, mail=True, sender=env.get('MAIL_SENDER'), to=env.get('MAIL_TO', 'elasticsearch@googlegroups.com'), smtp_server=env.get('SMTP_SERVER', 'localhost')):
    msg['From'] = ('Elasticsearch Team <%s>' % sender)
    msg['To'] = ('Elasticsearch Mailing List <%s>' % to)
    with open((ROOT_DIR + 'target/email.txt'), 'w') as email_file:
        email_file.write(msg.as_string())
    if (mail and (not dry_run)):
        s = smtplib.SMTP(smtp_server, 25)
        s.sendmail(sender, to, msg.as_string())
        s.quit()
    else:
        print ('generated email: open %starget/email.txt' % ROOT_DIR)
