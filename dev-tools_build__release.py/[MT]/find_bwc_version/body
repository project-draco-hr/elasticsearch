def find_bwc_version(release_version, bwc_dir='backwards'):
    log(('Lookup bwc version in directory [%s]' % bwc_dir))
    bwc_version = None
    max_version = [int(x) for x in release_version.split('.')]
    for dir in os.listdir(bwc_dir):
        if (os.path.isdir(os.path.join(bwc_dir, dir)) and dir.startswith('elasticsearch-')):
            version = [int(x) for x in dir[len('elasticsearch-'):].split('.')]
            if (version < max_version):
                if ((not bwc_version) or (version > [int(x) for x in bwc_version.split('.')])):
                    bwc_version = dir[len('elasticsearch-'):]
    log(('Using bwc version [%s]' % bwc_version))
    return bwc_version
