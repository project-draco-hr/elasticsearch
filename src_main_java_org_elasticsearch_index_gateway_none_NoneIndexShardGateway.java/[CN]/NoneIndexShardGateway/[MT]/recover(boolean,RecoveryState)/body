{
  recoveryState.getIndex().startTime(System.currentTimeMillis());
  indexShard.store().incRef();
  try {
    logger.debug("cleaning shard content before creation");
    indexShard.store().deleteContent();
  }
 catch (  IOException e) {
    logger.warn("failed to clean store before starting shard",e);
  }
 finally {
    indexShard.store().decRef();
  }
  indexShard.postRecovery("post recovery from gateway");
  recoveryState.getIndex().time(System.currentTimeMillis() - recoveryState.getIndex().startTime());
  recoveryState.getTranslog().startTime(System.currentTimeMillis());
  recoveryState.getTranslog().time(System.currentTimeMillis() - recoveryState.getIndex().startTime());
}
