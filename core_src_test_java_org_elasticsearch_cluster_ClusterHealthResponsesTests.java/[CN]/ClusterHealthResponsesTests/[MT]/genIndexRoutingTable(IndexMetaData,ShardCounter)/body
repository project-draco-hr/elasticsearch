{
  IndexRoutingTable.Builder builder=IndexRoutingTable.builder(indexMetaData.index());
  for (int shard=0; shard < indexMetaData.numberOfShards(); shard++) {
    builder.addIndexShard(genShardRoutingTable(indexMetaData.index(),shard,indexMetaData.getNumberOfReplicas(),counter));
  }
  return builder.build();
}
