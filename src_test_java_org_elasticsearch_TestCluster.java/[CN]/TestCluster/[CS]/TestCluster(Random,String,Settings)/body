{
  this.random=new Random(random.nextLong());
  clientFactory=new RandomClientFactory(random);
  this.clusterName=clusterName;
  if (defaultSettings.get("gateway.type") == null) {
    defaultSettings=settingsBuilder().put(defaultSettings).put("gateway.type","none").build();
  }
  if (defaultSettings.get("cluster.routing.schedule") != null) {
    defaultSettings=settingsBuilder().put(defaultSettings).put("cluster.routing.schedule","50ms").build();
  }
  this.defaultSettings=ImmutableSettings.settingsBuilder().put(defaultSettings).put("cluster.name",clusterName).build();
}
