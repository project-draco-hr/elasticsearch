{
  ensureOpen();
  if (clientNode == null) {
    String name="client_node";
    Settings finalSettings=settingsBuilder().put(defaultSettings).put("name",name).build();
    Node node=nodeBuilder().settings(finalSettings).client(true).build();
    node.start();
    this.clientNode=new NodeAndClient(name,node,new ClientFactory());
  }
  return clientNode.client(random);
}
