{
  try (RecoveriesCollection.StatusRef statusRef=onGoingRecoveries.findRecoveryByShard(indexShard)){
    if (statusRef == null) {
      return null;
    }
    final RecoveryStatus recoveryStatus=statusRef.status();
    return recoveryStatus.state();
  }
 catch (  Exception e) {
    throw new ElasticsearchException("error while getting recovery state",e);
  }
}
