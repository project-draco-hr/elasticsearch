{
  try {
    indexShard.recovering("from " + sourceNode);
  }
 catch (  IllegalIndexShardStateException e) {
    logger.debug("{} ignore recovery. already in recovering process, {}",indexShard.shardId(),e.getMessage());
    return;
  }
  RecoveryState recoveryState=new RecoveryState(indexShard.shardId());
  recoveryState.setType(recoveryType);
  recoveryState.setSourceNode(sourceNode);
  recoveryState.setTargetNode(clusterService.localNode());
  recoveryState.setPrimary(indexShard.routingEntry().primary());
  final long recoveryId=onGoingRecoveries.startRecovery(indexShard,sourceNode,recoveryState,listener,recoverySettings.activityTimeout());
  threadPool.generic().execute(new RecoveryRunner(recoveryId));
}
