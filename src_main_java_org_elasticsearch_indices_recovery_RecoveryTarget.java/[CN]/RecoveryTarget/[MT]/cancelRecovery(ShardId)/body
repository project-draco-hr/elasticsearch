{
  RecoveryStatus recoveryStatus=onGoingRecoveries.get(shardId);
  if (recoveryStatus == null) {
    return;
  }
  if (recoveryStatus.sentCanceledToSource) {
    return;
  }
  recoveryStatus.canceled=true;
  if (recoveryStatus.recoveryThread != null) {
    recoveryStatus.recoveryThread.interrupt();
  }
  long time=System.currentTimeMillis();
  while (!recoveryStatus.sentCanceledToSource) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
    }
    if (System.currentTimeMillis() - time > 10000) {
      break;
    }
  }
  removeAndCleanOnGoingRecovery(shardId);
}
