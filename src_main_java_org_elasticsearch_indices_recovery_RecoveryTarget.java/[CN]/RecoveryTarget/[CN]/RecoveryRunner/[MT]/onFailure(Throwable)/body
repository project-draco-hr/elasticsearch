{
  try (RecoveriesCollection.StatusRef statusRef=onGoingRecoveries.getStatus(recoveryId)){
    if (statusRef == null) {
      logger.error("unexpected error during recovery [{}], failing shard",t,recoveryId);
      onGoingRecoveries.failRecovery(recoveryId,new RecoveryFailedException(statusRef.status().state(),"unexpected error",t),true);
    }
 else {
      logger.debug("unexpected error during recovery, but recovery id [{}] is finished",t,recoveryId);
    }
  }
 }
