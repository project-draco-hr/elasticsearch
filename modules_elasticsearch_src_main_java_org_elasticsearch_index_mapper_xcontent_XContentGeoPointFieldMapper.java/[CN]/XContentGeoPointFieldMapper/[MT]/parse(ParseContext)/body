{
  ContentPath.Type origPathType=context.path().pathType();
  context.path().pathType(pathType);
  context.path().add(name);
  XContentParser.Token token=context.parser().currentToken();
  if (token == XContentParser.Token.VALUE_STRING) {
    String value=context.parser().text();
    int comma=value.indexOf(',');
    if (comma != -1) {
      double lat=Double.parseDouble(value.substring(0,comma).trim());
      double lon=Double.parseDouble(value.substring(comma + 1).trim());
      parseLatLon(context,lat,lon);
    }
 else {
      parseGeohash(context,value);
    }
  }
 else   if (token == XContentParser.Token.START_OBJECT) {
    String currentName=context.parser().currentName();
    Double lat=null;
    Double lon=null;
    String geohash=null;
    while ((token=context.parser().nextToken()) != XContentParser.Token.END_OBJECT) {
      if (token == XContentParser.Token.FIELD_NAME) {
        currentName=context.parser().currentName();
      }
 else       if (token.isValue()) {
        if (currentName.equals(Names.LAT)) {
          lat=context.parser().doubleValue();
        }
 else         if (currentName.equals(Names.LON)) {
          lon=context.parser().doubleValue();
        }
 else         if (currentName.equals(Names.GEOHASH)) {
          geohash=context.parser().text();
        }
      }
    }
    if (geohash != null) {
      parseGeohash(context,geohash);
    }
 else     if (lat != null && lon != null) {
      parseLatLon(context,lat,lon);
    }
  }
 else   if (token == XContentParser.Token.START_ARRAY) {
    token=context.parser().nextToken();
    Double lat=context.parser().doubleValue();
    token=context.parser().nextToken();
    Double lon=context.parser().doubleValue();
    token=context.parser().nextToken();
    while ((token=context.parser().nextToken()) != XContentParser.Token.END_ARRAY) {
    }
    parseLatLon(context,lat,lon);
  }
  context.path().remove();
  context.path().pathType(origPathType);
}
