{
  builder.startObject(CustomFiltersScoreQueryParser.NAME);
  builder.field("query");
  queryBuilder.toXContent(builder,params);
  builder.startArray("filters");
  for (int i=0; i < filters.size(); i++) {
    builder.startObject();
    builder.field("filter");
    filters.get(i).toXContent(builder,params);
    String script=scripts.get(i);
    if (script != null) {
      builder.field("script",script);
    }
 else {
      builder.field("boost",boosts.get(i));
    }
    builder.endObject();
  }
  builder.endArray();
  if (scoreMode != null) {
    builder.field("score_mode",scoreMode);
  }
  if (maxBoost != null) {
    builder.field("max_boost",maxBoost);
  }
  if (lang != null) {
    builder.field("lang",lang);
  }
  if (this.params != null) {
    builder.field("params",this.params);
  }
  if (boost != -1) {
    builder.field("boost",boost);
  }
  builder.endObject();
}
