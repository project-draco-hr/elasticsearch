{
  final RoutingNodes.UnassignedShards.UnassignedIterator unassignedIterator=allocation.routingNodes().unassigned().iterator();
  boolean changed=false;
  while (unassignedIterator.hasNext()) {
    ShardRouting shard=unassignedIterator.next();
    IndexMetaData indexMetaData=allocation.metaData().index(shard.getIndexName());
    if (shard.primary() || shard.allocatedPostIndexCreate(indexMetaData) == false) {
      continue;
    }
    changed|=replicaShardAllocator.ignoreUnassignedIfDelayed(unassignedIterator,shard);
  }
  return changed;
}
