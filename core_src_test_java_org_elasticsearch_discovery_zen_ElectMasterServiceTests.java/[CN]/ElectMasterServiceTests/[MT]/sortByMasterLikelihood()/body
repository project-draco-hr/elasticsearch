{
  List<DiscoveryNode> nodes=generateRandomNodes();
  List<DiscoveryNode> sortedNodes=electMasterService().sortByMasterLikelihood(nodes);
  assertEquals(nodes.size(),sortedNodes.size());
  DiscoveryNode prevNode=sortedNodes.get(0);
  for (int i=1; i < sortedNodes.size(); i++) {
    DiscoveryNode node=sortedNodes.get(i);
    if (!prevNode.masterNode()) {
      assertFalse(node.masterNode());
    }
 else     if (node.masterNode()) {
      assertTrue(prevNode.id().compareTo(node.id()) < 0);
    }
    prevNode=node;
  }
}
