{
  SegmentInfos segmentInfos=new SegmentInfos();
  CommitStats commitStats=new CommitStats(segmentInfos);
  org.elasticsearch.Version targetNodeVersion=randomVersion(random());
  ByteArrayOutputStream outBuffer=new ByteArrayOutputStream();
  OutputStreamStreamOutput out=new OutputStreamStreamOutput(outBuffer);
  out.setVersion(targetNodeVersion);
  commitStats.writeTo(out);
  ByteArrayInputStream inBuffer=new ByteArrayInputStream(outBuffer.toByteArray());
  InputStreamStreamInput in=new InputStreamStreamInput(inBuffer);
  in.setVersion(targetNodeVersion);
  CommitStats readCommitStats=CommitStats.readCommitStatsFrom(in);
  assertNull(readCommitStats.getId());
}
