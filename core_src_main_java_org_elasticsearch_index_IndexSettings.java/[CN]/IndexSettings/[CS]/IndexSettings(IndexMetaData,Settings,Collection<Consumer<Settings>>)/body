{
  this.nodeSettings=nodeSettings;
  this.settings=Settings.builder().put(nodeSettings).put(indexMetaData.getSettings()).build();
  this.updateListeners=Collections.unmodifiableList(new ArrayList<>(updateListeners));
  this.index=new Index(indexMetaData.getIndex());
  version=Version.indexCreated(settings);
  uuid=settings.get(IndexMetaData.SETTING_INDEX_UUID,IndexMetaData.INDEX_UUID_NA_VALUE);
  logger=Loggers.getLogger(getClass(),settings,index);
  nodeName=settings.get("name","");
  this.indexMetaData=indexMetaData;
  numberOfShards=settings.getAsInt(IndexMetaData.SETTING_NUMBER_OF_SHARDS,null);
  isShadowReplicaIndex=IndexMetaData.isIndexUsingShadowReplicas(settings);
}
