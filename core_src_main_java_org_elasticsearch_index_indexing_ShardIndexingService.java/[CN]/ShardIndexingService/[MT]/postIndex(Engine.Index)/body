{
  long took=index.endTime() - index.startTime();
  totalStats.indexMetric.inc(took);
  totalStats.indexCurrent.dec();
  StatsHolder typeStats=typeStats(index.type());
  typeStats.indexMetric.inc(took);
  typeStats.indexCurrent.dec();
  slowLog.postIndex(index,took);
  for (  IndexingOperationListener listener : listeners) {
    try {
      listener.postIndex(index);
    }
 catch (    Exception e) {
      logger.warn("post listener [{}] failed",e,listener);
    }
  }
}
