{
  ArrayList<ChannelSnapshot> channelSnapshots=new ArrayList<>();
  boolean success=false;
  try {
    for (    ChannelReader translog : translogs) {
      channelSnapshots.add(translog.newSnapshot());
    }
    Snapshot snapshot=new TranslogSnapshot(channelSnapshots,logger);
    success=true;
    return snapshot;
  }
  finally {
    if (success == false) {
      IOUtils.closeWhileHandlingException(channelSnapshots);
    }
  }
}
