{
  Filter percolatorTypeFilter=context.indexService().mapperService().documentMapper(TYPE_NAME).typeFilter();
  percolatorTypeFilter=context.indexService().cache().filter().cache(percolatorTypeFilter,null,context.indexService().queryParserService().autoFilterCachePolicy());
  FilteredQuery query=new FilteredQuery(context.percolateQuery(),percolatorTypeFilter);
  percolatorSearcher.searcher().search(query,percolateCollector);
  percolateCollector.aggregatorCollector.postCollection();
  if (context.aggregations() != null) {
    aggregationPhase.execute(context);
  }
}
