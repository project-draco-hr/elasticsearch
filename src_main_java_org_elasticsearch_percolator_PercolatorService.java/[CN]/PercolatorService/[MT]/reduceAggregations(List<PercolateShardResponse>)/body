{
  if (shardResults.get(0).aggregations() == null) {
    return null;
  }
  if (shardResults.size() == 1) {
    return shardResults.get(0).aggregations();
  }
  List<InternalAggregations> aggregationsList=new ArrayList<>(shardResults.size());
  for (  PercolateShardResponse shardResult : shardResults) {
    aggregationsList.add(shardResult.aggregations());
  }
  return InternalAggregations.reduce(aggregationsList,new ReduceContext(bigArrays,scriptService));
}
