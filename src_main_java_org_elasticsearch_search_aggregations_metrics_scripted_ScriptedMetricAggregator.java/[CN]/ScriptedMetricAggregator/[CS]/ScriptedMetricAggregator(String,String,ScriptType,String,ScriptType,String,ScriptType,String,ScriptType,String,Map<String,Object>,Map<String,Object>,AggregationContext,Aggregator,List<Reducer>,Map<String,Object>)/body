{
  super(name,context,parent,reducers,metaData);
  this.scriptLang=scriptLang;
  this.reduceScriptType=reduceScriptType;
  if (params == null) {
    this.params=new HashMap<>();
    this.params.put("_agg",new HashMap<>());
  }
 else {
    this.params=new HashMap<>(params);
  }
  if (reduceParams == null) {
    this.reduceParams=new HashMap<>();
  }
 else {
    this.reduceParams=reduceParams;
  }
  ScriptService scriptService=context.searchContext().scriptService();
  if (initScript != null) {
    scriptService.executable(scriptLang,initScript,initScriptType,ScriptContext.Standard.AGGS,this.params).run();
  }
  this.mapScript=scriptService.search(context.searchContext().lookup(),scriptLang,mapScript,mapScriptType,ScriptContext.Standard.AGGS,this.params);
  if (combineScript != null) {
    this.combineScript=scriptService.executable(scriptLang,combineScript,combineScriptType,ScriptContext.Standard.AGGS,this.params);
  }
 else {
    this.combineScript=null;
  }
  this.reduceScript=reduceScript;
}
