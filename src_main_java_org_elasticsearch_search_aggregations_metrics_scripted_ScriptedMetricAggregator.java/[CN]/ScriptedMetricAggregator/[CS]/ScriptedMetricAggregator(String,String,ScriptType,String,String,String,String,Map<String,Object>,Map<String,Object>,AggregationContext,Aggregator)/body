{
  super(name,1,context,parent);
  this.scriptService=context.searchContext().scriptService();
  this.scriptLang=scriptLang;
  this.scriptType=scriptType;
  if (params == null) {
    this.params=new HashMap<>();
    this.params.put("_agg",new HashMap<>());
  }
 else {
    this.params=params;
  }
  if (reduceParams == null) {
    this.reduceParams=new HashMap<>();
  }
 else {
    this.reduceParams=reduceParams;
  }
  if (initScript != null) {
    scriptService.executable(scriptLang,initScript,scriptType,this.params).run();
  }
  this.mapScript=scriptService.search(context.searchContext().lookup(),scriptLang,mapScript,scriptType,this.params);
  if (combineScript != null) {
    this.combineScript=scriptService.executable(scriptLang,combineScript,scriptType,this.params);
  }
 else {
    this.combineScript=null;
  }
  this.reduceScript=reduceScript;
}
