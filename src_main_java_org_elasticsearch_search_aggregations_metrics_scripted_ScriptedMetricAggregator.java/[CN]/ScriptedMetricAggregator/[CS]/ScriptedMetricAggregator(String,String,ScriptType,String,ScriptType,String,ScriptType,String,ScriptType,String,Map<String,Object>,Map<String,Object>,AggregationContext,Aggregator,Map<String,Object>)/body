{
  super(name,context,parent,metaData);
  this.scriptLang=scriptLang;
  this.reduceScriptType=reduceScriptType;
  if (params == null) {
    this.params=new HashMap<>();
    this.params.put("_agg",new HashMap<>());
  }
 else {
    this.params=new HashMap<>(params);
  }
  if (reduceParams == null) {
    this.reduceParams=new HashMap<>();
  }
 else {
    this.reduceParams=reduceParams;
  }
  ScriptService scriptService=context.searchContext().scriptService();
  if (initScript != null) {
    scriptService.executable(new Script(scriptLang,initScript,initScriptType,this.params),ScriptContext.Standard.AGGS).run();
  }
  this.mapScript=scriptService.search(context.searchContext().lookup(),new Script(scriptLang,mapScript,mapScriptType,this.params),ScriptContext.Standard.AGGS);
  if (combineScript != null) {
    this.combineScript=scriptService.executable(new Script(scriptLang,combineScript,combineScriptType,this.params),ScriptContext.Standard.AGGS);
  }
 else {
    this.combineScript=null;
  }
  this.reduceScript=reduceScript;
}
