{
  String compressor="lzf";
  CompressorFactory.configure(Settings.settingsBuilder().put("compress.default.type",compressor).build());
  Random r=getRandom();
  for (int i=0; i < 1000; i++) {
    String string=TestUtil.randomUnicodeString(r,10000);
    string="---\n" + string;
    CompressedXContent compressedXContent=new CompressedXContent(string);
    assertThat(compressedXContent.string(),equalTo(string));
  }
}
