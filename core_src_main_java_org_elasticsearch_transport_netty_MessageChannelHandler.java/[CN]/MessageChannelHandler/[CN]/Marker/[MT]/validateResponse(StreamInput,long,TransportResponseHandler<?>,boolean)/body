{
  final int nextByte=stream.read();
  if (nextByte != -1) {
    throw new IllegalStateException("Message not fully read (response) for requestId [" + requestId + "], handler ["+ handler+ "], error ["+ error+ "]; resetting");
  }
  if (buffer.readerIndex() < expectedReaderIndex) {
    throw new IllegalStateException("Message is fully read (response), yet there are " + (expectedReaderIndex - buffer.readerIndex()) + " remaining bytes; resetting");
  }
  if (buffer.readerIndex() > expectedReaderIndex) {
    throw new IllegalStateException("Message read past expected size (response) for requestId [" + requestId + "], handler ["+ handler+ "], error ["+ error+ "]; resetting");
  }
}
