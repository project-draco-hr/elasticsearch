{
  final int nextByte=stream.read();
  if (nextByte != -1) {
    throw new IllegalStateException("Message not fully read (request) for requestId [" + requestId + "], action ["+ action+ "], readerIndex ["+ buffer.readerIndex()+ "] vs expected ["+ expectedReaderIndex+ "]; resetting");
  }
  if (buffer.readerIndex() < expectedReaderIndex) {
    throw new IllegalStateException("Message is fully read (request), yet there are " + (expectedReaderIndex - buffer.readerIndex()) + " remaining bytes; resetting");
  }
  if (buffer.readerIndex() > expectedReaderIndex) {
    throw new IllegalStateException("Message read past expected size (request) for requestId [" + requestId + "], action ["+ action+ "], readerIndex ["+ buffer.readerIndex()+ "] vs expected ["+ expectedReaderIndex+ "]; resetting");
  }
}
