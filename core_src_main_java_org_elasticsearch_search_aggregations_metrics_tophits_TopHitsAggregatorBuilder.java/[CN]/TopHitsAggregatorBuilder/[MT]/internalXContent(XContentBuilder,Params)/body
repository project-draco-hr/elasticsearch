{
  builder.startObject();
  builder.field(SearchSourceBuilder.FROM_FIELD.getPreferredName(),from);
  builder.field(SearchSourceBuilder.SIZE_FIELD.getPreferredName(),size);
  builder.field(SearchSourceBuilder.VERSION_FIELD.getPreferredName(),version);
  builder.field(SearchSourceBuilder.EXPLAIN_FIELD.getPreferredName(),explain);
  if (fetchSourceContext != null) {
    builder.field(SearchSourceBuilder._SOURCE_FIELD.getPreferredName(),fetchSourceContext);
  }
  if (fieldNames != null) {
    if (fieldNames.size() == 1) {
      builder.field(SearchSourceBuilder.FIELDS_FIELD.getPreferredName(),fieldNames.get(0));
    }
 else {
      builder.startArray(SearchSourceBuilder.FIELDS_FIELD.getPreferredName());
      for (      String fieldName : fieldNames) {
        builder.value(fieldName);
      }
      builder.endArray();
    }
  }
  if (fieldDataFields != null) {
    builder.startArray(SearchSourceBuilder.FIELDDATA_FIELDS_FIELD.getPreferredName());
    for (    String fieldDataField : fieldDataFields) {
      builder.value(fieldDataField);
    }
    builder.endArray();
  }
  if (scriptFields != null) {
    builder.startObject(SearchSourceBuilder.SCRIPT_FIELDS_FIELD.getPreferredName());
    for (    ScriptField scriptField : scriptFields) {
      scriptField.toXContent(builder,params);
    }
    builder.endObject();
  }
  if (sorts != null) {
    builder.startArray(SearchSourceBuilder.SORT_FIELD.getPreferredName());
    for (    BytesReference sort : sorts) {
      XContentParser parser=XContentFactory.xContent(XContentType.JSON).createParser(sort);
      parser.nextToken();
      builder.copyCurrentStructure(parser);
    }
    builder.endArray();
  }
  if (trackScores) {
    builder.field(SearchSourceBuilder.TRACK_SCORES_FIELD.getPreferredName(),true);
  }
  if (highlightBuilder != null) {
    this.highlightBuilder.toXContent(builder,params);
  }
  builder.endObject();
  return builder;
}
