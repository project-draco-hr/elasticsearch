{
  FieldStatsProvider fieldStatsProvider=queryRewriteContext.getFieldStatsProvider();
  if (fieldStatsProvider != null) {
    DateMathParser dateMathParser=format == null ? null : new DateMathParser(format);
    FieldStatsProvider.Relation relation=fieldStatsProvider.isFieldWithinQuery(fieldName,from,to,includeLower,includeUpper,timeZone,dateMathParser);
switch (relation) {
case DISJOINT:
      return new MatchNoneQueryBuilder();
case WITHIN:
    if (from != null || to != null) {
      RangeQueryBuilder newRangeQuery=new RangeQueryBuilder(fieldName);
      newRangeQuery.from(null);
      newRangeQuery.to(null);
      newRangeQuery.format=format;
      newRangeQuery.timeZone=timeZone;
      return newRangeQuery;
    }
 else {
      return this;
    }
case INTERSECTS:
  break;
}
}
return this;
}
