{
  if (docIdsToLoad == null) {
    return;
  }
  if (request.scroll() == null) {
    for (    AtomicArray.Entry<? extends QuerySearchResultProvider> entry : queryResults.asList()) {
      final TopDocs topDocs=entry.value.queryResult().queryResult().topDocs();
      if (topDocs != null && topDocs.scoreDocs.length > 0 && docIdsToLoad.get(entry.index) == null) {
        try {
          DiscoveryNode node=nodes.get(entry.value.queryResult().shardTarget().nodeId());
          sendReleaseSearchContext(entry.value.queryResult().id(),node);
        }
 catch (        Exception e) {
          logger.trace("failed to release context",e);
        }
      }
    }
  }
}
