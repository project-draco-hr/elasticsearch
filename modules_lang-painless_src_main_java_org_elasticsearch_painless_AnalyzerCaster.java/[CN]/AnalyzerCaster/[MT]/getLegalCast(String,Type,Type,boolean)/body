{
  final Cast cast=new Cast(actual,expected,explicit);
  if (actual.equals(expected)) {
    return null;
  }
  Cast transform=Definition.getTransform(cast);
  if (transform == null && explicit) {
    transform=Definition.getTransform(new Cast(actual,expected,false));
  }
  if (transform != null) {
    return transform;
  }
  if (expected.clazz.isAssignableFrom(actual.clazz) || ((explicit || expected.sort == Sort.DEF) && actual.clazz.isAssignableFrom(expected.clazz))) {
    return cast;
  }
 else {
    throw new ClassCastException("Error" + location + ": Cannot cast from ["+ actual.name+ "] to ["+ expected.name+ "].");
  }
}
