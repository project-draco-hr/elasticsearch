{
  Query query=original;
  for (Query rewrittenQuery=query.rewrite(EMPTY_INDEXREADER); rewrittenQuery != query; rewrittenQuery=query.rewrite(EMPTY_INDEXREADER)) {
    query=rewrittenQuery;
  }
  return query;
}
