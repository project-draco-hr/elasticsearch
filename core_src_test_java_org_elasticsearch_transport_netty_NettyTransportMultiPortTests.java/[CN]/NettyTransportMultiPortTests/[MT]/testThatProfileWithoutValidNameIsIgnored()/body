{
  int[] ports=getRandomPorts(3);
  Settings settings=settingsBuilder().put("network.host",host).put("transport.tcp.port",ports[0]).put("transport.profiles." + TransportService.DIRECT_RESPONSE_PROFILE + ".port",ports[1]).put("transport.profiles..port",ports[2]).build();
  ThreadPool threadPool=new ThreadPool("tst");
  try (NettyTransport ignored=startNettyTransport(settings,threadPool)){
    assertPortIsBound(ports[0]);
    assertConnectionRefused(ports[1]);
    assertConnectionRefused(ports[2]);
  }
  finally {
    terminate(threadPool);
  }
}
