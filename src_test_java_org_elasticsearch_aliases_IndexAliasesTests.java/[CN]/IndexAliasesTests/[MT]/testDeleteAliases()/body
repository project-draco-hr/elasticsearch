{
  logger.info("--> creating index [test1]");
  admin().indices().create(createIndexRequest("test1")).actionGet();
  logger.info("--> creating index [test2]");
  admin().indices().create(createIndexRequest("test2")).actionGet();
  ensureGreen();
  logger.info("--> adding filtering aliases to index [test1]");
  admin().indices().prepareAliases().addAlias("test1","aliasToTest1").execute().actionGet();
  admin().indices().prepareAliases().addAlias("test1","aliasToTests").execute().actionGet();
  admin().indices().prepareAliases().addAlias("test1","foos",termFilter("name","foo")).execute().actionGet();
  admin().indices().prepareAliases().addAlias("test1","bars",termFilter("name","bar")).execute().actionGet();
  admin().indices().prepareAliases().addAlias("test1","tests",termFilter("name","test")).execute().actionGet();
  logger.info("--> adding filtering aliases to index [test2]");
  admin().indices().prepareAliases().addAlias("test2","aliasToTest2").execute().actionGet();
  admin().indices().prepareAliases().addAlias("test2","aliasToTests").execute().actionGet();
  admin().indices().prepareAliases().addAlias("test2","foos",termFilter("name","foo")).execute().actionGet();
  admin().indices().prepareAliases().addAlias("test2","tests",termFilter("name","test")).execute().actionGet();
  String[] indices={"test1","test2"};
  String[] aliases={"aliasToTest1","foos","bars","tests","aliasToTest2","aliasToTests"};
  admin().indices().prepareAliases().removeAlias(indices,aliases).execute().actionGet();
  AliasesExistResponse response=admin().indices().prepareAliasesExist(aliases).execute().actionGet();
  assertThat(response.exists(),equalTo(false));
}
