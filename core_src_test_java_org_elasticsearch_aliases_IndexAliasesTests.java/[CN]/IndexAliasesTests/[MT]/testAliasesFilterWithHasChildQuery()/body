{
  assertAcked(prepareCreate("my-index").addMapping("parent").addMapping("child","_parent","type=parent"));
  try {
    assertAcked(admin().indices().prepareAliases().addAlias("my-index","filter1",hasChildQuery("child",matchAllQuery())));
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getCause(),instanceOf(IllegalStateException.class));
    assertThat(e.getCause().getMessage(),equalTo("Search context is required to be set"));
  }
  try {
    assertAcked(admin().indices().prepareAliases().addAlias("my-index","filter2",hasParentQuery("child",matchAllQuery())));
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getCause(),instanceOf(IllegalStateException.class));
    assertThat(e.getCause().getMessage(),equalTo("Search context is required to be set"));
  }
}
