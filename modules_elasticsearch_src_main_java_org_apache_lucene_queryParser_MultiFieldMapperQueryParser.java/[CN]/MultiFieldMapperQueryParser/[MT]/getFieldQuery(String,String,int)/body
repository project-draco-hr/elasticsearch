{
  if (xField != null) {
    Query q=super.getFieldQuery(xField,queryText);
    applySlop(q,slop);
    return q;
  }
  if (settings.useDisMax()) {
    DisjunctionMaxQuery disMaxQuery=new DisjunctionMaxQuery(settings.tieBreaker());
    boolean added=false;
    for (    String field : settings.fields()) {
      Query q=super.getFieldQuery(field,queryText);
      if (q != null) {
        added=true;
        applyBoost(field,q);
        applySlop(q,slop);
        disMaxQuery.add(q);
      }
    }
    if (!added) {
      return null;
    }
    return disMaxQuery;
  }
 else {
    List<BooleanClause> clauses=new ArrayList<BooleanClause>();
    for (    String field : settings.fields()) {
      Query q=super.getFieldQuery(field,queryText);
      if (q != null) {
        applyBoost(field,q);
        applySlop(q,slop);
        clauses.add(new BooleanClause(q,BooleanClause.Occur.SHOULD));
      }
    }
    if (clauses.size() == 0)     return null;
    return getBooleanQuery(clauses,true);
  }
}
