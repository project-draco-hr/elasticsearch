{
  internalCluster().wipeTemplates();
  createIndexWithStoreType("test",IndexStoreModule.Type.NIOFS,"least_used");
  String storeString=getStoreDirectory("test",0).toString();
  logger.info(storeString);
  Path[] dataPaths=dataPaths();
  assertThat(storeString.toLowerCase(Locale.ROOT),startsWith("store(least_used[rate_limited(niofs(" + dataPaths[0].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  if (dataPaths.length > 1) {
    assertThat(storeString.toLowerCase(Locale.ROOT),containsString("), rate_limited(niofs(" + dataPaths[1].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  }
  assertThat(storeString,endsWith(", type=MERGE, rate=20.0)])"));
  createIndexWithStoreType("test",IndexStoreModule.Type.NIOFS,"random");
  storeString=getStoreDirectory("test",0).toString();
  logger.info(storeString);
  dataPaths=dataPaths();
  assertThat(storeString.toLowerCase(Locale.ROOT),startsWith("store(random[rate_limited(niofs(" + dataPaths[0].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  if (dataPaths.length > 1) {
    assertThat(storeString.toLowerCase(Locale.ROOT),containsString("), rate_limited(niofs(" + dataPaths[1].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  }
  assertThat(storeString,endsWith(", type=MERGE, rate=20.0)])"));
  createIndexWithStoreType("test",IndexStoreModule.Type.MMAPFS,"least_used");
  storeString=getStoreDirectory("test",0).toString();
  logger.info(storeString);
  dataPaths=dataPaths();
  assertThat(storeString.toLowerCase(Locale.ROOT),startsWith("store(least_used[rate_limited(mmapfs(" + dataPaths[0].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  if (dataPaths.length > 1) {
    assertThat(storeString.toLowerCase(Locale.ROOT),containsString("), rate_limited(mmapfs(" + dataPaths[1].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  }
  assertThat(storeString,endsWith(", type=MERGE, rate=20.0)])"));
  createIndexWithStoreType("test",IndexStoreModule.Type.SIMPLEFS,"least_used");
  storeString=getStoreDirectory("test",0).toString();
  logger.info(storeString);
  dataPaths=dataPaths();
  assertThat(storeString.toLowerCase(Locale.ROOT),startsWith("store(least_used[rate_limited(simplefs(" + dataPaths[0].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  if (dataPaths.length > 1) {
    assertThat(storeString.toLowerCase(Locale.ROOT),containsString("), rate_limited(simplefs(" + dataPaths[1].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  }
  assertThat(storeString,endsWith(", type=MERGE, rate=20.0)])"));
  createIndexWithStoreType("test",IndexStoreModule.Type.DEFAULT,"least_used");
  storeString=getStoreDirectory("test",0).toString();
  logger.info(storeString);
  dataPaths=dataPaths();
  assertThat(storeString.toLowerCase(Locale.ROOT),startsWith("store(least_used[rate_limited(default(mmapfs(" + dataPaths[0].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  assertThat(storeString.toLowerCase(Locale.ROOT),containsString("),niofs(" + dataPaths[0].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  if (dataPaths.length > 1) {
    assertThat(storeString.toLowerCase(Locale.ROOT),containsString("), rate_limited(default(mmapfs(" + dataPaths[1].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  }
  assertThat(storeString,endsWith(", type=MERGE, rate=20.0)])"));
  createIndexWithoutRateLimitingStoreType("test",IndexStoreModule.Type.NIOFS,"least_used");
  storeString=getStoreDirectory("test",0).toString();
  logger.info(storeString);
  dataPaths=dataPaths();
  assertThat(storeString.toLowerCase(Locale.ROOT),startsWith("store(least_used[niofs(" + dataPaths[0].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  if (dataPaths.length > 1) {
    assertThat(storeString.toLowerCase(Locale.ROOT),containsString("), niofs(" + dataPaths[1].toAbsolutePath().toString().toLowerCase(Locale.ROOT)));
  }
  assertThat(storeString,endsWith(")])"));
}
