{
  DocumentMapper docMapper=createDummyMapping(createIndex("test").mapperService());
  List<Mapper> updates=Collections.singletonList(new MockFieldMapper("a.b.foo"));
  Mapping mapping=DocumentParser.createDynamicUpdate(docMapper.mapping(),docMapper,updates);
  Mapper aMapper=mapping.root().getMapper("a");
  assertNotNull(aMapper);
  assertTrue(aMapper instanceof ObjectMapper);
  Mapper bMapper=((ObjectMapper)aMapper).getMapper("b");
  assertTrue(bMapper instanceof ObjectMapper);
  assertNotNull(((ObjectMapper)bMapper).getMapper("foo"));
  assertNull(((ObjectMapper)bMapper).getMapper("c"));
}
