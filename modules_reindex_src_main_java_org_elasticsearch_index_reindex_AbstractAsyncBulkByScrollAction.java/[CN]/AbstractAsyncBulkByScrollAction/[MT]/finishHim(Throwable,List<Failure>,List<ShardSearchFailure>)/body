{
  String scrollId=scroll.get();
  if (Strings.hasLength(scrollId)) {
    ClearScrollRequest clearScrollRequest=new ClearScrollRequest();
    clearScrollRequest.addScrollId(scrollId);
    client.clearScroll(clearScrollRequest,new ActionListener<ClearScrollResponse>(){
      @Override public void onResponse(      ClearScrollResponse response){
        logger.debug("Freed [{}] contexts",response.getNumFreed());
      }
      @Override public void onFailure(      Throwable e){
        logger.warn("Failed to clear scroll [" + scrollId + ']',e);
      }
    }
);
  }
  if (failure == null) {
    listener.onResponse(buildResponse(timeValueNanos(System.nanoTime() - startTime.get()),indexingFailures,searchFailures));
  }
 else {
    listener.onFailure(failure);
  }
}
