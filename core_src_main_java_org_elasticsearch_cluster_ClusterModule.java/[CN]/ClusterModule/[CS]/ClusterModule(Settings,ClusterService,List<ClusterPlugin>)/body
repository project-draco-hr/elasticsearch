{
  this.settings=settings;
  this.allocationDeciders=createAllocationDeciders(settings,clusterService.getClusterSettings(),clusterPlugins);
  registerShardsAllocator(ClusterModule.BALANCED_ALLOCATOR,BalancedShardsAllocator.class);
  registerShardsAllocator(ClusterModule.EVEN_SHARD_COUNT_ALLOCATOR,BalancedShardsAllocator.class);
  this.clusterService=clusterService;
  indexNameExpressionResolver=new IndexNameExpressionResolver(settings);
}
