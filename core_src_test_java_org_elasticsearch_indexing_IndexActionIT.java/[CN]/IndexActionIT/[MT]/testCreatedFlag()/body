{
  createIndex("test");
  ensureGreen();
  IndexResponse indexResponse=client().prepareIndex("test","type","1").setSource("field1","value1_1").execute().actionGet();
  assertEquals(DocWriteResponse.Operation.CREATE,indexResponse.getOperation());
  indexResponse=client().prepareIndex("test","type","1").setSource("field1","value1_2").execute().actionGet();
  assertEquals(DocWriteResponse.Operation.INDEX,indexResponse.getOperation());
  client().prepareDelete("test","type","1").execute().actionGet();
  indexResponse=client().prepareIndex("test","type","1").setSource("field1","value1_2").execute().actionGet();
  assertEquals(DocWriteResponse.Operation.CREATE,indexResponse.getOperation());
}
