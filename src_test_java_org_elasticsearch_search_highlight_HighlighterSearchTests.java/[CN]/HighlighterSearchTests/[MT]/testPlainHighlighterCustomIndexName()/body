{
  assertAcked(prepareCreate("test").addMapping("type1","field1","type=string,index_name=my_field"));
  ensureGreen();
  client().prepareIndex("test","type1","1").setSource("field1","First sentence. Second sentence.").get();
  refresh();
  SearchResponse searchResponse=client().prepareSearch("test").setQuery(matchQuery("field1","first")).addHighlightedField("field1").get();
  assertHighlight(searchResponse,0,"field1",0,1,equalTo("<em>First</em> sentence. Second sentence."));
  searchResponse=client().prepareSearch("test").setQuery(matchQuery("my_field","first")).addHighlightedField("field1").get();
  assertHighlight(searchResponse,0,"field1",0,1,equalTo("<em>First</em> sentence. Second sentence."));
  searchResponse=client().prepareSearch("test").setQuery(matchQuery("my_field","first")).addHighlightedField("my_field").get();
  assertHighlight(searchResponse,0,"my_field",0,1,equalTo("<em>First</em> sentence. Second sentence."));
  searchResponse=client().prepareSearch("test").setQuery(matchQuery("my_field","first")).addHighlightedField("field1").setHighlighterRequireFieldMatch(true).get();
  assertHighlight(searchResponse,0,"field1",0,1,equalTo("<em>First</em> sentence. Second sentence."));
}
