{
  client().admin().indices().prepareCreate("test").addMapping("type1",type1PostingsffsetsMapping()).get();
  ensureGreen();
  client().prepareIndex("test","type1").setSource("field1","this is a test","field2","The quick brown fox jumps over the lazy dog! Second sentence.").get();
  refresh();
  logger.info("--> highlighting and searching on field1");
  SearchSourceBuilder source=searchSource().query(commonTerms("field2","quick brown").cutoffFrequency(100)).highlight(highlight().field("field2").preTags("<x>").postTags("</x>"));
  SearchResponse searchResponse=client().search(searchRequest("test").source(source)).actionGet();
  assertHitCount(searchResponse,1l);
  assertThat(searchResponse.getHits().getAt(0).highlightFields().get("field2").fragments()[0].string(),equalTo("The <x>quick</x> <x>brown</x> fox jumps over the lazy dog!"));
}
