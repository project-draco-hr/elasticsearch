{
  client().admin().indices().prepareCreate("test").addMapping("type1",XContentFactory.jsonBuilder().startObject().startObject("type1").startObject("_analyzer").field("path","language_analyzer").endObject().startObject("properties").startObject("language_analyzer").field("type","string").field("index","not_analyzed").endObject().startObject("text").field("type","string").endObject().endObject().endObject().endObject()).execute().actionGet();
  ensureYellow();
  index("test","type1","1","language_analyzer","english","text","Look at me, I'm eating cars.");
  refresh();
  SearchResponse response=client().prepareSearch("test").setQuery(QueryBuilders.matchQuery("text","car")).addHighlightedField(new HighlightBuilder.Field("text").preTags("<1>").postTags("</1>").requireFieldMatch(true)).get();
  assertHighlight(response,0,"text",0,1,equalTo("Look at me, I'm eating <1>cars</1>."));
}
