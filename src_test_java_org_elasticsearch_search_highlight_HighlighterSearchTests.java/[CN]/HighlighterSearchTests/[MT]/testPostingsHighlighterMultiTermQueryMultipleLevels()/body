{
  assertAcked(prepareCreate("test").addMapping("type1",type1PostingsffsetsMapping()));
  ensureGreen();
  client().prepareIndex("test","type1").setSource("field1","The photography word will get highlighted").get();
  refresh();
  logger.info("--> highlighting and searching on field1");
  SearchSourceBuilder source=searchSource().query(boolQuery().should(constantScoreQuery(FilterBuilders.missingFilter("field1"))).should(matchQuery("field1","test")).should(filteredQuery(queryStringQuery("field1:photo*").rewrite(randomFrom(REWRITE_METHODS)),null))).highlight(highlight().field("field1"));
  SearchResponse searchResponse=client().prepareSearch("test").setSource(source.buildAsBytes()).get();
  assertHighlight(searchResponse,0,"field1",0,1,equalTo("The <em>photography</em> word will get highlighted"));
}
