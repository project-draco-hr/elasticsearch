{
  List<XBooleanFilter> booleanFilters=new ArrayList<XBooleanFilter>();
  booleanFilters.add(createBooleanFilter(newFilterClause(3,'d',MUST,true),newFilterClause(3,'d',MUST,true)));
  booleanFilters.add(createBooleanFilter(newFilterClause(3,'d',MUST,false),newFilterClause(3,'d',MUST,false)));
  booleanFilters.add(createBooleanFilter(newFilterClause(3,'d',MUST,true),newFilterClause(3,'d',MUST,false)));
  for (  XBooleanFilter booleanFilter : booleanFilters) {
    FixedBitSet result=new FixedBitSet(reader.maxDoc());
    result.or(booleanFilter.getDocIdSet(reader.getContext(),reader.getLiveDocs()).iterator());
    assertThat(result.cardinality(),equalTo(2));
    assertThat(result.get(0),equalTo(true));
    assertThat(result.get(1),equalTo(true));
    assertThat(result.get(2),equalTo(false));
  }
}
