{
  initializeNatives(environment.tmpFile(),BootstrapSettings.MLOCKALL_SETTING.get(settings),BootstrapSettings.SECCOMP_SETTING.get(settings),BootstrapSettings.CTRLHANDLER_SETTING.get(settings));
  initializeProbes();
  if (addShutdownHook) {
    Runtime.getRuntime().addShutdownHook(new Thread(){
      @Override public void run(){
        try {
          IOUtils.close(node);
        }
 catch (        IOException ex) {
          throw new ElasticsearchException("failed to stop node",ex);
        }
      }
    }
);
  }
  JarHell.checkJarHell();
  Security.configure(environment,BootstrapSettings.SECURITY_FILTER_BAD_DEFAULTS_SETTING.get(settings));
  Settings nodeSettings=Settings.builder().put(settings).put(InternalSettingsPreparer.IGNORE_SYSTEM_PROPERTIES_SETTING.getKey(),true).build();
  node=new Node(nodeSettings){
    @Override protected void validateNodeBeforeAcceptingRequests(    Settings settings,    BoundTransportAddress boundTransportAddress){
      BootstrapCheck.check(settings,boundTransportAddress);
    }
  }
;
}
