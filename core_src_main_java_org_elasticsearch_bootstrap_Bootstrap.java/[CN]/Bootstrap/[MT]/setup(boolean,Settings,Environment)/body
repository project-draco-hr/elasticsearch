{
  initializeNatives(environment.tmpFile(),settings.getAsBoolean("bootstrap.mlockall",false),settings.getAsBoolean("bootstrap.seccomp",true),settings.getAsBoolean("bootstrap.ctrlhandler",true));
  initializeProbes();
  if (addShutdownHook) {
    Runtime.getRuntime().addShutdownHook(new Thread(){
      @Override public void run(){
        try {
          IOUtils.close(node);
        }
 catch (        IOException ex) {
          throw new ElasticsearchException("failed to stop node",ex);
        }
      }
    }
);
  }
  JarHell.checkJarHell();
  setupSecurity(settings,environment);
  Settings nodeSettings=Settings.settingsBuilder().put(settings).put(InternalSettingsPreparer.IGNORE_SYSTEM_PROPERTIES_SETTING.getKey(),true).build();
  node=new Node(nodeSettings);
}
