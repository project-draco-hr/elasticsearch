{
  super(shardId,indexSettings);
  this.reformat=indexSettings.getAsBoolean(INDEX_SEARCH_SLOWLOG_REFORMAT,true);
  this.queryWarnThreshold=indexSettings.getAsTime(INDEX_SEARCH_SLOWLOG_THRESHOLD_QUERY_WARN,TimeValue.timeValueNanos(-1)).nanos();
  this.queryInfoThreshold=indexSettings.getAsTime(INDEX_SEARCH_SLOWLOG_THRESHOLD_QUERY_INFO,TimeValue.timeValueNanos(-1)).nanos();
  this.queryDebugThreshold=indexSettings.getAsTime(INDEX_SEARCH_SLOWLOG_THRESHOLD_QUERY_DEBUG,TimeValue.timeValueNanos(-1)).nanos();
  this.queryTraceThreshold=indexSettings.getAsTime(INDEX_SEARCH_SLOWLOG_THRESHOLD_QUERY_TRACE,TimeValue.timeValueNanos(-1)).nanos();
  this.fetchWarnThreshold=indexSettings.getAsTime(INDEX_SEARCH_SLOWLOG_THRESHOLD_FETCH_WARN,TimeValue.timeValueNanos(-1)).nanos();
  this.fetchInfoThreshold=indexSettings.getAsTime(INDEX_SEARCH_SLOWLOG_THRESHOLD_FETCH_INFO,TimeValue.timeValueNanos(-1)).nanos();
  this.fetchDebugThreshold=indexSettings.getAsTime(INDEX_SEARCH_SLOWLOG_THRESHOLD_FETCH_DEBUG,TimeValue.timeValueNanos(-1)).nanos();
  this.fetchTraceThreshold=indexSettings.getAsTime(INDEX_SEARCH_SLOWLOG_THRESHOLD_FETCH_TRACE,TimeValue.timeValueNanos(-1)).nanos();
  this.level=indexSettings.get(INDEX_SEARCH_SLOWLOG_LEVEL,"TRACE").toUpperCase(Locale.ROOT);
  this.queryLogger=Loggers.getLogger(logger,".query");
  this.fetchLogger=Loggers.getLogger(logger,".fetch");
  queryLogger.setLevel(level);
  fetchLogger.setLevel(level);
  indexSettingsService.addListener(new ApplySettings());
}
