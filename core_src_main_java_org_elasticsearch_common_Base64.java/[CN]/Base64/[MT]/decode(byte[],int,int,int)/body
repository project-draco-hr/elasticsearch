{
  Objects.requireNonNull(source,"Cannot decode null source array.");
  if (off < 0 || off + len > source.length) {
    throw new IllegalArgumentException(String.format(Locale.ROOT,"Source array with length %d cannot have offset of %d and process %d bytes.",source.length,off,len));
  }
  if (len == 0) {
    return new byte[0];
  }
 else   if (len < 4) {
    throw new IllegalArgumentException("Base64-encoded string must have at least four characters, but length specified was " + len);
  }
  byte[] DECODABET=getDecodabet(options);
  int len34=len * 3 / 4;
  byte[] outBuff=new byte[len34];
  int outBuffPosn=decode(source,off,len,options,DECODABET,outBuff);
  byte[] out=new byte[outBuffPosn];
  System.arraycopy(outBuff,0,out,0,outBuffPosn);
  return out;
}
