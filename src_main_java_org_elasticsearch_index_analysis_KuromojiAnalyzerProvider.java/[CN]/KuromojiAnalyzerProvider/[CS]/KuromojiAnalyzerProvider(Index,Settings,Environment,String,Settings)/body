{
  super(index,indexSettings,name,settings);
  Set<?> stopWords=Analysis.parseStopWords(env,settings,JapaneseAnalyzer.getDefaultStopSet(),version);
  JapaneseTokenizer.Mode mode=JapaneseTokenizer.DEFAULT_MODE;
  String modeSetting=settings.get("mode",null);
  if (modeSetting != null) {
    if ("search".equalsIgnoreCase(modeSetting)) {
      mode=JapaneseTokenizer.Mode.SEARCH;
    }
 else     if ("normal".equalsIgnoreCase(modeSetting)) {
      mode=JapaneseTokenizer.Mode.NORMAL;
    }
 else     if ("extended".equalsIgnoreCase(modeSetting)) {
      mode=JapaneseTokenizer.Mode.EXTENDED;
    }
  }
  analyzer=new JapaneseAnalyzer(version,null,mode,CharArraySet.copy(version,stopWords),JapaneseAnalyzer.getDefaultStopTags());
}
