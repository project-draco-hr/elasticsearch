{
  super(index,indexSettings);
  this.environment=environment;
  this.gateway=gateway;
  String location=componentSettings.get("location");
  if (location == null) {
    if (gateway instanceof FsGateway) {
      indexGatewayHome=new File(((FsGateway)gateway).gatewayHome(),index().name());
    }
 else {
      indexGatewayHome=new File(new File(environment.workWithClusterFile(),"gateway"),index().name());
    }
    location=Strings.cleanPath(indexGatewayHome.getAbsolutePath());
  }
 else {
    indexGatewayHome=new File(location);
  }
  this.location=location;
  indexGatewayHome.mkdirs();
}
