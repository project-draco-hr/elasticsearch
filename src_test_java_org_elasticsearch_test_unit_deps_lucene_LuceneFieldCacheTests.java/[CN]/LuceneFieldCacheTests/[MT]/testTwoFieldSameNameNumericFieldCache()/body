{
  Directory dir=new RAMDirectory();
  IndexWriter indexWriter=new IndexWriter(dir,new IndexWriterConfig(Lucene.VERSION,Lucene.STANDARD_ANALYZER));
  Document doc=new Document();
  IntField field=new IntField("int1",1,IntField.TYPE_NOT_STORED);
  doc.add(field);
  field=new IntField("int1",2,IntField.TYPE_NOT_STORED);
  doc.add(field);
  indexWriter.addDocument(doc);
  AtomicReader reader=SlowCompositeReaderWrapper.wrap(IndexReader.open(indexWriter,true));
  int[] ints=FieldCache.DEFAULT.getInts(reader,"int1",false);
  assertThat(ints.length,equalTo(1));
  assertThat(ints[0],equalTo(2));
}
