{
  Index index=new Index("test");
  Settings settings=settingsBuilder().put("path.home",createTempDir()).put(IndexMetaData.SETTING_VERSION_CREATED,Version.CURRENT).build();
  Injector parentInjector=new ModulesBuilder().add(new SettingsModule(EMPTY_SETTINGS),new EnvironmentModule(new Environment(settings)),new IndicesAnalysisModule()).createInjector();
  Injector injector=new ModulesBuilder().add(new IndexSettingsModule(index,settings),new IndexNameModule(index),new AnalysisModule(EMPTY_SETTINGS,parentInjector.getInstance(IndicesAnalysisService.class)).addProcessor(new PolishAnalysisBinderProcessor())).createChildInjector(parentInjector);
  AnalysisService analysisService=injector.getInstance(AnalysisService.class);
  TokenFilterFactory tokenizerFactory=analysisService.tokenFilter("polish_stem");
  MatcherAssert.assertThat(tokenizerFactory,instanceOf(PolishStemTokenFilterFactory.class));
  Analyzer analyzer=analysisService.analyzer("polish").analyzer();
  MatcherAssert.assertThat(analyzer,instanceOf(PolishAnalyzer.class));
}
