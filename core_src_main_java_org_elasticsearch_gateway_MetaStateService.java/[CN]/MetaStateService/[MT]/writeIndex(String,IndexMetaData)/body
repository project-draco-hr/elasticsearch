{
  final Index index=indexMetaData.getIndex();
  logger.trace("[{}] writing state, reason [{}]",index,reason);
  try {
    IndexMetaData.FORMAT.write(indexMetaData,nodeEnv.indexPaths(indexMetaData.getIndex()));
  }
 catch (  Exception ex) {
    logger.warn(new ParameterizedMessage("[{}]: failed to write index state",index),ex);
    throw new IOException("failed to write state for [" + index + "]",ex);
  }
}
