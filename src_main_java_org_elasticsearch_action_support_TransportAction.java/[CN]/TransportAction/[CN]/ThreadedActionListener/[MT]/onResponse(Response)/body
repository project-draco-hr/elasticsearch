{
  try {
    threadPool.executor(ThreadPool.Names.LISTENER).execute(new Runnable(){
      @Override public void run(){
        try {
          listener.onResponse(response);
        }
 catch (        Throwable e) {
          listener.onFailure(e);
        }
      }
    }
);
  }
 catch (  EsRejectedExecutionException ex) {
    logger.debug("Can not run threaded action, execution rejected [{}] running on current thread",listener);
    try {
      listener.onResponse(response);
    }
 catch (    Throwable e) {
      listener.onFailure(e);
    }
  }
}
