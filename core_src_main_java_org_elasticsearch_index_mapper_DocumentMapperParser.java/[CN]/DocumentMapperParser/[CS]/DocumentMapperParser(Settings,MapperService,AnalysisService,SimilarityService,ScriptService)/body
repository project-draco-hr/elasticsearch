{
  this.indexSettings=indexSettings;
  this.parseFieldMatcher=new ParseFieldMatcher(indexSettings);
  this.mapperService=mapperService;
  this.analysisService=analysisService;
  this.similarityService=similarityService;
  this.scriptService=scriptService;
  MapBuilder<String,Mapper.TypeParser> typeParsersBuilder=new MapBuilder<String,Mapper.TypeParser>().put(ByteFieldMapper.CONTENT_TYPE,new ByteFieldMapper.TypeParser()).put(ShortFieldMapper.CONTENT_TYPE,new ShortFieldMapper.TypeParser()).put(IntegerFieldMapper.CONTENT_TYPE,new IntegerFieldMapper.TypeParser()).put(LongFieldMapper.CONTENT_TYPE,new LongFieldMapper.TypeParser()).put(FloatFieldMapper.CONTENT_TYPE,new FloatFieldMapper.TypeParser()).put(DoubleFieldMapper.CONTENT_TYPE,new DoubleFieldMapper.TypeParser()).put(BooleanFieldMapper.CONTENT_TYPE,new BooleanFieldMapper.TypeParser()).put(BinaryFieldMapper.CONTENT_TYPE,new BinaryFieldMapper.TypeParser()).put(DateFieldMapper.CONTENT_TYPE,new DateFieldMapper.TypeParser()).put(IpFieldMapper.CONTENT_TYPE,new IpFieldMapper.TypeParser()).put(StringFieldMapper.CONTENT_TYPE,new StringFieldMapper.TypeParser()).put(TokenCountFieldMapper.CONTENT_TYPE,new TokenCountFieldMapper.TypeParser()).put(ObjectMapper.CONTENT_TYPE,new ObjectMapper.TypeParser()).put(ObjectMapper.NESTED_CONTENT_TYPE,new ObjectMapper.TypeParser()).put(TypeParsers.MULTI_FIELD_CONTENT_TYPE,TypeParsers.multiFieldConverterTypeParser).put(CompletionFieldMapper.CONTENT_TYPE,new CompletionFieldMapper.TypeParser()).put(GeoPointFieldMapper.CONTENT_TYPE,new GeoPointFieldMapper.TypeParser());
  if (ShapesAvailability.JTS_AVAILABLE) {
    typeParsersBuilder.put(GeoShapeFieldMapper.CONTENT_TYPE,new GeoShapeFieldMapper.TypeParser());
  }
  typeParsers=typeParsersBuilder.immutableMap();
  rootTypeParsers=new MapBuilder<String,Mapper.TypeParser>().put(IndexFieldMapper.NAME,new IndexFieldMapper.TypeParser()).put(SourceFieldMapper.NAME,new SourceFieldMapper.TypeParser()).put(TypeFieldMapper.NAME,new TypeFieldMapper.TypeParser()).put(AllFieldMapper.NAME,new AllFieldMapper.TypeParser()).put(ParentFieldMapper.NAME,new ParentFieldMapper.TypeParser()).put(RoutingFieldMapper.NAME,new RoutingFieldMapper.TypeParser()).put(TimestampFieldMapper.NAME,new TimestampFieldMapper.TypeParser()).put(TTLFieldMapper.NAME,new TTLFieldMapper.TypeParser()).put(UidFieldMapper.NAME,new UidFieldMapper.TypeParser()).put(VersionFieldMapper.NAME,new VersionFieldMapper.TypeParser()).put(IdFieldMapper.NAME,new IdFieldMapper.TypeParser()).put(FieldNamesFieldMapper.NAME,new FieldNamesFieldMapper.TypeParser()).immutableMap();
  additionalRootMappers=Collections.emptySortedMap();
  indexVersionCreated=Version.indexCreated(indexSettings);
}
