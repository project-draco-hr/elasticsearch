{
synchronized (typeParsersMutex) {
    rootTypeParsers=new MapBuilder<>(rootTypeParsers).put(type,typeParser).immutableMap();
    SortedMap<String,Mapper.TypeParser> newAdditionalRootMappers=new TreeMap<>();
    newAdditionalRootMappers.putAll(additionalRootMappers);
    newAdditionalRootMappers.put(type,typeParser);
    additionalRootMappers=Collections.unmodifiableSortedMap(newAdditionalRootMappers);
  }
}
