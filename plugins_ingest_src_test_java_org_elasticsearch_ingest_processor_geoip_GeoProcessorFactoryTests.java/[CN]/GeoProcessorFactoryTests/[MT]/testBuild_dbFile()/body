{
  GeoIpProcessor.Factory factory=new GeoIpProcessor.Factory();
  factory.setConfigDirectory(configDir);
  GeoIpProcessor processor=(GeoIpProcessor)factory.create(Collections.singletonMap("database_file","GeoLite2-Country.mmdb"));
  assertThat(processor.dbReader.getMetadata().getDatabaseType(),equalTo("GeoLite2-Country"));
}
