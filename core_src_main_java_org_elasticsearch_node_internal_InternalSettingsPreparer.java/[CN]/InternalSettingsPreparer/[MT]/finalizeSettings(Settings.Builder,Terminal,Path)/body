{
  List<String> forcedSettings=new ArrayList<>();
  for (  String setting : output.internalMap().keySet()) {
    if (setting.startsWith("force.")) {
      forcedSettings.add(setting);
    }
  }
  for (  String forcedSetting : forcedSettings) {
    String value=output.remove(forcedSetting);
    output.put(forcedSetting.substring("force.".length()),value);
  }
  output.replacePropertyPlaceholders();
  if (output.get("name") == null) {
    String name=System.getProperty("name");
    if (name != null) {
      output.put("name",name);
    }
  }
  if (output.get(ClusterName.SETTING) == null) {
    output.put(ClusterName.SETTING,ClusterName.DEFAULT.value());
  }
  String v=output.get(Settings.SETTINGS_REQUIRE_UNITS);
  if (v != null) {
    Settings.setSettingsRequireUnits(Booleans.parseBoolean(v,true));
  }
  replacePromptPlaceholders(output,terminal);
  if (output.get("name") == null) {
    String name=output.get("node.name");
    if (name == null || name.isEmpty()) {
      name=randomNodeName(configDir);
    }
    output.put("name",name);
  }
}
