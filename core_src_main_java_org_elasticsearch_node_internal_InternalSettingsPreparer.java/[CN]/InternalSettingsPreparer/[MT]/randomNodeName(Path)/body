{
  InputStream input;
  if (configDir != null && Files.exists(configDir.resolve("names.txt"))) {
    Path namesPath=configDir.resolve("names.txt");
    try {
      input=Files.newInputStream(namesPath);
    }
 catch (    IOException e) {
      throw new RuntimeException("Failed to load custom names.txt from " + namesPath,e);
    }
  }
 else {
    input=InternalSettingsPreparer.class.getResourceAsStream("/config/names.txt");
  }
  try {
    List<String> names=new ArrayList<>();
    try (BufferedReader reader=new BufferedReader(new InputStreamReader(input,StandardCharsets.UTF_8))){
      String name=reader.readLine();
      while (name != null) {
        names.add(name);
        name=reader.readLine();
      }
    }
     int index=Randomness.get().nextInt(names.size());
    return names.get(index);
  }
 catch (  IOException e) {
    throw new RuntimeException("Could not read node names list",e);
  }
}
