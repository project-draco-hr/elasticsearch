{
  if (indicesRouting == null) {
    throw new IllegalStateException("once build is called the builder cannot be reused");
  }
  for (  ObjectCursor<IndexRoutingTable> indexRoutingTable : indicesRouting.values()) {
    indicesRouting.put(indexRoutingTable.value.index(),indexRoutingTable.value.normalizeVersions());
  }
  RoutingTable table=new RoutingTable(version,indicesRouting.build());
  indicesRouting=null;
  return table;
}
