{
  super(settings);
  this.threadPool=threadPool;
  this.dumpMonitorService=dumpMonitorService;
  this.enabled=componentSettings.getAsBoolean("enabled",true);
  this.interval=componentSettings.getAsTime("interval",timeValueSeconds(1));
  MapBuilder<String,GcThreshold> gcThresholds=MapBuilder.newMapBuilder();
  Map<String,Settings> gcThresholdGroups=componentSettings.getGroups("gc");
  for (  Map.Entry<String,Settings> entry : gcThresholdGroups.entrySet()) {
    String name=entry.getKey();
    TimeValue warn=entry.getValue().getAsTime("warn",null);
    TimeValue info=entry.getValue().getAsTime("info",null);
    TimeValue debug=entry.getValue().getAsTime("debug",null);
    if (warn == null || info == null || debug == null) {
      logger.warn("ignoring gc_threshold for [{}], missing warn/info/debug values",name);
    }
 else {
      gcThresholds.put(name,new GcThreshold(name,warn.millis(),info.millis(),debug.millis()));
    }
  }
  if (!gcThresholds.containsKey("ParNew")) {
    gcThresholds.put("ParNew",new GcThreshold("ParNew",1000,700,400));
  }
  if (!gcThresholds.containsKey("ConcurrentMarkSweep")) {
    gcThresholds.put("ConcurrentMarkSweep",new GcThreshold("ConcurrentMarkSweep",10000,5000,2000));
  }
  if (!gcThresholds.containsKey("default")) {
    gcThresholds.put("default",new GcThreshold("default",10000,5000,2000));
  }
  this.gcThresholds=gcThresholds.immutableMap();
  logger.debug("enabled [{}], last_gc_enabled [{}], interval [{}], gc_threshold [{}]",enabled,JvmStats.isLastGcEnabled(),interval,this.gcThresholds);
}
