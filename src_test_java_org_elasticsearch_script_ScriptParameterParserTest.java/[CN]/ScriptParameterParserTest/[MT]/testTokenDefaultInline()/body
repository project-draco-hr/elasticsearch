{
  XContentParser parser=XContentHelper.createParser(new BytesArray("{ \"script\" : \"scriptValue\" }"));
  Token token=parser.nextToken();
  while (token != Token.VALUE_STRING) {
    token=parser.nextToken();
  }
  ScriptParameterParser paramParser=new ScriptParameterParser();
  assertThat(paramParser.token(parser.currentName(),parser.currentToken(),parser),equalTo(true));
  assertDefaultParameterValue(paramParser,"scriptValue",ScriptType.INLINE);
  assertThat(paramParser.lang(),nullValue());
  paramParser=new ScriptParameterParser(null);
  assertThat(paramParser.token(parser.currentName(),parser.currentToken(),parser),equalTo(true));
  assertDefaultParameterValue(paramParser,"scriptValue",ScriptType.INLINE);
  assertThat(paramParser.lang(),nullValue());
  paramParser=new ScriptParameterParser(new HashSet<String>());
  assertThat(paramParser.token(parser.currentName(),parser.currentToken(),parser),equalTo(true));
  assertDefaultParameterValue(paramParser,"scriptValue",ScriptType.INLINE);
  assertThat(paramParser.lang(),nullValue());
}
