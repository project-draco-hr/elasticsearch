{
  ExecutableScript executable=queryRewriteContext.getScriptService().executable(template,ScriptContext.Standard.SEARCH,Collections.emptyMap());
  BytesReference querySource=(BytesReference)executable.run();
  final QueryParseContext queryParseContext=queryRewriteContext.newParseContext();
  try (XContentParser qSourceParser=XContentFactory.xContent(querySource).createParser(querySource)){
    queryParseContext.reset(qSourceParser);
    final QueryBuilder<?> queryBuilder=queryParseContext.parseInnerQueryBuilder();
    if (queryBuilder.boost() == DEFAULT_BOOST) {
      queryBuilder.boost(boost());
    }
    if (queryName() != null) {
      queryBuilder.queryName(queryName());
    }
    return queryBuilder;
  }
 }
