{
  ExecutableScript executable=queryRewriteContext.getScriptService().executable(template,ScriptContext.Standard.SEARCH,Collections.emptyMap());
  BytesReference querySource=(BytesReference)executable.run();
  final QueryParseContext queryParseContext=queryRewriteContext.newParseContext();
  try (XContentParser qSourceParser=XContentFactory.xContent(querySource).createParser(querySource)){
    queryParseContext.reset(qSourceParser);
    final QueryBuilder<?> queryBuilder=queryParseContext.parseInnerQueryBuilder();
    if (boost() != DEFAULT_BOOST || queryName() != null) {
      final BoolQueryBuilder boolQueryBuilder=new BoolQueryBuilder();
      boolQueryBuilder.must(queryBuilder);
      return boolQueryBuilder;
    }
    return queryBuilder;
  }
 }
