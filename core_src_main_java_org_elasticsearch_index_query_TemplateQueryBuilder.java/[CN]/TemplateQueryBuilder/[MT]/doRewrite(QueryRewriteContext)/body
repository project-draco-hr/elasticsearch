{
  ExecutableScript executable=queryRewriteContext.getScriptService().executable(template,ScriptContext.Standard.SEARCH,Collections.emptyMap(),queryRewriteContext.getClusterState());
  BytesReference querySource=(BytesReference)executable.run();
  try (XContentParser qSourceParser=XContentFactory.xContent(querySource).createParser(querySource)){
    final QueryParseContext queryParseContext=queryRewriteContext.newParseContext(qSourceParser);
    final QueryBuilder queryBuilder=queryParseContext.parseInnerQueryBuilder();
    if (boost() != DEFAULT_BOOST || queryName() != null) {
      final BoolQueryBuilder boolQueryBuilder=new BoolQueryBuilder();
      boolQueryBuilder.must(queryBuilder);
      return boolQueryBuilder;
    }
    return queryBuilder;
  }
 }
