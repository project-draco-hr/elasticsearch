{
  long allowedNestedFields=indexSettings.getSettings().getAsLong(INDEX_MAPPING_NESTED_FIELDS_LIMIT_SETTING,50L);
  long actualNestedFields=0;
  for (  ObjectMapper objectMapper : fullPathObjectMappers.values()) {
    if (objectMapper.nested().isNested()) {
      actualNestedFields++;
    }
  }
  if (allowedNestedFields >= 0 && actualNestedFields > allowedNestedFields) {
    throw new IllegalArgumentException("Limit of nested fields [" + allowedNestedFields + "] in index ["+ index().name()+ "] has been exceeded");
  }
}
