{
  final ImmutableMap<String,FieldMapper> unmappedFieldMappers=this.unmappedFieldMappers;
  FieldMapper mapper=unmappedFieldMappers.get(type);
  if (mapper == null) {
    final Mapper.TypeParser.ParserContext parserContext=documentMapperParser().parserContext();
    Mapper.TypeParser typeParser=parserContext.typeParser(type);
    if (typeParser == null) {
      throw new IllegalArgumentException("No mapper found for type [" + type + "]");
    }
    final Mapper.Builder<?,?> builder=typeParser.parse("__anonymous_" + type,ImmutableMap.<String,Object>of(),parserContext);
    final BuilderContext builderContext=new BuilderContext(indexSettings,new ContentPath(1));
    mapper=(FieldMapper)builder.build(builderContext);
    this.unmappedFieldMappers=ImmutableMap.<String,FieldMapper>builder().putAll(unmappedFieldMappers).put(type,mapper).build();
  }
  return mapper;
}
