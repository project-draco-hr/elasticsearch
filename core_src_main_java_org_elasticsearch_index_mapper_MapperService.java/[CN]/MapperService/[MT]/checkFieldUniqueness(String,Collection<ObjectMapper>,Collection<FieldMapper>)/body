{
  final Set<String> objectFullNames=new HashSet<>();
  for (  ObjectMapper objectMapper : objectMappers) {
    final String fullPath=objectMapper.fullPath();
    if (objectFullNames.add(fullPath) == false) {
      throw new IllegalArgumentException("Object mapper [" + fullPath + "] is defined twice in mapping for type ["+ type+ "]");
    }
  }
  if (indexSettings.getIndexVersionCreated().before(Version.V_3_0_0)) {
    Collection<FieldMapper> uniqueFieldMappers=Collections.newSetFromMap(new IdentityHashMap<>());
    uniqueFieldMappers.addAll(fieldMappers);
    fieldMappers=uniqueFieldMappers;
  }
  final Set<String> fieldNames=new HashSet<>();
  for (  FieldMapper fieldMapper : fieldMappers) {
    final String name=fieldMapper.name();
    if (objectFullNames.contains(name)) {
      throw new IllegalArgumentException("Field [" + name + "] is defined both as an object and a field in ["+ type+ "]");
    }
 else     if (fieldNames.add(name) == false) {
      throw new IllegalArgumentException("Field [" + name + "] is defined twice in ["+ type+ "]");
    }
  }
}
