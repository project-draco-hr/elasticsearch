{
  super(index,indexSettings);
  this.analysisService=analysisService;
  this.fieldDataService=fieldDataService;
  this.fieldTypes=new FieldTypeLookup();
  this.documentParser=new DocumentMapperParser(index,indexSettings,this,analysisService,similarityLookupService,scriptService);
  this.indexAnalyzer=new MapperAnalyzerWrapper(analysisService.defaultIndexAnalyzer(),INDEX_ANALYZER_EXTRACTOR);
  this.searchAnalyzer=new MapperAnalyzerWrapper(analysisService.defaultSearchAnalyzer(),SEARCH_ANALYZER_EXTRACTOR);
  this.searchQuoteAnalyzer=new MapperAnalyzerWrapper(analysisService.defaultSearchQuoteAnalyzer(),SEARCH_QUOTE_ANALYZER_EXTRACTOR);
  this.dynamic=indexSettings.getAsBoolean("index.mapper.dynamic",true);
  defaultPercolatorMappingSource="{\n" + "\"_default_\":{\n" + "\"properties\" : {\n"+ "\"query\" : {\n"+ "\"type\" : \"object\",\n"+ "\"enabled\" : false\n"+ "}\n"+ "}\n"+ "}\n"+ "}";
  if (index.getName().equals(ScriptService.SCRIPT_INDEX)) {
    defaultMappingSource="{" + "\"_default_\": {" + "\"properties\": {"+ "\"script\": { \"enabled\": false },"+ "\"template\": { \"enabled\": false }"+ "}"+ "}"+ "}";
  }
 else {
    defaultMappingSource="{\"_default_\":{}}";
  }
  if (logger.isTraceEnabled()) {
    logger.trace("using dynamic[{}], default mapping source[{}], default percolator mapping source[{}]",dynamic,defaultMappingSource,defaultPercolatorMappingSource);
  }
 else   if (logger.isDebugEnabled()) {
    logger.debug("using dynamic[{}]",dynamic);
  }
}
