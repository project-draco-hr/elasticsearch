{
  XContentBuilder builder=jsonBuilder().startArray().startObject().startObject("context").field("lat",23.654242).field("lon",90.047153).endObject().field("boost",10).array("neighbours",1,2,3).endObject().startObject().startObject("context").field("lat",22.337374).field("lon",92.112583).endObject().field("boost",2).array("neighbours",3).endObject().endArray();
  XContentParser parser=XContentFactory.xContent(XContentType.JSON).createParser(builder.bytes());
  GeoContextMapping mapping=ContextBuilder.geo("geo").build();
  List<CategoryQueryContext> queryContexts=mapping.parseQueryContext(parser);
  Iterator<CategoryQueryContext> iterator=queryContexts.iterator();
  assertTrue(iterator.hasNext());
  GeoQueryContext queryContext=((GeoQueryContext)iterator.next());
  assertThat(queryContext.context.toString(),equalTo("wh0n94"));
  assertThat(queryContext.boost,equalTo(10));
  assertThat(queryContext.neighbours.length,equalTo(3));
  assertTrue(iterator.hasNext());
  queryContext=((GeoQueryContext)iterator.next());
  assertThat(queryContext.context.toString(),equalTo("w5cx04"));
  assertThat(queryContext.boost,equalTo(2));
  assertThat(queryContext.neighbours.length,equalTo(1));
}
