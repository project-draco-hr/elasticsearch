{
  if (numericType() != null) {
    throw new QueryShardException(context,"Cannot use regular expression to filter numeric field [" + name + "]");
  }
  RegexpQuery query=new RegexpQuery(new Term(name(),indexedValueForSearch(value)),flags,maxDeterminizedStates);
  if (method != null) {
    query.setRewriteMethod(method);
  }
  return query;
}
