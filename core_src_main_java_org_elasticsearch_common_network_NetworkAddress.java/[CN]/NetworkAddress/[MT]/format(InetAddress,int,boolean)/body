{
  Objects.requireNonNull(address);
  StringBuilder builder=new StringBuilder();
  if (includeHost) {
    String toString=address.toString();
    int separator=toString.indexOf('/');
    if (separator > 0) {
      builder.append(toString,0,separator + 1);
    }
  }
  if (port != -1 && address instanceof Inet6Address) {
    builder.append(InetAddresses.toUriString(address));
  }
 else {
    builder.append(InetAddresses.toAddrString(address));
  }
  if (port != -1) {
    builder.append(':');
    builder.append(port);
  }
  return builder.toString();
}
