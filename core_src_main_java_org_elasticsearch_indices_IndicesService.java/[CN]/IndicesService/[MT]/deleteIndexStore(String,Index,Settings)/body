{
  boolean success=false;
  try {
    logger.debug("{} deleting index store reason [{}]",index,reason);
    if (canDeleteIndexContents(index,indexSettings)) {
      nodeEnv.deleteIndexDirectorySafe(index,0,indexSettings);
    }
    success=true;
  }
 catch (  LockObtainFailedException ex) {
    logger.debug("{} failed to delete index store - at least one shards is still locked",ex,index);
  }
catch (  Exception ex) {
    logger.warn("{} failed to delete index",ex,index);
  }
 finally {
    if (success == false) {
      addPendingDelete(index,indexSettings);
    }
    MetaDataStateFormat.deleteMetaState(nodeEnv.indexPaths(index));
  }
}
