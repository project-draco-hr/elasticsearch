{
  boolean success=false;
  try {
    logger.debug("{} deleting index store reason [{}]",index,reason);
    if (predicate.apply(index,indexSettings)) {
      nodeEnv.deleteIndexDirectorySafe(index,0,indexSettings);
    }
    success=true;
  }
 catch (  LockObtainFailedException ex) {
    logger.debug(new ParameterizedMessage("{} failed to delete index store - at least one shards is still locked",index),ex);
  }
catch (  Exception ex) {
    logger.warn(new ParameterizedMessage("{} failed to delete index",index),ex);
  }
 finally {
    if (success == false) {
      addPendingDelete(index,indexSettings);
    }
    MetaDataStateFormat.deleteMetaState(nodeEnv.indexPaths(index));
  }
}
