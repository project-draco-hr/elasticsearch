{
  if (fields == null) {
    return docMapper.sourceMapper().fieldSelector();
  }
  if (fields.length == 0) {
    return null;
  }
  FieldMappersFieldSelector fieldSelector=null;
  for (  String fieldName : fields) {
    FieldMappers x=docMapper.mappers().smartName(fieldName);
    if (x != null && x.mapper().stored()) {
      if (fieldSelector == null) {
        fieldSelector=new FieldMappersFieldSelector();
      }
      fieldSelector.add(x);
    }
  }
  return fieldSelector;
}
