{
  if (fields == null) {
    return docMapper.sourceMapper().fieldSelector();
  }
  if (fields.length == 0) {
    return null;
  }
  FieldMappersFieldSelector fieldSelector=new FieldMappersFieldSelector();
  for (  String fieldName : fields) {
    FieldMappers x=docMapper.mappers().smartName(fieldName);
    if (x == null) {
      throw new ElasticSearchException("No mapping for field [" + fieldName + "] in type ["+ docMapper.type()+ "]");
    }
    fieldSelector.add(x);
  }
  return fieldSelector;
}
