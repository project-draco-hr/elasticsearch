{
  String host="localhost";
  String port="5984";
  String db="mytest";
  boolean ignoreAttachements=true;
  Node node=NodeBuilder.nodeBuilder().settings(ImmutableSettings.settingsBuilder().put("gateway.type","local")).node();
  Thread.sleep(1000);
  try {
    node.client().admin().indices().delete(new DeleteIndexRequest("_river")).actionGet();
  }
 catch (  IndexMissingException e) {
  }
  Thread.sleep(1000);
  try {
    node.client().admin().indices().delete(new DeleteIndexRequest(db)).actionGet();
  }
 catch (  IndexMissingException e) {
  }
  XContentBuilder xb=jsonBuilder().startObject().field("type","couchdb").startObject("couchdb").field("host",host).field("port",port).field("db",db).field("ignoreAttachements",ignoreAttachements).endObject().endObject();
  node.client().prepareIndex("_river",db,"_meta").setSource(xb).execute().actionGet();
  Thread.sleep(100000);
}
