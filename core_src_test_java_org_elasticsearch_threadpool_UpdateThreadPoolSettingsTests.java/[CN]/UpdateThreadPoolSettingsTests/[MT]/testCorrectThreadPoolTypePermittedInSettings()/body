{
  String threadPoolName=randomThreadPoolName();
  ThreadPool.ThreadPoolType correctThreadPoolType=ThreadPool.THREAD_POOL_TYPES.get(threadPoolName);
  ThreadPool threadPool=null;
  try {
    threadPool=new ThreadPool(settingsBuilder().put("name","testCorrectThreadPoolTypePermittedInSettings").put("threadpool." + threadPoolName + ".type",correctThreadPoolType.getType()).build());
    assertEquals(info(threadPool,threadPoolName).getThreadPoolType(),correctThreadPoolType);
  }
  finally {
    terminateThreadPoolIfNeeded(threadPool);
  }
}
