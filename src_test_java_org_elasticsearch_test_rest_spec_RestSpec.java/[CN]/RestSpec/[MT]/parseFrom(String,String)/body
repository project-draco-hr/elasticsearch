{
  RestSpec restSpec=new RestSpec();
  for (  String path : paths) {
    for (    Path jsonFile : FileUtils.findJsonSpec(optionalPathPrefix,path)) {
      try (InputStream stream=Files.newInputStream(jsonFile)){
        XContentParser parser=JsonXContent.jsonXContent.createParser(stream);
        RestApi restApi=new RestApiParser().parse(parser);
        if (restApi.getMethods().contains("GET") && restApi.isBodySupported()) {
          if (!restApi.getMethods().contains("POST")) {
            throw new IllegalArgumentException(restApi.getName() + " supports GET with a body but doesn't support POST");
          }
          if (!restApi.getParams().contains("source")) {
            throw new IllegalArgumentException(restApi.getName() + " supports GET with a body but doesn't support the source query string parameter");
          }
        }
        restSpec.addApi(restApi);
      }
 catch (      Throwable ex) {
        throw new IOException("Can't parse rest spec file: [" + jsonFile + "]",ex);
      }
    }
  }
  return restSpec;
}
