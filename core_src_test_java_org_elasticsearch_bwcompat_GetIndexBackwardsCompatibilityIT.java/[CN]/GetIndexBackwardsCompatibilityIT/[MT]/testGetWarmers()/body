{
  createIndex("test");
  ensureSearchable("test");
  assertAcked(client().admin().indices().preparePutWarmer("warmer1").setSearchRequest(client().prepareSearch("test")).get());
  ensureSearchable("test");
  GetIndexResponse getIndexResponse=client().admin().indices().prepareGetIndex().addIndices("test").addFeatures(Feature.WARMERS).execute().actionGet();
  ImmutableOpenMap<String,List<Entry>> warmersMap=getIndexResponse.warmers();
  assertThat(warmersMap,notNullValue());
  assertThat(warmersMap.size(),equalTo(1));
  List<Entry> warmersList=warmersMap.get("test");
  assertThat(warmersList,notNullValue());
  assertThat(warmersList.size(),equalTo(1));
  Entry warmer=warmersList.get(0);
  assertThat(warmer,notNullValue());
  assertThat(warmer.name(),equalTo("warmer1"));
}
