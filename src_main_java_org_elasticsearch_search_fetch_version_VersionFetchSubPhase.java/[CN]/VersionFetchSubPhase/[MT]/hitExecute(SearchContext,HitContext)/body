{
  long version;
  try {
    BytesRef uid=Uid.createUidAsBytes(hitContext.hit().type(),hitContext.hit().id());
    version=Versions.loadVersion(hitContext.readerContext().reader(),new Term(UidFieldMapper.NAME,uid));
  }
 catch (  IOException e) {
    throw new ElasticsearchException("Could not query index for _version",e);
  }
  if (version < 0) {
    version=-1;
  }
  hitContext.hit().version(version);
}
