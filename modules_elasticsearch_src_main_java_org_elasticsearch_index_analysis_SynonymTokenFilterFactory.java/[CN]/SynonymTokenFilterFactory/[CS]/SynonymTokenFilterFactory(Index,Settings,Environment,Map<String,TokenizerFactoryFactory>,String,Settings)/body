{
  super(index,indexSettings,name,settings);
  List<String> rules=Analysis.getWordList(env,settings,"synonyms");
  if (rules == null) {
    throw new ElasticSearchIllegalArgumentException("synonym requires either `synonyms` or `synonyms_path` to be configured");
  }
  boolean ignoreCase=settings.getAsBoolean("ignore_case",false);
  boolean expand=settings.getAsBoolean("expand",true);
  TokenizerFactoryFactory tokenizerFactoryFactory=tokenizerFactories.get(settings.get("tokenizer","whitespace"));
  TokenizerFactory tokenizerFactory=tokenizerFactoryFactory.create(settings.get("tokenizer","whitespace"),settings);
  synonymMap=new SynonymMap(ignoreCase);
  parseRules(rules,synonymMap,"=>",",",expand,tokenizerFactory);
}
