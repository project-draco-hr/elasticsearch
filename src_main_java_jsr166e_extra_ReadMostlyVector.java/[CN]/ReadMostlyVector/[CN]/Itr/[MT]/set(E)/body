{
  int i=lastRet;
  Object[] es=items;
  if (es == null || i < 0 | i >= fence)   throw new IllegalStateException();
  if ((seq=lock.tryConvertToWriteLock(seq)) == 0)   throw new ConcurrentModificationException();
  try {
    es[i]=e;
  }
  finally {
    seq=lock.tryConvertToOptimisticRead(seq);
  }
}
