{
  Object[] items;
  int newCapacity;
  if ((items=array) == null)   newCapacity=INITIAL_CAP;
 else {
    int oldCapacity=array.length;
    newCapacity=oldCapacity + ((capacityIncrement > 0) ? capacityIncrement : oldCapacity);
  }
  if (newCapacity - minCapacity < 0)   newCapacity=minCapacity;
  if (newCapacity - MAX_ARRAY_SIZE > 0) {
    if (minCapacity < 0)     throw new OutOfMemoryError();
 else     if (minCapacity > MAX_ARRAY_SIZE)     newCapacity=Integer.MAX_VALUE;
 else     newCapacity=MAX_ARRAY_SIZE;
  }
  return array=((items == null) ? new Object[newCapacity] : Arrays.copyOf(items,newCapacity));
}
