{
  final SequenceLock lock=this.lock;
  lock.lock();
  try {
    Object[] items=array;
    if (index < 0 || index >= count)     throw new ArrayIndexOutOfBoundsException(index);
    @SuppressWarnings("unchecked") E oldValue=(E)items[index];
    items[index]=element;
    return oldValue;
  }
  finally {
    lock.unlock();
  }
}
