{
  final SequenceLock lock=this.lock;
  long seq=lock.awaitAvailability();
  Object[] items=array;
  int n=count;
  int idx=-1;
  if (index < Math.min(n,items.length))   idx=validatedLastIndexOf(o,items,index,0,seq);
  if (lock.getSequence() != seq) {
    lock.lock();
    try {
      n=count;
      if (index < n)       idx=rawLastIndexOf(o,index,0);
    }
  finally {
      lock.unlock();
    }
  }
  if (index >= n)   throw new IndexOutOfBoundsException(index + " >= " + n);
  return idx;
}
