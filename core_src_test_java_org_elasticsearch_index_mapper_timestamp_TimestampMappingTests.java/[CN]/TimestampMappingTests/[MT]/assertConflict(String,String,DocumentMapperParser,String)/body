{
  DocumentMapper docMapper=parser.parse(mapping1);
  docMapper=parser.parse(docMapper.mappingSource().string());
  if (conflict == null) {
    docMapper.merge(parser.parse(mapping2).mapping(),true,false);
  }
 else {
    try {
      docMapper.merge(parser.parse(mapping2).mapping(),true,false);
      fail();
    }
 catch (    IllegalArgumentException e) {
      assertThat(e.getMessage(),containsString(conflict));
    }
  }
}
