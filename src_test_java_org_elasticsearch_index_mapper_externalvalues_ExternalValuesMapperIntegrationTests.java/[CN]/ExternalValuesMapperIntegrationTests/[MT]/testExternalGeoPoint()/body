{
  prepareCreate("test-idx").addMapping("doc",createMapping()).execute().get();
  ensureYellow("test-idx");
  index("test-idx","doc","1","external","dummy");
  refresh();
  SearchResponse response;
  response=client().prepareSearch("test-idx").setPostFilter(FilterBuilders.termFilter("external.bool","T")).execute().actionGet();
  assertThat(response.getHits().totalHits(),equalTo((long)1));
  response=client().prepareSearch("test-idx").setPostFilter(FilterBuilders.geoDistanceRangeFilter("external.point").point(42.0,51.0).to("1km")).execute().actionGet();
  assertThat(response.getHits().totalHits(),equalTo((long)1));
  response=client().prepareSearch("test-idx").setPostFilter(FilterBuilders.geoShapeFilter("external.shape",ShapeBuilder.newPoint(-100,45),ShapeRelation.WITHIN)).execute().actionGet();
  assertThat(response.getHits().totalHits(),equalTo((long)1));
}
