{
  long value;
  if (context.externalValueSet()) {
    Object externalValue=context.externalValue();
    if (externalValue == null) {
      if (nullValue == null) {
        return null;
      }
      value=nullValue;
    }
 else {
      value=((Number)externalValue).longValue();
    }
    if (includeInAll == null || includeInAll) {
      context.allEntries().addText(names.fullName(),Long.toString(value),boost);
    }
  }
 else {
    if (context.parser().currentToken() == XContentParser.Token.VALUE_NULL) {
      if (nullValue == null) {
        return null;
      }
      value=nullValue;
      if (nullValueAsString != null && (includeInAll == null || includeInAll)) {
        context.allEntries().addText(names.fullName(),nullValueAsString,boost);
      }
    }
 else {
      value=context.parser().longValue();
      if (includeInAll == null || includeInAll) {
        context.allEntries().addText(names.fullName(),context.parser().text(),boost);
      }
    }
  }
  final long fValue=value;
  return new CustomNumericField(names.indexName(),indexed(),stored() ? Numbers.longToBytes(value) : null){
    @Override public TokenStream tokenStreamValue(){
      if (indexed()) {
        return popCachedStream(precisionStep).setLongValue(fValue);
      }
 else {
        return null;
      }
    }
  }
;
}
