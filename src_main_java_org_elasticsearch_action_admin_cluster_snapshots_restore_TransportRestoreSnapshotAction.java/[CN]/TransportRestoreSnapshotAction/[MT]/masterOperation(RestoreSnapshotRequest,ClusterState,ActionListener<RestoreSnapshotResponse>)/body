{
  RestoreService.RestoreRequest restoreRequest=new RestoreService.RestoreRequest("restore_snapshot[" + request.snapshot() + "]",request.repository(),request.snapshot(),request.indices(),request.indicesOptions(),request.renamePattern(),request.renameReplacement(),request.settings(),request.masterNodeTimeout(),request.includeGlobalState(),request.partial());
  restoreService.restoreSnapshot(restoreRequest,new RestoreSnapshotListener(){
    @Override public void onResponse(    RestoreInfo restoreInfo){
      if (restoreInfo == null) {
        if (request.waitForCompletion()) {
          restoreService.addListener(new RestoreService.RestoreCompletionListener(){
            SnapshotId snapshotId=new SnapshotId(request.repository(),request.snapshot());
            @Override public void onRestoreCompletion(            SnapshotId snapshotId,            RestoreInfo snapshot){
              if (this.snapshotId.equals(snapshotId)) {
                listener.onResponse(new RestoreSnapshotResponse(snapshot));
                restoreService.removeListener(this);
              }
            }
          }
);
        }
 else {
          listener.onResponse(new RestoreSnapshotResponse(null));
        }
      }
 else {
        listener.onResponse(new RestoreSnapshotResponse(restoreInfo));
      }
    }
    @Override public void onFailure(    Throwable t){
      listener.onFailure(t);
    }
  }
);
}
