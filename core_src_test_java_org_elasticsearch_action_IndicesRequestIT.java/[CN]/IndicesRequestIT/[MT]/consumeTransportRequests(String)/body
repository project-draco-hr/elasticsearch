{
  List<TransportRequest> requests=new ArrayList<>();
  Iterable<TransportService> transportServices=internalCluster().getInstances(TransportService.class);
  for (  TransportService transportService : transportServices) {
    List<TransportRequest> transportRequests=((InterceptingTransportService)transportService).consumeRequests(action);
    if (transportRequests != null) {
      requests.addAll(transportRequests);
    }
  }
  return requests;
}
