{
  super.writeTo(out);
  if (out.getVersion().before(Version.V_1_4_0_Beta)) {
    request.index(shardId.getIndex());
  }
  request.writeTo(out);
  if (out.getVersion().onOrAfter(Version.V_1_4_0_Beta)) {
    shardId.writeTo(out);
  }
 else {
    out.writeVInt(shardId.id());
  }
}
