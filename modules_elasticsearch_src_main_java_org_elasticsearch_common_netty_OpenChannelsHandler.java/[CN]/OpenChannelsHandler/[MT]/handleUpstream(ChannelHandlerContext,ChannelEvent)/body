{
  if (e instanceof ChannelStateEvent) {
    ChannelStateEvent evt=(ChannelStateEvent)e;
    if (evt.getState() == ChannelState.OPEN) {
      boolean added=openChannels.add(ctx.getChannel());
      if (added) {
        openChannelsMetric.inc();
        ctx.getChannel().getCloseFuture().addListener(remover);
      }
    }
  }
  ctx.sendUpstream(e);
}
