{
  IndexService indexService=indicesService.indexServiceSafe(request.shardId().getIndex());
  IndexShard indexShard=indexService.shardSafe(request.shardId().id());
  if (indexShard.routingEntry().primary() == false) {
    throw new IndexShardException(request.shardId(),"expected a primary shard");
  }
  int opCount=0;
  logger.trace("{} in flight operations sampled at [{}]",request.shardId(),opCount);
  return new InFlightOpsResponse(opCount);
}
