{
  XContentBuilder builder=jsonBuilder().startObject().field("file").startObject();
  if (base64text != null) {
    builder.field("_content",base64text);
  }
 else {
    byte[] bytes=copyToBytes(PathUtils.get(url));
    builder.field("_content",bytes);
  }
  if (size >= 0) {
    builder.field("_indexed_chars",size);
  }
  BytesReference json=builder.endObject().endObject().bytes();
  ParseContext.Document doc=docMapper.parse("person","person","1",json).rootDoc();
  terminal.println("## Extracted text");
  terminal.println("--------------------- BEGIN -----------------------");
  terminal.println("%s",doc.get("file.content"));
  terminal.println("---------------------- END ------------------------");
  terminal.println("## Metadata");
  printMetadataContent(doc,AttachmentMapper.FieldNames.AUTHOR);
  printMetadataContent(doc,AttachmentMapper.FieldNames.CONTENT_LENGTH);
  printMetadataContent(doc,AttachmentMapper.FieldNames.CONTENT_TYPE);
  printMetadataContent(doc,AttachmentMapper.FieldNames.DATE);
  printMetadataContent(doc,AttachmentMapper.FieldNames.KEYWORDS);
  printMetadataContent(doc,AttachmentMapper.FieldNames.LANGUAGE);
  printMetadataContent(doc,AttachmentMapper.FieldNames.NAME);
  printMetadataContent(doc,AttachmentMapper.FieldNames.TITLE);
  return ExitStatus.OK;
}
