{
  HttpGet httpGet=new HttpGet("/_nodes/http?timeout=" + sniffRequestTimeout + "ms");
  httpGet.setConfig(sniffRequestConfig);
  try (CloseableHttpResponse response=client.execute(node.getHttpHost(),httpGet)){
    StatusLine statusLine=response.getStatusLine();
    if (statusLine.getStatusCode() >= 300) {
      RequestLogger.log(logger,"sniff failed",httpGet.getRequestLine(),node,statusLine);
      EntityUtils.consume(response.getEntity());
      throw new ElasticsearchResponseException(httpGet.getRequestLine(),node,statusLine);
    }
 else {
      List<Node> nodes=readNodes(response.getEntity());
      RequestLogger.log(logger,"sniff succeeded",httpGet.getRequestLine(),node,statusLine);
      return nodes;
    }
  }
 catch (  IOException e) {
    RequestLogger.log(logger,"sniff failed",httpGet.getRequestLine(),node,e);
    throw e;
  }
}
