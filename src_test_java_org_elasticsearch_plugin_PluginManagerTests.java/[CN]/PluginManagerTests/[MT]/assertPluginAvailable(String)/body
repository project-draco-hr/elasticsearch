{
  HttpServerTransport httpServerTransport=cluster().getInstance(HttpServerTransport.class);
  final HttpClient httpClient=new HttpClient(httpServerTransport.boundAddress().publishAddress());
  logger.info("--> tested http address [{}]",httpServerTransport.info().getAddress());
  assertThat(awaitBusy(new Predicate<Object>(){
    public boolean apply(    Object obj){
      HttpClientResponse response=httpClient.request("");
      if (response.errorCode() != RestStatus.OK.getStatus()) {
        logger.info("--> error caught [{}], headers [{}]",response.errorCode(),response.getHeaders());
        logger.info("--> cluster state [{}]",cluster().clusterService().state());
        return false;
      }
      return true;
    }
  }
,5,TimeUnit.SECONDS),equalTo(true));
  HttpClientResponse response=httpClient.request("_plugin/" + pluginName + "/");
  assertThat(response,notNullValue());
  assertThat(response.errorCode(),equalTo(RestStatus.OK.getStatus()));
}
