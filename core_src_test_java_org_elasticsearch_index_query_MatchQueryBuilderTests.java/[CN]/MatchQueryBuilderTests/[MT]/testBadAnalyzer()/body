{
  MatchQueryBuilder matchQuery=new MatchQueryBuilder("fieldName","text");
  matchQuery.analyzer("bogusAnalyzer");
  try {
    matchQuery.toQuery(createShardContext());
    fail("Expected QueryShardException");
  }
 catch (  QueryShardException e) {
    assertThat(e.getMessage(),containsString("analyzer [bogusAnalyzer] not found"));
  }
}
