{
  builder.startObject(Fields._SHARDS);
  builder.field(Fields.TOTAL,total);
  builder.field(Fields.SUCCESSFUL,successful);
  builder.field(Fields.FAILED,failed);
  if (shardFailures != null && shardFailures.length > 0) {
    builder.startArray(Fields.FAILURES);
    for (    ShardOperationFailedException shardFailure : shardFailures) {
      builder.startObject();
      if (shardFailure.index() != null) {
        builder.field(Fields.INDEX,shardFailure.index(),XContentBuilder.FieldCaseConversion.NONE);
      }
      if (shardFailure.shardId() != -1) {
        builder.field(Fields.SHARD,shardFailure.shardId());
      }
      builder.field(Fields.STATUS,shardFailure.status().getStatus());
      builder.field(Fields.REASON,shardFailure.reason());
      builder.endObject();
    }
    builder.endArray();
  }
  builder.endObject();
}
