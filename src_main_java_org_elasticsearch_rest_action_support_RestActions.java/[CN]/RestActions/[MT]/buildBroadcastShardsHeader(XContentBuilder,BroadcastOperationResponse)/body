{
  builder.startObject(Fields._SHARDS);
  builder.field(Fields.TOTAL,response.getTotalShards());
  builder.field(Fields.SUCCESSFUL,response.getSuccessfulShards());
  builder.field(Fields.FAILED,response.getFailedShards());
  if (response.getShardFailures() != null && response.getShardFailures().length > 0) {
    builder.startArray(Fields.FAILURES);
    for (    ShardOperationFailedException shardFailure : response.getShardFailures()) {
      builder.startObject();
      if (shardFailure.index() != null) {
        builder.field(Fields.INDEX,shardFailure.index(),XContentBuilder.FieldCaseConversion.NONE);
      }
      if (shardFailure.shardId() != -1) {
        builder.field(Fields.SHARD,shardFailure.shardId());
      }
      builder.field(Fields.REASON,shardFailure.reason());
      builder.endObject();
    }
    builder.endArray();
  }
  builder.endObject();
}
