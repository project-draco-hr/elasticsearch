{
  List<InternalAggregation> aggregations=reduceContext.aggregations();
  if (aggregations.size() == 1) {
    InternalSingleBucketAggregation reduced=((InternalSingleBucketAggregation)aggregations.get(0));
    reduced.aggregations.reduce(reduceContext.cacheRecycler());
    return reduced;
  }
  InternalSingleBucketAggregation reduced=null;
  List<InternalAggregations> subAggregationsList=new ArrayList<InternalAggregations>(aggregations.size());
  for (  InternalAggregation aggregation : aggregations) {
    if (reduced == null) {
      reduced=(InternalSingleBucketAggregation)aggregation;
    }
 else {
      this.docCount+=((InternalSingleBucketAggregation)aggregation).docCount;
    }
    subAggregationsList.add(((InternalSingleBucketAggregation)aggregation).aggregations);
  }
  reduced.aggregations=InternalAggregations.reduce(subAggregationsList,reduceContext.cacheRecycler());
  return reduced;
}
