{
  final GetIndexedScriptRequest getRequest=new GetIndexedScriptRequest(getScriptLang(request),request.param("id"));
  getRequest.version(request.paramAsLong("version",getRequest.version()));
  getRequest.versionType(VersionType.fromString(request.param("version_type"),getRequest.versionType()));
  client.getIndexedScript(getRequest,new RestBuilderListener<GetIndexedScriptResponse>(channel){
    @Override public RestResponse buildResponse(    GetIndexedScriptResponse response,    XContentBuilder builder) throws Exception {
      builder.startObject();
      builder.field(Fields.LANG,response.getScriptLang());
      builder.field(Fields._ID,response.getId());
      builder.field(Fields.FOUND,response.isExists());
      RestStatus status=RestStatus.NOT_FOUND;
      if (response.isExists()) {
        builder.field(Fields._VERSION,response.getVersion());
        builder.field(getScriptFieldName(),response.getScript());
        status=RestStatus.OK;
      }
      builder.endObject();
      return new BytesRestResponse(status,builder);
    }
  }
);
}
