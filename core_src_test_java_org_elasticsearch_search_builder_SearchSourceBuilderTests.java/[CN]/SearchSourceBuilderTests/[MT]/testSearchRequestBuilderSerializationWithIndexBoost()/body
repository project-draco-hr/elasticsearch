{
  SearchSourceBuilder searchSourceBuilder=createSearchSourceBuilder();
  createIndexBoost(searchSourceBuilder);
  try (BytesStreamOutput output=new BytesStreamOutput()){
    searchSourceBuilder.writeTo(output);
    try (StreamInput in=new NamedWriteableAwareStreamInput(output.bytes().streamInput(),namedWriteableRegistry)){
      SearchSourceBuilder deserializedSearchSourceBuilder=new SearchSourceBuilder(in);
      BytesStreamOutput deserializedOutput=new BytesStreamOutput();
      deserializedSearchSourceBuilder.writeTo(deserializedOutput);
      assertEquals(output.bytes(),deserializedOutput.bytes());
    }
   }
 }
