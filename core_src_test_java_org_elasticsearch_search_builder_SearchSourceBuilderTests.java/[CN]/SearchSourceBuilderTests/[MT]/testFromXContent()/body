{
  SearchSourceBuilder testBuilder=createSearchSourceBuilder();
  String builderAsString=testBuilder.toString();
  XContentParser parser=XContentFactory.xContent(builderAsString).createParser(builderAsString);
  SearchSourceBuilder newBuilder=SearchSourceBuilder.PROTOTYPE.fromXContent(parser,createParseContext(parser));
  assertNotSame(testBuilder,newBuilder);
  assertEquals(testBuilder,newBuilder);
  assertEquals(testBuilder.hashCode(),newBuilder.hashCode());
}
