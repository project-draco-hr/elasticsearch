{
  XContentParser parser=XContentFactory.xContent(builderAsString).createParser(builderAsString);
  QueryParseContext parseContext=createParseContext(parser);
  parseContext.reset(parser);
  if (randomBoolean()) {
    parser.nextToken();
  }
  SearchSourceBuilder newBuilder=SearchSourceBuilder.parseSearchSource(parser,parseContext);
  assertNotSame(testBuilder,newBuilder);
  assertEquals(testBuilder,newBuilder);
  assertEquals(testBuilder.hashCode(),newBuilder.hashCode());
}
