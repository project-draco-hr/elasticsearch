{
  Settings settings=Settings.settingsBuilder().put("name",SearchSourceBuilderTests.class.toString()).put("path.home",createTempDir()).build();
  injector=new ModulesBuilder().add(new SettingsModule(settings,new SettingsFilter(settings)),new ThreadPoolModule(new ThreadPool(settings)),new IndicesModule(){
    @Override public void configure(){
      bindQueryParsersExtension();
    }
  }
,new AbstractModule(){
    @Override protected void configure(){
      Multibinder.newSetBinder(binder(),ScoreFunctionParser.class);
      bind(NamedWriteableRegistry.class).asEagerSingleton();
    }
  }
).createInjector();
  indicesQueriesRegistry=injector.getInstance(IndicesQueriesRegistry.class);
  namedWriteableRegistry=injector.getInstance(NamedWriteableRegistry.class);
}
