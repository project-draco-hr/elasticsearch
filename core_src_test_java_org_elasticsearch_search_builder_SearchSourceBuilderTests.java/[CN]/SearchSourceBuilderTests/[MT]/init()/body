{
  Settings settings=Settings.settingsBuilder().put("node.name",SearchSourceBuilderTests.class.toString()).put(Environment.PATH_HOME_SETTING.getKey(),createTempDir()).build();
  namedWriteableRegistry=new NamedWriteableRegistry();
  injector=new ModulesBuilder().add(new SettingsModule(settings),new ThreadPoolModule(new ThreadPool(settings)),new SearchModule(settings,namedWriteableRegistry){
    @Override protected void configureSearch(){
    }
    @Override protected void configureAggs(    IndicesQueriesRegistry indicesQueriesRegistry){
    }
    @Override protected void configureSuggesters(){
    }
  }
,new AbstractModule(){
    @Override protected void configure(){
      Multibinder.newSetBinder(binder(),ScoreFunctionParser.class);
      bind(NamedWriteableRegistry.class).toInstance(namedWriteableRegistry);
    }
  }
).createInjector();
  indicesQueriesRegistry=injector.getInstance(IndicesQueriesRegistry.class);
}
