{
  if (desc.getName().equals(EXCEPTION_CLASSNAME)) {
    write(TYPE_EXCEPTION);
  }
 else   if (desc.getName().equals(STACKTRACEELEMENT_CLASSNAME)) {
    write(TYPE_STACKTRACEELEMENT);
  }
 else {
    Class<?> clazz=desc.forClass();
    if (clazz.isPrimitive() || clazz.isArray()) {
      write(TYPE_FAT_DESCRIPTOR);
      super.writeClassDescriptor(desc);
    }
 else {
      write(TYPE_THIN_DESCRIPTOR);
      writeUTF(desc.getName());
    }
  }
}
