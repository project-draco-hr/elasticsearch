{
  try {
    startLatch.await();
  }
 catch (  InterruptedException e) {
    throw new RuntimeException();
  }
  int numRuns=scaledRandomIntBetween(500,5000);
  for (int i=0; i < numRuns; i++) {
    String curName=names[randomInt(names.length - 1)];
    connectionLock.acquire(curName);
    try {
      Integer integer=counter.get(curName);
      if (integer == null) {
        counter.put(curName,1);
      }
 else {
        counter.put(curName,integer.intValue() + 1);
      }
    }
  finally {
      connectionLock.release(curName);
    }
    AtomicInteger atomicInteger=new AtomicInteger(0);
    AtomicInteger value=safeCounter.putIfAbsent(curName,atomicInteger);
    if (value == null) {
      atomicInteger.incrementAndGet();
    }
 else {
      value.incrementAndGet();
    }
  }
}
