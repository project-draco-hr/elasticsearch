{
  final int BUFFER_LEN=_outputBuffer.length;
  int free=BUFFER_LEN - _position;
  if (free >= length) {
    System.arraycopy(buffer,offset,_outputBuffer,_position,length);
    _position+=length;
    return;
  }
  System.arraycopy(buffer,offset,_outputBuffer,_position,free);
  offset+=free;
  length-=free;
  _position+=free;
  writeCompressedBlock();
  while (length >= BUFFER_LEN) {
    _encoder.encodeAndWriteChunk(buffer,offset,BUFFER_LEN,_outputStream);
    offset+=BUFFER_LEN;
    length-=BUFFER_LEN;
  }
  if (length > 0) {
    System.arraycopy(buffer,offset,_outputBuffer,0,length);
  }
  _position=length;
}
