{
  List<CategoryQueryContext> queryContextList=new ArrayList<>();
  for (  CategoryQueryContext queryContext : queryContexts) {
    GeoQueryContext geoQueryContext=((GeoQueryContext)queryContext);
    int precision=Math.min(this.precision,geoQueryContext.context.length());
    String truncatedGeohash=geoQueryContext.context.toString().substring(0,precision);
    queryContextList.add(new CategoryQueryContext(truncatedGeohash,geoQueryContext.boost,false));
    for (    int neighboursPrecision : geoQueryContext.neighbours) {
      int neighbourPrecision=Math.min(neighboursPrecision,truncatedGeohash.length());
      String neighbourGeohash=truncatedGeohash.substring(0,neighbourPrecision);
      Collection<String> locations=new HashSet<>();
      GeoHashUtils.addNeighbors(neighbourGeohash,neighbourPrecision,locations);
      boolean isPrefix=neighbourPrecision < precision;
      for (      String location : locations) {
        queryContextList.add(new CategoryQueryContext(location,geoQueryContext.boost,isPrefix));
      }
    }
  }
  return queryContextList;
}
