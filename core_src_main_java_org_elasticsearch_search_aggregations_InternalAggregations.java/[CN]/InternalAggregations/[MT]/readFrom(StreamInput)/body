{
  int size=in.readVInt();
  if (size == 0) {
    aggregations=Collections.emptyList();
    aggregationsAsMap=emptyMap();
  }
 else {
    aggregations=new ArrayList<>(size);
    for (int i=0; i < size; i++) {
      BytesReference type=in.readBytesReference();
      InternalAggregation aggregation=AggregationStreams.stream(type).readResult(in);
      aggregations.add(aggregation);
    }
  }
}
