{
  SearchResponse response=client().prepareSearch("idx").addAggregation(filter("tag1").filter(termFilter("tag","tag1"))).execute().actionGet();
  assertThat(response.getFailedShards(),equalTo(0));
  Filter filter=response.getAggregations().get("tag1");
  assertThat(filter,notNullValue());
  assertThat(filter.getName(),equalTo("tag1"));
  assertThat(filter.getDocCount(),equalTo((long)numTag1Docs));
}
