{
  totalHits=in.readVLong();
  maxScore=in.readFloat();
  int size=in.readVInt();
  if (size == 0) {
    hits=EMPTY;
  }
 else {
    if (context.streamShardTarget() == StreamContext.ShardTargetType.LOOKUP) {
      final IntObjectOpenHashMap<SearchShardTarget> handleShardLookup=context.handleShardLookup();
      final int lookupSize=in.readVInt();
      if (in.getVersion().onOrAfter(Version.V_1_4_0)) {
        for (int i=0; i < lookupSize; i++) {
          handleShardLookup.put(i + 1,readSearchShardTarget(in));
        }
      }
 else {
        for (int i=0; i < lookupSize; i++) {
          handleShardLookup.put(in.readVInt(),readSearchShardTarget(in));
        }
      }
    }
    hits=new InternalSearchHit[size];
    for (int i=0; i < hits.length; i++) {
      hits[i]=readSearchHit(in,context);
    }
  }
}
