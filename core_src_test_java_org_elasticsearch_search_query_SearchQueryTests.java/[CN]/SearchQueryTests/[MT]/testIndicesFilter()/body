{
  createIndex("index1","index2","index3");
  client().prepareIndex("index1","type1").setId("1").setSource("text","value1").get();
  client().prepareIndex("index2","type2").setId("2").setSource("text","value2").get();
  client().prepareIndex("index3","type3").setId("3").setSource("text","value3").get();
  refresh();
  SearchResponse searchResponse=client().prepareSearch("index1","index2","index3").setPostFilter(indicesQuery(termQuery("text","value1"),"index1").noMatchQuery(termQuery("text","value2"))).get();
  assertHitCount(searchResponse,2l);
  assertSearchHits(searchResponse,"1","2");
  searchResponse=client().prepareSearch("index1","index2","index3").setPostFilter(indicesQuery(termQuery("text","value1"),"index1")).get();
  assertHitCount(searchResponse,3l);
  assertSearchHits(searchResponse,"1","2","3");
  searchResponse=client().prepareSearch("index1","index2","index3").setPostFilter(indicesQuery(termQuery("text","value1"),"index1").noMatchQuery("all")).get();
  assertHitCount(searchResponse,3l);
  assertSearchHits(searchResponse,"1","2","3");
  searchResponse=client().prepareSearch("index1","index2","index3").setPostFilter(indicesQuery(termQuery("text","value1"),"index1").noMatchQuery("none")).get();
  assertHitCount(searchResponse,1l);
  assertFirstHit(searchResponse,hasId("1"));
}
