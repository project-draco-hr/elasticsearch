{
  if (document.hasField(oldFieldName) == false) {
    throw new IllegalArgumentException("field [" + oldFieldName + "] doesn't exist");
  }
  if (document.hasField(newFieldName)) {
    throw new IllegalArgumentException("field [" + newFieldName + "] already exists");
  }
  Object oldValue=document.getFieldValue(oldFieldName,Object.class);
  document.setFieldValue(newFieldName,oldValue);
  try {
    document.removeField(oldFieldName);
  }
 catch (  Exception e) {
    document.removeField(newFieldName);
    throw e;
  }
}
