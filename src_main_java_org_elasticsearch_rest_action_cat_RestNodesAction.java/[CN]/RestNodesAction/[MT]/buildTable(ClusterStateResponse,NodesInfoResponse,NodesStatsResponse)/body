{
  Table table=new Table();
  table.startHeaders();
  table.addCell("id");
  table.addCell("ip");
  table.addCell("port");
  table.addCell("jdk");
  table.addCell("heapmax","text-align:right;");
  table.addCell("memmax","text-align:right;");
  table.addCell("uptime","text-align:right;");
  table.addCell("data/client");
  table.addCell("master");
  table.addCell("node");
  table.endHeaders();
  for (  DiscoveryNode node : state.getState().nodes()) {
    String masterId=state.getState().nodes().masterNodeId();
    NodeInfo info=nodesInfo.getNodesMap().get(node.id());
    NodeStats stats=nodesStats.getNodesMap().get(node.id());
    table.startRow();
    table.addCell(node.id());
    table.addCell(((InetSocketTransportAddress)node.address()).address().getAddress().getHostAddress());
    table.addCell(((InetSocketTransportAddress)node.address()).address().getPort());
    table.addCell(info.getJvm().version());
    table.addCell(info.getJvm().mem().heapMax());
    table.addCell(info.getOs().mem() == null ? null : info.getOs().mem().total());
    table.addCell(stats.getJvm().uptime());
    table.addCell(node.clientNode() ? "c" : node.dataNode() ? "d" : null);
    table.addCell(masterId.equals(node.id()) ? "*" : node.masterNode() ? "m" : null);
    table.addCell(node.name());
    table.endRow();
  }
  return table;
}
