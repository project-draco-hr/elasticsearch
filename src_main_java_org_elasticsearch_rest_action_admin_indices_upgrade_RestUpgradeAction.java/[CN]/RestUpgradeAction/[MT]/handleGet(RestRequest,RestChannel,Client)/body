{
  IndicesSegmentsRequest segsReq=new IndicesSegmentsRequest(Strings.splitStringByCommaToArray(request.param("index")));
  client.admin().indices().segments(segsReq,new RestBuilderListener<IndicesSegmentResponse>(channel){
    @Override public RestResponse buildResponse(    IndicesSegmentResponse response,    XContentBuilder builder) throws Exception {
      builder.startObject();
      for (      IndexSegments indexSegments : response.getIndices().values()) {
        builder.startObject(indexSegments.getIndex());
        buildUpgradeStatus(indexSegments,builder);
        builder.endObject();
      }
      builder.endObject();
      return new BytesRestResponse(OK,builder);
    }
  }
);
}
