{
  String mapping=XContentFactory.jsonBuilder().startObject().startObject("type").startObject("_ttl").field("enabled",true).endObject().endObject().endObject().string();
  Settings settings=Settings.builder().put(IndexMetaData.SETTING_VERSION_CREATED,Version.V_1_4_2.id).build();
  DocumentMapper docMapper=createIndex("test",settings).mapperService().documentMapperParser().parse("type",new CompressedXContent(mapping));
  XContentBuilder doc=XContentFactory.jsonBuilder().startObject().field("_ttl","2d").endObject();
  MappingMetaData mappingMetaData=new MappingMetaData(docMapper);
  IndexRequest request=new IndexRequest("test","type","1").source(doc);
  request.process(MetaData.builder().build(),mappingMetaData,true,"test");
  assertNull(request.ttl());
  assertNull(docMapper.parse("test","type","1",doc.bytes()).rootDoc().get("_ttl"));
}
