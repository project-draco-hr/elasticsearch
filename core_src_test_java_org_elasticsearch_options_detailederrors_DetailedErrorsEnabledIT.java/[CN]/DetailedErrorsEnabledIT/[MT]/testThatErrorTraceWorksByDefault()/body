{
  try (RestClient restClient=restClient()){
    try {
      restClient.performRequest("DELETE","/",Collections.singletonMap("error_trace","true"),null);
      fail("request should have failed");
    }
 catch (    ElasticsearchResponseException e) {
      ElasticsearchResponse response=e.getElasticsearchResponse();
      assertThat(response.getFirstHeader("Content-Type"),containsString("application/json"));
      assertThat(e.getResponseBody(),containsString("\"stack_trace\":\"[Validation Failed: 1: index / indices is missing;]; " + "nested: ActionRequestValidationException[Validation Failed: 1:"));
    }
    try {
      restClient.performRequest("DELETE","/",Collections.emptyMap(),null);
      fail("request should have failed");
    }
 catch (    ElasticsearchResponseException e) {
      ElasticsearchResponse response=e.getElasticsearchResponse();
      assertThat(response.getFirstHeader("Content-Type"),containsString("application/json"));
      assertThat(e.getResponseBody(),not(containsString("\"stack_trace\":\"[Validation Failed: 1: index / indices is missing;]; " + "nested: ActionRequestValidationException[Validation Failed: 1:")));
    }
  }
 }
