{
  XContentBuilder builder=XContentFactory.jsonBuilder().prettyPrint();
  builder.startObject();
  builder.startObject("geo_polygon");
  builder.startObject(GEO_POINT_FIELD_NAME);
  builder.startArray("points");
  builder.value("0,0");
  builder.value("0,90");
  builder.value("90,90");
  builder.value("90,0");
  builder.endArray();
  builder.endObject();
  builder.field("normalize",true);
  builder.endObject();
  builder.endObject();
  try {
    parseQuery(builder.string());
    fail("normalize is deprecated");
  }
 catch (  IllegalArgumentException ex) {
    assertEquals("Deprecated field [normalize] used, expected [coerce] instead",ex.getMessage());
  }
}
