{
  ListenableActionFuture<TestTaskPlugin.NodesResponse> future=TestTaskPlugin.TestTaskAction.INSTANCE.newRequestBuilder(client()).execute();
  try {
    TaskId taskId=waitForTestTaskStartOnAllNodes();
    Iterable<? extends Throwable> failures=wait.apply(taskId);
    for (    Throwable failure : failures) {
      assertNotNull(ExceptionsHelper.unwrap(failure,ElasticsearchTimeoutException.class,ReceiveTimeoutTransportException.class));
    }
  }
  finally {
    TestTaskPlugin.UnblockTestTasksAction.INSTANCE.newRequestBuilder(client()).get();
  }
  future.get();
}
