{
  ListenableActionFuture<TestTaskPlugin.NodesResponse> future=TestTaskPlugin.TestTaskAction.INSTANCE.newRequestBuilder(client()).execute();
  ListenableActionFuture<T> waitResponseFuture;
  TaskId taskId;
  try {
    taskId=waitForTestTaskStartOnAllNodes();
    waitResponseFuture=wait.apply(taskId);
  }
  finally {
    TestTaskPlugin.UnblockTestTasksAction.INSTANCE.newRequestBuilder(client()).get();
  }
  T waitResponse=waitResponseFuture.get();
  validator.accept(waitResponse);
  future.get();
}
