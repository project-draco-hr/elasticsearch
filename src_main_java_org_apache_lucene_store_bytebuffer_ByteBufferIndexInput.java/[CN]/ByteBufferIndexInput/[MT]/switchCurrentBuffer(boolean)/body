{
  if (currentBufferIndex >= file.numBuffers()) {
    if (enforceEOF) {
      throw new EOFException("Read past EOF (resource: " + this + ")");
    }
 else {
      currentBufferIndex--;
      currentBuffer.position(currentBuffer.limit());
    }
  }
 else {
    ByteBuffer buffer=file.getBuffer(currentBufferIndex);
    currentBuffer=buffer.asReadOnlyBuffer();
    currentBuffer.position(0);
    bufferStart=(long)BUFFER_SIZE * (long)currentBufferIndex;
    long buflen=length - bufferStart;
    if (buflen < BUFFER_SIZE) {
      currentBuffer.limit((int)buflen);
    }
    if (!currentBuffer.hasRemaining()) {
      if (enforceEOF) {
        throw new EOFException("Read past EOF (resource: " + this + ")");
      }
 else {
        currentBufferIndex--;
        currentBuffer.position(currentBuffer.limit());
      }
    }
  }
}
