{
  Directory dir=new RAMDirectory();
  IndexOutput out=compressed ? compressor.indexOutput(dir.createOutput("test")) : dir.createOutput("test");
  long pos1=out.getFilePointer();
  out.writeVInt(4);
  out.writeInt(1);
  long pos2=out.getFilePointer();
  out.writeVInt(8);
  long posX=out.getFilePointer();
  out.writeInt(2);
  out.writeInt(3);
  long pos3=out.getFilePointer();
  out.writeVInt(4);
  out.writeInt(4);
  out.close();
  IndexInput in=compressed ? compressor.indexInput(dir.openInput("test")) : dir.openInput("test");
  in.seek(pos2);
  int numBytes=in.readVInt();
  assertThat(in.getFilePointer(),equalTo(posX));
  in.seek(in.getFilePointer() + numBytes);
  assertThat(in.readVInt(),equalTo(4));
  assertThat(in.readInt(),equalTo(4));
}
