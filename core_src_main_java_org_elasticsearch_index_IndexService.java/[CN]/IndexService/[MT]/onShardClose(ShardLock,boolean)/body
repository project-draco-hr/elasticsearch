{
  if (deleted.get()) {
    try {
      if (ownsShard) {
        try {
          eventListener.beforeIndexShardDeleted(lock.getShardId(),indexSettings.getSettings());
        }
  finally {
          shardStoreDeleter.deleteShardStore("delete index",lock,indexSettings);
          eventListener.afterIndexShardDeleted(lock.getShardId(),indexSettings.getSettings());
        }
      }
    }
 catch (    IOException e) {
      shardStoreDeleter.addPendingDelete(lock.getShardId(),indexSettings);
      logger.debug("[{}] failed to delete shard content - scheduled a retry",e,lock.getShardId().id());
    }
  }
}
