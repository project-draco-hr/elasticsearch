{
  if (deleted.get()) {
    try {
      if (ownsShard) {
        try {
          indicesLifecycle.beforeIndexShardDeleted(lock.getShardId(),indexSettings);
        }
  finally {
          indicesServices.deleteShardStore("delete index",lock,indexSettings);
          indicesLifecycle.afterIndexShardDeleted(lock.getShardId(),indexSettings);
        }
      }
    }
 catch (    IOException e) {
      indicesServices.addPendingDelete(lock.getShardId(),indexSettings);
      logger.debug("[{}] failed to delete shard content - scheduled a retry",e,lock.getShardId().id());
    }
  }
}
