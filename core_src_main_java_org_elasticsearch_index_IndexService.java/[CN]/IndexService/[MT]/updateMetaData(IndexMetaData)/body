{
  if (indexSettings.updateIndexMetaData(metadata)) {
    final Settings settings=indexSettings.getSettings();
    for (    final IndexShard shard : this.shards.values()) {
      try {
        shard.onSettingsChanged();
      }
 catch (      Exception e) {
        logger.warn("[{}] failed to notify shard about setting change",e,shard.shardId().id());
      }
    }
    if (refreshTask.getInterval().equals(indexSettings.getRefreshInterval()) == false) {
      rescheduleRefreshTasks();
    }
  }
}
