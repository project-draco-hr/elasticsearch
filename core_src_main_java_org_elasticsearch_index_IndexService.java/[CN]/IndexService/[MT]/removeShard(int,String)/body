{
  final ShardId sId=new ShardId(index,shardId);
  final IndexShard indexShard;
  if (shards.containsKey(shardId) == false) {
    return;
  }
  logger.debug("[{}] closing... (reason: [{}])",shardId,reason);
  HashMap<Integer,IndexShard> tmpShardsMap=new HashMap<>(shards);
  indexShard=tmpShardsMap.remove(shardId);
  shards=ImmutableMap.copyOf(tmpShardsMap);
  closeShard(reason,sId,indexShard,indexShard.store());
  logger.debug("[{}] closed (reason: [{}])",shardId,reason);
}
