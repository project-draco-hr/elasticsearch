{
  super(indexSettings);
  this.indexSettings=indexSettings;
  this.analysisService=registry.build(indexSettings);
  this.similarityService=similarityService;
  this.mapperService=new MapperService(indexSettings,analysisService,similarityService,mapperRegistry);
  this.indexFieldData=new IndexFieldDataService(indexSettings,nodeServicesProvider.getIndicesFieldDataCache(),nodeServicesProvider.getCircuitBreakerService(),mapperService);
  this.shardStoreDeleter=shardStoreDeleter;
  this.eventListener=eventListener;
  this.nodeEnv=nodeEnv;
  this.nodeServicesProvider=nodeServicesProvider;
  this.indexStore=indexStore;
  indexFieldData.setListener(new FieldDataCacheListener(this));
  this.bitsetFilterCache=new BitsetFilterCache(indexSettings,nodeServicesProvider.getWarmer(),new BitsetCacheListener(this));
  this.indexCache=new IndexCache(indexSettings,queryCache,bitsetFilterCache);
  this.engineFactory=engineFactory;
  this.searcherWrapper=wrapperFactory.newWrapper(this);
}
