{
  final ALink last=links.get(links.size() - 1);
  if (last instanceof ADefLink) {
    final ADefLink lastDef=(ADefLink)last;
    expression.analyze(settings,definition,variables);
    lastDef.storeValueType=expression.expected=expression.actual;
  }
 else {
    expression.expected=last.after;
    expression.analyze(settings,definition,variables);
  }
  expression=expression.cast(settings,definition,variables);
  statement=true;
  actual=read ? last.after : definition.voidType;
}
