{
  initTestData();
  Script script=createPositionsArrayScriptIterateTwice("b",INCLUDE_ALL,"position");
  checkArrayValsInEachDoc(script,expectedPositionsArray,3);
  script=createPositionsArrayScriptIterateTwice("b",INCLUDE_ALL,"startOffset");
  checkArrayValsInEachDoc(script,expectedStartOffsetsArray,3);
  script=createPositionsArrayScriptIterateTwice("b",INCLUDE_ALL,"endOffset");
  checkArrayValsInEachDoc(script,expectedEndOffsetsArray,3);
  script=createPositionsArrayScriptIterateTwice("b",INCLUDE_ALL,"payloadAsInt(-1)");
  checkArrayValsInEachDoc(script,expectedPayloadsArray,3);
  script=createPositionsArrayScriptIterateTwice("b",INCLUDE_ALL_BUT_CACHE,"position");
  checkExceptions(script);
  script=createPositionsArrayScriptIterateTwice("b",INCLUDE_ALL_BUT_CACHE,"startOffset");
  checkExceptions(script);
  script=createPositionsArrayScriptIterateTwice("b",INCLUDE_ALL_BUT_CACHE,"endOffset");
  checkExceptions(script);
  script=createPositionsArrayScriptIterateTwice("b",INCLUDE_ALL_BUT_CACHE,"payloadAsInt(-1)");
  checkExceptions(script);
  script=createPositionsArrayScriptGetInfoObjectTwice("b",INCLUDE_ALL_BUT_CACHE,"position");
  checkExceptions(script);
  script=createPositionsArrayScriptGetInfoObjectTwice("b",INCLUDE_ALL_BUT_CACHE,"startOffset");
  checkExceptions(script);
  script=createPositionsArrayScriptGetInfoObjectTwice("b",INCLUDE_ALL_BUT_CACHE,"endOffset");
  checkExceptions(script);
  script=createPositionsArrayScriptGetInfoObjectTwice("b",INCLUDE_ALL_BUT_CACHE,"payloadAsInt(-1)");
  checkExceptions(script);
}
