{
  super(index,indexSettings);
  this.name=name;
  this.mapperService=mapperService;
  this.filterCache=filterCache;
  List<JsonQueryParser> queryParsers=newArrayList();
  if (jsonQueryParsers != null) {
    Map<String,Settings> jsonQueryParserGroups=indexSettings.getGroups(JsonIndexQueryParser.Defaults.JSON_QUERY_PREFIX);
    for (    Map.Entry<String,JsonQueryParserFactory> entry : jsonQueryParsers.entrySet()) {
      String queryParserName=entry.getKey();
      JsonQueryParserFactory queryParserFactory=entry.getValue();
      Settings queryParserSettings=jsonQueryParserGroups.get(queryParserName);
      queryParsers.add(queryParserFactory.create(queryParserName,queryParserSettings));
    }
  }
  List<JsonFilterParser> filterParsers=newArrayList();
  if (jsonFilterParsers != null) {
    Map<String,Settings> jsonFilterParserGroups=indexSettings.getGroups(JsonIndexQueryParser.Defaults.JSON_FILTER_PREFIX);
    for (    Map.Entry<String,JsonFilterParserFactory> entry : jsonFilterParsers.entrySet()) {
      String filterParserName=entry.getKey();
      JsonFilterParserFactory filterParserFactory=entry.getValue();
      Settings filterParserSettings=jsonFilterParserGroups.get(filterParserName);
      filterParsers.add(filterParserFactory.create(filterParserName,filterParserSettings));
    }
  }
  this.queryParserRegistry=new JsonQueryParserRegistry(index,indexSettings,analysisService,queryParsers,filterParsers);
}
