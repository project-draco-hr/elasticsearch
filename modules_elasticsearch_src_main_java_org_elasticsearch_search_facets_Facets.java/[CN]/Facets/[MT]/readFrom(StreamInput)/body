{
  int size=in.readVInt();
  if (size == 0) {
    facets=EMPTY;
  }
 else {
    facets=newArrayListWithCapacity(size);
    for (int i=0; i < size; i++) {
      byte id=in.readByte();
      if (id == Facet.Type.COUNT.id()) {
        facets.add(readCountFacet(in));
      }
 else       if (id == Facet.Type.MULTI_COUNT.id()) {
        facets.add(readMultiCountFacet(in));
      }
 else {
        throw new IOException("Can't handle facet type with id [" + id + "]");
      }
    }
  }
}
