{
  int size=in.readVInt();
  if (size == 0) {
    facets=EMPTY;
  }
 else {
    facets=newArrayListWithCapacity(size);
    for (int i=0; i < size; i++) {
      int id=in.readVInt();
      if (id == Facet.Type.TERMS.id()) {
        facets.add(InternalTermsFacet.readTermsFacet(in));
      }
 else       if (id == Facet.Type.QUERY.id()) {
        facets.add(InternalQueryFacet.readCountFacet(in));
      }
 else       if (id == Facet.Type.STATISTICAL.id()) {
        facets.add(InternalStatisticalFacet.readStatisticalFacet(in));
      }
 else {
        throw new IOException("Can't handle facet type with id [" + id + "]");
      }
    }
  }
}
