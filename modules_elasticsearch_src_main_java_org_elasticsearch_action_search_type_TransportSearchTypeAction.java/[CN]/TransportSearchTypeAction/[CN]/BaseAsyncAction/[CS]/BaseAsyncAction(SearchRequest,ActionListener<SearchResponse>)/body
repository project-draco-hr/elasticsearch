{
  this.request=request;
  this.listener=listener;
  ClusterState clusterState=clusterService.state();
  nodes=clusterState.nodes();
  request.indices(clusterState.metaData().concreteIndices(request.indices()));
  shardsIts=indicesService.searchShards(clusterState,request.indices(),request.queryHint());
  expectedSuccessfulOps=shardsIts.size();
  expectedTotalOps=shardsIts.totalSizeActive();
}
