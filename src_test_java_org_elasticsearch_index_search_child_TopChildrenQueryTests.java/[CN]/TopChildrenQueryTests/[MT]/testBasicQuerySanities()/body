{
  Query childQuery=new TermQuery(new Term("field","value"));
  ScoreType scoreType=ScoreType.values()[random().nextInt(ScoreType.values().length)];
  ParentFieldMapper parentFieldMapper=SearchContext.current().mapperService().documentMapper("child").parentFieldMapper();
  ParentChildIndexFieldData parentChildIndexFieldData=SearchContext.current().fieldData().getForField(parentFieldMapper);
  Query query=new TopChildrenQuery(parentChildIndexFieldData,childQuery,"child","parent",scoreType,1,1,wrap(NonNestedDocsFilter.INSTANCE));
  QueryUtils.check(query);
}
