{
  for (  Tuple<PluginInfo,Plugin> plugin : plugins) {
    plugin.v2().onIndexModule(indexModule);
  }
  indexModule.addIndexEventListener(new IndexEventListener(){
    final List<Closeable> closeables=new ArrayList<>();
    @Override public void afterIndexCreated(    IndexService indexService){
      for (      Tuple<PluginInfo,Plugin> plugin : plugins) {
        List<Closeable> services=plugin.v2().indexService(indexService);
        closeables.addAll(services);
      }
    }
    @Override public void beforeIndexClosed(    IndexService indexService){
      IOUtils.closeWhileHandlingException(closeables);
    }
  }
);
}
