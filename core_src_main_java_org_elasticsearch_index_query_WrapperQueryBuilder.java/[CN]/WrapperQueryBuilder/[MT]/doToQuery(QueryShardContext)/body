{
  try (XContentParser qSourceParser=XContentFactory.xContent(source).createParser(source)){
    final QueryParseContext parseContext=new QueryParseContext(context);
    parseContext.reset(qSourceParser);
    QueryBuilder queryBuilder=parseContext.parseInnerQueryBuilder();
    return queryBuilder.toQuery(context);
  }
 }
