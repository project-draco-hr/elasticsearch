{
  AnalyzingCompletionLookupProvider provider=new AnalyzingCompletionLookupProvider(true,false,true,true);
  RAMDirectory dir=new RAMDirectory();
  IndexOutput output=dir.createOutput("foo.txt",IOContext.DEFAULT);
  FieldsConsumer consumer=provider.consumer(output);
  FieldInfo fieldInfo=new FieldInfo("foo",true,1,false,true,true,IndexOptions.DOCS_AND_FREQS_AND_POSITIONS,DocValuesType.SORTED,DocValuesType.BINARY,-1,new HashMap<String,String>());
  TermsConsumer addField=consumer.addField(fieldInfo);
  addField.finish(0,0,0);
  consumer.close();
  output.close();
  IndexInput input=dir.openInput("foo.txt",IOContext.DEFAULT);
  LookupFactory load=provider.load(input);
  PostingsFormatProvider format=new PreBuiltPostingsFormatProvider(new Elasticsearch090PostingsFormat());
  NamedAnalyzer analyzer=new NamedAnalyzer("foo",new StandardAnalyzer(TEST_VERSION_CURRENT));
  assertNull(load.getLookup(new CompletionFieldMapper(new Names("foo"),analyzer,analyzer,format,null,true,true,true,Integer.MAX_VALUE,AbstractFieldMapper.MultiFields.empty(),null,ContextMapping.EMPTY_MAPPING),new CompletionSuggestionContext(null)));
  dir.close();
}
