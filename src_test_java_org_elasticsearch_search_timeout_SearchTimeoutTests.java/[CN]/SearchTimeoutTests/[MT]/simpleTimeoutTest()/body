{
  client().prepareIndex("test","type","1").setSource("field","value").setRefresh(true).execute().actionGet();
  SearchResponse searchResponse=client().prepareSearch("test").setTimeout("10ms").setQuery(filteredQuery(matchAllQuery(),scriptFilter("Thread.sleep(500); return true;"))).execute().actionGet();
  assertThat(searchResponse.isTimedOut(),equalTo(true));
}
