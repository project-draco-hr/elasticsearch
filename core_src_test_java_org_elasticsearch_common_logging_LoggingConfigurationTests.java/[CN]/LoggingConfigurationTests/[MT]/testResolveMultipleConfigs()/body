{
  String level=ESLoggerFactory.getLogger("test").getLevel();
  try {
    Path configDir=getDataPath("config");
    Settings settings=Settings.builder().put(Environment.PATH_CONF_SETTING.getKey(),configDir.toAbsolutePath()).put(Environment.PATH_HOME_SETTING.getKey(),createTempDir().toString()).build();
    LogConfigurator.configure(settings,true);
    ESLogger esLogger=ESLoggerFactory.getLogger("test");
    Logger logger=esLogger.getLogger();
    Appender appender=logger.getAppender("console");
    assertThat(appender,notNullValue());
    esLogger=ESLoggerFactory.getLogger("second");
    logger=esLogger.getLogger();
    appender=logger.getAppender("console2");
    assertThat(appender,notNullValue());
    esLogger=ESLoggerFactory.getLogger("third");
    logger=esLogger.getLogger();
    appender=logger.getAppender("console3");
    assertThat(appender,notNullValue());
  }
  finally {
    ESLoggerFactory.getLogger("test").setLevel(level);
  }
}
