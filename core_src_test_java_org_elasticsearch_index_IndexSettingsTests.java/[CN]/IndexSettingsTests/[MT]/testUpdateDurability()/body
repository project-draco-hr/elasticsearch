{
  IndexMetaData metaData=newIndexMeta("index",Settings.settingsBuilder().put(IndexMetaData.SETTING_VERSION_CREATED,Version.CURRENT).put(IndexSettings.INDEX_TRANSLOG_DURABILITY,"async").build());
  IndexSettings settings=new IndexSettings(metaData,Settings.EMPTY,Collections.emptyList());
  assertEquals(Translog.Durability.ASYNC,settings.getTranslogDurability());
  settings.updateIndexMetaData(newIndexMeta("index",Settings.builder().put(IndexSettings.INDEX_TRANSLOG_DURABILITY,"request").build()));
  assertEquals(Translog.Durability.REQUEST,settings.getTranslogDurability());
  metaData=newIndexMeta("index",Settings.settingsBuilder().put(IndexMetaData.SETTING_VERSION_CREATED,Version.CURRENT).build());
  settings=new IndexSettings(metaData,Settings.EMPTY,Collections.emptyList());
  assertEquals(Translog.Durability.REQUEST,settings.getTranslogDurability());
}
