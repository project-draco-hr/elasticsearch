{
  TimeValue gcDeleteSetting=new TimeValue(Math.abs(randomInt()),TimeUnit.MILLISECONDS);
  IndexMetaData metaData=newIndexMeta("index",Settings.settingsBuilder().put(IndexMetaData.SETTING_VERSION_CREATED,Version.CURRENT).put(IndexSettings.INDEX_GC_DELETES_SETTING.getKey(),gcDeleteSetting.getStringRep()).build());
  IndexSettings settings=new IndexSettings(metaData,Settings.EMPTY);
  assertEquals(TimeValue.parseTimeValue(gcDeleteSetting.getStringRep(),new TimeValue(1,TimeUnit.DAYS),IndexSettings.INDEX_GC_DELETES_SETTING.getKey()).getMillis(),settings.getGcDeletesInMillis());
  TimeValue newGCDeleteSetting=new TimeValue(Math.abs(randomInt()),TimeUnit.MILLISECONDS);
  settings.updateIndexMetaData(newIndexMeta("index",Settings.builder().put(IndexSettings.INDEX_GC_DELETES_SETTING.getKey(),newGCDeleteSetting.getStringRep()).build()));
  assertEquals(TimeValue.parseTimeValue(newGCDeleteSetting.getStringRep(),new TimeValue(1,TimeUnit.DAYS),IndexSettings.INDEX_GC_DELETES_SETTING.getKey()).getMillis(),settings.getGcDeletesInMillis());
  try {
    settings.updateIndexMetaData(newIndexMeta("index",Settings.builder().put(IndexSettings.INDEX_GC_DELETES_SETTING.getKey(),new TimeValue(-1,TimeUnit.MILLISECONDS)).build()));
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}
