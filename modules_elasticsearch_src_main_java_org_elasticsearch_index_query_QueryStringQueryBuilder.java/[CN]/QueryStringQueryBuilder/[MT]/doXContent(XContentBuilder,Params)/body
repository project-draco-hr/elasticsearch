{
  builder.startObject(QueryStringQueryParser.NAME);
  builder.field("query",queryString);
  if (defaultField != null) {
    builder.field("default_field",defaultField);
  }
  if (fields != null) {
    builder.startArray("fields");
    for (    String field : fields) {
      float boost=-1;
      if (fieldsBoosts != null) {
        boost=fieldsBoosts.get(field);
      }
      if (boost != -1) {
        field+="^" + boost;
      }
      builder.value(field);
    }
    builder.endArray();
  }
  if (useDisMax != null) {
    builder.field("use_dis_max",useDisMax);
  }
  if (tieBreaker != -1) {
    builder.field("tie_breaker",tieBreaker);
  }
  if (defaultOperator != null) {
    builder.field("default_operator",defaultOperator.name().toLowerCase());
  }
  if (analyzer != null) {
    builder.field("analyzer",analyzer);
  }
  if (autoGeneratePhraseQueries != null) {
    builder.field("auto_generate_phrase_queries",autoGeneratePhraseQueries);
  }
  if (allowLeadingWildcard != null) {
    builder.field("allow_leading_wildcard",allowLeadingWildcard);
  }
  if (lowercaseExpandedTerms != null) {
    builder.field("lowercase_expanded_terms",lowercaseExpandedTerms);
  }
  if (enablePositionIncrements != null) {
    builder.field("enable_position_increments",enablePositionIncrements);
  }
  if (fuzzyMinSim != -1) {
    builder.field("fuzzy_min_sim",fuzzyMinSim);
  }
  if (boost != -1) {
    builder.field("boost",boost);
  }
  if (fuzzyPrefixLength != -1) {
    builder.field("fuzzy_prefix_length",fuzzyPrefixLength);
  }
  if (phraseSlop != -1) {
    builder.field("phrase_slop",phraseSlop);
  }
  if (analyzeWildcard != null) {
    builder.field("analyze_wildcard",analyzeWildcard);
  }
  if (rewrite != null) {
    builder.field("rewrite",rewrite);
  }
  builder.endObject();
}
