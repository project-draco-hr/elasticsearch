{
  if (terms == null || terms.length == 0) {
    throw new IllegalArgumentException("TermsFilter requires at least one term");
  }
  Arrays.sort(terms);
  this.filterTerms=new Term[terms.length];
  this.resetTermsEnum=new boolean[terms.length];
  int index=0;
  for (int i=0; i < terms.length; i++) {
    Term currentTerm=terms[i];
    boolean fieldChanged=true;
    if (index > 0) {
      if (filterTerms[index - 1].field().equals(currentTerm.field())) {
        fieldChanged=false;
        if (filterTerms[index - 1].bytes().bytesEquals(currentTerm.bytes())) {
          continue;
        }
      }
    }
    this.filterTerms[index]=currentTerm;
    this.resetTermsEnum[index]=index == 0 || fieldChanged;
    index++;
  }
  length=index;
}
