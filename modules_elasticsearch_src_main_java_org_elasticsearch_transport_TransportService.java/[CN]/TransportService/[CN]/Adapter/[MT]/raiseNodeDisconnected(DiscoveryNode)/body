{
  for (  TransportConnectionListener connectionListener : connectionListeners) {
    connectionListener.onNodeDisconnected(node);
  }
  for (  Map.Entry<Long,RequestHolder> entry : clientHandlers.entrySet()) {
    RequestHolder holder=entry.getValue();
    if (holder.node().equals(node)) {
      final RequestHolder holderToNotify=clientHandlers.remove(entry.getKey());
      if (holderToNotify != null) {
        threadPool.execute(new Runnable(){
          @Override public void run(){
            holderToNotify.handler().handleException(new NodeDisconnectedTransportException(node,holderToNotify.action()));
          }
        }
);
      }
    }
  }
}
