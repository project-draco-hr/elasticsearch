{
  super(settings,clusterService,createIndexService);
  String bucket=componentSettings.get("bucket");
  if (bucket == null) {
    throw new ElasticSearchIllegalArgumentException("No bucket defined for s3 gateway");
  }
  String region=componentSettings.get("region");
  ByteSizeValue chunkSize=componentSettings.getAsBytesSize("chunk_size",new ByteSizeValue(100,ByteSizeUnit.MB));
  logger.debug("using bucket [{}], region [{}], chunk_size [{}]",bucket,region,chunkSize);
  initialize(new S3BlobStore(settings,s3Service.client(),bucket,region,threadPool.cached()),clusterName,chunkSize);
}
