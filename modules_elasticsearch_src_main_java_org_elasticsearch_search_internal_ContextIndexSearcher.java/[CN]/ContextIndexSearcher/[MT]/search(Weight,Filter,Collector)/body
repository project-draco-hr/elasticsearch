{
  if (searchContext.timeout() != null) {
    collector=new TimeLimitingCollector(collector,searchContext.timeout().millis());
  }
  if (useGlobalCollectors) {
    if (globalCollectors != null) {
      collector=new MultiCollector(collector,globalCollectors.toArray(new Collector[globalCollectors.size()]));
    }
  }
 else {
    if (collectors != null) {
      collector=new MultiCollector(collector,collectors.toArray(new Collector[collectors.size()]));
    }
  }
  if (searchContext.timeout() != null) {
    searchContext.queryResult().searchTimedOut(false);
    try {
      super.search(weight,filter,collector);
    }
 catch (    TimeLimitingCollector.TimeExceededException e) {
      searchContext.queryResult().searchTimedOut(true);
    }
  }
 else {
    super.search(weight,filter,collector);
  }
}
