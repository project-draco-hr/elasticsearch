{
  ClusterState state=clusterService.state();
  String[] indicesOrAliases=request.getIndices();
  request.setIndices(state.metaData().concreteIndices(request.getIndices()));
  if (disableDeleteAllIndices) {
    if (indicesOrAliases == null || indicesOrAliases.length == 0 || (indicesOrAliases.length == 1 && indicesOrAliases[0].equals("_all"))) {
      throw new ElasticSearchIllegalArgumentException("deleting all indices is disabled");
    }
    if (request.getIndices().length == state.metaData().concreteAllIndices().length && indicesOrAliases.length > 0) {
      boolean hasRegex=false;
      for (      String indexOrAlias : indicesOrAliases) {
        if (Regex.isSimpleMatchPattern(indexOrAlias)) {
          hasRegex=true;
        }
      }
      if (indicesOrAliases.length > 0 && (hasRegex || indicesOrAliases[0].charAt(0) == '-')) {
        throw new ElasticSearchIllegalArgumentException("deleting all indices is disabled");
      }
    }
  }
  super.doExecute(request,listener);
}
