{
  final String indexName=indexService.index().name();
  final String indexUUID=indexService.indexUUID();
  if (indexName.equals(RiverIndexName.Conf.indexName(settings))) {
    indexService.mapperService().merge(type,new CompressedString(update.toBytes()),true);
    mappingUpdatedAction.updateMappingOnMaster(indexName,indexUUID,type,update,null);
  }
 else {
    mappingUpdatedAction.updateMappingOnMasterSynchronously(indexName,indexUUID,type,update);
    indexService.mapperService().merge(type,new CompressedString(update.toBytes()),true);
  }
}
