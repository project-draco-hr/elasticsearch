{
  if (httpClient == null) {
    httpClient=createDefaultHttpClient(defaultHeaders);
  }
 else {
    if (defaultHeaders != null) {
      throw new IllegalArgumentException("defaultHeaders need to be set to the HttpClient directly when manually provided");
    }
  }
  if (hosts == null || hosts.length == 0) {
    throw new IllegalArgumentException("no hosts provided");
  }
  return new RestClient(httpClient,maxRetryTimeout,hosts);
}
