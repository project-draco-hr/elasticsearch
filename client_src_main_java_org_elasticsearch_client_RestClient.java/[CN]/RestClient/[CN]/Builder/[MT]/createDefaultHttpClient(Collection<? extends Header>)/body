{
  PoolingHttpClientConnectionManager connectionManager=new PoolingHttpClientConnectionManager();
  connectionManager.setDefaultMaxPerRoute(10);
  connectionManager.setMaxTotal(30);
  RequestConfig requestConfig=RequestConfig.custom().setConnectTimeout(DEFAULT_CONNECT_TIMEOUT).setSocketTimeout(DEFAULT_SOCKET_TIMEOUT).setConnectionRequestTimeout(DEFAULT_CONNECTION_REQUEST_TIMEOUT).build();
  HttpClientBuilder httpClientBuilder=HttpClientBuilder.create();
  if (defaultHeaders != null) {
    httpClientBuilder.setDefaultHeaders(defaultHeaders);
  }
  return httpClientBuilder.setConnectionManager(connectionManager).setDefaultRequestConfig(requestConfig).build();
}
