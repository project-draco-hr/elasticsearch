{
  final CountDownLatch latch=new CountDownLatch(cluster().numNodes());
  Iterable<IndicesService> mapperServices=cluster().getInstances(IndicesService.class);
  for (  IndicesService indicesService : mapperServices) {
    MapperService mapperService=indicesService.indexService(index).mapperService();
    mapperService.addTypeListener(new DocumentTypeListener(){
      @Override public void created(      String type){
      }
      @Override public void removed(      String type){
        latch.countDown();
      }
    }
);
  }
  return latch;
}
