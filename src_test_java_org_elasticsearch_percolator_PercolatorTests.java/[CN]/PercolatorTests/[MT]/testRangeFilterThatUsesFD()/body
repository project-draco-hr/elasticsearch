{
  client().admin().indices().prepareCreate("test").addMapping("type1","field1","type=long").get();
  client().prepareIndex("test",PercolatorService.TYPE_NAME,"1").setSource(XContentFactory.jsonBuilder().startObject().field("query",constantScoreQuery(FilterBuilders.rangeFilter("field1").from(1).to(5).setExecution("fielddata"))).endObject()).get();
  PercolateResponse response=client().preparePercolate().setIndices("test").setDocumentType("type1").setPercolateDoc(PercolateSourceBuilder.docBuilder().setDoc("field1",3)).get();
  assertMatchCount(response,1l);
  assertThat(response.getMatches(),arrayWithSize(1));
  assertThat(convertFromTextArray(response.getMatches(),"test"),arrayContaining("1"));
}
