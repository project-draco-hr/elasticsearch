{
  HttpGet httpGet=new HttpGet("/_nodes/http?timeout=" + sniffRequestTimeout + "ms");
  httpGet.setConfig(sniffRequestConfig);
  try (CloseableHttpResponse response=client.execute(host,httpGet)){
    StatusLine statusLine=response.getStatusLine();
    if (statusLine.getStatusCode() >= 300) {
      RequestLogger.log(logger,"sniff failed",httpGet.getRequestLine(),host,statusLine);
      throw new ElasticsearchResponseException(httpGet.getRequestLine(),host,response);
    }
 else {
      List<HttpHost> nodes=readHosts(response.getEntity());
      RequestLogger.log(logger,"sniff succeeded",httpGet.getRequestLine(),host,statusLine);
      return nodes;
    }
  }
 catch (  IOException e) {
    RequestLogger.log(logger,"sniff failed",httpGet.getRequestLine(),host,e);
    throw e;
  }
}
