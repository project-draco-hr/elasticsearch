{
  if (requestOrWrappedRequest instanceof TransportReplicationAction.ConcreteShardRequest) {
    requestOrWrappedRequest=((TransportReplicationAction.ConcreteShardRequest<?>)requestOrWrappedRequest).getRequest();
  }
  return (R)requestOrWrappedRequest;
}
