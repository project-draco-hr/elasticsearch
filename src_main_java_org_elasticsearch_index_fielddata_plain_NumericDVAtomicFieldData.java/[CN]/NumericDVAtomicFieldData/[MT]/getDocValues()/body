{
  final NumericDocValues values;
  final Bits docsWithField;
  try {
    final NumericDocValues v=reader.getNumericDocValues(field);
    if (v == null) {
      values=NumericDocValues.EMPTY;
      docsWithField=new Bits.MatchNoBits(reader.maxDoc());
    }
 else {
      values=v;
      final Bits b=reader.getDocsWithField(field);
      docsWithField=b == null ? new Bits.MatchAllBits(reader.maxDoc()) : b;
    }
  }
 catch (  IOException e) {
    throw new ElasticsearchIllegalStateException("Cannot load doc values",e);
  }
  return new DocValuesAndBits(values,docsWithField);
}
