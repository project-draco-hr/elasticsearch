{
  QueryParseContext context=new QueryParseContext(indicesQueriesRegistry);
  context.parseFieldMatcher(new ParseFieldMatcher(Settings.EMPTY));
  String highlightElement="{ }";
  XContentParser parser=XContentFactory.xContent(highlightElement).createParser(highlightElement);
  context.reset(parser);
  HighlightBuilder highlightBuilder=HighlightBuilder.fromXContent(context);
  assertEquals("expected plain HighlightBuilder",new HighlightBuilder(),highlightBuilder);
  highlightElement="{ \"fields\" : { } }";
  parser=XContentFactory.xContent(highlightElement).createParser(highlightElement);
  context.reset(parser);
  highlightBuilder=HighlightBuilder.fromXContent(context);
  assertEquals("defining no field should return plain HighlightBuilder",new HighlightBuilder(),highlightBuilder);
  highlightElement="{ \"fields\" : { \"foo\" : { } } }";
  parser=XContentFactory.xContent(highlightElement).createParser(highlightElement);
  context.reset(parser);
  highlightBuilder=HighlightBuilder.fromXContent(context);
  assertEquals("expected HighlightBuilder with field",new HighlightBuilder().field(new Field("foo")),highlightBuilder);
}
