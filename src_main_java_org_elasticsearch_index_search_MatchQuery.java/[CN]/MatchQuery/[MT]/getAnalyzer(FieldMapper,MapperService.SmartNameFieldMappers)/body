{
  Analyzer analyzer=null;
  if (this.analyzer == null) {
    if (mapper != null) {
      analyzer=mapper.searchAnalyzer();
    }
    if (analyzer == null && smartNameFieldMappers != null) {
      analyzer=smartNameFieldMappers.searchAnalyzer();
    }
    if (analyzer == null) {
      analyzer=parseContext.mapperService().searchAnalyzer();
    }
  }
 else {
    analyzer=parseContext.mapperService().analysisService().analyzer(this.analyzer);
    if (analyzer == null) {
      throw new IllegalArgumentException("No analyzer found for [" + this.analyzer + "]");
    }
  }
  return analyzer;
}
