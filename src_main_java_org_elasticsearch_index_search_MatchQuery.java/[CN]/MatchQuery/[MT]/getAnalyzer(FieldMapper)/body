{
  if (this.analyzer == null) {
    if (mapper != null) {
      return parseContext.getSearchAnalyzer(mapper);
    }
    return parseContext.mapperService().searchAnalyzer();
  }
 else {
    Analyzer analyzer=parseContext.mapperService().analysisService().analyzer(this.analyzer);
    if (analyzer == null) {
      throw new IllegalArgumentException("No analyzer found for [" + this.analyzer + "]");
    }
    return analyzer;
  }
}
