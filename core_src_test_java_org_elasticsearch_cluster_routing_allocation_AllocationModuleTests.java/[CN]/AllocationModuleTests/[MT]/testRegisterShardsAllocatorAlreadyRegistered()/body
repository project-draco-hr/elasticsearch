{
  AllocationModule module=new AllocationModule(Settings.EMPTY);
  try {
    module.registerShardAllocator(AllocationModule.BALANCED_ALLOCATOR,FakeShardsAllocator.class);
  }
 catch (  IllegalArgumentException e) {
    assertTrue(e.getMessage().contains("already registered"));
  }
}
