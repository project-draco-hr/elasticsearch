{
  boolean whileRunning=false;
  try (ThreadContext.StoredContext ingore=contextHolder.stashContext()){
    ctx.restore();
    whileRunning=true;
    in.doRun();
    whileRunning=false;
  }
 catch (  IllegalStateException ex) {
    if (whileRunning || isShutdown() == false) {
      throw ex;
    }
  }
}
