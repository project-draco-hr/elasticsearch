{
  if (!scanner.checkToken(Token.ID.FlowMappingEnd)) {
    if (!first) {
      if (scanner.checkToken(Token.ID.FlowEntry)) {
        scanner.getToken();
      }
 else {
        Token token=scanner.peekToken();
        throw new ParserException("while parsing a flow mapping",marks.pop(),"expected ',' or '}', but got " + token.getTokenId(),token.getStartMark());
      }
    }
    if (scanner.checkToken(Token.ID.Key)) {
      Token token=scanner.getToken();
      if (!scanner.checkToken(Token.ID.Value,Token.ID.FlowEntry,Token.ID.FlowMappingEnd)) {
        states.push(new ParseFlowMappingValue());
        return parseFlowNode();
      }
 else {
        state=new ParseFlowMappingValue();
        return processEmptyScalar(token.getEndMark());
      }
    }
 else     if (!scanner.checkToken(Token.ID.FlowMappingEnd)) {
      states.push(new ParseFlowMappingEmptyValue());
      return parseFlowNode();
    }
  }
  Token token=scanner.getToken();
  Event event=new MappingEndEvent(token.getStartMark(),token.getEndMark());
  state=states.pop();
  marks.pop();
  return event;
}
