{
  if (running()) {
    try {
      if (forceKill == false && nodeInfo != null && random.nextBoolean()) {
        if (nodeInfo.getVersion().onOrAfter(Version.V_1_3_3)) {
          getClient().admin().cluster().prepareNodesShutdown(this.nodeInfo.getNode().id()).setExit(random.nextBoolean()).setDelay("0s").get();
        }
      }
      if (this.client != null) {
        client.close();
      }
    }
  finally {
      process.destroy();
      try {
        process.waitFor();
      }
 catch (      InterruptedException e) {
        Thread.interrupted();
      }
      process=null;
      nodeInfo=null;
    }
  }
}
