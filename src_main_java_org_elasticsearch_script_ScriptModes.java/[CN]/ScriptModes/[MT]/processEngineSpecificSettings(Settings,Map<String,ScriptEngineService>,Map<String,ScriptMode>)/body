{
  Map<String,Settings> langGroupedSettings=settings.getGroups(ENGINE_SETTINGS_PREFIX,true);
  for (  Map.Entry<String,Settings> langSettings : langGroupedSettings.entrySet()) {
    ScriptEngineService scriptEngineService=scriptEngines.get(langSettings.getKey());
    if (scriptEngineService != null) {
      String enginePrefix=ScriptModes.ENGINE_SETTINGS_PREFIX + "." + langSettings.getKey()+ ".";
      for (      ScriptType scriptType : ScriptType.values()) {
        String scriptTypePrefix=scriptType + ".";
        for (        ScriptContext scriptContext : ScriptContext.values()) {
          ScriptMode scriptMode=getScriptContextMode(langSettings.getValue(),scriptTypePrefix,scriptContext);
          if (scriptMode != null) {
            addScriptMode(scriptEngineService,scriptType,scriptContext,scriptMode,scriptModes);
          }
        }
      }
    }
  }
}
