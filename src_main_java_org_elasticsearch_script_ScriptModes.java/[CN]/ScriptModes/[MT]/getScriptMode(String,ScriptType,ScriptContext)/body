{
  if (NativeScriptEngineService.NAME.equals(lang)) {
    return ScriptMode.ON;
  }
  ScriptMode scriptMode=scriptModes.get(ENGINE_SETTINGS_PREFIX + "." + lang+ "."+ scriptType+ "."+ scriptContext);
  if (scriptMode == null) {
    throw new ElasticsearchIllegalArgumentException("script mode not found for lang [" + lang + "], script_type ["+ scriptType+ "], operation ["+ scriptContext+ "]");
  }
  return scriptMode;
}
