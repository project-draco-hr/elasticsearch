{
  buildScriptService(ImmutableSettings.EMPTY);
  String pluginName;
  String unknownContext;
  do {
    pluginName=randomAsciiOfLength(randomIntBetween(1,10));
    unknownContext=randomAsciiOfLength(randomIntBetween(1,30));
  }
 while (scriptContextRegistry.isSupportedContext(new ScriptContext.Plugin(pluginName,unknownContext)));
  for (  ScriptEngineService scriptEngineService : scriptEngineServices) {
    for (    String type : scriptEngineService.types()) {
      try {
        scriptService.compile(new Script(type,"test",randomFrom(ScriptType.values()),null),new ScriptContext.Plugin(pluginName,unknownContext));
        fail("script compilation should have been rejected");
      }
 catch (      IllegalArgumentException e) {
        assertThat(e.getMessage(),containsString("script context [" + pluginName + "_"+ unknownContext+ "] not supported"));
      }
    }
  }
}
