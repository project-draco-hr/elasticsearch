{
  out.writeVInt(responses.size());
  for (  BroadcastShardOperationResponse response : responses) {
    response.writeTo(out);
  }
  if (exceptions == null || exceptions.isEmpty()) {
    out.writeInt(0);
  }
 else {
    out.writeInt(exceptions.size());
    ThrowableObjectOutputStream too=new ThrowableObjectOutputStream(out);
    for (    BroadcastShardOperationFailedException ex : exceptions) {
      too.writeObject(ex);
    }
    too.flush();
  }
}
