{
  setupSecurity(tuple.v1(),tuple.v2());
  if (tuple.v1().getAsBoolean("bootstrap.mlockall",false)) {
    Natives.tryMlockall();
  }
  NodeBuilder nodeBuilder=NodeBuilder.nodeBuilder().settings(tuple.v1()).loadConfigSettings(false);
  node=nodeBuilder.build();
  if (addShutdownHook) {
    Runtime.getRuntime().addShutdownHook(new Thread(){
      @Override public void run(){
        node.close();
      }
    }
);
  }
  if (tuple.v1().getAsBoolean("bootstrap.ctrlhandler",true)) {
    Natives.addConsoleCtrlHandler(new ConsoleCtrlHandler(){
      @Override public boolean handle(      int code){
        if (CTRL_CLOSE_EVENT == code) {
          ESLogger logger=Loggers.getLogger(Bootstrap.class);
          logger.info("running graceful exit on windows");
          System.exit(0);
          return true;
        }
        return false;
      }
    }
);
  }
}
