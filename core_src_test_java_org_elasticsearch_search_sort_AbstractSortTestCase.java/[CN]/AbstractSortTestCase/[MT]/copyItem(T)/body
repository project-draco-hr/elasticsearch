{
  try (BytesStreamOutput output=new BytesStreamOutput()){
    original.writeTo(output);
    try (StreamInput in=new NamedWriteableAwareStreamInput(StreamInput.wrap(output.bytes()),namedWriteableRegistry)){
      T prototype=(T)namedWriteableRegistry.getPrototype(SortBuilder.class,original.getWriteableName());
      T copy=prototype.readFrom(in);
      return copy;
    }
   }
 }
