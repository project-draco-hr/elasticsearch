{
  if (indexShard.state() == IndexShardState.CLOSED) {
    return;
  }
  int currentNumberOfOperations=translog.numberOfOperations();
  if (currentNumberOfOperations > flushThresholdOperations) {
    logger.trace("flushing translog, operations [{}], breached [{}]",currentNumberOfOperations,flushThresholdOperations);
    asyncFlushAndReschedule();
    return;
  }
  long sizeInBytes=translog.translogSizeInBytes();
  if (sizeInBytes > flushThresholdSize.bytes()) {
    logger.trace("flushing translog, size [{}], breached [{}]",new ByteSizeValue(sizeInBytes),flushThresholdSize);
    asyncFlushAndReschedule();
    return;
  }
  if ((System.currentTimeMillis() - lastFlushTime) > flushThresholdPeriod.millis()) {
    logger.trace("flushing translog, last_flush_time [{}], breached [{}]",lastFlushTime,flushThresholdPeriod);
    asyncFlushAndReschedule();
    return;
  }
  future=threadPool.schedule(this,interval,ThreadPool.ExecutionType.DEFAULT);
}
