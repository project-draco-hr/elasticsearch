{
  if (indexShard.state() != IndexShardState.STARTED) {
    return;
  }
  int currentNumberOfOperations=translog.numberOfOperations();
  if (currentNumberOfOperations > flushThresholdOperations) {
    logger.trace("flushing translog, operations [{}], breached [{}]",currentNumberOfOperations,flushThresholdOperations);
    flush();
    return;
  }
  long sizeInBytes=translog.translogSizeInBytes();
  if (sizeInBytes > flushThresholdSize.bytes()) {
    logger.trace("flushing translog, size [{}], breached [{}]",new ByteSizeValue(sizeInBytes),flushThresholdSize);
    flush();
    return;
  }
  if ((System.currentTimeMillis() - lastFlushTime) > flushThresholdPeriod.millis()) {
    logger.trace("flushing translog, last_flush_time [{}], breached [{}]",lastFlushTime,flushThresholdPeriod);
    flush();
    return;
  }
}
