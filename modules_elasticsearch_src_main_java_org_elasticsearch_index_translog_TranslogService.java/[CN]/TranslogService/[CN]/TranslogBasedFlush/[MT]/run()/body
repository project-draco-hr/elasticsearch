{
  if (indexShard.state() != IndexShardState.STARTED) {
    return;
  }
  int currentSize=translog.size();
  if (currentSize > flushThreshold) {
    logger.trace("flushing translog, operations [{}], breached [{}]",currentSize,flushThreshold);
    try {
      indexShard.flush(new Engine.Flush());
    }
 catch (    FlushNotAllowedEngineException e) {
    }
catch (    Exception e) {
      logger.warn("failed to flush shard on translog threshold",e);
    }
  }
}
