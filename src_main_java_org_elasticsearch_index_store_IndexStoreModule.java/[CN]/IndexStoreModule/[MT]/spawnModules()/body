{
  Class<? extends Module> indexStoreModule=NioFsIndexStoreModule.class;
  if ((Constants.WINDOWS || Constants.SUN_OS || Constants.LINUX) && Constants.JRE_IS_64BIT && MMapDirectory.UNMAP_SUPPORTED) {
    if (Constants.WINDOWS) {
      indexStoreModule=MmapFsIndexStoreModule.class;
    }
 else {
      indexStoreModule=DefaultFsIndexStoreModule.class;
    }
  }
 else   if (Constants.WINDOWS) {
    indexStoreModule=SimpleFsIndexStoreModule.class;
  }
  String storeType=settings.get("index.store.type");
  if (Type.FS.match(storeType)) {
  }
 else   if (Type.SIMPLEFS.match(storeType)) {
    indexStoreModule=SimpleFsIndexStoreModule.class;
  }
 else   if (Type.NIOFS.match(storeType)) {
    indexStoreModule=NioFsIndexStoreModule.class;
  }
 else   if (Type.MMAPFS.match(storeType)) {
    indexStoreModule=MmapFsIndexStoreModule.class;
  }
 else   if (Type.DEFAULT.match(storeType)) {
    indexStoreModule=DefaultFsIndexStoreModule.class;
  }
 else   if (storeType != null) {
    indexStoreModule=settings.getAsClass("index.store.type",indexStoreModule,"org.elasticsearch.index.store.","IndexStoreModule");
  }
  return ImmutableList.of(Modules.createModule(indexStoreModule,settings));
}
