{
  Class<? extends Module> indexStoreModule=NioFsIndexStoreModule.class;
  if ((Constants.WINDOWS || Constants.SUN_OS || Constants.LINUX) && Constants.JRE_IS_64BIT && MMapDirectory.UNMAP_SUPPORTED) {
    indexStoreModule=MmapFsIndexStoreModule.class;
  }
 else   if (Constants.WINDOWS) {
    indexStoreModule=SimpleFsIndexStoreModule.class;
  }
  String storeType=settings.get("index.store.type");
  if ("ram".equalsIgnoreCase(storeType)) {
    indexStoreModule=RamIndexStoreModule.class;
  }
 else   if ("memory".equalsIgnoreCase(storeType)) {
    indexStoreModule=RamIndexStoreModule.class;
  }
 else   if ("fs".equalsIgnoreCase(storeType)) {
  }
 else   if ("simplefs".equalsIgnoreCase(storeType) || "simple_fs".equals(storeType)) {
    indexStoreModule=SimpleFsIndexStoreModule.class;
  }
 else   if ("niofs".equalsIgnoreCase(storeType) || "nio_fs".equalsIgnoreCase(storeType)) {
    indexStoreModule=NioFsIndexStoreModule.class;
  }
 else   if ("mmapfs".equalsIgnoreCase(storeType) || "mmap_fs".equalsIgnoreCase(storeType)) {
    indexStoreModule=MmapFsIndexStoreModule.class;
  }
 else   if (storeType != null) {
    indexStoreModule=settings.getAsClass("index.store.type",indexStoreModule,"org.elasticsearch.index.store.","IndexStoreModule");
  }
  return ImmutableList.of(Modules.createModule(indexStoreModule,settings));
}
