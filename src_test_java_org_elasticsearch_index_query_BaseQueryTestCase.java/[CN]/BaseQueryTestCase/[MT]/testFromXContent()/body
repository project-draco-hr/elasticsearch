{
  QueryParseContext context=new QueryParseContext(index,queryParserService);
  String contentString=testQuery.toString();
  context.reset(XContentFactory.xContent(contentString).createParser(contentString));
  QueryBuilder newQuery=queryParserService.queryParser(testQuery.parserName()).fromXContent(context);
  assertNotSame(newQuery,testQuery);
  assertEquals(newQuery,testQuery);
}
