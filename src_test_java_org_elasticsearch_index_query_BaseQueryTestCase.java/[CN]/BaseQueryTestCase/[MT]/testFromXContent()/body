{
  for (int i=0; i < RANDOM_REPS; i++) {
    testQuery=createTestQueryBuilder();
    QueryParseContext context=createContext();
    String contentString=testQuery.toString();
    XContentParser parser=XContentFactory.xContent(contentString).createParser(contentString);
    context.reset(parser);
    assertQueryHeader(parser,testQuery.parserName());
    QueryBuilder newQuery=queryParserService.queryParser(testQuery.parserName()).fromXContent(context);
    assertNotSame(newQuery,testQuery);
    assertEquals(newQuery,testQuery);
  }
}
