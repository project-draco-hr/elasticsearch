{
  testQuery=createTestQueryBuilder();
  try (BytesStreamOutput output=new BytesStreamOutput()){
    testQuery.writeTo(output);
    try (StreamInput in=StreamInput.wrap(output.bytes())){
      QB deserializedQuery=createEmptyQueryBuilder();
      deserializedQuery.readFrom(in);
      assertEquals(deserializedQuery,testQuery);
      assertNotSame(deserializedQuery,testQuery);
    }
   }
 }
