{
  prepareCreate("idx").addMapping("type","ip","type=ip","ips","type=ip").execute().actionGet();
  IndexRequestBuilder[] builders=new IndexRequestBuilder[255];
  for (int i=0; i < builders.length; i++) {
    builders[i]=client().prepareIndex("idx","type").setSource(jsonBuilder().startObject().field("ip","10.0.0." + (i)).startArray("ips").value("10.0.0." + i).value("10.0.0." + (i + 1)).endArray().field("value",(i < 100 ? 1 : i < 200 ? 2 : 3)).endObject());
  }
  indexRandom(true,builders);
  createIndex("idx_unmapped");
}
