{
  SearchResponse searchResponse=client().prepareSearch("test").setTypes("test").setQuery(QueryBuilders.boolQuery().must(QueryBuilders.matchAllQuery()).should(QueryBuilders.termQuery("name","arbitrary"))).setHighlighterType("test-custom").addHighlightedField("name").addHighlightedField("other_name").addHighlightedField("other_other_name").setHighlighterExplicitFieldOrder(true).get();
  assertHighlight(searchResponse,0,"name",0,equalTo("standard response for name at position 1"));
  assertHighlight(searchResponse,0,"other_name",0,equalTo("standard response for other_name at position 2"));
  assertHighlight(searchResponse,0,"other_other_name",0,equalTo("standard response for other_other_name at position 3"));
  assertHighlight(searchResponse,1,"name",0,equalTo("standard response for name at position 1"));
  assertHighlight(searchResponse,1,"other_name",0,equalTo("standard response for other_name at position 2"));
  assertHighlight(searchResponse,1,"other_other_name",0,equalTo("standard response for other_other_name at position 3"));
}
