{
  final ElasticsearchMockDirectoryWrapper w=new ElasticsearchMockDirectoryWrapper(random,dir,logger,this.crashIndex);
  w.setRandomIOExceptionRate(randomIOExceptionRate);
  w.setRandomIOExceptionRateOnOpen(randomIOExceptionRateOnOpen);
  w.setThrottling(throttle);
  w.setCheckIndexOnClose(false);
  w.setPreventDoubleWrite(preventDoubleWrite);
  w.setEnableVirusScanner(false);
  w.setNoDeleteOpenFile(noDeleteOpenFile);
  w.setUseSlowOpenClosers(false);
  wrappers.add(w);
  return w;
}
