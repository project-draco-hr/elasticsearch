{
  if (addressConstructors.containsKey(address.uniqueAddressTypeId())) {
    throw new ElasticSearchIllegalStateException("Address [" + address.uniqueAddressTypeId() + "] already bound");
  }
  Constructor<? extends TransportAddress> constructor=address.getClass().getDeclaredConstructor();
  constructor.setAccessible(true);
  addressConstructors=newMapBuilder(addressConstructors).put(address.uniqueAddressTypeId(),constructor).immutableMap();
}
