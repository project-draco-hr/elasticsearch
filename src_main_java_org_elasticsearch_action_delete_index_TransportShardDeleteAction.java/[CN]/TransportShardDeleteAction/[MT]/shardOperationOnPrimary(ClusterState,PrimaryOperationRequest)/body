{
  ShardDeleteRequest request=shardRequest.request;
  IndexShard indexShard=indicesService.indexServiceSafe(shardRequest.request.index()).shardSafe(shardRequest.shardId);
  Engine.Delete delete=indexShard.prepareDelete(request.type(),request.id(),request.version(),VersionType.INTERNAL,Engine.Operation.Origin.PRIMARY);
  indexShard.delete(delete);
  request.version(delete.version());
  if (request.refresh()) {
    try {
      indexShard.refresh(new Engine.Refresh("refresh_flag_delete").force(false));
    }
 catch (    Exception e) {
    }
  }
  ShardDeleteResponse response=new ShardDeleteResponse(delete.version(),delete.found());
  return new PrimaryResponse<>(shardRequest.request,response,null);
}
