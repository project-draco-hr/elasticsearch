{
  byte[] value;
  if (context.parser().currentToken() == XContentParser.Token.VALUE_NULL) {
    return null;
  }
 else {
    value=context.parser().binaryValue();
    if (compress != null && compress && !LZF.isCompressed(value,0,value.length)) {
      if (compressThreshold == -1 || value.length > compressThreshold) {
        CachedStreamOutput.Entry cachedEntry=CachedStreamOutput.popEntry();
        LZFStreamOutput streamOutput=cachedEntry.cachedLZFBytes();
        streamOutput.writeBytes(value,0,value.length);
        streamOutput.flush();
        value=cachedEntry.bytes().copiedByteArray();
        CachedStreamOutput.pushEntry(cachedEntry);
        context.source(value,0,value.length);
      }
    }
  }
  if (value == null) {
    return null;
  }
  return new Field(names.indexName(),value);
}
