{
  ImmutableSettings.Builder settings=ImmutableSettings.builder().put(super.nodeSettings(nodeOrdinal)).put("plugins." + PluginsService.LOAD_PLUGIN_FROM_CLASSPATH,true);
  Environment environment=new Environment();
  try {
    if (Strings.hasText(System.getProperty("tests.config"))) {
      settings.loadFromUrl(environment.resolveConfig(System.getProperty("tests.config")));
    }
 else {
      fail("to run integration tests, you need to set -Dtest.gce=true and -Dtests.config=/path/to/elasticsearch.yml");
    }
  }
 catch (  FailedToResolveConfigException exception) {
    fail("your test configuration file is incorrect: " + System.getProperty("tests.config"));
  }
  return settings.build();
}
