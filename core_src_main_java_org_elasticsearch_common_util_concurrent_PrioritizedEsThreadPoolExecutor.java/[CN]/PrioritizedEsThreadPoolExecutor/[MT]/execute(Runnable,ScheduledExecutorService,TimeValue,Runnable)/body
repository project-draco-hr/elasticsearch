{
  if (command instanceof PrioritizedRunnable) {
    command=new TieBreakingPrioritizedRunnable((PrioritizedRunnable)command,insertionOrder.incrementAndGet());
  }
 else   if (!(command instanceof PrioritizedFutureTask)) {
    command=new TieBreakingPrioritizedRunnable(command,Priority.NORMAL,insertionOrder.incrementAndGet());
  }
  if (timeout.nanos() >= 0) {
    if (command instanceof TieBreakingPrioritizedRunnable) {
      ((TieBreakingPrioritizedRunnable)command).scheduleTimeout(timer,timeoutCallback,timeout);
    }
 else {
      throw new UnsupportedOperationException("Execute with timeout is not supported for future tasks");
    }
  }
  super.execute(command);
}
