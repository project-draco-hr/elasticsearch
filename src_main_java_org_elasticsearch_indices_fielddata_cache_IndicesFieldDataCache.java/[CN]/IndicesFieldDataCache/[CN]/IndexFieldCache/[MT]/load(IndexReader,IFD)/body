{
  final Key key=new Key(this,indexReader.getCoreCacheKey());
  return (IFD)cache.get(key,new Callable<RamUsage>(){
    @Override public RamUsage call() throws Exception {
      indexReader.addReaderClosedListener(IndexFieldCache.this);
      key.listeners.add(indicesFieldDataCacheListener);
      final ShardId shardId=ShardUtils.extractShardId(indexReader);
      if (shardId != null) {
        IndexShard shard=indexService.shard(shardId.id());
        if (shard != null) {
          key.listeners.add(shard.fieldData());
        }
      }
      final GlobalOrdinalsIndexFieldData ifd=(GlobalOrdinalsIndexFieldData)indexFieldData.localGlobalDirect(indexReader);
      for (      Listener listener : key.listeners) {
        try {
          listener.onLoad(fieldNames,fieldDataType,ifd);
        }
 catch (        Throwable e) {
          logger.error("Failed to call listener on global ordinals loading",e);
        }
      }
      return ifd;
    }
  }
);
}
