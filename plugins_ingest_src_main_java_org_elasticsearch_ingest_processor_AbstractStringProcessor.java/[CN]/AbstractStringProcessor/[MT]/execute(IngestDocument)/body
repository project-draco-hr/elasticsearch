{
  for (  String field : fields) {
    String val=document.getPropertyValue(field,String.class);
    if (val == null) {
      throw new IllegalArgumentException("field [" + field + "] is null, cannot process it.");
    }
    document.setPropertyValue(field,process(val));
  }
}
