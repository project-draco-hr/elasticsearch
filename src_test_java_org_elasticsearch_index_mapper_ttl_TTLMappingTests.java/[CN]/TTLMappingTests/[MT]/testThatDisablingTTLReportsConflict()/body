{
  String mappingWithTtl=getMappingWithTtlEnabled().string();
  String mappingWithTtlDisabled=getMappingWithTtlDisabled().string();
  DocumentMapperParser parser=createIndex("test").mapperService().documentMapperParser();
  DocumentMapper initialMapper=parser.parse(mappingWithTtl);
  DocumentMapper updatedMapper=parser.parse(mappingWithTtlDisabled);
  DocumentMapper.MergeFlags mergeFlags=DocumentMapper.MergeFlags.mergeFlags().simulate(true);
  DocumentMapper.MergeResult mergeResult=initialMapper.merge(updatedMapper.mapping(),mergeFlags);
  assertThat(mergeResult.hasConflicts(),equalTo(true));
  assertThat(initialMapper.TTLFieldMapper().enabled(),equalTo(true));
}
