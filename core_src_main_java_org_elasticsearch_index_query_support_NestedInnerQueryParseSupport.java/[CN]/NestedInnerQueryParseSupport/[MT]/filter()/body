{
  if (path != null) {
    setPathLevel();
    try {
      innerFilter=QueryBuilder.rewriteQuery(parseContext.parseInnerQueryBuilder(),this.shardContext).toFilter(this.shardContext);
    }
  finally {
      resetPathLevel();
    }
    filterParsed=true;
  }
 else {
    source=XContentFactory.smileBuilder().copyCurrentStructure(parseContext.parser()).bytes();
  }
  filterFound=true;
}
