{
  super(indexSettings,indexStore,path);
  final long seed=indexSettings.getAsLong(ESIntegTestCase.SETTING_INDEX_SEED,0l);
  this.random=new Random(seed);
  randomIOExceptionRate=indexSettings.getAsDouble(RANDOM_IO_EXCEPTION_RATE,0.0d);
  randomIOExceptionRateOnOpen=indexSettings.getAsDouble(RANDOM_IO_EXCEPTION_RATE_ON_OPEN,0.0d);
  preventDoubleWrite=indexSettings.getAsBoolean(RANDOM_PREVENT_DOUBLE_WRITE,true);
  noDeleteOpenFile=indexSettings.getAsBoolean(RANDOM_NO_DELETE_OPEN_FILE,random.nextBoolean());
  random.nextInt(shardId.getId() + 1);
  throttle=MockDirectoryWrapper.Throttling.NEVER;
  crashIndex=indexSettings.getAsBoolean(CRASH_INDEX,true);
  if (logger.isDebugEnabled()) {
    logger.debug("Using MockDirWrapper with seed [{}] throttle: [{}] crashIndex: [{}]",SeedUtils.formatSeed(seed),throttle,crashIndex);
  }
  this.indexSettings=indexSettings;
  delegateService=randomDirectorService(indexStore,path);
}
