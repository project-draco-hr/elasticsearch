{
  String shardStatus=formatShardStatus(searchResponse);
  assertThat("Expected different hit count. " + shardStatus,searchResponse.getHits().hits().length,equalTo(ids.length));
  Set<String> idsSet=new HashSet<String>(Arrays.asList(ids));
  for (  SearchHit hit : searchResponse.getHits()) {
    assertThat("Expected id: " + hit.getId() + " in the result but wasn't."+ shardStatus,idsSet.remove(hit.getId()),equalTo(true));
  }
  assertThat("Expected ids: " + Arrays.toString(idsSet.toArray(new String[0])) + " in the result - result size differs."+ shardStatus,idsSet.size(),equalTo(0));
  assertVersionSerializable(searchResponse);
}
