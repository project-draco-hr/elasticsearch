{
  ElectMasterService electMasterService=new ElectMasterService(Settings.EMPTY);
  DiscoveryNode node=new DiscoveryNode("_node_id",new LocalTransportAddress("_id"),emptyMap(),Collections.singleton(DiscoveryNode.Role.MASTER),Version.CURRENT);
  assertThat(electMasterService.electMaster(Collections.singletonList(node)),sameInstance(node));
  node=new DiscoveryNode("_node_id",new LocalTransportAddress("_id"),emptyMap(),emptySet(),previousMajorVersion);
  assertThat("Can't join master because version " + previousMajorVersion + " is lower than the minimum compatable version "+ Version.CURRENT+ " can support",electMasterService.electMaster(Collections.singletonList(node)),nullValue());
}
