{
  Settings nodeSettings=Settings.settingsBuilder().put("discovery.type","zen").build();
  String nodeName=internalCluster().startNode(nodeSettings);
  ZenDiscovery zenDiscovery=(ZenDiscovery)internalCluster().getInstance(Discovery.class,nodeName);
  assertThat(zenDiscovery.isRejoinOnMasterGone(),is(true));
  client().admin().cluster().prepareUpdateSettings().setTransientSettings(Settings.builder().put(ZenDiscovery.SETTING_REJOIN_ON_MASTER_GONE,false)).get();
  assertThat(zenDiscovery.isRejoinOnMasterGone(),is(false));
}
