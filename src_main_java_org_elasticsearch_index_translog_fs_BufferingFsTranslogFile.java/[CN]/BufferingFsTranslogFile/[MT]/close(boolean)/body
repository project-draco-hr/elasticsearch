{
  if (!delete) {
    rwl.writeLock().lock();
    try {
      flushBuffer();
      sync();
    }
 catch (    IOException e) {
      throw new TranslogException(shardId,"failed to close",e);
    }
 finally {
      rwl.writeLock().unlock();
    }
  }
  raf.decreaseRefCount(delete);
}
