{
  String sWildcards=request.param("expand_wildcards");
  String sIgnoreUnavailable=request.param("ignore_unavailable");
  String sAllowNoIndices=request.param("allow_no_indices");
  if (sWildcards == null && sIgnoreUnavailable == null && sAllowNoIndices == null) {
    return defaultSettings;
  }
  boolean expandWildcardsOpen=false;
  boolean expandWildcardsClosed=false;
  if (sWildcards == null) {
    expandWildcardsOpen=defaultSettings.expandWildcardsOpen();
    expandWildcardsClosed=defaultSettings.expandWildcardsClosed();
  }
 else {
    String[] wildcards=Strings.splitStringByCommaToArray(sWildcards);
    for (    String wildcard : wildcards) {
      if ("open".equals(wildcard)) {
        expandWildcardsOpen=true;
      }
 else       if ("closed".equals(wildcard)) {
        expandWildcardsClosed=true;
      }
 else       if ("none".equals(wildcard)) {
        expandWildcardsOpen=false;
        expandWildcardsClosed=false;
      }
 else       if ("all".equals(wildcard)) {
        expandWildcardsOpen=true;
        expandWildcardsClosed=true;
      }
 else {
        throw new ElasticsearchIllegalArgumentException("No valid expand wildcard value [" + wildcard + "]");
      }
    }
  }
  return fromOptions(toBool(sIgnoreUnavailable,defaultSettings.ignoreUnavailable()),toBool(sAllowNoIndices,defaultSettings.allowNoIndices()),expandWildcardsOpen,expandWildcardsClosed,defaultSettings.allowAliasesToMultipleIndices(),defaultSettings.forbidClosedIndices());
}
