{
  PutRequest request=new PutRequest("test","putTemplate shards");
  request.template("_test_shards*");
  Map<String,Object> map=new HashMap<>();
  map.put(IndexMetaData.SETTING_NUMBER_OF_SHARDS,"0");
  request.settings(Settings.settingsBuilder().put(map).build());
  List<Throwable> throwables=putTemplate(request);
  assertEquals(throwables.size(),1);
  assertThat(throwables.get(0),instanceOf(InvalidIndexTemplateException.class));
  assertThat(throwables.get(0).getMessage(),containsString("name must not contain a space"));
  assertThat(throwables.get(0).getMessage(),containsString("template must not start with '_'"));
  assertThat(throwables.get(0).getMessage(),containsString("index must have 1 or more primary shards"));
}
