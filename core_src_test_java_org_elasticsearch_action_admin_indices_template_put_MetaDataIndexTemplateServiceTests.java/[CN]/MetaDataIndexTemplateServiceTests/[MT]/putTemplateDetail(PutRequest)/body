{
  IndicesService indicesService=getInstanceFromNode(IndicesService.class);
  ClusterService clusterService=getInstanceFromNode(ClusterService.class);
  NodeServicesProvider nodeServicesProvider=getInstanceFromNode(NodeServicesProvider.class);
  MetaDataCreateIndexService createIndexService=new MetaDataCreateIndexService(Settings.EMPTY,clusterService,indicesService,null,Version.CURRENT,null,new HashSet<>(),null,nodeServicesProvider,null);
  MetaDataIndexTemplateService service=new MetaDataIndexTemplateService(Settings.EMPTY,clusterService,createIndexService,new AliasValidator(Settings.EMPTY),indicesService,nodeServicesProvider);
  final List<Throwable> throwables=new ArrayList<>();
  final CountDownLatch latch=new CountDownLatch(1);
  service.putTemplate(request,new MetaDataIndexTemplateService.PutListener(){
    @Override public void onResponse(    MetaDataIndexTemplateService.PutResponse response){
      latch.countDown();
    }
    @Override public void onFailure(    Throwable t){
      throwables.add(t);
      latch.countDown();
    }
  }
);
  latch.await();
  return throwables;
}
