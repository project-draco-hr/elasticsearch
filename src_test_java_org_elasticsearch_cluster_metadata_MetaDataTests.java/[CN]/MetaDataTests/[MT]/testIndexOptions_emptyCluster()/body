{
  MetaData md=MetaData.builder().build();
  IndicesOptions options=IndicesOptions.strictExpandOpen();
  String[] results=md.concreteIndices(options,Strings.EMPTY_ARRAY);
  assertThat(results,emptyArray());
  try {
    md.concreteIndices(options,"foo");
    fail();
  }
 catch (  IndexMissingException e) {
    assertThat(e.index().name(),equalTo("foo"));
  }
  results=md.concreteIndices(options,"foo*");
  assertThat(results,emptyArray());
  try {
    md.concreteIndices(options,"foo*","bar");
    fail();
  }
 catch (  IndexMissingException e) {
    assertThat(e.index().name(),equalTo("bar"));
  }
  options=IndicesOptions.lenientExpandOpen();
  results=md.concreteIndices(options,Strings.EMPTY_ARRAY);
  assertThat(results,emptyArray());
  results=md.concreteIndices(options,"foo");
  assertThat(results,emptyArray());
  results=md.concreteIndices(options,"foo*");
  assertThat(results,emptyArray());
  results=md.concreteIndices(options,"foo*","bar");
  assertThat(results,emptyArray());
  options=IndicesOptions.fromOptions(true,false,true,false);
  try {
    md.concreteIndices(options,Strings.EMPTY_ARRAY);
  }
 catch (  IndexMissingException e) {
    assertThat(e.index().name(),equalTo("_all"));
  }
}
