{
  MetaData.Builder mdBuilder=MetaData.builder().put(indexBuilder("foo")).put(indexBuilder("foobar")).put(indexBuilder("foofoo").putAlias(AliasMetaData.builder("barbaz")));
  MetaData md=mdBuilder.build();
  IndicesOptions options=IndicesOptions.fromOptions(true,false,true,false);
  String[] results=md.concreteIndices(Strings.EMPTY_ARRAY,options);
  assertEquals(3,results.length);
  results=md.concreteIndices(new String[]{"foo"},options);
  assertEquals(1,results.length);
  assertEquals("foo",results[0]);
  try {
    md.concreteIndices(new String[]{"bar"},options);
    fail();
  }
 catch (  IndexMissingException e) {
    assertThat(e.index().name(),equalTo("bar"));
  }
  try {
    md.concreteIndices(new String[]{"baz*"},options);
    fail();
  }
 catch (  IndexMissingException e) {
    assertThat(e.index().name(),equalTo("baz*"));
  }
  try {
    md.concreteIndices(new String[]{"foo","baz*"},options);
    fail();
  }
 catch (  IndexMissingException e) {
    assertThat(e.index().name(),equalTo("baz*"));
  }
}
