{
  MetaData.Builder mdBuilder=MetaData.builder().put(indexBuilder("testXXX").putAlias(AliasMetaData.builder("alias1")).putAlias(AliasMetaData.builder("alias2"))).put(indexBuilder("testXYY").putAlias(AliasMetaData.builder("alias2"))).put(indexBuilder("testYYY").putAlias(AliasMetaData.builder("alias3"))).put(indexBuilder("kuku"));
  MetaData md=mdBuilder.build();
  assertThat(newHashSet(md.convertFromWildcards(new String[]{"testYY*","alias*"},IndicesOptions.lenientExpandOpen())),equalTo(newHashSet("alias1","alias2","alias3","testYYY")));
  assertThat(newHashSet(md.convertFromWildcards(new String[]{"-kuku"},IndicesOptions.lenientExpandOpen())),equalTo(newHashSet("testXXX","testXYY","testYYY")));
  assertThat(newHashSet(md.convertFromWildcards(new String[]{"+test*","-testYYY"},IndicesOptions.lenientExpandOpen())),equalTo(newHashSet("testXXX","testXYY")));
  assertThat(newHashSet(md.convertFromWildcards(new String[]{"+testX*","+testYYY"},IndicesOptions.lenientExpandOpen())),equalTo(newHashSet("testXXX","testXYY","testYYY")));
  assertThat(newHashSet(md.convertFromWildcards(new String[]{"+testYYY","+testX*"},IndicesOptions.lenientExpandOpen())),equalTo(newHashSet("testXXX","testXYY","testYYY")));
}
