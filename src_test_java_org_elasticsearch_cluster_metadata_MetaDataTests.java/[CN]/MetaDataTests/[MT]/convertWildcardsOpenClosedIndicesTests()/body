{
  MetaData.Builder mdBuilder=MetaData.builder().put(indexBuilder("testXXX").state(State.OPEN)).put(indexBuilder("testXXY").state(State.OPEN)).put(indexBuilder("testXYY").state(State.CLOSE)).put(indexBuilder("testYYY").state(State.OPEN)).put(indexBuilder("testYYX").state(State.CLOSE)).put(indexBuilder("kuku").state(State.OPEN));
  MetaData md=mdBuilder.build();
  assertThat(newHashSet(md.convertFromWildcards(new String[]{"testX*"},IndicesOptions.fromOptions(true,true,true,true))),equalTo(newHashSet("testXXX","testXXY","testXYY")));
  assertThat(newHashSet(md.convertFromWildcards(new String[]{"testX*"},IndicesOptions.fromOptions(true,true,false,true))),equalTo(newHashSet("testXYY")));
  assertThat(newHashSet(md.convertFromWildcards(new String[]{"testX*"},IndicesOptions.fromOptions(true,true,true,false))),equalTo(newHashSet("testXXX","testXXY")));
}
