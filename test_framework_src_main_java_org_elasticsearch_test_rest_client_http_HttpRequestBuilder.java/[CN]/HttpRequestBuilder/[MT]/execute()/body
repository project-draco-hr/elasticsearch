{
  HttpUriRequest httpUriRequest=buildRequest();
  if (logger.isTraceEnabled()) {
    StringBuilder stringBuilder=new StringBuilder(httpUriRequest.getMethod()).append(" ").append(httpUriRequest.getURI());
    if (Strings.hasLength(body)) {
      stringBuilder.append("\n").append(body);
    }
    logger.trace("sending request \n{}",stringBuilder.toString());
  }
  for (  Map.Entry<String,String> entry : this.headers.entrySet()) {
    logger.trace("adding header [{} => {}]",entry.getKey(),entry.getValue());
    httpUriRequest.addHeader(entry.getKey(),entry.getValue());
  }
  try (CloseableHttpResponse closeableHttpResponse=httpClient.execute(httpUriRequest)){
    HttpResponse httpResponse=new HttpResponse(httpUriRequest,closeableHttpResponse);
    logger.trace("got response \n{}\n{}",closeableHttpResponse,httpResponse.hasBody() ? httpResponse.getBody() : "");
    return httpResponse;
  }
 }
