{
  Boolean highlight=highlightFilters.get();
  if (highlight == null || highlight.equals(Boolean.FALSE)) {
    return;
  }
  if (sourceFilter instanceof TermFilter) {
    flatten(new TermQuery(((TermFilter)sourceFilter).getTerm()),reader,flatQueries);
  }
 else   if (sourceFilter instanceof XTermsFilter) {
    XTermsFilter termsFilter=(XTermsFilter)sourceFilter;
    for (    Term term : termsFilter.getTerms()) {
      flatten(new TermQuery(term),reader,flatQueries);
    }
  }
 else   if (sourceFilter instanceof MultiTermQueryWrapperFilter) {
    if (multiTermQueryWrapperFilterQueryField != null) {
      try {
        flatten((Query)multiTermQueryWrapperFilterQueryField.get(sourceFilter),reader,flatQueries);
      }
 catch (      IllegalAccessException e) {
      }
    }
  }
 else   if (sourceFilter instanceof XBooleanFilter) {
    XBooleanFilter booleanFilter=(XBooleanFilter)sourceFilter;
    if (booleanFilter.getMustFilters() != null) {
      for (      Filter filter : booleanFilter.getMustFilters()) {
        flatten(filter,reader,flatQueries);
      }
    }
    if (booleanFilter.getShouldFilters() != null) {
      for (      Filter filter : booleanFilter.getShouldFilters()) {
        flatten(filter,reader,flatQueries);
      }
    }
  }
}
