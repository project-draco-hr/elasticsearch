{
  Boolean highlight=highlightFilters.get();
  if (highlight == null || highlight.equals(Boolean.FALSE)) {
    return;
  }
  if (sourceFilter instanceof TermFilter) {
    flatten(new TermQuery(((TermFilter)sourceFilter).getTerm()),reader,flatQueries);
  }
 else   if (sourceFilter instanceof XTermsFilter) {
    XTermsFilter termsFilter=(XTermsFilter)sourceFilter;
    for (    Term term : termsFilter.getTerms()) {
      flatten(new TermQuery(term),reader,flatQueries);
    }
  }
 else   if (sourceFilter instanceof MultiTermQueryWrapperFilter) {
    if (multiTermQueryWrapperFilterQueryField != null) {
      try {
        flatten((Query)multiTermQueryWrapperFilterQueryField.get(sourceFilter),reader,flatQueries);
      }
 catch (      IllegalAccessException e) {
      }
    }
  }
 else   if (sourceFilter instanceof XBooleanFilter) {
    XBooleanFilter booleanFilter=(XBooleanFilter)sourceFilter;
    for (    FilterClause clause : booleanFilter.clauses()) {
      if (clause.getOccur() == BooleanClause.Occur.MUST || clause.getOccur() == BooleanClause.Occur.SHOULD) {
        flatten(clause.getFilter(),reader,flatQueries);
      }
    }
  }
}
