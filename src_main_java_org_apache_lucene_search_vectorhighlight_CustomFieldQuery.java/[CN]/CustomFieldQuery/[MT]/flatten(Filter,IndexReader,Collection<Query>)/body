{
  Boolean highlight=highlightFilters.get();
  if (highlight == null || highlight.equals(Boolean.FALSE)) {
    return;
  }
  if (sourceFilter instanceof TermFilter) {
    TermQuery actualQuery=(TermQuery)((TermFilter)sourceFilter).getQuery();
    flatten(new TermQuery(actualQuery.getTerm()),reader,flatQueries);
  }
 else   if (sourceFilter instanceof MultiTermQueryWrapperFilter) {
    if (multiTermQueryWrapperFilterQueryField != null) {
      try {
        flatten((Query)multiTermQueryWrapperFilterQueryField.get(sourceFilter),reader,flatQueries);
      }
 catch (      IllegalAccessException e) {
      }
    }
  }
 else   if (sourceFilter instanceof XBooleanFilter) {
    XBooleanFilter booleanFilter=(XBooleanFilter)sourceFilter;
    for (    FilterClause clause : booleanFilter.clauses()) {
      if (clause.getOccur() == BooleanClause.Occur.MUST || clause.getOccur() == BooleanClause.Occur.SHOULD) {
        flatten(clause.getFilter(),reader,flatQueries);
      }
    }
  }
}
