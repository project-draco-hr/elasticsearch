{
  assumeTrue("test runs only when at least a type is registered",getCurrentTypes().length > 0);
  String unsupportedField=randomFrom(INT_FIELD_NAME,DOUBLE_FIELD_NAME,DATE_FIELD_NAME);
  MoreLikeThisQueryBuilder queryBuilder=new MoreLikeThisQueryBuilder(new String[]{unsupportedField},new String[]{"some text"},null).failOnUnsupportedField(true);
  try {
    queryBuilder.toQuery(createShardContext());
    fail("should have failed with IllegalArgumentException for field: " + unsupportedField);
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),containsString("more_like_this doesn't support binary/numeric fields"));
  }
}
