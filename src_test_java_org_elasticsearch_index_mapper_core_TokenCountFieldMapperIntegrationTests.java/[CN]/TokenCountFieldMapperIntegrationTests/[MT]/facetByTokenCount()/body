{
  init();
  String facetField=randomFrom(ImmutableList.of("foo.token_count","foo.token_count_unstored","foo.token_count_with_doc_values"));
  SearchResponse result=searchByNumericRange(1,10).addFacet(new TermsFacetBuilder("facet").field(facetField)).get();
  assertSearchReturns(result,"single","bulk1","bulk2","multi","multibulk1","multibulk2");
  assertThat(result.getFacets().facets().size(),equalTo(1));
  TermsFacet facet=(TermsFacet)result.getFacets().facets().get(0);
  assertThat(facet.getEntries().size(),equalTo(9));
}
