{
  CaptureOutputTerminal terminal=new CaptureOutputTerminal();
  final AtomicReference<Boolean> executed=new AtomicReference<>(false);
  final NamedCommand cmd=new NamedCommand("cmd1",terminal){
    @Override public CliTool.ExitStatus execute(    Settings settings,    Environment env) throws Exception {
      executed.set(true);
      throw new IOException("io error");
    }
  }
;
  SingleCmdTool tool=new SingleCmdTool("tool",terminal,cmd);
  CliTool.ExitStatus status=tool.execute(args("-h"));
  assertStatus(status,CliTool.ExitStatus.OK_AND_EXIT);
  assertThat(terminal.getTerminalOutput(),hasSize(3));
  assertThat(terminal.getTerminalOutput(),hasItem(containsString("cmd1 help")));
}
