{
  client=new MyMockClient(new NoOpClient(getTestName()));
  threadPool=new ThreadPool(getTestName());
  mainRequest=new DummyAbstractBulkByScrollRequest();
  firstSearchRequest=new SearchRequest().scroll(timeValueSeconds(10));
  listener=new PlainActionFuture<>();
  scrollId=null;
  taskManager=new TaskManager(Settings.EMPTY);
  task=(BulkByScrollTask)taskManager.register("don'tcare","hereeither",mainRequest);
  expectedHeaders.clear();
  expectedHeaders.put(randomSimpleString(random()),randomSimpleString(random()));
  threadPool.getThreadContext().newStoredContext();
  threadPool.getThreadContext().putHeader(expectedHeaders);
}
