{
  ShardSearchFailure shardFailure=new ShardSearchFailure(new RuntimeException("test"));
  new DummyAbstractAsyncBulkByScrollAction().onScrollResponse(new SearchResponse(null,scrollId(),5,4,randomLong(),new ShardSearchFailure[]{shardFailure}));
  BulkIndexByScrollResponse response=listener.get();
  assertThat(response.getIndexingFailures(),emptyCollectionOf(Failure.class));
  assertThat(response.getSearchFailures(),contains(shardFailure));
  assertNull(response.getReasonCancelled());
  assertThat(client.scrollsCleared,contains(scrollId));
}
