{
  Failure failure=new Failure("index","type","id",new RuntimeException("test"));
  DummyAbstractAsyncBulkByScrollAction action=new DummyAbstractAsyncBulkByScrollAction();
  action.onBulkResponse(new BulkResponse(new BulkItemResponse[]{new BulkItemResponse(0,"index",failure)},randomLong()));
  BulkIndexByScrollResponse response=listener.get();
  assertThat(response.getIndexingFailures(),contains(failure));
  assertThat(response.getSearchFailures(),emptyCollectionOf(ShardSearchFailure.class));
  assertNull(response.getReasonCancelled());
}
