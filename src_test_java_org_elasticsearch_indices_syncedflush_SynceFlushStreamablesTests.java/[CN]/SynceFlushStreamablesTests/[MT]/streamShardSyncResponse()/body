{
  ShardRouting shardRouting=new ImmutableShardRouting("test",0,"test_node","other_test_node",randomBoolean(),ShardRoutingState.STARTED,randomInt());
  PreSyncedShardFlushResponse preSyncedShardFlushResponse=new PreSyncedShardFlushResponse(generateRandomId(randomInt(100)),shardRouting);
  BytesStreamOutput out=new BytesStreamOutput();
  preSyncedShardFlushResponse.writeTo(out);
  out.close();
  StreamInput in=new BytesStreamInput(out.bytes());
  PreSyncedShardFlushResponse request=new PreSyncedShardFlushResponse();
  request.readFrom(in);
  assertArrayEquals(request.id(),preSyncedShardFlushResponse.id());
}
