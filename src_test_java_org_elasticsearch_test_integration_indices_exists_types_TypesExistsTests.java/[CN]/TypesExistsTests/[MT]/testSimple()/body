{
  startNode("node1");
  Client client=client("node1");
  client.admin().indices().prepareCreate("test1").addMapping("type1",jsonBuilder().startObject().startObject("type1").endObject().endObject()).addMapping("type2",jsonBuilder().startObject().startObject("type2").endObject().endObject()).execute().actionGet();
  client.admin().indices().prepareCreate("test2").addMapping("type1",jsonBuilder().startObject().startObject("type1").endObject().endObject()).execute().actionGet();
  client.admin().indices().prepareAliases().addAlias("test1","alias1").execute().actionGet();
  ClusterHealthResponse healthResponse=client.admin().cluster().prepareHealth("test1","test2").setWaitForYellowStatus().execute().actionGet();
  assertThat(healthResponse.timedOut(),equalTo(false));
  TypesExistsResponse response=client.admin().indices().prepareTypesExists("test1").setTypes("type1").execute().actionGet();
  assertThat(response.exists(),equalTo(true));
  response=client.admin().indices().prepareTypesExists("test1").setTypes("type2").execute().actionGet();
  assertThat(response.exists(),equalTo(true));
  response=client.admin().indices().prepareTypesExists("test1").setTypes("type3").execute().actionGet();
  assertThat(response.exists(),equalTo(false));
  response=client.admin().indices().prepareTypesExists("notExist").setTypes("type1").setIgnoreIndices(IgnoreIndices.MISSING).execute().actionGet();
  assertThat(response.exists(),equalTo(false));
  response=client.admin().indices().prepareTypesExists("notExist").setTypes("type0").setIgnoreIndices(IgnoreIndices.MISSING).execute().actionGet();
  assertThat(response.exists(),equalTo(false));
  response=client.admin().indices().prepareTypesExists("alias1").setTypes("type1").execute().actionGet();
  assertThat(response.exists(),equalTo(true));
  response=client.admin().indices().prepareTypesExists("*").setTypes("type1").execute().actionGet();
  assertThat(response.exists(),equalTo(true));
  response=client.admin().indices().prepareTypesExists("test1","test2").setTypes("type1").execute().actionGet();
  assertThat(response.exists(),equalTo(true));
  response=client.admin().indices().prepareTypesExists("test1","test2").setTypes("type2").execute().actionGet();
  assertThat(response.exists(),equalTo(false));
  client.close();
  closeAllNodes();
}
