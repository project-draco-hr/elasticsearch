{
  MetaData metaData=newMetaDataBuilder().put(newIndexMetaDataBuilder("test1").numberOfShards(1).numberOfReplicas(1)).put(newIndexMetaDataBuilder("test2").numberOfShards(1).numberOfReplicas(1)).build();
  RoutingTable routingTable=routingTable().add(indexRoutingTable("test1").initializeEmpty(metaData.index("test1"))).add(indexRoutingTable("test2").initializeEmpty(metaData.index("test2"))).build();
  ShardIterator shardIterator=routingTable.index("test1").shard(0).shardsRandomIt();
  assertThat(shardIterator.hasNext(),equalTo(true));
  ShardRouting shardRouting1=shardIterator.next();
  shardIterator=routingTable.index("test1").shard(0).shardsRandomIt();
  assertThat(shardIterator.hasNext(),equalTo(true));
  ShardRouting shardRouting2=shardIterator.next();
  assertThat(shardRouting1,not(sameInstance(shardRouting2)));
}
