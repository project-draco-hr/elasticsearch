{
  byte id=in.readByte();
  ValueFormatter formatter=null;
switch (id) {
case ValueFormatter.Raw.ID:
    return ValueFormatter.RAW;
case ValueFormatter.IPv4Formatter.ID:
  return ValueFormatter.IPv4;
case ValueFormatter.DateTime.ID:
formatter=new ValueFormatter.DateTime();
break;
case ValueFormatter.Number.Pattern.ID:
formatter=new ValueFormatter.Number.Pattern();
break;
case ValueFormatter.GeoHash.ID:
formatter=ValueFormatter.GEOHASH;
break;
case ValueFormatter.BooleanFormatter.ID:
formatter=ValueFormatter.BOOLEAN;
break;
default :
throw new IllegalArgumentException("Unknown value formatter with id [" + id + "]");
}
formatter.readFrom(in);
return formatter;
}
