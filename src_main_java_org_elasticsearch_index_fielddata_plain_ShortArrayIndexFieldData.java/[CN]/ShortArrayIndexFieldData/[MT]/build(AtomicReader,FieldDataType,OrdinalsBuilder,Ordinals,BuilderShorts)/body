{
  if (!build.isMultiValued() && CommonSettings.removeOrdsOnSingleValue(fieldDataType)) {
    Docs ordinals=build.ordinals();
    short[] sValues=new short[reader.maxDoc()];
    int maxDoc=reader.maxDoc();
    for (int i=0; i < maxDoc; i++) {
      sValues[i]=values.get(ordinals.getOrd(i));
    }
    final FixedBitSet set=builder.buildDocsWithValuesSet();
    if (set == null) {
      return new ShortArrayAtomicFieldData.Single(sValues,reader.maxDoc());
    }
 else {
      return new ShortArrayAtomicFieldData.SingleFixedSet(sValues,reader.maxDoc(),set);
    }
  }
 else {
    return new ShortArrayAtomicFieldData.WithOrdinals(values.toArray(),reader.maxDoc(),build);
  }
}
