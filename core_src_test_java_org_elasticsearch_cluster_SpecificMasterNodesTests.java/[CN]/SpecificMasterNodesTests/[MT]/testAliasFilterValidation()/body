{
  logger.info("--> start master node / non data");
  internalCluster().startNode(settingsBuilder().put("node.data",false).put("node.master",true));
  logger.info("--> start data node / non master node");
  internalCluster().startNode(settingsBuilder().put("node.data",true).put("node.master",false));
  assertAcked(prepareCreate("test").addMapping("type1","{\"type1\" : {\"properties\" : {\"table_a\" : { \"type\" : \"nested\", \"properties\" : {\"field_a\" : { \"type\" : \"string\" },\"field_b\" :{ \"type\" : \"string\" }}}}}}"));
  client().admin().indices().prepareAliases().addAlias("test","a_test",QueryBuilders.nestedQuery("table_a",QueryBuilders.termQuery("table_a.field_b","y"))).get();
}
