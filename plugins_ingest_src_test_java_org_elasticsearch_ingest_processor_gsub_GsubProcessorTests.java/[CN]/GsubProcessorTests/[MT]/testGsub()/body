{
  IngestDocument ingestDocument=RandomDocumentPicks.randomIngestDocument(random());
  int numFields=randomIntBetween(1,5);
  List<GsubExpression> expressions=new ArrayList<>();
  for (int i=0; i < numFields; i++) {
    String fieldName=RandomDocumentPicks.addRandomField(random(),ingestDocument,"127.0.0.1");
    expressions.add(new GsubExpression(fieldName,Pattern.compile("\\."),"-"));
  }
  Processor processor=new GsubProcessor(expressions);
  processor.execute(ingestDocument);
  for (  GsubExpression expression : expressions) {
    assertThat(ingestDocument.getPropertyValue(expression.getFieldName(),String.class),equalTo("127-0-0-1"));
  }
}
