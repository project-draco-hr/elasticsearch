{
  int errno=Integer.MIN_VALUE;
  try {
    int result=CLibrary.mlockall(CLibrary.MCL_CURRENT);
    if (result != 0)     errno=Native.getLastError();
  }
 catch (  UnsatisfiedLinkError e) {
    return;
  }
  if (errno != Integer.MIN_VALUE) {
    if (errno == CLibrary.ENOMEM && System.getProperty("os.name").toLowerCase(Locale.ROOT).contains("linux")) {
      logger.warn("Unable to lock JVM memory (ENOMEM)." + " This can result in part of the JVM being swapped out." + " Increase RLIMIT_MEMLOCK or run elasticsearch as root.");
    }
 else     if (!System.getProperty("os.name").toLowerCase(Locale.ROOT).contains("mac")) {
      logger.warn("Unknown mlockall error " + errno);
    }
  }
}
