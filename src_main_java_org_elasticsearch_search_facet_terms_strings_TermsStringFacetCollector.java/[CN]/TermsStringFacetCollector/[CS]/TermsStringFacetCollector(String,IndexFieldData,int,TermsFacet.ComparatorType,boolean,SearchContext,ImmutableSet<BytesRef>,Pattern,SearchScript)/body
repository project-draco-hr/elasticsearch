{
  super(facetName);
  this.indexFieldData=indexFieldData;
  this.size=size;
  this.comparatorType=comparatorType;
  this.numberOfShards=context.numberOfShards();
  this.script=script;
  if (excluded.isEmpty() && pattern == null && this.script == null) {
    aggregator=new StaticAggregatorValueProc(CacheRecycler.<HashedBytesRef>popObjectIntMap());
  }
 else {
    aggregator=new AggregatorValueProc(CacheRecycler.<HashedBytesRef>popObjectIntMap(),excluded,pattern,this.script);
  }
  if (allTerms) {
  }
}
