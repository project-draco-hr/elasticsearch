{
  InternalTermsStatsDoubleFacet.DoubleEntry doubleEntry=entries.get(value);
  if (doubleEntry == null) {
    doubleEntry=new InternalTermsStatsDoubleFacet.DoubleEntry(value,1,0,0,Double.POSITIVE_INFINITY,Double.NEGATIVE_INFINITY);
    entries.put(value,doubleEntry);
  }
 else {
    doubleEntry.count++;
  }
  script.setNextDocId(docId);
  double valueValue=script.runAsDouble();
  if (valueValue < doubleEntry.min) {
    doubleEntry.min=valueValue;
  }
  if (valueValue > doubleEntry.max) {
    doubleEntry.max=valueValue;
  }
  doubleEntry.totalCount++;
  doubleEntry.total+=valueValue;
}
