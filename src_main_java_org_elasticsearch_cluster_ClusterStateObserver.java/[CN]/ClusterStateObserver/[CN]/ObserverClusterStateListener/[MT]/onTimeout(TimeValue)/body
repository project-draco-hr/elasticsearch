{
  ObservingContext context=observingContext.getAndSet(null);
  if (context != null) {
    clusterService.remove(this);
    long timeSinceStart=System.currentTimeMillis() - startTime;
    logger.debug("observer: timeout notification from cluster service. timeout setting [{}], time since start [{}]",timeOutValue,new TimeValue(timeSinceStart));
    lastObservedState.set(new ObservedState(clusterService.state()));
    timedOut=true;
    context.listener.onTimeout(timeOutValue);
  }
}
