{
  final String action=stream.readString();
  final LocalTransportChannel transportChannel=new LocalTransportChannel(this,sourceTransport,action,requestId);
  try {
    final TransportRequestHandler handler=transportServiceAdapter.handler(action);
    if (handler == null) {
      throw new ActionNotFoundTransportException("Action [" + action + "] not found");
    }
    final TransportRequest request=handler.newInstance();
    request.readFrom(stream);
    handler.messageReceived(request,transportChannel);
  }
 catch (  Exception e) {
    try {
      transportChannel.sendResponse(e);
    }
 catch (    IOException e1) {
      logger.warn("Failed to send error message back to client for action [" + action + "]",e);
      logger.warn("Actual Exception",e1);
    }
  }
}
