{
  this.logger=Loggers.getLogger(getClass(),settings);
  this.settings=settings;
  this.threadPool=threadPool;
  this.nodesService=nodesService;
  this.adminClient=adminClient;
  this.headers=headers;
  MapBuilder<Action,TransportActionNodeProxy> actionsBuilder=new MapBuilder<>();
  for (  GenericAction action : actions.values()) {
    if (action instanceof Action) {
      actionsBuilder.put((Action)action,new TransportActionNodeProxy(settings,action,transportService));
    }
  }
  this.actions=actionsBuilder.immutableMap();
  this.threadedWrapper=new ThreadedActionListener.Wrapper(logger,settings,threadPool);
}
