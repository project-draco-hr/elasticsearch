{
  super(in);
  int fieldNumber=0;
  for (  FieldInfo fi : in.getFieldInfos()) {
    fieldNumber=Math.max(fieldNumber,fi.number + 1);
  }
  FieldInfo newInfo=new FieldInfo(VersionFieldMapper.NAME,fieldNumber,false,false,false,IndexOptions.NONE,DocValuesType.NUMERIC,-1,Collections.<String,String>emptyMap());
  newInfo.checkConsistency();
  final ArrayList<FieldInfo> fieldInfoList=new ArrayList<>();
  for (  FieldInfo info : in.getFieldInfos()) {
    if (!info.name.equals(VersionFieldMapper.NAME)) {
      fieldInfoList.add(info);
    }
  }
  fieldInfoList.add(newInfo);
  infos=new FieldInfos(fieldInfoList.toArray(new FieldInfo[fieldInfoList.size()]));
}
