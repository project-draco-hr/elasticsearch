{
  System.out.print("Indexing " + numDocs + " random docs...");
  BulkRequestBuilder bulkRequest=client.prepareBulk();
  Random r=new Random(1);
  for (int i=0; i < numDocs; i++) {
    bulkRequest.add(client.prepareIndex("test","doc",Integer.toString(i)).setSource("x",r.nextInt(),"y",r.nextDouble(),"z",r.nextDouble()));
    if (i % 1000 == 0) {
      bulkRequest.execute().actionGet();
      bulkRequest=client.prepareBulk();
    }
  }
  bulkRequest.execute().actionGet();
  client.admin().indices().prepareRefresh("test").execute().actionGet();
  client.admin().indices().prepareFlush("test").execute().actionGet();
  System.out.println("done");
}
