{
  Settings settings=settingsBuilder().put("name","node1").put("cluster.name",clusterName).build();
  Collection<Class<? extends Plugin>> plugins=Collections.<Class<? extends Plugin>>singletonList(NativeScriptPlugin.class);
  Node node1=new MockNode(settings,Version.CURRENT,plugins);
  node1.start();
  Client client=node1.client();
  client.admin().cluster().prepareHealth(indexName).setWaitForGreenStatus().setTimeout("10s").execute().actionGet();
  try {
    client.admin().indices().prepareDelete(indexName).execute().actionGet();
  }
 catch (  ElasticsearchException e) {
  }
  IndicesAdminClient admin=client.admin().indices();
  admin.prepareCreate(indexName).addMapping("doc","x","type=long","y","type=double");
  client.admin().cluster().prepareHealth(indexName).setWaitForGreenStatus().setTimeout("10s").execute().actionGet();
  return client;
}
