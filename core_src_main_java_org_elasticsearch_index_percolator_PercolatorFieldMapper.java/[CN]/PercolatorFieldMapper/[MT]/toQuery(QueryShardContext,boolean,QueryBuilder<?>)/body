{
  context.reset();
  context.setAllowUnmappedFields(false);
  context.setMapUnmappedFieldAsString(mapUnmappedFieldsAsString);
  context.parseFieldMatcher(context.getIndexSettings().getParseFieldMatcher());
  try {
    return queryBuilder.toQuery(context);
  }
  finally {
    context.reset();
  }
}
