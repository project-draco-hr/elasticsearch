{
  Settings settings=settingsBuilder().put("path.home",createTempDir()).loadFromClasspath("org/elasticsearch/index/analysis/phonetic-1.yml").build();
  AnalysisService analysisService=createAnalysisService(settings);
  TokenizerFactory tokenizerFactory=analysisService.tokenizer("icu_tokenizer");
  assertThat(tokenizerFactory,instanceOf(IcuTokenizerFactory.class));
  TokenFilterFactory filterFactory=analysisService.tokenFilter("icu_normalizer");
  assertThat(filterFactory,instanceOf(IcuNormalizerTokenFilterFactory.class));
  filterFactory=analysisService.tokenFilter("icu_folding");
  assertThat(filterFactory,instanceOf(IcuFoldingTokenFilterFactory.class));
  filterFactory=analysisService.tokenFilter("icu_collation");
  assertThat(filterFactory,instanceOf(IcuCollationTokenFilterFactory.class));
  filterFactory=analysisService.tokenFilter("icu_transform");
  assertThat(filterFactory,instanceOf(IcuTransformTokenFilterFactory.class));
  CharFilterFactory charFilterFactory=analysisService.charFilter("icu_normalizer");
  assertThat(charFilterFactory,instanceOf(IcuNormalizerCharFilterFactory.class));
}
