{
  final Tokenizer src;
  if (getVersion().onOrAfter(Version.LUCENE_4_7_0)) {
    src=new StandardTokenizer();
  }
 else {
    src=new StandardTokenizer40();
  }
  TokenStream tok=new StandardFilter(src);
  tok=new LowerCaseFilter(tok);
  if (!stopwords.isEmpty()) {
    tok=new StopFilter(tok,stopwords);
  }
  return new TokenStreamComponents(src,tok);
}
