{
  CircuitBreakerService circuitBreakerService=new NoneCircuitBreakerService();
  indicesFieldDataCache=new IndicesFieldDataCache(ImmutableSettings.Builder.EMPTY_SETTINGS,new IndicesFieldDataCacheListener(circuitBreakerService));
  ifdService=new IndexFieldDataService(new Index("test"),ImmutableSettings.builder().put("index.fielddata.cache","none").build(),indicesFieldDataCache,circuitBreakerService,new IndicesFieldDataCacheListener(circuitBreakerService));
  MapperService mapperService=MapperTestUtils.newMapperService(ifdService.index(),ImmutableSettings.Builder.EMPTY_SETTINGS);
  ifdService.setIndexService(new StubIndexService(mapperService));
  writer=new IndexWriter(new RAMDirectory(),new IndexWriterConfig(Lucene.VERSION,new StandardAnalyzer(Lucene.VERSION)).setMergePolicy(new LogByteSizeMergePolicy()));
}
