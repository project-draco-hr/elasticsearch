{
  if (!latestNodes.localNodeId().equals(request.nodeId)) {
    throw new ElasticsearchIllegalStateException("Got pinged as node [" + request.nodeId + "], but I am node ["+ latestNodes.localNodeId()+ "]");
  }
  if (request.clusterName != null && !request.clusterName.equals(clusterName)) {
    throw new ElasticsearchIllegalStateException("Got pinged with cluster name [" + request.clusterName + "], but I'm part of cluster ["+ clusterName+ "]");
  }
  notifyPingRecieved(request);
  channel.sendResponse(new PingResponse());
}
