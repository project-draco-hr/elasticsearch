{
  putDefaultSettings(settingsBuilder().put("search.controller.optimize_single_shard",optimizeSingleShard()));
  startNode("server1");
  client=client("server1");
  client.admin().indices().prepareCreate("test").setSettings(settingsBuilder().put("number_of_shards",1).put("number_of_replicas",0)).execute().actionGet();
  client("server1").admin().cluster().prepareHealth().setWaitForGreenStatus().execute().actionGet();
  index("1","test1",1);
  index("2","test2",2);
  index("3","test3",3);
  index("4","test4",4);
  index("5","test5",5);
  client.admin().indices().refresh(refreshRequest("test")).actionGet();
  searchService=((InternalNode)node("server1")).injector().getInstance(SearchService.class);
  searchPhaseController=((InternalNode)node("server1")).injector().getInstance(SearchPhaseController.class);
}
